(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();function db(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function fb(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var s=function l(){return this instanceof l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(l){var o=Object.getOwnPropertyDescriptor(i,l);Object.defineProperty(s,l,o.get?o:{enumerable:!0,get:function(){return i[l]}})}),s}var Yc={exports:{}},Ms={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function hb(){if(bm)return Ms;bm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(l,o,d){var h=null;if(d!==void 0&&(h=""+d),o.key!==void 0&&(h=""+o.key),"key"in o){d={};for(var x in o)x!=="key"&&(d[x]=o[x])}else d=o;return o=d.ref,{$$typeof:i,type:l,key:h,ref:o!==void 0?o:null,props:d}}return Ms.Fragment=n,Ms.jsx=s,Ms.jsxs=s,Ms}var pm;function mb(){return pm||(pm=1,Yc.exports=hb()),Yc.exports}var u=mb(),Fc={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function gb(){if(ym)return ye;ym=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.iterator;function y(S){return S===null||typeof S!="object"?null:(S=_&&S[_]||S["@@iterator"],typeof S=="function"?S:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function T(S,z,U){this.props=S,this.context=z,this.refs=R,this.updater=U||A}T.prototype.isReactComponent={},T.prototype.setState=function(S,z){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,z,"setState")},T.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function O(){}O.prototype=T.prototype;function H(S,z,U){this.props=S,this.context=z,this.refs=R,this.updater=U||A}var G=H.prototype=new O;G.constructor=H,E(G,T.prototype),G.isPureReactComponent=!0;var Z=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function se(S,z,U,Y,D,ee){return U=ee.ref,{$$typeof:i,type:S,key:z,ref:U!==void 0?U:null,props:ee}}function ie(S,z){return se(S.type,z,void 0,void 0,void 0,S.props)}function ne(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function oe(S){var z={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(U){return z[U]})}var be=/\/+/g;function ae(S,z){return typeof S=="object"&&S!==null&&S.key!=null?oe(""+S.key):z.toString(36)}function _e(){}function ce(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(_e,_e):(S.status="pending",S.then(function(z){S.status==="pending"&&(S.status="fulfilled",S.value=z)},function(z){S.status==="pending"&&(S.status="rejected",S.reason=z)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function ue(S,z,U,Y,D){var ee=typeof S;(ee==="undefined"||ee==="boolean")&&(S=null);var I=!1;if(S===null)I=!0;else switch(ee){case"bigint":case"string":case"number":I=!0;break;case"object":switch(S.$$typeof){case i:case n:I=!0;break;case p:return I=S._init,ue(I(S._payload),z,U,Y,D)}}if(I)return D=D(S),I=Y===""?"."+ae(S,0):Y,Z(D)?(U="",I!=null&&(U=I.replace(be,"$&/")+"/"),ue(D,z,U,"",function(ge){return ge})):D!=null&&(ne(D)&&(D=ie(D,U+(D.key==null||S&&S.key===D.key?"":(""+D.key).replace(be,"$&/")+"/")+I)),z.push(D)),1;I=0;var xe=Y===""?".":Y+":";if(Z(S))for(var re=0;re<S.length;re++)Y=S[re],ee=xe+ae(Y,re),I+=ue(Y,z,U,ee,D);else if(re=y(S),typeof re=="function")for(S=re.call(S),re=0;!(Y=S.next()).done;)Y=Y.value,ee=xe+ae(Y,re++),I+=ue(Y,z,U,ee,D);else if(ee==="object"){if(typeof S.then=="function")return ue(ce(S),z,U,Y,D);throw z=String(S),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return I}function q(S,z,U){if(S==null)return S;var Y=[],D=0;return ue(S,Y,"","",function(ee){return z.call(U,ee,D++)}),Y}function J(S){if(S._status===-1){var z=S._result;z=z(),z.then(function(U){(S._status===0||S._status===-1)&&(S._status=1,S._result=U)},function(U){(S._status===0||S._status===-1)&&(S._status=2,S._result=U)}),S._status===-1&&(S._status=0,S._result=z)}if(S._status===1)return S._result.default;throw S._result}var j=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function Q(){}return ye.Children={map:q,forEach:function(S,z,U){q(S,function(){z.apply(this,arguments)},U)},count:function(S){var z=0;return q(S,function(){z++}),z},toArray:function(S){return q(S,function(z){return z})||[]},only:function(S){if(!ne(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},ye.Component=T,ye.Fragment=s,ye.Profiler=o,ye.PureComponent=H,ye.StrictMode=l,ye.Suspense=m,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,ye.__COMPILER_RUNTIME={__proto__:null,c:function(S){return V.H.useMemoCache(S)}},ye.cache=function(S){return function(){return S.apply(null,arguments)}},ye.cloneElement=function(S,z,U){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var Y=E({},S.props),D=S.key,ee=void 0;if(z!=null)for(I in z.ref!==void 0&&(ee=void 0),z.key!==void 0&&(D=""+z.key),z)!te.call(z,I)||I==="key"||I==="__self"||I==="__source"||I==="ref"&&z.ref===void 0||(Y[I]=z[I]);var I=arguments.length-2;if(I===1)Y.children=U;else if(1<I){for(var xe=Array(I),re=0;re<I;re++)xe[re]=arguments[re+2];Y.children=xe}return se(S.type,D,void 0,void 0,ee,Y)},ye.createContext=function(S){return S={$$typeof:h,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:d,_context:S},S},ye.createElement=function(S,z,U){var Y,D={},ee=null;if(z!=null)for(Y in z.key!==void 0&&(ee=""+z.key),z)te.call(z,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(D[Y]=z[Y]);var I=arguments.length-2;if(I===1)D.children=U;else if(1<I){for(var xe=Array(I),re=0;re<I;re++)xe[re]=arguments[re+2];D.children=xe}if(S&&S.defaultProps)for(Y in I=S.defaultProps,I)D[Y]===void 0&&(D[Y]=I[Y]);return se(S,ee,void 0,void 0,null,D)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(S){return{$$typeof:x,render:S}},ye.isValidElement=ne,ye.lazy=function(S){return{$$typeof:p,_payload:{_status:-1,_result:S},_init:J}},ye.memo=function(S,z){return{$$typeof:g,type:S,compare:z===void 0?null:z}},ye.startTransition=function(S){var z=V.T,U={};V.T=U;try{var Y=S(),D=V.S;D!==null&&D(U,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(Q,j)}catch(ee){j(ee)}finally{V.T=z}},ye.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},ye.use=function(S){return V.H.use(S)},ye.useActionState=function(S,z,U){return V.H.useActionState(S,z,U)},ye.useCallback=function(S,z){return V.H.useCallback(S,z)},ye.useContext=function(S){return V.H.useContext(S)},ye.useDebugValue=function(){},ye.useDeferredValue=function(S,z){return V.H.useDeferredValue(S,z)},ye.useEffect=function(S,z,U){var Y=V.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(S,z)},ye.useId=function(){return V.H.useId()},ye.useImperativeHandle=function(S,z,U){return V.H.useImperativeHandle(S,z,U)},ye.useInsertionEffect=function(S,z){return V.H.useInsertionEffect(S,z)},ye.useLayoutEffect=function(S,z){return V.H.useLayoutEffect(S,z)},ye.useMemo=function(S,z){return V.H.useMemo(S,z)},ye.useOptimistic=function(S,z){return V.H.useOptimistic(S,z)},ye.useReducer=function(S,z,U){return V.H.useReducer(S,z,U)},ye.useRef=function(S){return V.H.useRef(S)},ye.useState=function(S){return V.H.useState(S)},ye.useSyncExternalStore=function(S,z,U){return V.H.useSyncExternalStore(S,z,U)},ye.useTransition=function(){return V.H.useTransition()},ye.version="19.1.0",ye}var vm;function bu(){return vm||(vm=1,Fc.exports=gb()),Fc.exports}var w=bu(),Qc={exports:{}},Ls={},Pc={exports:{}},Xc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function xb(){return _m||(_m=1,function(i){function n(q,J){var j=q.length;q.push(J);e:for(;0<j;){var Q=j-1>>>1,S=q[Q];if(0<o(S,J))q[Q]=J,q[j]=S,j=Q;else break e}}function s(q){return q.length===0?null:q[0]}function l(q){if(q.length===0)return null;var J=q[0],j=q.pop();if(j!==J){q[0]=j;e:for(var Q=0,S=q.length,z=S>>>1;Q<z;){var U=2*(Q+1)-1,Y=q[U],D=U+1,ee=q[D];if(0>o(Y,j))D<S&&0>o(ee,Y)?(q[Q]=ee,q[D]=j,Q=D):(q[Q]=Y,q[U]=j,Q=U);else if(D<S&&0>o(ee,j))q[Q]=ee,q[D]=j,Q=D;else break e}}return J}function o(q,J){var j=q.sortIndex-J.sortIndex;return j!==0?j:q.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var h=Date,x=h.now();i.unstable_now=function(){return h.now()-x}}var m=[],g=[],p=1,_=null,y=3,A=!1,E=!1,R=!1,T=!1,O=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Z(q){for(var J=s(g);J!==null;){if(J.callback===null)l(g);else if(J.startTime<=q)l(g),J.sortIndex=J.expirationTime,n(m,J);else break;J=s(g)}}function V(q){if(R=!1,Z(q),!E)if(s(m)!==null)E=!0,te||(te=!0,ae());else{var J=s(g);J!==null&&ue(V,J.startTime-q)}}var te=!1,se=-1,ie=5,ne=-1;function oe(){return T?!0:!(i.unstable_now()-ne<ie)}function be(){if(T=!1,te){var q=i.unstable_now();ne=q;var J=!0;try{e:{E=!1,R&&(R=!1,H(se),se=-1),A=!0;var j=y;try{t:{for(Z(q),_=s(m);_!==null&&!(_.expirationTime>q&&oe());){var Q=_.callback;if(typeof Q=="function"){_.callback=null,y=_.priorityLevel;var S=Q(_.expirationTime<=q);if(q=i.unstable_now(),typeof S=="function"){_.callback=S,Z(q),J=!0;break t}_===s(m)&&l(m),Z(q)}else l(m);_=s(m)}if(_!==null)J=!0;else{var z=s(g);z!==null&&ue(V,z.startTime-q),J=!1}}break e}finally{_=null,y=j,A=!1}J=void 0}}finally{J?ae():te=!1}}}var ae;if(typeof G=="function")ae=function(){G(be)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,ce=_e.port2;_e.port1.onmessage=be,ae=function(){ce.postMessage(null)}}else ae=function(){O(be,0)};function ue(q,J){se=O(function(){q(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(q){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var j=y;y=J;try{return q()}finally{y=j}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var j=y;y=q;try{return J()}finally{y=j}},i.unstable_scheduleCallback=function(q,J,j){var Q=i.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Q+j:Q):j=Q,q){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=j+S,q={id:p++,callback:J,priorityLevel:q,startTime:j,expirationTime:S,sortIndex:-1},j>Q?(q.sortIndex=j,n(g,q),s(m)===null&&q===s(g)&&(R?(H(se),se=-1):R=!0,ue(V,j-Q))):(q.sortIndex=S,n(m,q),E||A||(E=!0,te||(te=!0,ae()))),q},i.unstable_shouldYield=oe,i.unstable_wrapCallback=function(q){var J=y;return function(){var j=y;y=J;try{return q.apply(this,arguments)}finally{y=j}}}}(Xc)),Xc}var wm;function bb(){return wm||(wm=1,Pc.exports=xb()),Pc.exports}var Kc={exports:{}},wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function pb(){if(Sm)return wt;Sm=1;var i=bu();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(m,g,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:m,containerInfo:g,implementation:p}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,wt.createPortal=function(m,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return d(m,g,null,p)},wt.flushSync=function(m){var g=h.T,p=l.p;try{if(h.T=null,l.p=2,m)return m()}finally{h.T=g,l.p=p,l.d.f()}},wt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(m,g))},wt.prefetchDNS=function(m){typeof m=="string"&&l.d.D(m)},wt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var p=g.as,_=x(p,g.crossOrigin),y=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?l.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:y,fetchPriority:A}):p==="script"&&l.d.X(m,{crossOrigin:_,integrity:y,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},wt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=x(g.as,g.crossOrigin);l.d.M(m,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(m)},wt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,_=x(p,g.crossOrigin);l.d.L(m,p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},wt.preloadModule=function(m,g){if(typeof m=="string")if(g){var p=x(g.as,g.crossOrigin);l.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(m)},wt.requestFormReset=function(m){l.d.r(m)},wt.unstable_batchedUpdates=function(m,g){return m(g)},wt.useFormState=function(m,g,p){return h.H.useFormState(m,g,p)},wt.useFormStatus=function(){return h.H.useHostTransitionStatus()},wt.version="19.1.0",wt}var jm;function yb(){if(jm)return Kc.exports;jm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Kc.exports=pb(),Kc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function vb(){if(Em)return Ls;Em=1;var i=bb(),n=bu(),s=yb();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(d(e)!==e)throw Error(l(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,r=t;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(r=c.return,r!==null){a=r;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return x(c),e;if(f===r)return x(c),t;f=f.sibling}throw Error(l(188))}if(a.return!==r.return)a=c,r=f;else{for(var b=!1,v=c.child;v;){if(v===a){b=!0,a=c,r=f;break}if(v===r){b=!0,r=c,a=f;break}v=v.sibling}if(!b){for(v=f.child;v;){if(v===a){b=!0,a=f,r=c;break}if(v===r){b=!0,r=f,a=c;break}v=v.sibling}if(!b)throw Error(l(189))}}if(a.alternate!==r)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=be&&e[be]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===_e?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case T:return"Profiler";case R:return"StrictMode";case V:return"Suspense";case te:return"SuspenseList";case ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case G:return(e.displayName||"Context")+".Provider";case H:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}var ue=Array.isArray,q=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},Q=[],S=-1;function z(e){return{current:e}}function U(e){0>S||(e.current=Q[S],Q[S]=null,S--)}function Y(e,t){S++,Q[S]=e.current,e.current=t}var D=z(null),ee=z(null),I=z(null),xe=z(null);function re(e,t){switch(Y(I,t),Y(ee,e),Y(D,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Fh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Fh(t),e=Qh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(D),Y(D,e)}function ge(){U(D),U(ee),U(I)}function pe(e){e.memoizedState!==null&&Y(xe,e);var t=D.current,a=Qh(t,e.type);t!==a&&(Y(ee,e),Y(D,a))}function Ee(e){ee.current===e&&(U(D),U(ee)),xe.current===e&&(U(xe),Cs._currentValue=j)}var bt=Object.prototype.hasOwnProperty,la=i.unstable_scheduleCallback,Jt=i.unstable_cancelCallback,Ws=i.unstable_shouldYield,Ci=i.unstable_requestPaint,Ht=i.unstable_now,Di=i.unstable_getCurrentPriorityLevel,el=i.unstable_ImmediatePriority,tl=i.unstable_UserBlockingPriority,hr=i.unstable_NormalPriority,al=i.unstable_LowPriority,rl=i.unstable_IdlePriority,ki=i.log,It=i.unstable_setDisableYieldValue,mr=null,pt=null;function ia(e){if(typeof ki=="function"&&It(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(mr,e)}catch{}}var yt=Math.clz32?Math.clz32:ke,W=Math.log,we=Math.LN2;function ke(e){return e>>>=0,e===0?32:31-(W(e)/we|0)|0}var Ce=256,Ye=4194304;function Fe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ft(e,t,a){var r=e.pendingLanes;if(r===0)return 0;var c=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var v=r&134217727;return v!==0?(r=v&~f,r!==0?c=Fe(r):(b&=v,b!==0?c=Fe(b):a||(a=v&~e,a!==0&&(c=Fe(a))))):(v=r&~f,v!==0?c=Fe(v):b!==0?c=Fe(b):a||(a=r&~e,a!==0&&(c=Fe(a)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,a=t&-t,f>=a||f===32&&(a&4194048)!==0)?t:c}function st(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ze(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tt(){var e=Ce;return Ce<<=1,(Ce&4194048)===0&&(Ce=256),e}function Nt(){var e=Ye;return Ye<<=1,(Ye&62914560)===0&&(Ye=4194304),e}function La(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function za(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function nl(e,t,a,r,c,f){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,N=e.expirationTimes,L=e.hiddenUpdates;for(a=b&~a;0<a;){var F=31-yt(a),X=1<<F;v[F]=0,N[F]=-1;var B=L[F];if(B!==null)for(L[F]=null,F=0;F<B.length;F++){var $=B[F];$!==null&&($.lane&=-536870913)}a&=~X}r!==0&&$n(e,r,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~t))}function $n(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-yt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|a&4194090}function Cu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-yt(a),c=1<<r;c&t|e[r]&t&&(e[r]|=t),a&=~c}}function Oi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ui(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Du(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:dm(e.type))}function eg(e,t){var a=J.p;try{return J.p=e,t()}finally{J.p=a}}var qa=Math.random().toString(36).slice(2),vt="__reactFiber$"+qa,Tt="__reactProps$"+qa,zr="__reactContainer$"+qa,Mi="__reactEvents$"+qa,tg="__reactListeners$"+qa,ag="__reactHandles$"+qa,ku="__reactResources$"+qa,Hn="__reactMarker$"+qa;function Li(e){delete e[vt],delete e[Tt],delete e[Mi],delete e[tg],delete e[ag]}function qr(e){var t=e[vt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[zr]||a[vt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Zh(e);e!==null;){if(a=e[vt])return a;e=Zh(e)}return t}e=a,a=e.parentNode}return null}function Br(e){if(e=e[vt]||e[zr]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Vn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function $r(e){var t=e[ku];return t||(t=e[ku]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function lt(e){e[Hn]=!0}var Ou=new Set,Uu={};function gr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Uu[e]=t,e=0;e<t.length;e++)Ou.add(t[e])}var rg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mu={},Lu={};function ng(e){return bt.call(Lu,e)?!0:bt.call(Mu,e)?!1:rg.test(e)?Lu[e]=!0:(Mu[e]=!0,!1)}function sl(e,t,a){if(ng(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ll(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ba(e,t,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+r)}}var zi,zu;function Vr(e){if(zi===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);zi=t&&t[1]||"",zu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zi+e+zu}var qi=!1;function Bi(e,t){if(!e||qi)return"";qi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch($){var B=$}Reflect.construct(e,[],X)}else{try{X.call()}catch($){B=$}e.call(X.prototype)}}else{try{throw Error()}catch($){B=$}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch($){if($&&B&&typeof $.stack=="string")return[$.stack,B.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=r.DetermineComponentFrameRoot(),b=f[0],v=f[1];if(b&&v){var N=b.split(`
`),L=v.split(`
`);for(c=r=0;r<N.length&&!N[r].includes("DetermineComponentFrameRoot");)r++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(r===N.length||c===L.length)for(r=N.length-1,c=L.length-1;1<=r&&0<=c&&N[r]!==L[c];)c--;for(;1<=r&&0<=c;r--,c--)if(N[r]!==L[c]){if(r!==1||c!==1)do if(r--,c--,0>c||N[r]!==L[c]){var F=`
`+N[r].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=r&&0<=c);break}}}finally{qi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Vr(a):""}function sg(e){switch(e.tag){case 26:case 27:case 5:return Vr(e.type);case 16:return Vr("Lazy");case 13:return Vr("Suspense");case 19:return Vr("SuspenseList");case 0:case 15:return Bi(e.type,!1);case 11:return Bi(e.type.render,!1);case 1:return Bi(e.type,!0);case 31:return Vr("Activity");default:return""}}function qu(e){try{var t="";do t+=sg(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lg(e){var t=Bu(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(b){r=""+b,f.call(this,b)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function il(e){e._valueTracker||(e._valueTracker=lg(e))}function $u(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=Bu(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ig=/[\n"\\]/g;function Gt(e){return e.replace(ig,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function $i(e,t,a,r,c,f,b,v){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?Hi(e,b,Vt(t)):a!=null?Hi(e,b,Vt(a)):r!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Vt(v):e.removeAttribute("name")}function Hu(e,t,a,r,c,f,b,v){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;a=a!=null?""+Vt(a):"",t=t!=null?""+Vt(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=v?e.checked:!!r,e.defaultChecked=!!r,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function Hi(e,t,a){t==="number"&&ol(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Gr(e,t,a,r){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&r&&(e[a].defaultSelected=!0)}else{for(a=""+Vt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Vu(e,t,a){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Vt(a):""}function Gu(e,t,a,r){if(t==null){if(r!=null){if(a!=null)throw Error(l(92));if(ue(r)){if(1<r.length)throw Error(l(93));r=r[0]}a=r}a==null&&(a=""),t=a}a=Vt(t),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r)}function Yr(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var og=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yu(e,t,a){var r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a!="number"||a===0||og.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Fu(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in t)r=t[c],t.hasOwnProperty(c)&&a[c]!==r&&Yu(e,c,r)}else for(var f in t)t.hasOwnProperty(f)&&Yu(e,f,t[f])}function Vi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ug=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cl(e){return ug.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Gi=null;function Yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fr=null,Qr=null;function Qu(e){var t=Br(e);if(t&&(e=t.stateNode)){var a=e[Tt]||null;e:switch(e=t.stateNode,t.type){case"input":if($i(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var c=r[Tt]||null;if(!c)throw Error(l(90));$i(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)r=a[t],r.form===e.form&&$u(r)}break e;case"textarea":Vu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Gr(e,!!a.multiple,t,!1)}}}var Fi=!1;function Pu(e,t,a){if(Fi)return e(t,a);Fi=!0;try{var r=e(t);return r}finally{if(Fi=!1,(Fr!==null||Qr!==null)&&(Xl(),Fr&&(t=Fr,e=Qr,Qr=Fr=null,Qu(t),e)))for(t=0;t<e.length;t++)Qu(e[t])}}function Gn(e,t){var a=e.stateNode;if(a===null)return null;var r=a[Tt]||null;if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qi=!1;if(pa)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Qi=!1}var Ba=null,Pi=null,ul=null;function Xu(){if(ul)return ul;var e,t=Pi,a=t.length,r,c="value"in Ba?Ba.value:Ba.textContent,f=c.length;for(e=0;e<a&&t[e]===c[e];e++);var b=a-e;for(r=1;r<=b&&t[a-r]===c[f-r];r++);return ul=c.slice(e,1<r?1-r:void 0)}function dl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fl(){return!0}function Ku(){return!1}function At(e){function t(a,r,c,f,b){this._reactName=a,this._targetInst=c,this.type=r,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?fl:Ku,this.isPropagationStopped=Ku,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),t}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=At(xr),Fn=p({},xr,{view:0,detail:0}),dg=At(Fn),Xi,Ki,Qn,ml=p({},Fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ji,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qn&&(Qn&&e.type==="mousemove"?(Xi=e.screenX-Qn.screenX,Ki=e.screenY-Qn.screenY):Ki=Xi=0,Qn=e),Xi)},movementY:function(e){return"movementY"in e?e.movementY:Ki}}),Zu=At(ml),fg=p({},ml,{dataTransfer:0}),hg=At(fg),mg=p({},Fn,{relatedTarget:0}),Zi=At(mg),gg=p({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),xg=At(gg),bg=p({},xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pg=At(bg),yg=p({},xr,{data:0}),Ju=At(yg),vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wg[e])?!!t[e]:!1}function Ji(){return Sg}var jg=p({},Fn,{key:function(e){if(e.key){var t=vg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ji,charCode:function(e){return e.type==="keypress"?dl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Eg=At(jg),Ng=p({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iu=At(Ng),Tg=p({},Fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ji}),Ag=At(Tg),Rg=p({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cg=At(Rg),Dg=p({},ml,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kg=At(Dg),Og=p({},xr,{newState:0,oldState:0}),Ug=At(Og),Mg=[9,13,27,32],Ii=pa&&"CompositionEvent"in window,Pn=null;pa&&"documentMode"in document&&(Pn=document.documentMode);var Lg=pa&&"TextEvent"in window&&!Pn,Wu=pa&&(!Ii||Pn&&8<Pn&&11>=Pn),ed=" ",td=!1;function ad(e,t){switch(e){case"keyup":return Mg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pr=!1;function zg(e,t){switch(e){case"compositionend":return rd(t);case"keypress":return t.which!==32?null:(td=!0,ed);case"textInput":return e=t.data,e===ed&&td?null:e;default:return null}}function qg(e,t){if(Pr)return e==="compositionend"||!Ii&&ad(e,t)?(e=Xu(),ul=Pi=Ba=null,Pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wu&&t.locale!=="ko"?null:t.data;default:return null}}var Bg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bg[e.type]:t==="textarea"}function sd(e,t,a,r){Fr?Qr?Qr.push(r):Qr=[r]:Fr=r,t=ei(t,"onChange"),0<t.length&&(a=new hl("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var Xn=null,Kn=null;function $g(e){$h(e,0)}function gl(e){var t=Vn(e);if($u(t))return e}function ld(e,t){if(e==="change")return t}var id=!1;if(pa){var Wi;if(pa){var eo="oninput"in document;if(!eo){var od=document.createElement("div");od.setAttribute("oninput","return;"),eo=typeof od.oninput=="function"}Wi=eo}else Wi=!1;id=Wi&&(!document.documentMode||9<document.documentMode)}function cd(){Xn&&(Xn.detachEvent("onpropertychange",ud),Kn=Xn=null)}function ud(e){if(e.propertyName==="value"&&gl(Kn)){var t=[];sd(t,Kn,e,Yi(e)),Pu($g,t)}}function Hg(e,t,a){e==="focusin"?(cd(),Xn=t,Kn=a,Xn.attachEvent("onpropertychange",ud)):e==="focusout"&&cd()}function Vg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(Kn)}function Gg(e,t){if(e==="click")return gl(t)}function Yg(e,t){if(e==="input"||e==="change")return gl(t)}function Fg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:Fg;function Zn(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var c=a[r];if(!bt.call(t,c)||!Ot(e[c],t[c]))return!1}return!0}function dd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fd(e,t){var a=dd(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=dd(a)}}function hd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function md(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ol(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ol(e.document)}return t}function to(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Qg=pa&&"documentMode"in document&&11>=document.documentMode,Xr=null,ao=null,Jn=null,ro=!1;function gd(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ro||Xr==null||Xr!==ol(r)||(r=Xr,"selectionStart"in r&&to(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jn&&Zn(Jn,r)||(Jn=r,r=ei(ao,"onSelect"),0<r.length&&(t=new hl("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=Xr)))}function br(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Kr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionrun:br("Transition","TransitionRun"),transitionstart:br("Transition","TransitionStart"),transitioncancel:br("Transition","TransitionCancel"),transitionend:br("Transition","TransitionEnd")},no={},xd={};pa&&(xd=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function pr(e){if(no[e])return no[e];if(!Kr[e])return e;var t=Kr[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in xd)return no[e]=t[a];return e}var bd=pr("animationend"),pd=pr("animationiteration"),yd=pr("animationstart"),Pg=pr("transitionrun"),Xg=pr("transitionstart"),Kg=pr("transitioncancel"),vd=pr("transitionend"),_d=new Map,so="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");so.push("scrollEnd");function Wt(e,t){_d.set(e,t),gr(t,[e])}var wd=new WeakMap;function Yt(e,t){if(typeof e=="object"&&e!==null){var a=wd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:qu(t)},wd.set(e,t),t)}return{value:e,source:t,stack:qu(t)}}var Ft=[],Zr=0,lo=0;function xl(){for(var e=Zr,t=lo=Zr=0;t<e;){var a=Ft[t];Ft[t++]=null;var r=Ft[t];Ft[t++]=null;var c=Ft[t];Ft[t++]=null;var f=Ft[t];if(Ft[t++]=null,r!==null&&c!==null){var b=r.pending;b===null?c.next=c:(c.next=b.next,b.next=c),r.pending=c}f!==0&&Sd(a,c,f)}}function bl(e,t,a,r){Ft[Zr++]=e,Ft[Zr++]=t,Ft[Zr++]=a,Ft[Zr++]=r,lo|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function io(e,t,a,r){return bl(e,t,a,r),pl(e)}function Jr(e,t){return bl(e,null,null,t),pl(e)}function Sd(e,t,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,r=f.alternate,r!==null&&(r.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-yt(a),e=f.hiddenUpdates,r=e[c],r===null?e[c]=[t]:r.push(t),t.lane=a|536870912),f):null}function pl(e){if(50<ws)throw ws=0,mc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ir={};function Zg(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,a,r){return new Zg(e,t,a,r)}function oo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ya(e,t){var a=e.alternate;return a===null?(a=Ut(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function jd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function yl(e,t,a,r,c,f){var b=0;if(r=e,typeof e=="function")oo(e)&&(b=1);else if(typeof e=="string")b=Ix(e,a,D.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ne:return e=Ut(31,a,t,c),e.elementType=ne,e.lanes=f,e;case E:return yr(a.children,c,f,t);case R:b=8,c|=24;break;case T:return e=Ut(12,a,t,c|2),e.elementType=T,e.lanes=f,e;case V:return e=Ut(13,a,t,c),e.elementType=V,e.lanes=f,e;case te:return e=Ut(19,a,t,c),e.elementType=te,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case G:b=10;break e;case H:b=9;break e;case Z:b=11;break e;case se:b=14;break e;case ie:b=16,r=null;break e}b=29,a=Error(l(130,e===null?"null":typeof e,"")),r=null}return t=Ut(b,a,t,c),t.elementType=e,t.type=r,t.lanes=f,t}function yr(e,t,a,r){return e=Ut(7,e,r,t),e.lanes=a,e}function co(e,t,a){return e=Ut(6,e,null,t),e.lanes=a,e}function uo(e,t,a){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],en=0,vl=null,_l=0,Qt=[],Pt=0,vr=null,va=1,_a="";function _r(e,t){Wr[en++]=_l,Wr[en++]=vl,vl=e,_l=t}function Ed(e,t,a){Qt[Pt++]=va,Qt[Pt++]=_a,Qt[Pt++]=vr,vr=e;var r=va;e=_a;var c=32-yt(r)-1;r&=~(1<<c),a+=1;var f=32-yt(t)+c;if(30<f){var b=c-c%5;f=(r&(1<<b)-1).toString(32),r>>=b,c-=b,va=1<<32-yt(t)+c|a<<c|r,_a=f+e}else va=1<<f|a<<c|r,_a=e}function fo(e){e.return!==null&&(_r(e,1),Ed(e,1,0))}function ho(e){for(;e===vl;)vl=Wr[--en],Wr[en]=null,_l=Wr[--en],Wr[en]=null;for(;e===vr;)vr=Qt[--Pt],Qt[Pt]=null,_a=Qt[--Pt],Qt[Pt]=null,va=Qt[--Pt],Qt[Pt]=null}var St=null,Xe=null,Oe=!1,wr=null,oa=!1,mo=Error(l(519));function Sr(e){var t=Error(l(418,""));throw es(Yt(t,e)),mo}function Nd(e){var t=e.stateNode,a=e.type,r=e.memoizedProps;switch(t[vt]=e,t[Tt]=r,a){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(a=0;a<js.length;a++)Te(js[a],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),Hu(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),il(t);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),Gu(t,r.value,r.defaultValue,r.children),il(t)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||r.suppressHydrationWarning===!0||Yh(t.textContent,a)?(r.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),r.onScroll!=null&&Te("scroll",t),r.onScrollEnd!=null&&Te("scrollend",t),r.onClick!=null&&(t.onclick=ti),t=!0):t=!1,t||Sr(e)}function Td(e){for(St=e.return;St;)switch(St.tag){case 5:case 13:oa=!1;return;case 27:case 3:oa=!0;return;default:St=St.return}}function In(e){if(e!==St)return!1;if(!Oe)return Td(e),Oe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Cc(e.type,e.memoizedProps)),a=!a),a&&Xe&&Sr(e),Td(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Xe=ta(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Xe=null}}else t===27?(t=Xe,tr(e.type)?(e=Uc,Uc=null,Xe=e):Xe=t):Xe=St?ta(e.stateNode.nextSibling):null;return!0}function Wn(){Xe=St=null,Oe=!1}function Ad(){var e=wr;return e!==null&&(Dt===null?Dt=e:Dt.push.apply(Dt,e),wr=null),e}function es(e){wr===null?wr=[e]:wr.push(e)}var go=z(null),jr=null,wa=null;function $a(e,t,a){Y(go,t._currentValue),t._currentValue=a}function Sa(e){e._currentValue=go.current,U(go)}function xo(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function bo(e,t,a,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var b=c.child;f=f.firstContext;e:for(;f!==null;){var v=f;f=c;for(var N=0;N<t.length;N++)if(v.context===t[N]){f.lanes|=a,v=f.alternate,v!==null&&(v.lanes|=a),xo(f.return,a,e),r||(b=null);break e}f=v.next}}else if(c.tag===18){if(b=c.return,b===null)throw Error(l(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),xo(b,a,e),b=null}else b=c.child;if(b!==null)b.return=c;else for(b=c;b!==null;){if(b===e){b=null;break}if(c=b.sibling,c!==null){c.return=b.return,b=c;break}b=b.return}c=b}}function ts(e,t,a,r){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var b=c.alternate;if(b===null)throw Error(l(387));if(b=b.memoizedProps,b!==null){var v=c.type;Ot(c.pendingProps.value,b.value)||(e!==null?e.push(v):e=[v])}}else if(c===xe.current){if(b=c.alternate,b===null)throw Error(l(387));b.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Cs):e=[Cs])}c=c.return}e!==null&&bo(t,e,a,r),t.flags|=262144}function wl(e){for(e=e.firstContext;e!==null;){if(!Ot(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Er(e){jr=e,wa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _t(e){return Rd(jr,e)}function Sl(e,t){return jr===null&&Er(e),Rd(e,t)}function Rd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},wa===null){if(e===null)throw Error(l(308));wa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wa=wa.next=t;return a}var Jg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Ig=i.unstable_scheduleCallback,Wg=i.unstable_NormalPriority,at={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function po(){return{controller:new Jg,data:new Map,refCount:0}}function as(e){e.refCount--,e.refCount===0&&Ig(Wg,function(){e.controller.abort()})}var rs=null,yo=0,tn=0,an=null;function ex(e,t){if(rs===null){var a=rs=[];yo=0,tn=_c(),an={status:"pending",value:void 0,then:function(r){a.push(r)}}}return yo++,t.then(Cd,Cd),t}function Cd(){if(--yo===0&&rs!==null){an!==null&&(an.status="fulfilled");var e=rs;rs=null,tn=0,an=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function tx(e,t){var a=[],r={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(r.status="rejected",r.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),r}var Dd=q.S;q.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ex(e,t),Dd!==null&&Dd(e,t)};var Nr=z(null);function vo(){var e=Nr.current;return e!==null?e:$e.pooledCache}function jl(e,t){t===null?Y(Nr,Nr.current):Y(Nr,t.pool)}function kd(){var e=vo();return e===null?null:{parent:at._currentValue,pool:e}}var ns=Error(l(460)),Od=Error(l(474)),El=Error(l(542)),_o={then:function(){}};function Ud(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nl(){}function Md(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Nl,Nl),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,zd(e),e;default:if(typeof t.status=="string")t.then(Nl,Nl);else{if(e=$e,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=r}},function(r){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,zd(e),e}throw ss=t,ns}}var ss=null;function Ld(){if(ss===null)throw Error(l(459));var e=ss;return ss=null,e}function zd(e){if(e===ns||e===El)throw Error(l(483))}var Ha=!1;function wo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function So(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ga(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ue&2)!==0){var c=r.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),r.pending=t,t=pl(e),Sd(e,null,a),t}return bl(e,r,t,a),pl(e)}function ls(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Cu(e,a)}}function jo(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?c=f=t:f=f.next=t}else c=f=t;a={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Eo=!1;function is(){if(Eo){var e=an;if(e!==null)throw e}}function os(e,t,a,r){Eo=!1;var c=e.updateQueue;Ha=!1;var f=c.firstBaseUpdate,b=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var N=v,L=N.next;N.next=null,b===null?f=L:b.next=L,b=N;var F=e.alternate;F!==null&&(F=F.updateQueue,v=F.lastBaseUpdate,v!==b&&(v===null?F.firstBaseUpdate=L:v.next=L,F.lastBaseUpdate=N))}if(f!==null){var X=c.baseState;b=0,F=L=N=null,v=f;do{var B=v.lane&-536870913,$=B!==v.lane;if($?(Re&B)===B:(r&B)===B){B!==0&&B===tn&&(Eo=!0),F!==null&&(F=F.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var me=e,fe=v;B=t;var qe=a;switch(fe.tag){case 1:if(me=fe.payload,typeof me=="function"){X=me.call(qe,X,B);break e}X=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=fe.payload,B=typeof me=="function"?me.call(qe,X,B):me,B==null)break e;X=p({},X,B);break e;case 2:Ha=!0}}B=v.callback,B!==null&&(e.flags|=64,$&&(e.flags|=8192),$=c.callbacks,$===null?c.callbacks=[B]:$.push(B))}else $={lane:B,tag:v.tag,payload:v.payload,callback:v.callback,next:null},F===null?(L=F=$,N=X):F=F.next=$,b|=B;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;$=v,v=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);F===null&&(N=X),c.baseState=N,c.firstBaseUpdate=L,c.lastBaseUpdate=F,f===null&&(c.shared.lanes=0),Ja|=b,e.lanes=b,e.memoizedState=X}}function qd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Bd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)qd(a[e],t)}var rn=z(null),Tl=z(0);function $d(e,t){e=Ca,Y(Tl,e),Y(rn,t),Ca=e|t.baseLanes}function No(){Y(Tl,Ca),Y(rn,rn.current)}function To(){Ca=Tl.current,U(rn),U(Tl)}var Ya=0,Se=null,Le=null,We=null,Al=!1,nn=!1,Tr=!1,Rl=0,cs=0,sn=null,ax=0;function Je(){throw Error(l(321))}function Ao(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ot(e[a],t[a]))return!1;return!0}function Ro(e,t,a,r,c,f){return Ya=f,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?jf:Ef,Tr=!1,f=a(r,c),Tr=!1,nn&&(f=Vd(t,a,r,c)),Hd(e),f}function Hd(e){q.H=Ml;var t=Le!==null&&Le.next!==null;if(Ya=0,We=Le=Se=null,Al=!1,cs=0,sn=null,t)throw Error(l(300));e===null||it||(e=e.dependencies,e!==null&&wl(e)&&(it=!0))}function Vd(e,t,a,r){Se=e;var c=0;do{if(nn&&(sn=null),cs=0,nn=!1,25<=c)throw Error(l(301));if(c+=1,We=Le=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}q.H=cx,f=t(a,r)}while(nn);return f}function rx(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?us(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(Se.flags|=1024),t}function Co(){var e=Rl!==0;return Rl=0,e}function Do(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ko(e){if(Al){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Al=!1}Ya=0,We=Le=Se=null,nn=!1,cs=Rl=0,sn=null}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Se.memoizedState=We=e:We=We.next=e,We}function et(){if(Le===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=We===null?Se.memoizedState:We.next;if(t!==null)We=t,Le=e;else{if(e===null)throw Se.alternate===null?Error(l(467)):Error(l(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},We===null?Se.memoizedState=We=e:We=We.next=e}return We}function Oo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function us(e){var t=cs;return cs+=1,sn===null&&(sn=[]),e=Md(sn,e,t),t=Se,(We===null?t.memoizedState:We.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?jf:Ef),e}function Cl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return us(e);if(e.$$typeof===G)return _t(e)}throw Error(l(438,String(e)))}function Uo(e){var t=null,a=Se.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var r=Se.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Oo(),Se.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),r=0;r<e;r++)a[r]=oe;return t.index++,a}function ja(e,t){return typeof t=="function"?t(e):t}function Dl(e){var t=et();return Mo(t,Le,e)}function Mo(e,t,a){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=a;var c=e.baseQueue,f=r.pending;if(f!==null){if(c!==null){var b=c.next;c.next=f.next,f.next=b}t.baseQueue=c=f,r.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var v=b=null,N=null,L=t,F=!1;do{var X=L.lane&-536870913;if(X!==L.lane?(Re&X)===X:(Ya&X)===X){var B=L.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),X===tn&&(F=!0);else if((Ya&B)===B){L=L.next,B===tn&&(F=!0);continue}else X={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(v=N=X,b=f):N=N.next=X,Se.lanes|=B,Ja|=B;X=L.action,Tr&&a(f,X),f=L.hasEagerState?L.eagerState:a(f,X)}else B={lane:X,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(v=N=B,b=f):N=N.next=B,Se.lanes|=X,Ja|=X;L=L.next}while(L!==null&&L!==t);if(N===null?b=f:N.next=v,!Ot(f,e.memoizedState)&&(it=!0,F&&(a=an,a!==null)))throw a;e.memoizedState=f,e.baseState=b,e.baseQueue=N,r.lastRenderedState=f}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Lo(e){var t=et(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var r=a.dispatch,c=a.pending,f=t.memoizedState;if(c!==null){a.pending=null;var b=c=c.next;do f=e(f,b.action),b=b.next;while(b!==c);Ot(f,t.memoizedState)||(it=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,r]}function Gd(e,t,a){var r=Se,c=et(),f=Oe;if(f){if(a===void 0)throw Error(l(407));a=a()}else a=t();var b=!Ot((Le||c).memoizedState,a);b&&(c.memoizedState=a,it=!0),c=c.queue;var v=Qd.bind(null,r,c,e);if(ds(2048,8,v,[e]),c.getSnapshot!==t||b||We!==null&&We.memoizedState.tag&1){if(r.flags|=2048,ln(9,kl(),Fd.bind(null,r,c,a,t),null),$e===null)throw Error(l(349));f||(Ya&124)!==0||Yd(r,t,a)}return a}function Yd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Se.updateQueue,t===null?(t=Oo(),Se.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Fd(e,t,a,r){t.value=a,t.getSnapshot=r,Pd(t)&&Xd(e)}function Qd(e,t,a){return a(function(){Pd(t)&&Xd(e)})}function Pd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ot(e,a)}catch{return!0}}function Xd(e){var t=Jr(e,2);t!==null&&Bt(t,e,2)}function zo(e){var t=Rt();if(typeof e=="function"){var a=e;if(e=a(),Tr){ia(!0);try{a()}finally{ia(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:e},t}function Kd(e,t,a,r){return e.baseState=a,Mo(e,Le,typeof r=="function"?r:ja)}function nx(e,t,a,r,c){if(Ul(e))throw Error(l(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};q.T!==null?a(!0):f.isTransition=!1,r(f),a=t.pending,a===null?(f.next=t.pending=f,Zd(t,f)):(f.next=a.next,t.pending=a.next=f)}}function Zd(e,t){var a=t.action,r=t.payload,c=e.state;if(t.isTransition){var f=q.T,b={};q.T=b;try{var v=a(c,r),N=q.S;N!==null&&N(b,v),Jd(e,t,v)}catch(L){qo(e,t,L)}finally{q.T=f}}else try{f=a(c,r),Jd(e,t,f)}catch(L){qo(e,t,L)}}function Jd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){Id(e,t,r)},function(r){return qo(e,t,r)}):Id(e,t,a)}function Id(e,t,a){t.status="fulfilled",t.value=a,Wd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Zd(e,a)))}function qo(e,t,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=a,Wd(t),t=t.next;while(t!==r)}e.action=null}function Wd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ef(e,t){return t}function tf(e,t){if(Oe){var a=$e.formState;if(a!==null){e:{var r=Se;if(Oe){if(Xe){t:{for(var c=Xe,f=oa;c.nodeType!==8;){if(!f){c=null;break t}if(c=ta(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Xe=ta(c.nextSibling),r=c.data==="F!";break e}}Sr(r)}r=!1}r&&(t=a[0])}}return a=Rt(),a.memoizedState=a.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:t},a.queue=r,a=_f.bind(null,Se,r),r.dispatch=a,r=zo(!1),f=Go.bind(null,Se,!1,r.queue),r=Rt(),c={state:t,dispatch:null,action:e,pending:null},r.queue=c,a=nx.bind(null,Se,c,f,a),c.dispatch=a,r.memoizedState=e,[t,a,!1]}function af(e){var t=et();return rf(t,Le,e)}function rf(e,t,a){if(t=Mo(e,t,ef)[0],e=Dl(ja)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=us(t)}catch(b){throw b===ns?El:b}else r=t;t=et();var c=t.queue,f=c.dispatch;return a!==t.memoizedState&&(Se.flags|=2048,ln(9,kl(),sx.bind(null,c,a),null)),[r,f,e]}function sx(e,t){e.action=t}function nf(e){var t=et(),a=Le;if(a!==null)return rf(t,a,e);et(),t=t.memoizedState,a=et();var r=a.queue.dispatch;return a.memoizedState=e,[t,r,!1]}function ln(e,t,a,r){return e={tag:e,create:a,deps:r,inst:t,next:null},t=Se.updateQueue,t===null&&(t=Oo(),Se.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function kl(){return{destroy:void 0,resource:void 0}}function sf(){return et().memoizedState}function Ol(e,t,a,r){var c=Rt();r=r===void 0?null:r,Se.flags|=e,c.memoizedState=ln(1|t,kl(),a,r)}function ds(e,t,a,r){var c=et();r=r===void 0?null:r;var f=c.memoizedState.inst;Le!==null&&r!==null&&Ao(r,Le.memoizedState.deps)?c.memoizedState=ln(t,f,a,r):(Se.flags|=e,c.memoizedState=ln(1|t,f,a,r))}function lf(e,t){Ol(8390656,8,e,t)}function of(e,t){ds(2048,8,e,t)}function cf(e,t){return ds(4,2,e,t)}function uf(e,t){return ds(4,4,e,t)}function df(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ff(e,t,a){a=a!=null?a.concat([e]):null,ds(4,4,df.bind(null,t,e),a)}function Bo(){}function hf(e,t){var a=et();t=t===void 0?null:t;var r=a.memoizedState;return t!==null&&Ao(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function mf(e,t){var a=et();t=t===void 0?null:t;var r=a.memoizedState;if(t!==null&&Ao(t,r[1]))return r[0];if(r=e(),Tr){ia(!0);try{e()}finally{ia(!1)}}return a.memoizedState=[r,t],r}function $o(e,t,a){return a===void 0||(Ya&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=bh(),Se.lanes|=e,Ja|=e,a)}function gf(e,t,a,r){return Ot(a,t)?a:rn.current!==null?(e=$o(e,a,r),Ot(e,t)||(it=!0),e):(Ya&42)===0?(it=!0,e.memoizedState=a):(e=bh(),Se.lanes|=e,Ja|=e,t)}function xf(e,t,a,r,c){var f=J.p;J.p=f!==0&&8>f?f:8;var b=q.T,v={};q.T=v,Go(e,!1,t,a);try{var N=c(),L=q.S;if(L!==null&&L(v,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var F=tx(N,r);fs(e,t,F,qt(e))}else fs(e,t,r,qt(e))}catch(X){fs(e,t,{then:function(){},status:"rejected",reason:X},qt())}finally{J.p=f,q.T=b}}function lx(){}function Ho(e,t,a,r){if(e.tag!==5)throw Error(l(476));var c=bf(e).queue;xf(e,c,t,j,a===null?lx:function(){return pf(e),a(r)})}function bf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:j},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function pf(e){var t=bf(e).next.queue;fs(e,t,{},qt())}function Vo(){return _t(Cs)}function yf(){return et().memoizedState}function vf(){return et().memoizedState}function ix(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=qt();e=Va(a);var r=Ga(t,e,a);r!==null&&(Bt(r,t,a),ls(r,t,a)),t={cache:po()},e.payload=t;return}t=t.return}}function ox(e,t,a){var r=qt();a={lane:r,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ul(e)?wf(t,a):(a=io(e,t,a,r),a!==null&&(Bt(a,e,r),Sf(a,t,r)))}function _f(e,t,a){var r=qt();fs(e,t,a,r)}function fs(e,t,a,r){var c={lane:r,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ul(e))wf(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var b=t.lastRenderedState,v=f(b,a);if(c.hasEagerState=!0,c.eagerState=v,Ot(v,b))return bl(e,t,c,0),$e===null&&xl(),!1}catch{}finally{}if(a=io(e,t,c,r),a!==null)return Bt(a,e,r),Sf(a,t,r),!0}return!1}function Go(e,t,a,r){if(r={lane:2,revertLane:_c(),action:r,hasEagerState:!1,eagerState:null,next:null},Ul(e)){if(t)throw Error(l(479))}else t=io(e,a,r,2),t!==null&&Bt(t,e,2)}function Ul(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function wf(e,t){nn=Al=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Sf(e,t,a){if((a&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Cu(e,a)}}var Ml={readContext:_t,use:Cl,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je},jf={readContext:_t,use:Cl,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:lf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ol(4194308,4,df.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ol(4194308,4,e,t)},useInsertionEffect:function(e,t){Ol(4,2,e,t)},useMemo:function(e,t){var a=Rt();t=t===void 0?null:t;var r=e();if(Tr){ia(!0);try{e()}finally{ia(!1)}}return a.memoizedState=[r,t],r},useReducer:function(e,t,a){var r=Rt();if(a!==void 0){var c=a(t);if(Tr){ia(!0);try{a(t)}finally{ia(!1)}}}else c=t;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=ox.bind(null,Se,e),[r.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:function(e){e=zo(e);var t=e.queue,a=_f.bind(null,Se,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Bo,useDeferredValue:function(e,t){var a=Rt();return $o(a,e,t)},useTransition:function(){var e=zo(!1);return e=xf.bind(null,Se,e.queue,!0,!1),Rt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var r=Se,c=Rt();if(Oe){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),$e===null)throw Error(l(349));(Re&124)!==0||Yd(r,t,a)}c.memoizedState=a;var f={value:a,getSnapshot:t};return c.queue=f,lf(Qd.bind(null,r,f,e),[e]),r.flags|=2048,ln(9,kl(),Fd.bind(null,r,f,a,t),null),a},useId:function(){var e=Rt(),t=$e.identifierPrefix;if(Oe){var a=_a,r=va;a=(r&~(1<<32-yt(r)-1)).toString(32)+a,t="«"+t+"R"+a,a=Rl++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=ax++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Vo,useFormState:tf,useActionState:tf,useOptimistic:function(e){var t=Rt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Go.bind(null,Se,!0,a),a.dispatch=t,[e,t]},useMemoCache:Uo,useCacheRefresh:function(){return Rt().memoizedState=ix.bind(null,Se)}},Ef={readContext:_t,use:Cl,useCallback:hf,useContext:_t,useEffect:of,useImperativeHandle:ff,useInsertionEffect:cf,useLayoutEffect:uf,useMemo:mf,useReducer:Dl,useRef:sf,useState:function(){return Dl(ja)},useDebugValue:Bo,useDeferredValue:function(e,t){var a=et();return gf(a,Le.memoizedState,e,t)},useTransition:function(){var e=Dl(ja)[0],t=et().memoizedState;return[typeof e=="boolean"?e:us(e),t]},useSyncExternalStore:Gd,useId:yf,useHostTransitionStatus:Vo,useFormState:af,useActionState:af,useOptimistic:function(e,t){var a=et();return Kd(a,Le,e,t)},useMemoCache:Uo,useCacheRefresh:vf},cx={readContext:_t,use:Cl,useCallback:hf,useContext:_t,useEffect:of,useImperativeHandle:ff,useInsertionEffect:cf,useLayoutEffect:uf,useMemo:mf,useReducer:Lo,useRef:sf,useState:function(){return Lo(ja)},useDebugValue:Bo,useDeferredValue:function(e,t){var a=et();return Le===null?$o(a,e,t):gf(a,Le.memoizedState,e,t)},useTransition:function(){var e=Lo(ja)[0],t=et().memoizedState;return[typeof e=="boolean"?e:us(e),t]},useSyncExternalStore:Gd,useId:yf,useHostTransitionStatus:Vo,useFormState:nf,useActionState:nf,useOptimistic:function(e,t){var a=et();return Le!==null?Kd(a,Le,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:vf},on=null,hs=0;function Ll(e){var t=hs;return hs+=1,on===null&&(on=[]),Md(on,e,t)}function ms(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zl(e,t){throw t.$$typeof===_?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Nf(e){var t=e._init;return t(e._payload)}function Tf(e){function t(k,C){if(e){var M=k.deletions;M===null?(k.deletions=[C],k.flags|=16):M.push(C)}}function a(k,C){if(!e)return null;for(;C!==null;)t(k,C),C=C.sibling;return null}function r(k){for(var C=new Map;k!==null;)k.key!==null?C.set(k.key,k):C.set(k.index,k),k=k.sibling;return C}function c(k,C){return k=ya(k,C),k.index=0,k.sibling=null,k}function f(k,C,M){return k.index=M,e?(M=k.alternate,M!==null?(M=M.index,M<C?(k.flags|=67108866,C):M):(k.flags|=67108866,C)):(k.flags|=1048576,C)}function b(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function v(k,C,M,P){return C===null||C.tag!==6?(C=co(M,k.mode,P),C.return=k,C):(C=c(C,M),C.return=k,C)}function N(k,C,M,P){var le=M.type;return le===E?F(k,C,M.props.children,P,M.key):C!==null&&(C.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ie&&Nf(le)===C.type)?(C=c(C,M.props),ms(C,M),C.return=k,C):(C=yl(M.type,M.key,M.props,null,k.mode,P),ms(C,M),C.return=k,C)}function L(k,C,M,P){return C===null||C.tag!==4||C.stateNode.containerInfo!==M.containerInfo||C.stateNode.implementation!==M.implementation?(C=uo(M,k.mode,P),C.return=k,C):(C=c(C,M.children||[]),C.return=k,C)}function F(k,C,M,P,le){return C===null||C.tag!==7?(C=yr(M,k.mode,P,le),C.return=k,C):(C=c(C,M),C.return=k,C)}function X(k,C,M){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=co(""+C,k.mode,M),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case y:return M=yl(C.type,C.key,C.props,null,k.mode,M),ms(M,C),M.return=k,M;case A:return C=uo(C,k.mode,M),C.return=k,C;case ie:var P=C._init;return C=P(C._payload),X(k,C,M)}if(ue(C)||ae(C))return C=yr(C,k.mode,M,null),C.return=k,C;if(typeof C.then=="function")return X(k,Ll(C),M);if(C.$$typeof===G)return X(k,Sl(k,C),M);zl(k,C)}return null}function B(k,C,M,P){var le=C!==null?C.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return le!==null?null:v(k,C,""+M,P);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case y:return M.key===le?N(k,C,M,P):null;case A:return M.key===le?L(k,C,M,P):null;case ie:return le=M._init,M=le(M._payload),B(k,C,M,P)}if(ue(M)||ae(M))return le!==null?null:F(k,C,M,P,null);if(typeof M.then=="function")return B(k,C,Ll(M),P);if(M.$$typeof===G)return B(k,C,Sl(k,M),P);zl(k,M)}return null}function $(k,C,M,P,le){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return k=k.get(M)||null,v(C,k,""+P,le);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case y:return k=k.get(P.key===null?M:P.key)||null,N(C,k,P,le);case A:return k=k.get(P.key===null?M:P.key)||null,L(C,k,P,le);case ie:var je=P._init;return P=je(P._payload),$(k,C,M,P,le)}if(ue(P)||ae(P))return k=k.get(M)||null,F(C,k,P,le,null);if(typeof P.then=="function")return $(k,C,M,Ll(P),le);if(P.$$typeof===G)return $(k,C,M,Sl(C,P),le);zl(C,P)}return null}function me(k,C,M,P){for(var le=null,je=null,de=C,he=C=0,ct=null;de!==null&&he<M.length;he++){de.index>he?(ct=de,de=null):ct=de.sibling;var De=B(k,de,M[he],P);if(De===null){de===null&&(de=ct);break}e&&de&&De.alternate===null&&t(k,de),C=f(De,C,he),je===null?le=De:je.sibling=De,je=De,de=ct}if(he===M.length)return a(k,de),Oe&&_r(k,he),le;if(de===null){for(;he<M.length;he++)de=X(k,M[he],P),de!==null&&(C=f(de,C,he),je===null?le=de:je.sibling=de,je=de);return Oe&&_r(k,he),le}for(de=r(de);he<M.length;he++)ct=$(de,k,he,M[he],P),ct!==null&&(e&&ct.alternate!==null&&de.delete(ct.key===null?he:ct.key),C=f(ct,C,he),je===null?le=ct:je.sibling=ct,je=ct);return e&&de.forEach(function(lr){return t(k,lr)}),Oe&&_r(k,he),le}function fe(k,C,M,P){if(M==null)throw Error(l(151));for(var le=null,je=null,de=C,he=C=0,ct=null,De=M.next();de!==null&&!De.done;he++,De=M.next()){de.index>he?(ct=de,de=null):ct=de.sibling;var lr=B(k,de,De.value,P);if(lr===null){de===null&&(de=ct);break}e&&de&&lr.alternate===null&&t(k,de),C=f(lr,C,he),je===null?le=lr:je.sibling=lr,je=lr,de=ct}if(De.done)return a(k,de),Oe&&_r(k,he),le;if(de===null){for(;!De.done;he++,De=M.next())De=X(k,De.value,P),De!==null&&(C=f(De,C,he),je===null?le=De:je.sibling=De,je=De);return Oe&&_r(k,he),le}for(de=r(de);!De.done;he++,De=M.next())De=$(de,k,he,De.value,P),De!==null&&(e&&De.alternate!==null&&de.delete(De.key===null?he:De.key),C=f(De,C,he),je===null?le=De:je.sibling=De,je=De);return e&&de.forEach(function(ub){return t(k,ub)}),Oe&&_r(k,he),le}function qe(k,C,M,P){if(typeof M=="object"&&M!==null&&M.type===E&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case y:e:{for(var le=M.key;C!==null;){if(C.key===le){if(le=M.type,le===E){if(C.tag===7){a(k,C.sibling),P=c(C,M.props.children),P.return=k,k=P;break e}}else if(C.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ie&&Nf(le)===C.type){a(k,C.sibling),P=c(C,M.props),ms(P,M),P.return=k,k=P;break e}a(k,C);break}else t(k,C);C=C.sibling}M.type===E?(P=yr(M.props.children,k.mode,P,M.key),P.return=k,k=P):(P=yl(M.type,M.key,M.props,null,k.mode,P),ms(P,M),P.return=k,k=P)}return b(k);case A:e:{for(le=M.key;C!==null;){if(C.key===le)if(C.tag===4&&C.stateNode.containerInfo===M.containerInfo&&C.stateNode.implementation===M.implementation){a(k,C.sibling),P=c(C,M.children||[]),P.return=k,k=P;break e}else{a(k,C);break}else t(k,C);C=C.sibling}P=uo(M,k.mode,P),P.return=k,k=P}return b(k);case ie:return le=M._init,M=le(M._payload),qe(k,C,M,P)}if(ue(M))return me(k,C,M,P);if(ae(M)){if(le=ae(M),typeof le!="function")throw Error(l(150));return M=le.call(M),fe(k,C,M,P)}if(typeof M.then=="function")return qe(k,C,Ll(M),P);if(M.$$typeof===G)return qe(k,C,Sl(k,M),P);zl(k,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,C!==null&&C.tag===6?(a(k,C.sibling),P=c(C,M),P.return=k,k=P):(a(k,C),P=co(M,k.mode,P),P.return=k,k=P),b(k)):a(k,C)}return function(k,C,M,P){try{hs=0;var le=qe(k,C,M,P);return on=null,le}catch(de){if(de===ns||de===El)throw de;var je=Ut(29,de,null,k.mode);return je.lanes=P,je.return=k,je}finally{}}}var cn=Tf(!0),Af=Tf(!1),Xt=z(null),ca=null;function Fa(e){var t=e.alternate;Y(rt,rt.current&1),Y(Xt,e),ca===null&&(t===null||rn.current!==null||t.memoizedState!==null)&&(ca=e)}function Rf(e){if(e.tag===22){if(Y(rt,rt.current),Y(Xt,e),ca===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ca=e)}}else Qa()}function Qa(){Y(rt,rt.current),Y(Xt,Xt.current)}function Ea(e){U(Xt),ca===e&&(ca=null),U(rt)}var rt=z(0);function ql(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Oc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Yo(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:p({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Fo={enqueueSetState:function(e,t,a){e=e._reactInternals;var r=qt(),c=Va(r);c.payload=t,a!=null&&(c.callback=a),t=Ga(e,c,r),t!==null&&(Bt(t,e,r),ls(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=qt(),c=Va(r);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Ga(e,c,r),t!==null&&(Bt(t,e,r),ls(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=qt(),r=Va(a);r.tag=2,t!=null&&(r.callback=t),t=Ga(e,r,a),t!==null&&(Bt(t,e,a),ls(t,e,a))}};function Cf(e,t,a,r,c,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,f,b):t.prototype&&t.prototype.isPureReactComponent?!Zn(a,r)||!Zn(c,f):!0}function Df(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&Fo.enqueueReplaceState(t,t.state,null)}function Ar(e,t){var a=t;if("ref"in t){a={};for(var r in t)r!=="ref"&&(a[r]=t[r])}if(e=e.defaultProps){a===t&&(a=p({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Bl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function kf(e){Bl(e)}function Of(e){console.error(e)}function Uf(e){Bl(e)}function $l(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Mf(e,t,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Qo(e,t,a){return a=Va(a),a.tag=3,a.payload={element:null},a.callback=function(){$l(e,t)},a}function Lf(e){return e=Va(e),e.tag=3,e}function zf(e,t,a,r){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;e.payload=function(){return c(f)},e.callback=function(){Mf(t,a,r)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Mf(t,a,r),typeof c!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})})}function ux(e,t,a,r,c){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=a.alternate,t!==null&&ts(t,a,c,!0),a=Xt.current,a!==null){switch(a.tag){case 13:return ca===null?xc():a.alternate===null&&Ke===0&&(Ke=3),a.flags&=-257,a.flags|=65536,a.lanes=c,r===_o?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([r]):t.add(r),pc(e,r,c)),!1;case 22:return a.flags|=65536,r===_o?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([r]):a.add(r)),pc(e,r,c)),!1}throw Error(l(435,a.tag))}return pc(e,r,c),xc(),!1}if(Oe)return t=Xt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,r!==mo&&(e=Error(l(422),{cause:r}),es(Yt(e,a)))):(r!==mo&&(t=Error(l(423),{cause:r}),es(Yt(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=Yt(r,a),c=Qo(e.stateNode,r,c),jo(e,c),Ke!==4&&(Ke=2)),!1;var f=Error(l(520),{cause:r});if(f=Yt(f,a),_s===null?_s=[f]:_s.push(f),Ke!==4&&(Ke=2),t===null)return!0;r=Yt(r,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Qo(a.stateNode,r,e),jo(a,e),!1;case 1:if(t=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ia===null||!Ia.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Lf(c),zf(c,e,a,r),jo(a,c),!1}a=a.return}while(a!==null);return!1}var qf=Error(l(461)),it=!1;function ht(e,t,a,r){t.child=e===null?Af(t,null,a,r):cn(t,e.child,a,r)}function Bf(e,t,a,r,c){a=a.render;var f=t.ref;if("ref"in r){var b={};for(var v in r)v!=="ref"&&(b[v]=r[v])}else b=r;return Er(t),r=Ro(e,t,a,b,f,c),v=Co(),e!==null&&!it?(Do(e,t,c),Na(e,t,c)):(Oe&&v&&fo(t),t.flags|=1,ht(e,t,r,c),t.child)}function $f(e,t,a,r,c){if(e===null){var f=a.type;return typeof f=="function"&&!oo(f)&&f.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=f,Hf(e,t,f,r,c)):(e=yl(a.type,null,r,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!ec(e,c)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:Zn,a(b,r)&&e.ref===t.ref)return Na(e,t,c)}return t.flags|=1,e=ya(f,r),e.ref=t.ref,e.return=t,t.child=e}function Hf(e,t,a,r,c){if(e!==null){var f=e.memoizedProps;if(Zn(f,r)&&e.ref===t.ref)if(it=!1,t.pendingProps=r=f,ec(e,c))(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,Na(e,t,c)}return Po(e,t,a,r,c)}function Vf(e,t,a){var r=t.pendingProps,c=r.children,f=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((t.flags&128)!==0){if(r=f!==null?f.baseLanes|a:a,e!==null){for(c=t.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;t.childLanes=f&~r}else t.childLanes=0,t.child=null;return Gf(e,t,r,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&jl(t,f!==null?f.cachePool:null),f!==null?$d(t,f):No(),Rf(t);else return t.lanes=t.childLanes=536870912,Gf(e,t,f!==null?f.baseLanes|a:a,a)}else f!==null?(jl(t,f.cachePool),$d(t,f),Qa(),t.memoizedState=null):(e!==null&&jl(t,null),No(),Qa());return ht(e,t,c,a),t.child}function Gf(e,t,a,r){var c=vo();return c=c===null?null:{parent:at._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&jl(t,null),No(),Rf(t),e!==null&&ts(e,t,r,!0),null}function Hl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Po(e,t,a,r,c){return Er(t),a=Ro(e,t,a,r,void 0,c),r=Co(),e!==null&&!it?(Do(e,t,c),Na(e,t,c)):(Oe&&r&&fo(t),t.flags|=1,ht(e,t,a,c),t.child)}function Yf(e,t,a,r,c,f){return Er(t),t.updateQueue=null,a=Vd(t,r,a,c),Hd(e),r=Co(),e!==null&&!it?(Do(e,t,f),Na(e,t,f)):(Oe&&r&&fo(t),t.flags|=1,ht(e,t,a,f),t.child)}function Ff(e,t,a,r,c){if(Er(t),t.stateNode===null){var f=Ir,b=a.contextType;typeof b=="object"&&b!==null&&(f=_t(b)),f=new a(r,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Fo,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=r,f.state=t.memoizedState,f.refs={},wo(t),b=a.contextType,f.context=typeof b=="object"&&b!==null?_t(b):Ir,f.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Yo(t,a,b,r),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Fo.enqueueReplaceState(f,f.state,null),os(t,r,f,c),is(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){f=t.stateNode;var v=t.memoizedProps,N=Ar(a,v);f.props=N;var L=f.context,F=a.contextType;b=Ir,typeof F=="object"&&F!==null&&(b=_t(F));var X=a.getDerivedStateFromProps;F=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v||L!==b)&&Df(t,f,r,b),Ha=!1;var B=t.memoizedState;f.state=B,os(t,r,f,c),is(),L=t.memoizedState,v||B!==L||Ha?(typeof X=="function"&&(Yo(t,a,X,r),L=t.memoizedState),(N=Ha||Cf(t,a,N,r,B,L,b))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=L),f.props=r,f.state=L,f.context=b,r=N):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{f=t.stateNode,So(e,t),b=t.memoizedProps,F=Ar(a,b),f.props=F,X=t.pendingProps,B=f.context,L=a.contextType,N=Ir,typeof L=="object"&&L!==null&&(N=_t(L)),v=a.getDerivedStateFromProps,(L=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==X||B!==N)&&Df(t,f,r,N),Ha=!1,B=t.memoizedState,f.state=B,os(t,r,f,c),is();var $=t.memoizedState;b!==X||B!==$||Ha||e!==null&&e.dependencies!==null&&wl(e.dependencies)?(typeof v=="function"&&(Yo(t,a,v,r),$=t.memoizedState),(F=Ha||Cf(t,a,F,r,B,$,N)||e!==null&&e.dependencies!==null&&wl(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(r,$,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(r,$,N)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=$),f.props=r,f.state=$,f.context=N,r=F):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),r=!1)}return f=r,Hl(e,t),r=(t.flags&128)!==0,f||r?(f=t.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&r?(t.child=cn(t,e.child,null,c),t.child=cn(t,null,a,c)):ht(e,t,a,c),t.memoizedState=f.state,e=t.child):e=Na(e,t,c),e}function Qf(e,t,a,r){return Wn(),t.flags|=256,ht(e,t,a,r),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ko(e){return{baseLanes:e,cachePool:kd()}}function Zo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Kt),e}function Pf(e,t,a){var r=t.pendingProps,c=!1,f=(t.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(rt.current&2)!==0),b&&(c=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Oe){if(c?Fa(t):Qa(),Oe){var v=Xe,N;if(N=v){e:{for(N=v,v=oa;N.nodeType!==8;){if(!v){v=null;break e}if(N=ta(N.nextSibling),N===null){v=null;break e}}v=N}v!==null?(t.memoizedState={dehydrated:v,treeContext:vr!==null?{id:va,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},N=Ut(18,null,null,0),N.stateNode=v,N.return=t,t.child=N,St=t,Xe=null,N=!0):N=!1}N||Sr(t)}if(v=t.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Oc(v)?t.lanes=32:t.lanes=536870912,null;Ea(t)}return v=r.children,r=r.fallback,c?(Qa(),c=t.mode,v=Vl({mode:"hidden",children:v},c),r=yr(r,c,a,null),v.return=t,r.return=t,v.sibling=r,t.child=v,c=t.child,c.memoizedState=Ko(a),c.childLanes=Zo(e,b,a),t.memoizedState=Xo,r):(Fa(t),Jo(t,v))}if(N=e.memoizedState,N!==null&&(v=N.dehydrated,v!==null)){if(f)t.flags&256?(Fa(t),t.flags&=-257,t=Io(e,t,a)):t.memoizedState!==null?(Qa(),t.child=e.child,t.flags|=128,t=null):(Qa(),c=r.fallback,v=t.mode,r=Vl({mode:"visible",children:r.children},v),c=yr(c,v,a,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,cn(t,e.child,null,a),r=t.child,r.memoizedState=Ko(a),r.childLanes=Zo(e,b,a),t.memoizedState=Xo,t=c);else if(Fa(t),Oc(v)){if(b=v.nextSibling&&v.nextSibling.dataset,b)var L=b.dgst;b=L,r=Error(l(419)),r.stack="",r.digest=b,es({value:r,source:null,stack:null}),t=Io(e,t,a)}else if(it||ts(e,t,a,!1),b=(a&e.childLanes)!==0,it||b){if(b=$e,b!==null&&(r=a&-a,r=(r&42)!==0?1:Oi(r),r=(r&(b.suspendedLanes|a))!==0?0:r,r!==0&&r!==N.retryLane))throw N.retryLane=r,Jr(e,r),Bt(b,e,r),qf;v.data==="$?"||xc(),t=Io(e,t,a)}else v.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Xe=ta(v.nextSibling),St=t,Oe=!0,wr=null,oa=!1,e!==null&&(Qt[Pt++]=va,Qt[Pt++]=_a,Qt[Pt++]=vr,va=e.id,_a=e.overflow,vr=t),t=Jo(t,r.children),t.flags|=4096);return t}return c?(Qa(),c=r.fallback,v=t.mode,N=e.child,L=N.sibling,r=ya(N,{mode:"hidden",children:r.children}),r.subtreeFlags=N.subtreeFlags&65011712,L!==null?c=ya(L,c):(c=yr(c,v,a,null),c.flags|=2),c.return=t,r.return=t,r.sibling=c,t.child=r,r=c,c=t.child,v=e.child.memoizedState,v===null?v=Ko(a):(N=v.cachePool,N!==null?(L=at._currentValue,N=N.parent!==L?{parent:L,pool:L}:N):N=kd(),v={baseLanes:v.baseLanes|a,cachePool:N}),c.memoizedState=v,c.childLanes=Zo(e,b,a),t.memoizedState=Xo,r):(Fa(t),a=e.child,e=a.sibling,a=ya(a,{mode:"visible",children:r.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function Jo(e,t){return t=Vl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Vl(e,t){return e=Ut(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Io(e,t,a){return cn(t,e.child,null,a),e=Jo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xf(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),xo(e.return,t,a)}function Wo(e,t,a,r,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=r,f.tail=a,f.tailMode=c)}function Kf(e,t,a){var r=t.pendingProps,c=r.revealOrder,f=r.tail;if(ht(e,t,r.children,a),r=rt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xf(e,a,t);else if(e.tag===19)Xf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Y(rt,r),c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&ql(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Wo(t,!1,c,a,f);break;case"backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ql(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Wo(t,!0,a,null,f);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Na(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ja|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ts(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=ya(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ya(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function ec(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&wl(e)))}function dx(e,t,a){switch(t.tag){case 3:re(t,t.stateNode.containerInfo),$a(t,at,e.memoizedState.cache),Wn();break;case 27:case 5:pe(t);break;case 4:re(t,t.stateNode.containerInfo);break;case 10:$a(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Fa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Pf(e,t,a):(Fa(t),e=Na(e,t,a),e!==null?e.sibling:null);Fa(t);break;case 19:var c=(e.flags&128)!==0;if(r=(a&t.childLanes)!==0,r||(ts(e,t,a,!1),r=(a&t.childLanes)!==0),c){if(r)return Kf(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Y(rt,rt.current),r)break;return null;case 22:case 23:return t.lanes=0,Vf(e,t,a);case 24:$a(t,at,e.memoizedState.cache)}return Na(e,t,a)}function Zf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)it=!0;else{if(!ec(e,a)&&(t.flags&128)===0)return it=!1,dx(e,t,a);it=(e.flags&131072)!==0}else it=!1,Oe&&(t.flags&1048576)!==0&&Ed(t,_l,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,c=r._init;if(r=c(r._payload),t.type=r,typeof r=="function")oo(r)?(e=Ar(r,e),t.tag=1,t=Ff(null,t,r,e,a)):(t.tag=0,t=Po(null,t,r,e,a));else{if(r!=null){if(c=r.$$typeof,c===Z){t.tag=11,t=Bf(null,t,r,e,a);break e}else if(c===se){t.tag=14,t=$f(null,t,r,e,a);break e}}throw t=ce(r)||r,Error(l(306,t,""))}}return t;case 0:return Po(e,t,t.type,t.pendingProps,a);case 1:return r=t.type,c=Ar(r,t.pendingProps),Ff(e,t,r,c,a);case 3:e:{if(re(t,t.stateNode.containerInfo),e===null)throw Error(l(387));r=t.pendingProps;var f=t.memoizedState;c=f.element,So(e,t),os(t,r,null,a);var b=t.memoizedState;if(r=b.cache,$a(t,at,r),r!==f.cache&&bo(t,[at],a,!0),is(),r=b.element,f.isDehydrated)if(f={element:r,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Qf(e,t,r,a);break e}else if(r!==c){c=Yt(Error(l(424)),t),es(c),t=Qf(e,t,r,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xe=ta(e.firstChild),St=t,Oe=!0,wr=null,oa=!0,a=Af(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wn(),r===c){t=Na(e,t,a);break e}ht(e,t,r,a)}t=t.child}return t;case 26:return Hl(e,t),e===null?(a=em(t.type,null,t.pendingProps,null))?t.memoizedState=a:Oe||(a=t.type,e=t.pendingProps,r=ai(I.current).createElement(a),r[vt]=t,r[Tt]=e,gt(r,a,e),lt(r),t.stateNode=r):t.memoizedState=em(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pe(t),e===null&&Oe&&(r=t.stateNode=Jh(t.type,t.pendingProps,I.current),St=t,oa=!0,c=Xe,tr(t.type)?(Uc=c,Xe=ta(r.firstChild)):Xe=c),ht(e,t,t.pendingProps.children,a),Hl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Oe&&((c=r=Xe)&&(r=Bx(r,t.type,t.pendingProps,oa),r!==null?(t.stateNode=r,St=t,Xe=ta(r.firstChild),oa=!1,c=!0):c=!1),c||Sr(t)),pe(t),c=t.type,f=t.pendingProps,b=e!==null?e.memoizedProps:null,r=f.children,Cc(c,f)?r=null:b!==null&&Cc(c,b)&&(t.flags|=32),t.memoizedState!==null&&(c=Ro(e,t,rx,null,null,a),Cs._currentValue=c),Hl(e,t),ht(e,t,r,a),t.child;case 6:return e===null&&Oe&&((e=a=Xe)&&(a=$x(a,t.pendingProps,oa),a!==null?(t.stateNode=a,St=t,Xe=null,e=!0):e=!1),e||Sr(t)),null;case 13:return Pf(e,t,a);case 4:return re(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=cn(t,null,r,a):ht(e,t,r,a),t.child;case 11:return Bf(e,t,t.type,t.pendingProps,a);case 7:return ht(e,t,t.pendingProps,a),t.child;case 8:return ht(e,t,t.pendingProps.children,a),t.child;case 12:return ht(e,t,t.pendingProps.children,a),t.child;case 10:return r=t.pendingProps,$a(t,t.type,r.value),ht(e,t,r.children,a),t.child;case 9:return c=t.type._context,r=t.pendingProps.children,Er(t),c=_t(c),r=r(c),t.flags|=1,ht(e,t,r,a),t.child;case 14:return $f(e,t,t.type,t.pendingProps,a);case 15:return Hf(e,t,t.type,t.pendingProps,a);case 19:return Kf(e,t,a);case 31:return r=t.pendingProps,a=t.mode,r={mode:r.mode,children:r.children},e===null?(a=Vl(r,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=ya(e.child,r),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Vf(e,t,a);case 24:return Er(t),r=_t(at),e===null?(c=vo(),c===null&&(c=$e,f=po(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),t.memoizedState={parent:r,cache:c},wo(t),$a(t,at,c)):((e.lanes&a)!==0&&(So(e,t),os(t,null,null,a),is()),c=e.memoizedState,f=t.memoizedState,c.parent!==r?(c={parent:r,cache:r},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),$a(t,at,r)):(r=f.cache,$a(t,at,r),r!==c.cache&&bo(t,[at],a,!0))),ht(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ta(e){e.flags|=4}function Jf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!sm(t)){if(t=Xt.current,t!==null&&((Re&4194048)===Re?ca!==null:(Re&62914560)!==Re&&(Re&536870912)===0||t!==ca))throw ss=_o,Od;e.flags|=8192}}function Gl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Nt():536870912,e.lanes|=t,hn|=t)}function gs(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function fx(e,t,a){var r=t.pendingProps;switch(ho(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return a=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Sa(at),ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(In(t)?Ta(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ad())),Qe(t),null;case 26:return a=t.memoizedState,e===null?(Ta(t),a!==null?(Qe(t),Jf(t,a)):(Qe(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Ta(t),Qe(t),Jf(t,a)):(Qe(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ta(t),Qe(t),t.flags&=-16777217),null;case 27:Ee(t),a=I.current;var c=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ta(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Qe(t),null}e=D.current,In(t)?Nd(t):(e=Jh(c,r,a),t.stateNode=e,Ta(t))}return Qe(t),null;case 5:if(Ee(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ta(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Qe(t),null}if(e=D.current,In(t))Nd(t);else{switch(c=ai(I.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?c.createElement("select",{is:r.is}):c.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?c.createElement(a,{is:r.is}):c.createElement(a)}}e[vt]=t,e[Tt]=r;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=e;e:switch(gt(e,a,r),a){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ta(t)}}return Qe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Ta(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(l(166));if(e=I.current,In(t)){if(e=t.stateNode,a=t.memoizedProps,r=null,c=St,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[vt]=t,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||Yh(e.nodeValue,a)),e||Sr(t)}else e=ai(e).createTextNode(r),e[vt]=t,t.stateNode=e}return Qe(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=In(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[vt]=t}else Wn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),c=!1}else c=Ad(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Ea(t),t):(Ea(t),null)}if(Ea(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=r!==null,e=e!==null&&e.memoizedState!==null,a){r=t.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool);var f=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Gl(t,t.updateQueue),Qe(t),null;case 4:return ge(),e===null&&Ec(t.stateNode.containerInfo),Qe(t),null;case 10:return Sa(t.type),Qe(t),null;case 19:if(U(rt),c=t.memoizedState,c===null)return Qe(t),null;if(r=(t.flags&128)!==0,f=c.rendering,f===null)if(r)gs(c,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=ql(e),f!==null){for(t.flags|=128,gs(c,!1),e=f.updateQueue,t.updateQueue=e,Gl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)jd(a,e),a=a.sibling;return Y(rt,rt.current&1|2),t.child}e=e.sibling}c.tail!==null&&Ht()>Ql&&(t.flags|=128,r=!0,gs(c,!1),t.lanes=4194304)}else{if(!r)if(e=ql(f),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Gl(t,e),gs(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Oe)return Qe(t),null}else 2*Ht()-c.renderingStartTime>Ql&&a!==536870912&&(t.flags|=128,r=!0,gs(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(e=c.last,e!==null?e.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ht(),t.sibling=null,e=rt.current,Y(rt,r?e&1|2:e&1),t):(Qe(t),null);case 22:case 23:return Ea(t),To(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(a&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),a=t.updateQueue,a!==null&&Gl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==a&&(t.flags|=2048),e!==null&&U(Nr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Sa(at),Qe(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function hx(e,t){switch(ho(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sa(at),ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ee(t),null;case 13:if(Ea(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Wn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(rt),null;case 4:return ge(),null;case 10:return Sa(t.type),null;case 22:case 23:return Ea(t),To(),e!==null&&U(Nr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Sa(at),null;case 25:return null;default:return null}}function If(e,t){switch(ho(t),t.tag){case 3:Sa(at),ge();break;case 26:case 27:case 5:Ee(t);break;case 4:ge();break;case 13:Ea(t);break;case 19:U(rt);break;case 10:Sa(t.type);break;case 22:case 23:Ea(t),To(),e!==null&&U(Nr);break;case 24:Sa(at)}}function xs(e,t){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var c=r.next;a=c;do{if((a.tag&e)===e){r=void 0;var f=a.create,b=a.inst;r=f(),b.destroy=r}a=a.next}while(a!==c)}}catch(v){Be(t,t.return,v)}}function Pa(e,t,a){try{var r=t.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&e)===e){var b=r.inst,v=b.destroy;if(v!==void 0){b.destroy=void 0,c=t;var N=a,L=v;try{L()}catch(F){Be(c,N,F)}}}r=r.next}while(r!==f)}}catch(F){Be(t,t.return,F)}}function Wf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Bd(t,a)}catch(r){Be(e,e.return,r)}}}function eh(e,t,a){a.props=Ar(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){Be(e,t,r)}}function bs(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(c){Be(e,t,c)}}function ua(e,t){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(c){Be(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Be(e,t,c)}else a.current=null}function th(e){var t=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(c){Be(e,e.return,c)}}function tc(e,t,a){try{var r=e.stateNode;Ux(r,e.type,a,t),r[Tt]=t}catch(c){Be(e,e.return,c)}}function ah(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&tr(e.type)||e.tag===4}function ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&tr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rc(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ti));else if(r!==4&&(r===27&&tr(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(rc(e,t,a),e=e.sibling;e!==null;)rc(e,t,a),e=e.sibling}function Yl(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(r===27&&tr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Yl(e,t,a),e=e.sibling;e!==null;)Yl(e,t,a),e=e.sibling}function rh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);gt(t,r,a),t[vt]=e,t[Tt]=a}catch(f){Be(e,e.return,f)}}var Aa=!1,Ie=!1,nc=!1,nh=typeof WeakSet=="function"?WeakSet:Set,ot=null;function mx(e,t){if(e=e.containerInfo,Ac=oi,e=md(e),to(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var c=r.anchorOffset,f=r.focusNode;r=r.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,v=-1,N=-1,L=0,F=0,X=e,B=null;t:for(;;){for(var $;X!==a||c!==0&&X.nodeType!==3||(v=b+c),X!==f||r!==0&&X.nodeType!==3||(N=b+r),X.nodeType===3&&(b+=X.nodeValue.length),($=X.firstChild)!==null;)B=X,X=$;for(;;){if(X===e)break t;if(B===a&&++L===c&&(v=b),B===f&&++F===r&&(N=b),($=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=$}a=v===-1||N===-1?null:{start:v,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rc={focusedElem:e,selectionRange:a},oi=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){switch(t=ot,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=t,c=f.memoizedProps,f=f.memoizedState,r=a.stateNode;try{var me=Ar(a.type,c,a.elementType===a.type);e=r.getSnapshotBeforeUpdate(me,f),r.__reactInternalSnapshotBeforeUpdate=e}catch(fe){Be(a,a.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)kc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}}function sh(e,t,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Xa(e,a),r&4&&xs(5,a);break;case 1:if(Xa(e,a),r&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){Be(a,a.return,b)}else{var c=Ar(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Be(a,a.return,b)}}r&64&&Wf(a),r&512&&bs(a,a.return);break;case 3:if(Xa(e,a),r&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Bd(e,t)}catch(b){Be(a,a.return,b)}}break;case 27:t===null&&r&4&&rh(a);case 26:case 5:Xa(e,a),t===null&&r&4&&th(a),r&512&&bs(a,a.return);break;case 12:Xa(e,a);break;case 13:Xa(e,a),r&4&&oh(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Sx.bind(null,a),Hx(e,a))));break;case 22:if(r=a.memoizedState!==null||Aa,!r){t=t!==null&&t.memoizedState!==null||Ie,c=Aa;var f=Ie;Aa=r,(Ie=t)&&!f?Ka(e,a,(a.subtreeFlags&8772)!==0):Xa(e,a),Aa=c,Ie=f}break;case 30:break;default:Xa(e,a)}}function lh(e){var t=e.alternate;t!==null&&(e.alternate=null,lh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Li(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ge=null,Ct=!1;function Ra(e,t,a){for(a=a.child;a!==null;)ih(e,t,a),a=a.sibling}function ih(e,t,a){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(mr,a)}catch{}switch(a.tag){case 26:Ie||ua(a,t),Ra(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ie||ua(a,t);var r=Ge,c=Ct;tr(a.type)&&(Ge=a.stateNode,Ct=!1),Ra(e,t,a),Ns(a.stateNode),Ge=r,Ct=c;break;case 5:Ie||ua(a,t);case 6:if(r=Ge,c=Ct,Ge=null,Ra(e,t,a),Ge=r,Ct=c,Ge!==null)if(Ct)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(a.stateNode)}catch(f){Be(a,t,f)}else try{Ge.removeChild(a.stateNode)}catch(f){Be(a,t,f)}break;case 18:Ge!==null&&(Ct?(e=Ge,Kh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Us(e)):Kh(Ge,a.stateNode));break;case 4:r=Ge,c=Ct,Ge=a.stateNode.containerInfo,Ct=!0,Ra(e,t,a),Ge=r,Ct=c;break;case 0:case 11:case 14:case 15:Ie||Pa(2,a,t),Ie||Pa(4,a,t),Ra(e,t,a);break;case 1:Ie||(ua(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"&&eh(a,t,r)),Ra(e,t,a);break;case 21:Ra(e,t,a);break;case 22:Ie=(r=Ie)||a.memoizedState!==null,Ra(e,t,a),Ie=r;break;default:Ra(e,t,a)}}function oh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Us(e)}catch(a){Be(t,t.return,a)}}function gx(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new nh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new nh),t;default:throw Error(l(435,e.tag))}}function sc(e,t){var a=gx(e);t.forEach(function(r){var c=jx.bind(null,e,r);a.has(r)||(a.add(r),r.then(c,c))})}function Mt(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var c=a[r],f=e,b=t,v=b;e:for(;v!==null;){switch(v.tag){case 27:if(tr(v.type)){Ge=v.stateNode,Ct=!1;break e}break;case 5:Ge=v.stateNode,Ct=!1;break e;case 3:case 4:Ge=v.stateNode.containerInfo,Ct=!0;break e}v=v.return}if(Ge===null)throw Error(l(160));ih(f,b,c),Ge=null,Ct=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)ch(t,e),t=t.sibling}var ea=null;function ch(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mt(t,e),Lt(e),r&4&&(Pa(3,e,e.return),xs(3,e),Pa(5,e,e.return));break;case 1:Mt(t,e),Lt(e),r&512&&(Ie||a===null||ua(a,a.return)),r&64&&Aa&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var c=ea;if(Mt(t,e),Lt(e),r&512&&(Ie||a===null||ua(a,a.return)),r&4){var f=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Hn]||f[vt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(r),c.head.insertBefore(f,c.querySelector("head > title"))),gt(f,r,a),f[vt]=e,lt(f),r=f;break e;case"link":var b=rm("link","href",c).get(r+(a.href||""));if(b){for(var v=0;v<b.length;v++)if(f=b[v],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(v,1);break t}}f=c.createElement(r),gt(f,r,a),c.head.appendChild(f);break;case"meta":if(b=rm("meta","content",c).get(r+(a.content||""))){for(v=0;v<b.length;v++)if(f=b[v],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(v,1);break t}}f=c.createElement(r),gt(f,r,a),c.head.appendChild(f);break;default:throw Error(l(468,r))}f[vt]=e,lt(f),r=f}e.stateNode=r}else nm(c,e.type,e.stateNode);else e.stateNode=am(c,r,e.memoizedProps);else f!==r?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,r===null?nm(c,e.type,e.stateNode):am(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&tc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Mt(t,e),Lt(e),r&512&&(Ie||a===null||ua(a,a.return)),a!==null&&r&4&&tc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Mt(t,e),Lt(e),r&512&&(Ie||a===null||ua(a,a.return)),e.flags&32){c=e.stateNode;try{Yr(c,"")}catch($){Be(e,e.return,$)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,tc(e,c,a!==null?a.memoizedProps:c)),r&1024&&(nc=!0);break;case 6:if(Mt(t,e),Lt(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch($){Be(e,e.return,$)}}break;case 3:if(si=null,c=ea,ea=ri(t.containerInfo),Mt(t,e),ea=c,Lt(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Us(t.containerInfo)}catch($){Be(e,e.return,$)}nc&&(nc=!1,uh(e));break;case 4:r=ea,ea=ri(e.stateNode.containerInfo),Mt(t,e),Lt(e),ea=r;break;case 12:Mt(t,e),Lt(e);break;case 13:Mt(t,e),Lt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(dc=Ht()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,sc(e,r)));break;case 22:c=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,L=Aa,F=Ie;if(Aa=L||c,Ie=F||N,Mt(t,e),Ie=F,Aa=L,Lt(e),r&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||N||Aa||Ie||Rr(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){N=a=t;try{if(f=N.stateNode,c)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{v=N.stateNode;var X=N.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;v.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch($){Be(N,N.return,$)}}}else if(t.tag===6){if(a===null){N=t;try{N.stateNode.nodeValue=c?"":N.memoizedProps}catch($){Be(N,N.return,$)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,sc(e,a))));break;case 19:Mt(t,e),Lt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,sc(e,r)));break;case 30:break;case 21:break;default:Mt(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{for(var a,r=e.return;r!==null;){if(ah(r)){a=r;break}r=r.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var c=a.stateNode,f=ac(e);Yl(e,f,c);break;case 5:var b=a.stateNode;a.flags&32&&(Yr(b,""),a.flags&=-33);var v=ac(e);Yl(e,v,b);break;case 3:case 4:var N=a.stateNode.containerInfo,L=ac(e);rc(e,L,N);break;default:throw Error(l(161))}}catch(F){Be(e,e.return,F)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;uh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Xa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)sh(e,t.alternate,t),t=t.sibling}function Rr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Pa(4,t,t.return),Rr(t);break;case 1:ua(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&eh(t,t.return,a),Rr(t);break;case 27:Ns(t.stateNode);case 26:case 5:ua(t,t.return),Rr(t);break;case 22:t.memoizedState===null&&Rr(t);break;case 30:Rr(t);break;default:Rr(t)}e=e.sibling}}function Ka(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,c=e,f=t,b=f.flags;switch(f.tag){case 0:case 11:case 15:Ka(c,f,a),xs(4,f);break;case 1:if(Ka(c,f,a),r=f,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){Be(r,r.return,L)}if(r=f,c=r.updateQueue,c!==null){var v=r.stateNode;try{var N=c.shared.hiddenCallbacks;if(N!==null)for(c.shared.hiddenCallbacks=null,c=0;c<N.length;c++)qd(N[c],v)}catch(L){Be(r,r.return,L)}}a&&b&64&&Wf(f),bs(f,f.return);break;case 27:rh(f);case 26:case 5:Ka(c,f,a),a&&r===null&&b&4&&th(f),bs(f,f.return);break;case 12:Ka(c,f,a);break;case 13:Ka(c,f,a),a&&b&4&&oh(c,f);break;case 22:f.memoizedState===null&&Ka(c,f,a),bs(f,f.return);break;case 30:break;default:Ka(c,f,a)}t=t.sibling}}function lc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&as(a))}function ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&as(e))}function da(e,t,a,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dh(e,t,a,r),t=t.sibling}function dh(e,t,a,r){var c=t.flags;switch(t.tag){case 0:case 11:case 15:da(e,t,a,r),c&2048&&xs(9,t);break;case 1:da(e,t,a,r);break;case 3:da(e,t,a,r),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&as(e)));break;case 12:if(c&2048){da(e,t,a,r),e=t.stateNode;try{var f=t.memoizedProps,b=f.id,v=f.onPostCommit;typeof v=="function"&&v(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Be(t,t.return,N)}}else da(e,t,a,r);break;case 13:da(e,t,a,r);break;case 23:break;case 22:f=t.stateNode,b=t.alternate,t.memoizedState!==null?f._visibility&2?da(e,t,a,r):ps(e,t):f._visibility&2?da(e,t,a,r):(f._visibility|=2,un(e,t,a,r,(t.subtreeFlags&10256)!==0)),c&2048&&lc(b,t);break;case 24:da(e,t,a,r),c&2048&&ic(t.alternate,t);break;default:da(e,t,a,r)}}function un(e,t,a,r,c){for(c=c&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,b=t,v=a,N=r,L=b.flags;switch(b.tag){case 0:case 11:case 15:un(f,b,v,N,c),xs(8,b);break;case 23:break;case 22:var F=b.stateNode;b.memoizedState!==null?F._visibility&2?un(f,b,v,N,c):ps(f,b):(F._visibility|=2,un(f,b,v,N,c)),c&&L&2048&&lc(b.alternate,b);break;case 24:un(f,b,v,N,c),c&&L&2048&&ic(b.alternate,b);break;default:un(f,b,v,N,c)}t=t.sibling}}function ps(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,r=t,c=r.flags;switch(r.tag){case 22:ps(a,r),c&2048&&lc(r.alternate,r);break;case 24:ps(a,r),c&2048&&ic(r.alternate,r);break;default:ps(a,r)}t=t.sibling}}var ys=8192;function dn(e){if(e.subtreeFlags&ys)for(e=e.child;e!==null;)fh(e),e=e.sibling}function fh(e){switch(e.tag){case 26:dn(e),e.flags&ys&&e.memoizedState!==null&&eb(ea,e.memoizedState,e.memoizedProps);break;case 5:dn(e);break;case 3:case 4:var t=ea;ea=ri(e.stateNode.containerInfo),dn(e),ea=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ys,ys=16777216,dn(e),ys=t):dn(e));break;default:dn(e)}}function hh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function vs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];ot=r,gh(r,e)}hh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)mh(e),e=e.sibling}function mh(e){switch(e.tag){case 0:case 11:case 15:vs(e),e.flags&2048&&Pa(9,e,e.return);break;case 3:vs(e);break;case 12:vs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fl(e)):vs(e);break;default:vs(e)}}function Fl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];ot=r,gh(r,e)}hh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Pa(8,t,t.return),Fl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Fl(t));break;default:Fl(t)}e=e.sibling}}function gh(e,t){for(;ot!==null;){var a=ot;switch(a.tag){case 0:case 11:case 15:Pa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:as(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,ot=r;else e:for(a=e;ot!==null;){r=ot;var c=r.sibling,f=r.return;if(lh(r),r===a){ot=null;break e}if(c!==null){c.return=f,ot=c;break e}ot=f}}}var xx={getCacheForType:function(e){var t=_t(at),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},bx=typeof WeakMap=="function"?WeakMap:Map,Ue=0,$e=null,Ne=null,Re=0,Me=0,zt=null,Za=!1,fn=!1,oc=!1,Ca=0,Ke=0,Ja=0,Cr=0,cc=0,Kt=0,hn=0,_s=null,Dt=null,uc=!1,dc=0,Ql=1/0,Pl=null,Ia=null,mt=0,Wa=null,mn=null,gn=0,fc=0,hc=null,xh=null,ws=0,mc=null;function qt(){if((Ue&2)!==0&&Re!==0)return Re&-Re;if(q.T!==null){var e=tn;return e!==0?e:_c()}return Du()}function bh(){Kt===0&&(Kt=(Re&536870912)===0||Oe?tt():536870912);var e=Xt.current;return e!==null&&(e.flags|=32),Kt}function Bt(e,t,a){(e===$e&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(xn(e,0),er(e,Re,Kt,!1)),za(e,a),((Ue&2)===0||e!==$e)&&(e===$e&&((Ue&2)===0&&(Cr|=a),Ke===4&&er(e,Re,Kt,!1)),fa(e))}function ph(e,t,a){if((Ue&6)!==0)throw Error(l(327));var r=!a&&(t&124)===0&&(t&e.expiredLanes)===0||st(e,t),c=r?vx(e,t):bc(e,t,!0),f=r;do{if(c===0){fn&&!r&&er(e,t,0,!1);break}else{if(a=e.current.alternate,f&&!px(a)){c=bc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var v=e;c=_s;var N=v.current.memoizedState.isDehydrated;if(N&&(xn(v,b).flags|=256),b=bc(v,b,!1),b!==2){if(oc&&!N){v.errorRecoveryDisabledLanes|=f,Cr|=f,c=4;break e}f=Dt,Dt=c,f!==null&&(Dt===null?Dt=f:Dt.push.apply(Dt,f))}c=b}if(f=!1,c!==2)continue}}if(c===1){xn(e,0),er(e,t,0,!0);break}e:{switch(r=e,f=c,f){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:er(r,t,Kt,!Za);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=dc+300-Ht(),10<c)){if(er(r,t,Kt,!Za),ft(r,0,!0)!==0)break e;r.timeoutHandle=Ph(yh.bind(null,r,a,Dt,Pl,uc,t,Kt,Cr,hn,Za,f,2,-0,0),c);break e}yh(r,a,Dt,Pl,uc,t,Kt,Cr,hn,Za,f,0,-0,0)}}break}while(!0);fa(e)}function yh(e,t,a,r,c,f,b,v,N,L,F,X,B,$){if(e.timeoutHandle=-1,X=t.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Rs={stylesheets:null,count:0,unsuspend:Wx},fh(t),X=tb(),X!==null)){e.cancelPendingCommit=X(Nh.bind(null,e,t,f,a,r,c,b,v,N,F,1,B,$)),er(e,f,b,!L);return}Nh(e,t,f,a,r,c,b,v,N)}function px(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var c=a[r],f=c.getSnapshot;c=c.value;try{if(!Ot(f(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t,a,r){t&=~cc,t&=~Cr,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var c=t;0<c;){var f=31-yt(c),b=1<<f;r[f]=-1,c&=~b}a!==0&&$n(e,a,t)}function Xl(){return(Ue&6)===0?(Ss(0),!1):!0}function gc(){if(Ne!==null){if(Me===0)var e=Ne.return;else e=Ne,wa=jr=null,ko(e),on=null,hs=0,e=Ne;for(;e!==null;)If(e.alternate,e),e=e.return;Ne=null}}function xn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Lx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),gc(),$e=e,Ne=a=ya(e.current,null),Re=t,Me=0,zt=null,Za=!1,fn=st(e,t),oc=!1,hn=Kt=cc=Cr=Ja=Ke=0,Dt=_s=null,uc=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var c=31-yt(r),f=1<<c;t|=e[c],r&=~f}return Ca=t,xl(),a}function vh(e,t){Se=null,q.H=Ml,t===ns||t===El?(t=Ld(),Me=3):t===Od?(t=Ld(),Me=4):Me=t===qf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,zt=t,Ne===null&&(Ke=1,$l(e,Yt(t,e.current)))}function _h(){var e=q.H;return q.H=Ml,e===null?Ml:e}function wh(){var e=q.A;return q.A=xx,e}function xc(){Ke=4,Za||(Re&4194048)!==Re&&Xt.current!==null||(fn=!0),(Ja&134217727)===0&&(Cr&134217727)===0||$e===null||er($e,Re,Kt,!1)}function bc(e,t,a){var r=Ue;Ue|=2;var c=_h(),f=wh();($e!==e||Re!==t)&&(Pl=null,xn(e,t)),t=!1;var b=Ke;e:do try{if(Me!==0&&Ne!==null){var v=Ne,N=zt;switch(Me){case 8:gc(),b=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(t=!0);var L=Me;if(Me=0,zt=null,bn(e,v,N,L),a&&fn){b=0;break e}break;default:L=Me,Me=0,zt=null,bn(e,v,N,L)}}yx(),b=Ke;break}catch(F){vh(e,F)}while(!0);return t&&e.shellSuspendCounter++,wa=jr=null,Ue=r,q.H=c,q.A=f,Ne===null&&($e=null,Re=0,xl()),b}function yx(){for(;Ne!==null;)Sh(Ne)}function vx(e,t){var a=Ue;Ue|=2;var r=_h(),c=wh();$e!==e||Re!==t?(Pl=null,Ql=Ht()+500,xn(e,t)):fn=st(e,t);e:do try{if(Me!==0&&Ne!==null){t=Ne;var f=zt;t:switch(Me){case 1:Me=0,zt=null,bn(e,t,f,1);break;case 2:case 9:if(Ud(f)){Me=0,zt=null,jh(t);break}t=function(){Me!==2&&Me!==9||$e!==e||(Me=7),fa(e)},f.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:Ud(f)?(Me=0,zt=null,jh(t)):(Me=0,zt=null,bn(e,t,f,7));break;case 5:var b=null;switch(Ne.tag){case 26:b=Ne.memoizedState;case 5:case 27:var v=Ne;if(!b||sm(b)){Me=0,zt=null;var N=v.sibling;if(N!==null)Ne=N;else{var L=v.return;L!==null?(Ne=L,Kl(L)):Ne=null}break t}}Me=0,zt=null,bn(e,t,f,5);break;case 6:Me=0,zt=null,bn(e,t,f,6);break;case 8:gc(),Ke=6;break e;default:throw Error(l(462))}}_x();break}catch(F){vh(e,F)}while(!0);return wa=jr=null,q.H=r,q.A=c,Ue=a,Ne!==null?0:($e=null,Re=0,xl(),Ke)}function _x(){for(;Ne!==null&&!Ws();)Sh(Ne)}function Sh(e){var t=Zf(e.alternate,e,Ca);e.memoizedProps=e.pendingProps,t===null?Kl(e):Ne=t}function jh(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Yf(a,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=Yf(a,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:ko(t);default:If(a,t),t=Ne=jd(t,Ca),t=Zf(a,t,Ca)}e.memoizedProps=e.pendingProps,t===null?Kl(e):Ne=t}function bn(e,t,a,r){wa=jr=null,ko(t),on=null,hs=0;var c=t.return;try{if(ux(e,c,t,a,Re)){Ke=1,$l(e,Yt(a,e.current)),Ne=null;return}}catch(f){if(c!==null)throw Ne=c,f;Ke=1,$l(e,Yt(a,e.current)),Ne=null;return}t.flags&32768?(Oe||r===1?e=!0:fn||(Re&536870912)!==0?e=!1:(Za=e=!0,(r===2||r===9||r===3||r===6)&&(r=Xt.current,r!==null&&r.tag===13&&(r.flags|=16384))),Eh(t,e)):Kl(t)}function Kl(e){var t=e;do{if((t.flags&32768)!==0){Eh(t,Za);return}e=t.return;var a=fx(t.alternate,t,Ca);if(a!==null){Ne=a;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);Ke===0&&(Ke=5)}function Eh(e,t){do{var a=hx(e.alternate,e);if(a!==null){a.flags&=32767,Ne=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=a}while(e!==null);Ke=6,Ne=null}function Nh(e,t,a,r,c,f,b,v,N){e.cancelPendingCommit=null;do Zl();while(mt!==0);if((Ue&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(f=t.lanes|t.childLanes,f|=lo,nl(e,a,f,b,v,N),e===$e&&(Ne=$e=null,Re=0),mn=t,Wa=e,gn=a,fc=f,hc=c,xh=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ex(hr,function(){return Dh(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=q.T,q.T=null,c=J.p,J.p=2,b=Ue,Ue|=4;try{mx(e,t,a)}finally{Ue=b,J.p=c,q.T=r}}mt=1,Th(),Ah(),Rh()}}function Th(){if(mt===1){mt=0;var e=Wa,t=mn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var r=J.p;J.p=2;var c=Ue;Ue|=4;try{ch(t,e);var f=Rc,b=md(e.containerInfo),v=f.focusedElem,N=f.selectionRange;if(b!==v&&v&&v.ownerDocument&&hd(v.ownerDocument.documentElement,v)){if(N!==null&&to(v)){var L=N.start,F=N.end;if(F===void 0&&(F=L),"selectionStart"in v)v.selectionStart=L,v.selectionEnd=Math.min(F,v.value.length);else{var X=v.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var $=B.getSelection(),me=v.textContent.length,fe=Math.min(N.start,me),qe=N.end===void 0?fe:Math.min(N.end,me);!$.extend&&fe>qe&&(b=qe,qe=fe,fe=b);var k=fd(v,fe),C=fd(v,qe);if(k&&C&&($.rangeCount!==1||$.anchorNode!==k.node||$.anchorOffset!==k.offset||$.focusNode!==C.node||$.focusOffset!==C.offset)){var M=X.createRange();M.setStart(k.node,k.offset),$.removeAllRanges(),fe>qe?($.addRange(M),$.extend(C.node,C.offset)):(M.setEnd(C.node,C.offset),$.addRange(M))}}}}for(X=[],$=v;$=$.parentNode;)$.nodeType===1&&X.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<X.length;v++){var P=X[v];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}oi=!!Ac,Rc=Ac=null}finally{Ue=c,J.p=r,q.T=a}}e.current=t,mt=2}}function Ah(){if(mt===2){mt=0;var e=Wa,t=mn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var r=J.p;J.p=2;var c=Ue;Ue|=4;try{sh(e,t.alternate,t)}finally{Ue=c,J.p=r,q.T=a}}mt=3}}function Rh(){if(mt===4||mt===3){mt=0,Ci();var e=Wa,t=mn,a=gn,r=xh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?mt=5:(mt=0,mn=Wa=null,Ch(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ia=null),Ui(a),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(mr,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=q.T,c=J.p,J.p=2,q.T=null;try{for(var f=e.onRecoverableError,b=0;b<r.length;b++){var v=r[b];f(v.value,{componentStack:v.stack})}}finally{q.T=t,J.p=c}}(gn&3)!==0&&Zl(),fa(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===mc?ws++:(ws=0,mc=e):ws=0,Ss(0)}}function Ch(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,as(t)))}function Zl(e){return Th(),Ah(),Rh(),Dh()}function Dh(){if(mt!==5)return!1;var e=Wa,t=fc;fc=0;var a=Ui(gn),r=q.T,c=J.p;try{J.p=32>a?32:a,q.T=null,a=hc,hc=null;var f=Wa,b=gn;if(mt=0,mn=Wa=null,gn=0,(Ue&6)!==0)throw Error(l(331));var v=Ue;if(Ue|=4,mh(f.current),dh(f,f.current,b,a),Ue=v,Ss(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(mr,f)}catch{}return!0}finally{J.p=c,q.T=r,Ch(e,t)}}function kh(e,t,a){t=Yt(a,t),t=Qo(e.stateNode,t,2),e=Ga(e,t,2),e!==null&&(za(e,2),fa(e))}function Be(e,t,a){if(e.tag===3)kh(e,e,a);else for(;t!==null;){if(t.tag===3){kh(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ia===null||!Ia.has(r))){e=Yt(a,e),a=Lf(2),r=Ga(t,a,2),r!==null&&(zf(a,r,t,e),za(r,2),fa(r));break}}t=t.return}}function pc(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new bx;var c=new Set;r.set(t,c)}else c=r.get(t),c===void 0&&(c=new Set,r.set(t,c));c.has(a)||(oc=!0,c.add(a),e=wx.bind(null,e,t,a),t.then(e,e))}function wx(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,$e===e&&(Re&a)===a&&(Ke===4||Ke===3&&(Re&62914560)===Re&&300>Ht()-dc?(Ue&2)===0&&xn(e,0):cc|=a,hn===Re&&(hn=0)),fa(e)}function Oh(e,t){t===0&&(t=Nt()),e=Jr(e,t),e!==null&&(za(e,t),fa(e))}function Sx(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Oh(e,a)}function jx(e,t){var a=0;switch(e.tag){case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(t),Oh(e,a)}function Ex(e,t){return la(e,t)}var Jl=null,pn=null,yc=!1,Il=!1,vc=!1,Dr=0;function fa(e){e!==pn&&e.next===null&&(pn===null?Jl=pn=e:pn=pn.next=e),Il=!0,yc||(yc=!0,Tx())}function Ss(e,t){if(!vc&&Il){vc=!0;do for(var a=!1,r=Jl;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var f=0;else{var b=r.suspendedLanes,v=r.pingedLanes;f=(1<<31-yt(42|e)+1)-1,f&=c&~(b&~v),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,zh(r,f))}else f=Re,f=ft(r,r===$e?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(f&3)===0||st(r,f)||(a=!0,zh(r,f));r=r.next}while(a);vc=!1}}function Nx(){Uh()}function Uh(){Il=yc=!1;var e=0;Dr!==0&&(Mx()&&(e=Dr),Dr=0);for(var t=Ht(),a=null,r=Jl;r!==null;){var c=r.next,f=Mh(r,t);f===0?(r.next=null,a===null?Jl=c:a.next=c,c===null&&(pn=a)):(a=r,(e!==0||(f&3)!==0)&&(Il=!0)),r=c}Ss(e)}function Mh(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-yt(f),v=1<<b,N=c[b];N===-1?((v&a)===0||(v&r)!==0)&&(c[b]=Ze(v,t)):N<=t&&(e.expiredLanes|=v),f&=~v}if(t=$e,a=Re,a=ft(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Jt(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||st(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(r!==null&&Jt(r),Ui(a)){case 2:case 8:a=tl;break;case 32:a=hr;break;case 268435456:a=rl;break;default:a=hr}return r=Lh.bind(null,e),a=la(a,r),e.callbackPriority=t,e.callbackNode=a,t}return r!==null&&r!==null&&Jt(r),e.callbackPriority=2,e.callbackNode=null,2}function Lh(e,t){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Zl()&&e.callbackNode!==a)return null;var r=Re;return r=ft(e,e===$e?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(ph(e,r,t),Mh(e,Ht()),e.callbackNode!=null&&e.callbackNode===a?Lh.bind(null,e):null)}function zh(e,t){if(Zl())return null;ph(e,t,!0)}function Tx(){zx(function(){(Ue&6)!==0?la(el,Nx):Uh()})}function _c(){return Dr===0&&(Dr=tt()),Dr}function qh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:cl(""+e)}function Bh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Ax(e,t,a,r,c){if(t==="submit"&&a&&a.stateNode===c){var f=qh((c[Tt]||null).action),b=r.submitter;b&&(t=(t=b[Tt]||null)?qh(t.formAction):b.getAttribute("formAction"),t!==null&&(f=t,b=null));var v=new hl("action","action",null,r,c);e.push({event:v,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Dr!==0){var N=b?Bh(c,b):new FormData(c);Ho(a,{pending:!0,data:N,method:c.method,action:f},null,N)}}else typeof f=="function"&&(v.preventDefault(),N=b?Bh(c,b):new FormData(c),Ho(a,{pending:!0,data:N,method:c.method,action:f},f,N))},currentTarget:c}]})}}for(var wc=0;wc<so.length;wc++){var Sc=so[wc],Rx=Sc.toLowerCase(),Cx=Sc[0].toUpperCase()+Sc.slice(1);Wt(Rx,"on"+Cx)}Wt(bd,"onAnimationEnd"),Wt(pd,"onAnimationIteration"),Wt(yd,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(Pg,"onTransitionRun"),Wt(Xg,"onTransitionStart"),Wt(Kg,"onTransitionCancel"),Wt(vd,"onTransitionEnd"),Hr("onMouseEnter",["mouseout","mouseover"]),Hr("onMouseLeave",["mouseout","mouseover"]),Hr("onPointerEnter",["pointerout","pointerover"]),Hr("onPointerLeave",["pointerout","pointerover"]),gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gr("onBeforeInput",["compositionend","keypress","textInput","paste"]),gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(js));function $h(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],c=r.event;r=r.listeners;e:{var f=void 0;if(t)for(var b=r.length-1;0<=b;b--){var v=r[b],N=v.instance,L=v.currentTarget;if(v=v.listener,N!==f&&c.isPropagationStopped())break e;f=v,c.currentTarget=L;try{f(c)}catch(F){Bl(F)}c.currentTarget=null,f=N}else for(b=0;b<r.length;b++){if(v=r[b],N=v.instance,L=v.currentTarget,v=v.listener,N!==f&&c.isPropagationStopped())break e;f=v,c.currentTarget=L;try{f(c)}catch(F){Bl(F)}c.currentTarget=null,f=N}}}}function Te(e,t){var a=t[Mi];a===void 0&&(a=t[Mi]=new Set);var r=e+"__bubble";a.has(r)||(Hh(t,e,2,!1),a.add(r))}function jc(e,t,a){var r=0;t&&(r|=4),Hh(a,e,r,t)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function Ec(e){if(!e[Wl]){e[Wl]=!0,Ou.forEach(function(a){a!=="selectionchange"&&(Dx.has(a)||jc(a,!1,e),jc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wl]||(t[Wl]=!0,jc("selectionchange",!1,t))}}function Hh(e,t,a,r){switch(dm(t)){case 2:var c=nb;break;case 8:c=sb;break;default:c=Bc}a=c.bind(null,t,a,e),c=void 0,!Qi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Nc(e,t,a,r,c){var f=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var b=r.tag;if(b===3||b===4){var v=r.stateNode.containerInfo;if(v===c)break;if(b===4)for(b=r.return;b!==null;){var N=b.tag;if((N===3||N===4)&&b.stateNode.containerInfo===c)return;b=b.return}for(;v!==null;){if(b=qr(v),b===null)return;if(N=b.tag,N===5||N===6||N===26||N===27){r=f=b;continue e}v=v.parentNode}}r=r.return}Pu(function(){var L=f,F=Yi(a),X=[];e:{var B=_d.get(e);if(B!==void 0){var $=hl,me=e;switch(e){case"keypress":if(dl(a)===0)break e;case"keydown":case"keyup":$=Eg;break;case"focusin":me="focus",$=Zi;break;case"focusout":me="blur",$=Zi;break;case"beforeblur":case"afterblur":$=Zi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Ag;break;case bd:case pd:case yd:$=xg;break;case vd:$=Cg;break;case"scroll":case"scrollend":$=dg;break;case"wheel":$=kg;break;case"copy":case"cut":case"paste":$=pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Iu;break;case"toggle":case"beforetoggle":$=Ug}var fe=(t&4)!==0,qe=!fe&&(e==="scroll"||e==="scrollend"),k=fe?B!==null?B+"Capture":null:B;fe=[];for(var C=L,M;C!==null;){var P=C;if(M=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||M===null||k===null||(P=Gn(C,k),P!=null&&fe.push(Es(C,P,M))),qe)break;C=C.return}0<fe.length&&(B=new $(B,me,null,a,F),X.push({event:B,listeners:fe}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",B&&a!==Gi&&(me=a.relatedTarget||a.fromElement)&&(qr(me)||me[zr]))break e;if(($||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,$?(me=a.relatedTarget||a.toElement,$=L,me=me?qr(me):null,me!==null&&(qe=d(me),fe=me.tag,me!==qe||fe!==5&&fe!==27&&fe!==6)&&(me=null)):($=null,me=L),$!==me)){if(fe=Zu,P="onMouseLeave",k="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(fe=Iu,P="onPointerLeave",k="onPointerEnter",C="pointer"),qe=$==null?B:Vn($),M=me==null?B:Vn(me),B=new fe(P,C+"leave",$,a,F),B.target=qe,B.relatedTarget=M,P=null,qr(F)===L&&(fe=new fe(k,C+"enter",me,a,F),fe.target=M,fe.relatedTarget=qe,P=fe),qe=P,$&&me)t:{for(fe=$,k=me,C=0,M=fe;M;M=yn(M))C++;for(M=0,P=k;P;P=yn(P))M++;for(;0<C-M;)fe=yn(fe),C--;for(;0<M-C;)k=yn(k),M--;for(;C--;){if(fe===k||k!==null&&fe===k.alternate)break t;fe=yn(fe),k=yn(k)}fe=null}else fe=null;$!==null&&Vh(X,B,$,fe,!1),me!==null&&qe!==null&&Vh(X,qe,me,fe,!0)}}e:{if(B=L?Vn(L):window,$=B.nodeName&&B.nodeName.toLowerCase(),$==="select"||$==="input"&&B.type==="file")var le=ld;else if(nd(B))if(id)le=Yg;else{le=Vg;var je=Hg}else $=B.nodeName,!$||$.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?L&&Vi(L.elementType)&&(le=ld):le=Gg;if(le&&(le=le(e,L))){sd(X,le,a,F);break e}je&&je(e,B,L),e==="focusout"&&L&&B.type==="number"&&L.memoizedProps.value!=null&&Hi(B,"number",B.value)}switch(je=L?Vn(L):window,e){case"focusin":(nd(je)||je.contentEditable==="true")&&(Xr=je,ao=L,Jn=null);break;case"focusout":Jn=ao=Xr=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,gd(X,a,F);break;case"selectionchange":if(Qg)break;case"keydown":case"keyup":gd(X,a,F)}var de;if(Ii)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Pr?ad(e,a)&&(he="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(he="onCompositionStart");he&&(Wu&&a.locale!=="ko"&&(Pr||he!=="onCompositionStart"?he==="onCompositionEnd"&&Pr&&(de=Xu()):(Ba=F,Pi="value"in Ba?Ba.value:Ba.textContent,Pr=!0)),je=ei(L,he),0<je.length&&(he=new Ju(he,e,null,a,F),X.push({event:he,listeners:je}),de?he.data=de:(de=rd(a),de!==null&&(he.data=de)))),(de=Lg?zg(e,a):qg(e,a))&&(he=ei(L,"onBeforeInput"),0<he.length&&(je=new Ju("onBeforeInput","beforeinput",null,a,F),X.push({event:je,listeners:he}),je.data=de)),Ax(X,e,L,a,F)}$h(X,t)})}function Es(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ei(e,t){for(var a=t+"Capture",r=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Gn(e,a),c!=null&&r.unshift(Es(e,c,f)),c=Gn(e,t),c!=null&&r.push(Es(e,c,f))),e.tag===3)return r;e=e.return}return[]}function yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vh(e,t,a,r,c){for(var f=t._reactName,b=[];a!==null&&a!==r;){var v=a,N=v.alternate,L=v.stateNode;if(v=v.tag,N!==null&&N===r)break;v!==5&&v!==26&&v!==27||L===null||(N=L,c?(L=Gn(a,f),L!=null&&b.unshift(Es(a,L,N))):c||(L=Gn(a,f),L!=null&&b.push(Es(a,L,N)))),a=a.return}b.length!==0&&e.push({event:t,listeners:b})}var kx=/\r\n?/g,Ox=/\u0000|\uFFFD/g;function Gh(e){return(typeof e=="string"?e:""+e).replace(kx,`
`).replace(Ox,"")}function Yh(e,t){return t=Gh(t),Gh(e)===t}function ti(){}function ze(e,t,a,r,c,f){switch(a){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Yr(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Yr(e,""+r);break;case"className":ll(e,"class",r);break;case"tabIndex":ll(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(e,a,r);break;case"style":Fu(e,r,f);break;case"data":if(t!=="object"){ll(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=cl(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(t!=="input"&&ze(e,t,"name",c.name,c,null),ze(e,t,"formEncType",c.formEncType,c,null),ze(e,t,"formMethod",c.formMethod,c,null),ze(e,t,"formTarget",c.formTarget,c,null)):(ze(e,t,"encType",c.encType,c,null),ze(e,t,"method",c.method,c,null),ze(e,t,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=cl(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=ti);break;case"onScroll":r!=null&&Te("scroll",e);break;case"onScrollEnd":r!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=cl(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":Te("beforetoggle",e),Te("toggle",e),sl(e,"popover",r);break;case"xlinkActuate":ba(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ba(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ba(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ba(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ba(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ba(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ba(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ba(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ba(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":sl(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cg.get(a)||a,sl(e,a,r))}}function Tc(e,t,a,r,c,f){switch(a){case"style":Fu(e,r,f);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof r=="string"?Yr(e,r):(typeof r=="number"||typeof r=="bigint")&&Yr(e,""+r);break;case"onScroll":r!=null&&Te("scroll",e);break;case"onScrollEnd":r!=null&&Te("scrollend",e);break;case"onClick":r!=null&&(e.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),f=e[Tt]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof r=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,r,c);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):sl(e,a,r)}}}function gt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var r=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:ze(e,t,f,b,a,null)}}c&&ze(e,t,"srcSet",a.srcSet,a,null),r&&ze(e,t,"src",a.src,a,null);return;case"input":Te("invalid",e);var v=f=b=c=null,N=null,L=null;for(r in a)if(a.hasOwnProperty(r)){var F=a[r];if(F!=null)switch(r){case"name":c=F;break;case"type":b=F;break;case"checked":N=F;break;case"defaultChecked":L=F;break;case"value":f=F;break;case"defaultValue":v=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(137,t));break;default:ze(e,t,r,F,a,null)}}Hu(e,f,v,N,L,b,c,!1),il(e);return;case"select":Te("invalid",e),r=b=f=null;for(c in a)if(a.hasOwnProperty(c)&&(v=a[c],v!=null))switch(c){case"value":f=v;break;case"defaultValue":b=v;break;case"multiple":r=v;default:ze(e,t,c,v,a,null)}t=f,a=b,e.multiple=!!r,t!=null?Gr(e,!!r,t,!1):a!=null&&Gr(e,!!r,a,!0);return;case"textarea":Te("invalid",e),f=c=r=null;for(b in a)if(a.hasOwnProperty(b)&&(v=a[b],v!=null))switch(b){case"value":r=v;break;case"defaultValue":c=v;break;case"children":f=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(l(91));break;default:ze(e,t,b,v,a,null)}Gu(e,r,c,f),il(e);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(r=a[N],r!=null))switch(N){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:ze(e,t,N,r,a,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(r=0;r<js.length;r++)Te(js[r],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(r=a[L],r!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:ze(e,t,L,r,a,null)}return;default:if(Vi(t)){for(F in a)a.hasOwnProperty(F)&&(r=a[F],r!==void 0&&Tc(e,t,F,r,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(r=a[v],r!=null&&ze(e,t,v,r,a,null))}function Ux(e,t,a,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,b=null,v=null,N=null,L=null,F=null;for($ in a){var X=a[$];if(a.hasOwnProperty($)&&X!=null)switch($){case"checked":break;case"value":break;case"defaultValue":N=X;default:r.hasOwnProperty($)||ze(e,t,$,null,r,X)}}for(var B in r){var $=r[B];if(X=a[B],r.hasOwnProperty(B)&&($!=null||X!=null))switch(B){case"type":f=$;break;case"name":c=$;break;case"checked":L=$;break;case"defaultChecked":F=$;break;case"value":b=$;break;case"defaultValue":v=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(l(137,t));break;default:$!==X&&ze(e,t,B,$,r,X)}}$i(e,b,v,N,L,F,f,c);return;case"select":$=b=v=B=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":$=N;default:r.hasOwnProperty(f)||ze(e,t,f,null,r,N)}for(c in r)if(f=r[c],N=a[c],r.hasOwnProperty(c)&&(f!=null||N!=null))switch(c){case"value":B=f;break;case"defaultValue":v=f;break;case"multiple":b=f;default:f!==N&&ze(e,t,c,f,r,N)}t=v,a=b,r=$,B!=null?Gr(e,!!a,B,!1):!!r!=!!a&&(t!=null?Gr(e,!!a,t,!0):Gr(e,!!a,a?[]:"",!1));return;case"textarea":$=B=null;for(v in a)if(c=a[v],a.hasOwnProperty(v)&&c!=null&&!r.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:ze(e,t,v,null,r,c)}for(b in r)if(c=r[b],f=a[b],r.hasOwnProperty(b)&&(c!=null||f!=null))switch(b){case"value":B=c;break;case"defaultValue":$=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==f&&ze(e,t,b,c,r,f)}Vu(e,B,$);return;case"option":for(var me in a)if(B=a[me],a.hasOwnProperty(me)&&B!=null&&!r.hasOwnProperty(me))switch(me){case"selected":e.selected=!1;break;default:ze(e,t,me,null,r,B)}for(N in r)if(B=r[N],$=a[N],r.hasOwnProperty(N)&&B!==$&&(B!=null||$!=null))switch(N){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:ze(e,t,N,B,r,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in a)B=a[fe],a.hasOwnProperty(fe)&&B!=null&&!r.hasOwnProperty(fe)&&ze(e,t,fe,null,r,B);for(L in r)if(B=r[L],$=a[L],r.hasOwnProperty(L)&&B!==$&&(B!=null||$!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(l(137,t));break;default:ze(e,t,L,B,r,$)}return;default:if(Vi(t)){for(var qe in a)B=a[qe],a.hasOwnProperty(qe)&&B!==void 0&&!r.hasOwnProperty(qe)&&Tc(e,t,qe,void 0,r,B);for(F in r)B=r[F],$=a[F],!r.hasOwnProperty(F)||B===$||B===void 0&&$===void 0||Tc(e,t,F,B,r,$);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!r.hasOwnProperty(k)&&ze(e,t,k,null,r,B);for(X in r)B=r[X],$=a[X],!r.hasOwnProperty(X)||B===$||B==null&&$==null||ze(e,t,X,B,r,$)}var Ac=null,Rc=null;function ai(e){return e.nodeType===9?e:e.ownerDocument}function Fh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Cc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dc=null;function Mx(){var e=window.event;return e&&e.type==="popstate"?e===Dc?!1:(Dc=e,!0):(Dc=null,!1)}var Ph=typeof setTimeout=="function"?setTimeout:void 0,Lx=typeof clearTimeout=="function"?clearTimeout:void 0,Xh=typeof Promise=="function"?Promise:void 0,zx=typeof queueMicrotask=="function"?queueMicrotask:typeof Xh<"u"?function(e){return Xh.resolve(null).then(e).catch(qx)}:Ph;function qx(e){setTimeout(function(){throw e})}function tr(e){return e==="head"}function Kh(e,t){var a=t,r=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<r&&8>r){a=r;var b=e.ownerDocument;if(a&1&&Ns(b.documentElement),a&2&&Ns(b.body),a&4)for(a=b.head,Ns(a),b=a.firstChild;b;){var v=b.nextSibling,N=b.nodeName;b[Hn]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=v}}if(c===0){e.removeChild(f),Us(t);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:r=a.charCodeAt(0)-48;else r=0;a=f}while(a);Us(t)}function kc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kc(a),Li(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Bx(e,t,a,r){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Hn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ta(e.nextSibling),e===null)break}return null}function $x(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ta(e.nextSibling),e===null))return null;return e}function Oc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Hx(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var r=function(){t(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function ta(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Uc=null;function Zh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Jh(e,t,a){switch(t=ai(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Ns(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Li(e)}var Zt=new Map,Ih=new Set;function ri(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Da=J.d;J.d={f:Vx,r:Gx,D:Yx,C:Fx,L:Qx,m:Px,X:Kx,S:Xx,M:Zx};function Vx(){var e=Da.f(),t=Xl();return e||t}function Gx(e){var t=Br(e);t!==null&&t.tag===5&&t.type==="form"?pf(t):Da.r(e)}var vn=typeof document>"u"?null:document;function Wh(e,t,a){var r=vn;if(r&&typeof t=="string"&&t){var c=Gt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Ih.has(c)||(Ih.add(c),e={rel:e,crossOrigin:a,href:t},r.querySelector(c)===null&&(t=r.createElement("link"),gt(t,"link",e),lt(t),r.head.appendChild(t)))}}function Yx(e){Da.D(e),Wh("dns-prefetch",e,null)}function Fx(e,t){Da.C(e,t),Wh("preconnect",e,t)}function Qx(e,t,a){Da.L(e,t,a);var r=vn;if(r&&e&&t){var c='link[rel="preload"][as="'+Gt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Gt(a.imageSizes)+'"]')):c+='[href="'+Gt(e)+'"]';var f=c;switch(t){case"style":f=_n(e);break;case"script":f=wn(e)}Zt.has(f)||(e=p({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Zt.set(f,e),r.querySelector(c)!==null||t==="style"&&r.querySelector(Ts(f))||t==="script"&&r.querySelector(As(f))||(t=r.createElement("link"),gt(t,"link",e),lt(t),r.head.appendChild(t)))}}function Px(e,t){Da.m(e,t);var a=vn;if(a&&e){var r=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Gt(r)+'"][href="'+Gt(e)+'"]',f=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=wn(e)}if(!Zt.has(f)&&(e=p({rel:"modulepreload",href:e},t),Zt.set(f,e),a.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(As(f)))return}r=a.createElement("link"),gt(r,"link",e),lt(r),a.head.appendChild(r)}}}function Xx(e,t,a){Da.S(e,t,a);var r=vn;if(r&&e){var c=$r(r).hoistableStyles,f=_n(e);t=t||"default";var b=c.get(f);if(!b){var v={loading:0,preload:null};if(b=r.querySelector(Ts(f)))v.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Zt.get(f))&&Mc(e,a);var N=b=r.createElement("link");lt(N),gt(N,"link",e),N._p=new Promise(function(L,F){N.onload=L,N.onerror=F}),N.addEventListener("load",function(){v.loading|=1}),N.addEventListener("error",function(){v.loading|=2}),v.loading|=4,ni(b,t,r)}b={type:"stylesheet",instance:b,count:1,state:v},c.set(f,b)}}}function Kx(e,t){Da.X(e,t);var a=vn;if(a&&e){var r=$r(a).hoistableScripts,c=wn(e),f=r.get(c);f||(f=a.querySelector(As(c)),f||(e=p({src:e,async:!0},t),(t=Zt.get(c))&&Lc(e,t),f=a.createElement("script"),lt(f),gt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(c,f))}}function Zx(e,t){Da.M(e,t);var a=vn;if(a&&e){var r=$r(a).hoistableScripts,c=wn(e),f=r.get(c);f||(f=a.querySelector(As(c)),f||(e=p({src:e,async:!0,type:"module"},t),(t=Zt.get(c))&&Lc(e,t),f=a.createElement("script"),lt(f),gt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(c,f))}}function em(e,t,a,r){var c=(c=I.current)?ri(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=_n(a.href),a=$r(c).hoistableStyles,r=a.get(t),r||(r={type:"style",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=_n(a.href);var f=$r(c).hoistableStyles,b=f.get(e);if(b||(c=c.ownerDocument||c,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=c.querySelector(Ts(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Zt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zt.set(e,a),f||Jx(c,e,a,b.state))),t&&r===null)throw Error(l(528,""));return b}if(t&&r!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=wn(a),a=$r(c).hoistableScripts,r=a.get(t),r||(r={type:"script",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function _n(e){return'href="'+Gt(e)+'"'}function Ts(e){return'link[rel="stylesheet"]['+e+"]"}function tm(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Jx(e,t,a,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),gt(t,"link",a),lt(t),e.head.appendChild(t))}function wn(e){return'[src="'+Gt(e)+'"]'}function As(e){return"script[async]"+e}function am(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(r)return t.instance=r,lt(r),r;var c=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),lt(r),gt(r,"style",c),ni(r,a.precedence,e),t.instance=r;case"stylesheet":c=_n(a.href);var f=e.querySelector(Ts(c));if(f)return t.state.loading|=4,t.instance=f,lt(f),f;r=tm(a),(c=Zt.get(c))&&Mc(r,c),f=(e.ownerDocument||e).createElement("link"),lt(f);var b=f;return b._p=new Promise(function(v,N){b.onload=v,b.onerror=N}),gt(f,"link",r),t.state.loading|=4,ni(f,a.precedence,e),t.instance=f;case"script":return f=wn(a.src),(c=e.querySelector(As(f)))?(t.instance=c,lt(c),c):(r=a,(c=Zt.get(f))&&(r=p({},a),Lc(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),lt(c),gt(c,"link",r),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,ni(r,a.precedence,e));return t.instance}function ni(e,t,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,f=c,b=0;b<r.length;b++){var v=r[b];if(v.dataset.precedence===t)f=v;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Mc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var si=null;function rm(e,t,a){if(si===null){var r=new Map,c=si=new Map;c.set(a,r)}else c=si,r=c.get(a),r||(r=new Map,c.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[Hn]||f[vt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(t)||"";b=e+b;var v=r.get(b);v?v.push(f):r.set(b,[f])}}return r}function nm(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Ix(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function sm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Rs=null;function Wx(){}function eb(e,t,a){if(Rs===null)throw Error(l(475));var r=Rs;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var c=_n(a.href),f=e.querySelector(Ts(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=li.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=f,lt(f);return}f=e.ownerDocument||e,a=tm(a),(c=Zt.get(c))&&Mc(a,c),f=f.createElement("link"),lt(f);var b=f;b._p=new Promise(function(v,N){b.onload=v,b.onerror=N}),gt(f,"link",a),t.instance=f}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(r.count++,t=li.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function tb(){if(Rs===null)throw Error(l(475));var e=Rs;return e.stylesheets&&e.count===0&&zc(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&zc(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function li(){if(this.count--,this.count===0){if(this.stylesheets)zc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ii=null;function zc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ii=new Map,t.forEach(ab,e),ii=null,li.call(e))}function ab(e,t){if(!(t.state.loading&4)){var a=ii.get(e);if(a)var r=a.get(null);else{a=new Map,ii.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var b=c[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),r=b)}r&&a.set(null,r)}c=t.instance,b=c.getAttribute("data-precedence"),f=a.get(b)||r,f===r&&a.set(null,c),a.set(b,c),this.count++,r=li.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Cs={$$typeof:G,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function rb(e,t,a,r,c,f,b,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=La(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=La(0),this.hiddenUpdates=La(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function lm(e,t,a,r,c,f,b,v,N,L,F,X){return e=new rb(e,t,a,b,v,N,L,X),t=1,f===!0&&(t|=24),f=Ut(3,null,null,t),e.current=f,f.stateNode=e,t=po(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:r,isDehydrated:a,cache:t},wo(f),e}function im(e){return e?(e=Ir,e):Ir}function om(e,t,a,r,c,f){c=im(c),r.context===null?r.context=c:r.pendingContext=c,r=Va(t),r.payload={element:a},f=f===void 0?null:f,f!==null&&(r.callback=f),a=Ga(e,r,t),a!==null&&(Bt(a,e,t),ls(a,e,t))}function cm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function qc(e,t){cm(e,t),(e=e.alternate)&&cm(e,t)}function um(e){if(e.tag===13){var t=Jr(e,67108864);t!==null&&Bt(t,e,67108864),qc(e,67108864)}}var oi=!0;function nb(e,t,a,r){var c=q.T;q.T=null;var f=J.p;try{J.p=2,Bc(e,t,a,r)}finally{J.p=f,q.T=c}}function sb(e,t,a,r){var c=q.T;q.T=null;var f=J.p;try{J.p=8,Bc(e,t,a,r)}finally{J.p=f,q.T=c}}function Bc(e,t,a,r){if(oi){var c=$c(r);if(c===null)Nc(e,t,r,ci,a),fm(e,r);else if(ib(c,e,t,a,r))r.stopPropagation();else if(fm(e,r),t&4&&-1<lb.indexOf(e)){for(;c!==null;){var f=Br(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Fe(f.pendingLanes);if(b!==0){var v=f;for(v.pendingLanes|=2,v.entangledLanes|=2;b;){var N=1<<31-yt(b);v.entanglements[1]|=N,b&=~N}fa(f),(Ue&6)===0&&(Ql=Ht()+500,Ss(0))}}break;case 13:v=Jr(f,2),v!==null&&Bt(v,f,2),Xl(),qc(f,2)}if(f=$c(r),f===null&&Nc(e,t,r,ci,a),f===c)break;c=f}c!==null&&r.stopPropagation()}else Nc(e,t,r,null,a)}}function $c(e){return e=Yi(e),Hc(e)}var ci=null;function Hc(e){if(ci=null,e=qr(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ci=e,null}function dm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Di()){case el:return 2;case tl:return 8;case hr:case al:return 32;case rl:return 268435456;default:return 32}default:return 32}}var Vc=!1,ar=null,rr=null,nr=null,Ds=new Map,ks=new Map,sr=[],lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fm(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Ds.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(t.pointerId)}}function Os(e,t,a,r,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Br(t),t!==null&&um(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function ib(e,t,a,r,c){switch(t){case"focusin":return ar=Os(ar,e,t,a,r,c),!0;case"dragenter":return rr=Os(rr,e,t,a,r,c),!0;case"mouseover":return nr=Os(nr,e,t,a,r,c),!0;case"pointerover":var f=c.pointerId;return Ds.set(f,Os(Ds.get(f)||null,e,t,a,r,c)),!0;case"gotpointercapture":return f=c.pointerId,ks.set(f,Os(ks.get(f)||null,e,t,a,r,c)),!0}return!1}function hm(e){var t=qr(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,eg(e.priority,function(){if(a.tag===13){var r=qt();r=Oi(r);var c=Jr(a,r);c!==null&&Bt(c,a,r),qc(a,r)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ui(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=$c(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Gi=r,a.target.dispatchEvent(r),Gi=null}else return t=Br(a),t!==null&&um(t),e.blockedOn=a,!1;t.shift()}return!0}function mm(e,t,a){ui(e)&&a.delete(t)}function ob(){Vc=!1,ar!==null&&ui(ar)&&(ar=null),rr!==null&&ui(rr)&&(rr=null),nr!==null&&ui(nr)&&(nr=null),Ds.forEach(mm),ks.forEach(mm)}function di(e,t){e.blockedOn===t&&(e.blockedOn=null,Vc||(Vc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ob)))}var fi=null;function gm(e){fi!==e&&(fi=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){fi===e&&(fi=null);for(var t=0;t<e.length;t+=3){var a=e[t],r=e[t+1],c=e[t+2];if(typeof r!="function"){if(Hc(r||a)===null)continue;break}var f=Br(a);f!==null&&(e.splice(t,3),t-=3,Ho(f,{pending:!0,data:c,method:a.method,action:r},r,c))}}))}function Us(e){function t(N){return di(N,e)}ar!==null&&di(ar,e),rr!==null&&di(rr,e),nr!==null&&di(nr,e),Ds.forEach(t),ks.forEach(t);for(var a=0;a<sr.length;a++){var r=sr[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<sr.length&&(a=sr[0],a.blockedOn===null);)hm(a),a.blockedOn===null&&sr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var c=a[r],f=a[r+1],b=c[Tt]||null;if(typeof f=="function")b||gm(a);else if(b){var v=null;if(f&&f.hasAttribute("formAction")){if(c=f,b=f[Tt]||null)v=b.formAction;else if(Hc(c)!==null)continue}else v=b.action;typeof v=="function"?a[r+1]=v:(a.splice(r,3),r-=3),gm(a)}}}function Gc(e){this._internalRoot=e}hi.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,r=qt();om(a,r,e,t,null,null)},hi.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;om(e.current,2,null,e,null,null),Xl(),t[zr]=null}};function hi(e){this._internalRoot=e}hi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Du();e={blockedOn:null,target:e,priority:t};for(var a=0;a<sr.length&&t!==0&&t<sr[a].priority;a++);sr.splice(a,0,e),a===0&&hm(e)}};var xm=n.version;if(xm!=="19.1.0")throw Error(l(527,xm,"19.1.0"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var cb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{mr=mi.inject(cb),pt=mi}catch{}}return Ls.createRoot=function(e,t){if(!o(e))throw Error(l(299));var a=!1,r="",c=kf,f=Of,b=Uf,v=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(v=t.unstable_transitionCallbacks)),t=lm(e,1,!1,null,null,a,r,c,f,b,v,null),e[zr]=t.current,Ec(e),new Gc(t)},Ls.hydrateRoot=function(e,t,a){if(!o(e))throw Error(l(299));var r=!1,c="",f=kf,b=Of,v=Uf,N=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),t=lm(e,1,!0,t,a??null,r,c,f,b,v,N,L),t.context=im(null),a=t.current,r=qt(),r=Oi(r),c=Va(r),c.callback=null,Ga(a,c,r),a=r,t.current.lanes=a,za(t,a),fa(t),e[zr]=t.current,Ec(e),new hi(t)},Ls.version="19.1.0",Ls}var Nm;function _b(){if(Nm)return Qc.exports;Nm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Qc.exports=vb(),Qc.exports}var wb=_b(),zs={},Tm;function Sb(){if(Tm)return zs;Tm=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.parse=h,zs.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,l=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,d=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function h(y,A){const E=new d,R=y.length;if(R<2)return E;const T=(A==null?void 0:A.decode)||p;let O=0;do{const H=y.indexOf("=",O);if(H===-1)break;const G=y.indexOf(";",O),Z=G===-1?R:G;if(H>Z){O=y.lastIndexOf(";",H-1)+1;continue}const V=x(y,O,H),te=m(y,H,V),se=y.slice(V,te);if(E[se]===void 0){let ie=x(y,H+1,Z),ne=m(y,Z,ie);const oe=T(y.slice(ie,ne));E[se]=oe}O=Z+1}while(O<R);return E}function x(y,A,E){do{const R=y.charCodeAt(A);if(R!==32&&R!==9)return A}while(++A<E);return E}function m(y,A,E){for(;A>E;){const R=y.charCodeAt(--A);if(R!==32&&R!==9)return A+1}return E}function g(y,A,E){const R=(E==null?void 0:E.encode)||encodeURIComponent;if(!i.test(y))throw new TypeError(`argument name is invalid: ${y}`);const T=R(A);if(!n.test(T))throw new TypeError(`argument val is invalid: ${A}`);let O=y+"="+T;if(!E)return O;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);O+="; Max-Age="+E.maxAge}if(E.domain){if(!s.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);O+="; Domain="+E.domain}if(E.path){if(!l.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);O+="; Path="+E.path}if(E.expires){if(!_(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);O+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(O+="; HttpOnly"),E.secure&&(O+="; Secure"),E.partitioned&&(O+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return O}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function _(y){return o.call(y)==="[object Date]"}return zs}Sb();var Am="popstate";function jb(i={}){function n(l,o){let{pathname:d,search:h,hash:x}=l.location;return su("",{pathname:d,search:h,hash:x},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(l,o){return typeof o=="string"?o:Fs(o)}return Nb(n,s,null,i)}function Pe(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function ma(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Eb(){return Math.random().toString(36).substring(2,10)}function Rm(i,n){return{usr:i.state,key:i.key,idx:n}}function su(i,n,s=null,l){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof n=="string"?zn(n):n,state:s,key:n&&n.key||l||Eb()}}function Fs({pathname:i="/",search:n="",hash:s=""}){return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(i+=s.charAt(0)==="#"?s:"#"+s),i}function zn(i){let n={};if(i){let s=i.indexOf("#");s>=0&&(n.hash=i.substring(s),i=i.substring(0,s));let l=i.indexOf("?");l>=0&&(n.search=i.substring(l),i=i.substring(0,l)),i&&(n.pathname=i)}return n}function Nb(i,n,s,l={}){let{window:o=document.defaultView,v5Compat:d=!1}=l,h=o.history,x="POP",m=null,g=p();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function p(){return(h.state||{idx:null}).idx}function _(){x="POP";let T=p(),O=T==null?null:T-g;g=T,m&&m({action:x,location:R.location,delta:O})}function y(T,O){x="PUSH";let H=su(R.location,T,O);g=p()+1;let G=Rm(H,g),Z=R.createHref(H);try{h.pushState(G,"",Z)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(Z)}d&&m&&m({action:x,location:R.location,delta:1})}function A(T,O){x="REPLACE";let H=su(R.location,T,O);g=p();let G=Rm(H,g),Z=R.createHref(H);h.replaceState(G,"",Z),d&&m&&m({action:x,location:R.location,delta:0})}function E(T){return Tb(T)}let R={get action(){return x},get location(){return i(o,h)},listen(T){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Am,_),m=T,()=>{o.removeEventListener(Am,_),m=null}},createHref(T){return n(o,T)},createURL:E,encodeLocation(T){let O=E(T);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:y,replace:A,go(T){return h.go(T)}};return R}function Tb(i,n=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Pe(s,"No window.location.(origin|href) available to create URL");let l=typeof i=="string"?i:Fs(i);return l=l.replace(/ $/,"%20"),!n&&l.startsWith("//")&&(l=s+l),new URL(l,s)}function d0(i,n,s="/"){return Ab(i,n,s,!1)}function Ab(i,n,s,l){let o=typeof n=="string"?zn(n):n,d=Ua(o.pathname||"/",s);if(d==null)return null;let h=f0(i);Rb(h);let x=null;for(let m=0;x==null&&m<h.length;++m){let g=$b(d);x=qb(h[m],g,l)}return x}function f0(i,n=[],s=[],l=""){let o=(d,h,x)=>{let m={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};m.relativePath.startsWith("/")&&(Pe(m.relativePath.startsWith(l),`Absolute route path "${m.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(l.length));let g=Oa([l,m.relativePath]),p=s.concat(m);d.children&&d.children.length>0&&(Pe(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),f0(d.children,n,p,g)),!(d.path==null&&!d.index)&&n.push({path:g,score:Lb(g,d.index),routesMeta:p})};return i.forEach((d,h)=>{var x;if(d.path===""||!((x=d.path)!=null&&x.includes("?")))o(d,h);else for(let m of h0(d.path))o(d,h,m)}),n}function h0(i){let n=i.split("/");if(n.length===0)return[];let[s,...l]=n,o=s.endsWith("?"),d=s.replace(/\?$/,"");if(l.length===0)return o?[d,""]:[d];let h=h0(l.join("/")),x=[];return x.push(...h.map(m=>m===""?d:[d,m].join("/"))),o&&x.push(...h),x.map(m=>i.startsWith("/")&&m===""?"/":m)}function Rb(i){i.sort((n,s)=>n.score!==s.score?s.score-n.score:zb(n.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}var Cb=/^:[\w-]+$/,Db=3,kb=2,Ob=1,Ub=10,Mb=-2,Cm=i=>i==="*";function Lb(i,n){let s=i.split("/"),l=s.length;return s.some(Cm)&&(l+=Mb),n&&(l+=kb),s.filter(o=>!Cm(o)).reduce((o,d)=>o+(Cb.test(d)?Db:d===""?Ob:Ub),l)}function zb(i,n){return i.length===n.length&&i.slice(0,-1).every((l,o)=>l===n[o])?i[i.length-1]-n[n.length-1]:0}function qb(i,n,s=!1){let{routesMeta:l}=i,o={},d="/",h=[];for(let x=0;x<l.length;++x){let m=l[x],g=x===l.length-1,p=d==="/"?n:n.slice(d.length)||"/",_=ji({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},p),y=m.route;if(!_&&g&&s&&!l[l.length-1].route.index&&(_=ji({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!_)return null;Object.assign(o,_.params),h.push({params:o,pathname:Oa([d,_.pathname]),pathnameBase:Yb(Oa([d,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(d=Oa([d,_.pathnameBase]))}return h}function ji(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[s,l]=Bb(i.path,i.caseSensitive,i.end),o=n.match(s);if(!o)return null;let d=o[0],h=d.replace(/(.)\/+$/,"$1"),x=o.slice(1);return{params:l.reduce((g,{paramName:p,isOptional:_},y)=>{if(p==="*"){let E=x[y]||"";h=d.slice(0,d.length-E.length).replace(/(.)\/+$/,"$1")}const A=x[y];return _&&!A?g[p]=void 0:g[p]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:h,pattern:i}}function Bb(i,n=!1,s=!0){ma(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let l=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,x,m)=>(l.push({paramName:x,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(l.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),l]}function $b(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return ma(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),i}}function Ua(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,l=i.charAt(s);return l&&l!=="/"?null:i.slice(s)||"/"}function Hb(i,n="/"){let{pathname:s,search:l="",hash:o=""}=typeof i=="string"?zn(i):i;return{pathname:s?s.startsWith("/")?s:Vb(s,n):n,search:Fb(l),hash:Qb(o)}}function Vb(i,n){let s=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function Zc(i,n,s,l){return`Cannot include a '${i}' character in a manually specified \`to.${n}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gb(i){return i.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function m0(i){let n=Gb(i);return n.map((s,l)=>l===n.length-1?s.pathname:s.pathnameBase)}function g0(i,n,s,l=!1){let o;typeof i=="string"?o=zn(i):(o={...i},Pe(!o.pathname||!o.pathname.includes("?"),Zc("?","pathname","search",o)),Pe(!o.pathname||!o.pathname.includes("#"),Zc("#","pathname","hash",o)),Pe(!o.search||!o.search.includes("#"),Zc("#","search","hash",o)));let d=i===""||o.pathname==="",h=d?"/":o.pathname,x;if(h==null)x=s;else{let _=n.length-1;if(!l&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}x=_>=0?n[_]:"/"}let m=Hb(o,x),g=h&&h!=="/"&&h.endsWith("/"),p=(d||h===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(g||p)&&(m.pathname+="/"),m}var Oa=i=>i.join("/").replace(/\/\/+/g,"/"),Yb=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Fb=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Qb=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Pb(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var x0=["POST","PUT","PATCH","DELETE"];new Set(x0);var Xb=["GET",...x0];new Set(Xb);var qn=w.createContext(null);qn.displayName="DataRouter";var Ti=w.createContext(null);Ti.displayName="DataRouterState";var b0=w.createContext({isTransitioning:!1});b0.displayName="ViewTransition";var Kb=w.createContext(new Map);Kb.displayName="Fetchers";var Zb=w.createContext(null);Zb.displayName="Await";var ga=w.createContext(null);ga.displayName="Navigation";var Ks=w.createContext(null);Ks.displayName="Location";var xa=w.createContext({outlet:null,matches:[],isDataRoute:!1});xa.displayName="Route";var pu=w.createContext(null);pu.displayName="RouteError";function Jb(i,{relative:n}={}){Pe(Zs(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=w.useContext(ga),{hash:o,pathname:d,search:h}=Js(i,{relative:n}),x=d;return s!=="/"&&(x=d==="/"?s:Oa([s,d])),l.createHref({pathname:x,search:h,hash:o})}function Zs(){return w.useContext(Ks)!=null}function Ma(){return Pe(Zs(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ks).location}var p0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function y0(i){w.useContext(ga).static||w.useLayoutEffect(i)}function sa(){let{isDataRoute:i}=w.useContext(xa);return i?dp():Ib()}function Ib(){Pe(Zs(),"useNavigate() may be used only in the context of a <Router> component.");let i=w.useContext(qn),{basename:n,navigator:s}=w.useContext(ga),{matches:l}=w.useContext(xa),{pathname:o}=Ma(),d=JSON.stringify(m0(l)),h=w.useRef(!1);return y0(()=>{h.current=!0}),w.useCallback((m,g={})=>{if(ma(h.current,p0),!h.current)return;if(typeof m=="number"){s.go(m);return}let p=g0(m,JSON.parse(d),o,g.relative==="path");i==null&&n!=="/"&&(p.pathname=p.pathname==="/"?n:Oa([n,p.pathname])),(g.replace?s.replace:s.push)(p,g.state,g)},[n,s,d,o,i])}w.createContext(null);function Wb(){let{matches:i}=w.useContext(xa),n=i[i.length-1];return n?n.params:{}}function Js(i,{relative:n}={}){let{matches:s}=w.useContext(xa),{pathname:l}=Ma(),o=JSON.stringify(m0(s));return w.useMemo(()=>g0(i,JSON.parse(o),l,n==="path"),[i,o,l,n])}function ep(i,n){return v0(i,n)}function v0(i,n,s,l){var O;Pe(Zs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=w.useContext(ga),{matches:d}=w.useContext(xa),h=d[d.length-1],x=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",p=h&&h.route;{let H=p&&p.path||"";_0(m,!p||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let _=Ma(),y;if(n){let H=typeof n=="string"?zn(n):n;Pe(g==="/"||((O=H.pathname)==null?void 0:O.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${H.pathname}" was given in the \`location\` prop.`),y=H}else y=_;let A=y.pathname||"/",E=A;if(g!=="/"){let H=g.replace(/^\//,"").split("/");E="/"+A.replace(/^\//,"").split("/").slice(H.length).join("/")}let R=d0(i,{pathname:E});ma(p||R!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ma(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=sp(R&&R.map(H=>Object.assign({},H,{params:Object.assign({},x,H.params),pathname:Oa([g,o.encodeLocation?o.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:Oa([g,o.encodeLocation?o.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),d,s,l);return n&&T?w.createElement(Ks.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function tp(){let i=up(),n=Pb(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),s=i instanceof Error?i.stack:null,l="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:l},d={padding:"2px 4px",backgroundColor:l},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:d},"ErrorBoundary")," or"," ",w.createElement("code",{style:d},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},n),s?w.createElement("pre",{style:o},s):null,h)}var ap=w.createElement(tp,null),rp=class extends w.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){console.error("React Router caught the following error during render",i,n)}render(){return this.state.error!==void 0?w.createElement(xa.Provider,{value:this.props.routeContext},w.createElement(pu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function np({routeContext:i,match:n,children:s}){let l=w.useContext(qn);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(xa.Provider,{value:i},s)}function sp(i,n=[],s=null,l=null){if(i==null){if(!s)return null;if(s.errors)i=s.matches;else if(n.length===0&&!s.initialized&&s.matches.length>0)i=s.matches;else return null}let o=i,d=s==null?void 0:s.errors;if(d!=null){let m=o.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);Pe(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,x=-1;if(s)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(x=m),g.route.id){let{loaderData:p,errors:_}=s,y=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!_||_[g.route.id]===void 0);if(g.route.lazy||y){h=!0,x>=0?o=o.slice(0,x+1):o=[o[0]];break}}}return o.reduceRight((m,g,p)=>{let _,y=!1,A=null,E=null;s&&(_=d&&g.route.id?d[g.route.id]:void 0,A=g.route.errorElement||ap,h&&(x<0&&p===0?(_0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,E=null):x===p&&(y=!0,E=g.route.hydrateFallbackElement||null)));let R=n.concat(o.slice(0,p+1)),T=()=>{let O;return _?O=A:y?O=E:g.route.Component?O=w.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=m,w.createElement(np,{match:g,routeContext:{outlet:m,matches:R,isDataRoute:s!=null},children:O})};return s&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?w.createElement(rp,{location:s.location,revalidation:s.revalidation,component:A,error:_,children:T(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):T()},null)}function yu(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lp(i){let n=w.useContext(qn);return Pe(n,yu(i)),n}function ip(i){let n=w.useContext(Ti);return Pe(n,yu(i)),n}function op(i){let n=w.useContext(xa);return Pe(n,yu(i)),n}function vu(i){let n=op(i),s=n.matches[n.matches.length-1];return Pe(s.route.id,`${i} can only be used on routes that contain a unique "id"`),s.route.id}function cp(){return vu("useRouteId")}function up(){var l;let i=w.useContext(pu),n=ip("useRouteError"),s=vu("useRouteError");return i!==void 0?i:(l=n.errors)==null?void 0:l[s]}function dp(){let{router:i}=lp("useNavigate"),n=vu("useNavigate"),s=w.useRef(!1);return y0(()=>{s.current=!0}),w.useCallback(async(o,d={})=>{ma(s.current,p0),s.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:n,...d}))},[i,n])}var Dm={};function _0(i,n,s){!n&&!Dm[i]&&(Dm[i]=!0,ma(!1,s))}w.memo(fp);function fp({routes:i,future:n,state:s}){return v0(i,void 0,s,n)}function nt(i){Pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hp({basename:i="/",children:n=null,location:s,navigationType:l="POP",navigator:o,static:d=!1}){Pe(!Zs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),x=w.useMemo(()=>({basename:h,navigator:o,static:d,future:{}}),[h,o,d]);typeof s=="string"&&(s=zn(s));let{pathname:m="/",search:g="",hash:p="",state:_=null,key:y="default"}=s,A=w.useMemo(()=>{let E=Ua(m,h);return E==null?null:{location:{pathname:E,search:g,hash:p,state:_,key:y},navigationType:l}},[h,m,g,p,_,y,l]);return ma(A!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:w.createElement(ga.Provider,{value:x},w.createElement(Ks.Provider,{children:n,value:A}))}function mp({children:i,location:n}){return ep(lu(i),n)}function lu(i,n=[]){let s=[];return w.Children.forEach(i,(l,o)=>{if(!w.isValidElement(l))return;let d=[...n,o];if(l.type===w.Fragment){s.push.apply(s,lu(l.props.children,d));return}Pe(l.type===nt,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pe(!l.props.index||!l.props.children,"An index route cannot have child routes.");let h={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(h.children=lu(l.props.children,d)),s.push(h)}),s}var wi="get",Si="application/x-www-form-urlencoded";function Ai(i){return i!=null&&typeof i.tagName=="string"}function gp(i){return Ai(i)&&i.tagName.toLowerCase()==="button"}function xp(i){return Ai(i)&&i.tagName.toLowerCase()==="form"}function bp(i){return Ai(i)&&i.tagName.toLowerCase()==="input"}function pp(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function yp(i,n){return i.button===0&&(!n||n==="_self")&&!pp(i)}var gi=null;function vp(){if(gi===null)try{new FormData(document.createElement("form"),0),gi=!1}catch{gi=!0}return gi}var _p=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jc(i){return i!=null&&!_p.has(i)?(ma(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Si}"`),null):i}function wp(i,n){let s,l,o,d,h;if(xp(i)){let x=i.getAttribute("action");l=x?Ua(x,n):null,s=i.getAttribute("method")||wi,o=Jc(i.getAttribute("enctype"))||Si,d=new FormData(i)}else if(gp(i)||bp(i)&&(i.type==="submit"||i.type==="image")){let x=i.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||x.getAttribute("action");if(l=m?Ua(m,n):null,s=i.getAttribute("formmethod")||x.getAttribute("method")||wi,o=Jc(i.getAttribute("formenctype"))||Jc(x.getAttribute("enctype"))||Si,d=new FormData(x,i),!vp()){let{name:g,type:p,value:_}=i;if(p==="image"){let y=g?`${g}.`:"";d.append(`${y}x`,"0"),d.append(`${y}y`,"0")}else g&&d.append(g,_)}}else{if(Ai(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=wi,l=null,o=Si,h=i}return d&&o==="text/plain"&&(h=d,d=void 0),{action:l,method:s.toLowerCase(),encType:o,formData:d,body:h}}function _u(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}async function Sp(i,n){if(i.id in n)return n[i.id];try{let s=await import(i.module);return n[i.id]=s,s}catch(s){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jp(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Ep(i,n,s){let l=await Promise.all(i.map(async o=>{let d=n.routes[o.route.id];if(d){let h=await Sp(d,s);return h.links?h.links():[]}return[]}));return Rp(l.flat(1).filter(jp).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function km(i,n,s,l,o,d){let h=(m,g)=>s[g]?m.route.id!==s[g].route.id:!0,x=(m,g)=>{var p;return s[g].pathname!==m.pathname||((p=s[g].route.path)==null?void 0:p.endsWith("*"))&&s[g].params["*"]!==m.params["*"]};return d==="assets"?n.filter((m,g)=>h(m,g)||x(m,g)):d==="data"?n.filter((m,g)=>{var _;let p=l.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(h(m,g)||x(m,g))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((_=s[0])==null?void 0:_.params)||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Np(i,n,{includeHydrateFallback:s}={}){return Tp(i.map(l=>{let o=n.routes[l.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),s&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function Tp(i){return[...new Set(i)]}function Ap(i){let n={},s=Object.keys(i).sort();for(let l of s)n[l]=i[l];return n}function Rp(i,n){let s=new Set;return new Set(n),i.reduce((l,o)=>{let d=JSON.stringify(Ap(o));return s.has(d)||(s.add(d),l.push({key:d,link:o})),l},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Cp=new Set([100,101,204,205]);function Dp(i,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname="_root.data":n&&Ua(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function w0(){let i=w.useContext(qn);return _u(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function kp(){let i=w.useContext(Ti);return _u(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var wu=w.createContext(void 0);wu.displayName="FrameworkContext";function S0(){let i=w.useContext(wu);return _u(i,"You must render this element inside a <HydratedRouter> element"),i}function Op(i,n){let s=w.useContext(wu),[l,o]=w.useState(!1),[d,h]=w.useState(!1),{onFocus:x,onBlur:m,onMouseEnter:g,onMouseLeave:p,onTouchStart:_}=n,y=w.useRef(null);w.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let R=O=>{O.forEach(H=>{h(H.isIntersecting)})},T=new IntersectionObserver(R,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[i]),w.useEffect(()=>{if(l){let R=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(R)}}},[l]);let A=()=>{o(!0)},E=()=>{o(!1),h(!1)};return s?i!=="intent"?[d,y,{}]:[d,y,{onFocus:qs(x,A),onBlur:qs(m,E),onMouseEnter:qs(g,A),onMouseLeave:qs(p,E),onTouchStart:qs(_,A)}]:[!1,y,{}]}function qs(i,n){return s=>{i&&i(s),s.defaultPrevented||n(s)}}function Up({page:i,...n}){let{router:s}=w0(),l=w.useMemo(()=>d0(s.routes,i,s.basename),[s.routes,i,s.basename]);return l?w.createElement(Lp,{page:i,matches:l,...n}):null}function Mp(i){let{manifest:n,routeModules:s}=S0(),[l,o]=w.useState([]);return w.useEffect(()=>{let d=!1;return Ep(i,n,s).then(h=>{d||o(h)}),()=>{d=!0}},[i,n,s]),l}function Lp({page:i,matches:n,...s}){let l=Ma(),{manifest:o,routeModules:d}=S0(),{basename:h}=w0(),{loaderData:x,matches:m}=kp(),g=w.useMemo(()=>km(i,n,m,o,l,"data"),[i,n,m,o,l]),p=w.useMemo(()=>km(i,n,m,o,l,"assets"),[i,n,m,o,l]),_=w.useMemo(()=>{if(i===l.pathname+l.search+l.hash)return[];let E=new Set,R=!1;if(n.forEach(O=>{var G;let H=o.routes[O.route.id];!H||!H.hasLoader||(!g.some(Z=>Z.route.id===O.route.id)&&O.route.id in x&&((G=d[O.route.id])!=null&&G.shouldRevalidate)||H.hasClientLoader?R=!0:E.add(O.route.id))}),E.size===0)return[];let T=Dp(i,h);return R&&E.size>0&&T.searchParams.set("_routes",n.filter(O=>E.has(O.route.id)).map(O=>O.route.id).join(",")),[T.pathname+T.search]},[h,x,l,o,g,n,i,d]),y=w.useMemo(()=>Np(p,o),[p,o]),A=Mp(p);return w.createElement(w.Fragment,null,_.map(E=>w.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...s})),y.map(E=>w.createElement("link",{key:E,rel:"modulepreload",href:E,...s})),A.map(({key:E,link:R})=>w.createElement("link",{key:E,...R})))}function zp(...i){return n=>{i.forEach(s=>{typeof s=="function"?s(n):s!=null&&(s.current=n)})}}var j0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j0&&(window.__reactRouterVersion="7.6.1")}catch{}function qp({basename:i,children:n,window:s}){let l=w.useRef();l.current==null&&(l.current=jb({window:s,v5Compat:!0}));let o=l.current,[d,h]=w.useState({action:o.action,location:o.location}),x=w.useCallback(m=>{w.startTransition(()=>h(m))},[h]);return w.useLayoutEffect(()=>o.listen(x),[o,x]),w.createElement(hp,{basename:i,children:n,location:d.location,navigationType:d.action,navigator:o})}var E0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=w.forwardRef(function({onClick:n,discover:s="render",prefetch:l="none",relative:o,reloadDocument:d,replace:h,state:x,target:m,to:g,preventScrollReset:p,viewTransition:_,...y},A){let{basename:E}=w.useContext(ga),R=typeof g=="string"&&E0.test(g),T,O=!1;if(typeof g=="string"&&R&&(T=g,j0))try{let ne=new URL(window.location.href),oe=g.startsWith("//")?new URL(ne.protocol+g):new URL(g),be=Ua(oe.pathname,E);oe.origin===ne.origin&&be!=null?g=be+oe.search+oe.hash:O=!0}catch{ma(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=Jb(g,{relative:o}),[G,Z,V]=Op(l,y),te=Vp(g,{replace:h,state:x,target:m,preventScrollReset:p,relative:o,viewTransition:_});function se(ne){n&&n(ne),ne.defaultPrevented||te(ne)}let ie=w.createElement("a",{...y,...V,href:T||H,onClick:O||d?n:se,ref:zp(A,Z),target:m,"data-discover":!R&&s==="render"?"true":void 0});return G&&!R?w.createElement(w.Fragment,null,ie,w.createElement(Up,{page:H})):ie});Ve.displayName="Link";var Bp=w.forwardRef(function({"aria-current":n="page",caseSensitive:s=!1,className:l="",end:o=!1,style:d,to:h,viewTransition:x,children:m,...g},p){let _=Js(h,{relative:g.relative}),y=Ma(),A=w.useContext(Ti),{navigator:E,basename:R}=w.useContext(ga),T=A!=null&&Pp(_)&&x===!0,O=E.encodeLocation?E.encodeLocation(_).pathname:_.pathname,H=y.pathname,G=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;s||(H=H.toLowerCase(),G=G?G.toLowerCase():null,O=O.toLowerCase()),G&&R&&(G=Ua(G,R)||G);const Z=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let V=H===O||!o&&H.startsWith(O)&&H.charAt(Z)==="/",te=G!=null&&(G===O||!o&&G.startsWith(O)&&G.charAt(O.length)==="/"),se={isActive:V,isPending:te,isTransitioning:T},ie=V?n:void 0,ne;typeof l=="function"?ne=l(se):ne=[l,V?"active":null,te?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let oe=typeof d=="function"?d(se):d;return w.createElement(Ve,{...g,"aria-current":ie,className:ne,ref:p,style:oe,to:h,viewTransition:x},typeof m=="function"?m(se):m)});Bp.displayName="NavLink";var $p=w.forwardRef(({discover:i="render",fetcherKey:n,navigate:s,reloadDocument:l,replace:o,state:d,method:h=wi,action:x,onSubmit:m,relative:g,preventScrollReset:p,viewTransition:_,...y},A)=>{let E=Fp(),R=Qp(x,{relative:g}),T=h.toLowerCase()==="get"?"get":"post",O=typeof x=="string"&&E0.test(x),H=G=>{if(m&&m(G),G.defaultPrevented)return;G.preventDefault();let Z=G.nativeEvent.submitter,V=(Z==null?void 0:Z.getAttribute("formmethod"))||h;E(Z||G.currentTarget,{fetcherKey:n,method:V,navigate:s,replace:o,state:d,relative:g,preventScrollReset:p,viewTransition:_})};return w.createElement("form",{ref:A,method:T,action:R,onSubmit:l?m:H,...y,"data-discover":!O&&i==="render"?"true":void 0})});$p.displayName="Form";function Hp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N0(i){let n=w.useContext(qn);return Pe(n,Hp(i)),n}function Vp(i,{target:n,replace:s,state:l,preventScrollReset:o,relative:d,viewTransition:h}={}){let x=sa(),m=Ma(),g=Js(i,{relative:d});return w.useCallback(p=>{if(yp(p,n)){p.preventDefault();let _=s!==void 0?s:Fs(m)===Fs(g);x(i,{replace:_,state:l,preventScrollReset:o,relative:d,viewTransition:h})}},[m,x,g,s,l,n,i,o,d,h])}var Gp=0,Yp=()=>`__${String(++Gp)}__`;function Fp(){let{router:i}=N0("useSubmit"),{basename:n}=w.useContext(ga),s=cp();return w.useCallback(async(l,o={})=>{let{action:d,method:h,encType:x,formData:m,body:g}=wp(l,n);if(o.navigate===!1){let p=o.fetcherKey||Yp();await i.fetch(p,s,o.action||d,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||x,flushSync:o.flushSync})}else await i.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||x,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,n,s])}function Qp(i,{relative:n}={}){let{basename:s}=w.useContext(ga),l=w.useContext(xa);Pe(l,"useFormAction must be used inside a RouteContext");let[o]=l.matches.slice(-1),d={...Js(i||".",{relative:n})},h=Ma();if(i==null){d.search=h.search;let x=new URLSearchParams(d.search),m=x.getAll("index");if(m.some(p=>p==="")){x.delete("index"),m.filter(_=>_).forEach(_=>x.append("index",_));let p=x.toString();d.search=p?`?${p}`:""}}return(!i||i===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(d.pathname=d.pathname==="/"?s:Oa([s,d.pathname])),Fs(d)}function Pp(i,n={}){let s=w.useContext(b0);Pe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=N0("useViewTransitionState"),o=Js(i,{relative:n.relative});if(!s.isTransitioning)return!1;let d=Ua(s.currentLocation.pathname,l)||s.currentLocation.pathname,h=Ua(s.nextLocation.pathname,l)||s.nextLocation.pathname;return ji(o.pathname,h)!=null||ji(o.pathname,d)!=null}[...Cp];const Xp="modulepreload",Kp=function(i){return"/SignatureApp/"+i},Om={},Mn=function(n,s,l){let o=Promise.resolve();if(s&&s.length>0){let h=function(g){return Promise.all(g.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),m=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));o=h(s.map(g=>{if(g=Kp(g),g in Om)return;Om[g]=!0;const p=g.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Xp,p||(y.as="script"),y.crossOrigin="",y.href=g,m&&y.setAttribute("nonce",m),document.head.appendChild(y),p)return new Promise((A,E)=>{y.addEventListener("load",A),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(h){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=h,window.dispatchEvent(x),!x.defaultPrevented)throw h}return o.then(h=>{for(const x of h||[])x.status==="rejected"&&d(x.reason);return n().catch(d)})},Zp=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Mn(async()=>{const{default:l}=await Promise.resolve().then(()=>Bn);return{default:l}},[]).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)};class Su extends Error{constructor(n,s="FunctionsError",l){super(n),this.name=s,this.context=l}}class Jp extends Su{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Ip extends Su{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Wp extends Su{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var iu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(iu||(iu={}));var ey=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};class ty{constructor(n,{headers:s={},customFetch:l,region:o=iu.Any}={}){this.url=n,this.headers=s,this.region=o,this.fetch=Zp(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var l;return ey(this,void 0,void 0,function*(){try{const{headers:o,method:d,body:h}=s;let x={},{region:m}=s;m||(m=this.region),m&&m!=="any"&&(x["x-region"]=m);let g;h&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",g=h):typeof h=="string"?(x["Content-Type"]="text/plain",g=h):typeof FormData<"u"&&h instanceof FormData?g=h:(x["Content-Type"]="application/json",g=JSON.stringify(h)));const p=yield this.fetch(`${this.url}/${n}`,{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),o),body:g}).catch(E=>{throw new Jp(E)}),_=p.headers.get("x-relay-error");if(_&&_==="true")throw new Ip(p);if(!p.ok)throw new Wp(p);let y=((l=p.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),A;return y==="application/json"?A=yield p.json():y==="application/octet-stream"?A=yield p.blob():y==="text/event-stream"?A=p:y==="multipart/form-data"?A=yield p.formData():A=yield p.text(),{data:A,error:null}}catch(o){return{data:null,error:o}}})}}var ut={},Sn={},jn={},En={},Nn={},Tn={},ay=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ln=ay();const ry=Ln.fetch,T0=Ln.fetch.bind(Ln),A0=Ln.Headers,ny=Ln.Request,sy=Ln.Response,Bn=Object.freeze(Object.defineProperty({__proto__:null,Headers:A0,Request:ny,Response:sy,default:T0,fetch:ry},Symbol.toStringTag,{value:"Module"})),ly=fb(Bn);var xi={},Um;function R0(){if(Um)return xi;Um=1,Object.defineProperty(xi,"__esModule",{value:!0});class i extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return xi.default=i,xi}var Mm;function C0(){if(Mm)return Tn;Mm=1;var i=Tn&&Tn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Tn,"__esModule",{value:!0});const n=i(ly),s=i(R0());class l{constructor(d){this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=d.headers,this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=d.shouldThrowOnError,this.signal=d.signal,this.isMaybeSingle=d.isMaybeSingle,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,h){return this.headers=Object.assign({},this.headers),this.headers[d]=h,this}then(d,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const x=this.fetch;let m=x(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,_,y;let A=null,E=null,R=null,T=g.status,O=g.statusText;if(g.ok){if(this.method!=="HEAD"){const V=await g.text();V===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?E=V:E=JSON.parse(V))}const G=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),Z=(_=g.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");G&&Z&&Z.length>1&&(R=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(A={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,R=null,T=406,O="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const G=await g.text();try{A=JSON.parse(G),Array.isArray(A)&&g.status===404&&(E=[],A=null,T=200,O="OK")}catch{g.status===404&&G===""?(T=204,O="No Content"):A={message:G}}if(A&&this.isMaybeSingle&&(!((y=A==null?void 0:A.details)===null||y===void 0)&&y.includes("0 rows"))&&(A=null,T=200,O="OK"),A&&this.shouldThrowOnError)throw new s.default(A)}return{error:A,data:E,count:R,status:T,statusText:O}});return this.shouldThrowOnError||(m=m.catch(g=>{var p,_,y;return{error:{message:`${(p=g==null?void 0:g.name)!==null&&p!==void 0?p:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(_=g==null?void 0:g.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(y=g==null?void 0:g.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),m.then(d,h)}returns(){return this}overrideTypes(){return this}}return Tn.default=l,Tn}var Lm;function D0(){if(Lm)return Nn;Lm=1;var i=Nn&&Nn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Nn,"__esModule",{value:!0});const n=i(C0());class s extends n.default{select(o){let d=!1;const h=(o??"*").split("").map(x=>/\s/.test(x)&&!d?"":(x==='"'&&(d=!d),x)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:d=!0,nullsFirst:h,foreignTable:x,referencedTable:m=x}={}){const g=m?`${m}.order`:"order",p=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${p?`${p},`:""}${o}.${d?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:d,referencedTable:h=d}={}){const x=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(x,`${o}`),this}range(o,d,{foreignTable:h,referencedTable:x=h}={}){const m=typeof x>"u"?"offset":`${x}.offset`,g=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(g,`${d-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:d=!1,settings:h=!1,buffers:x=!1,wal:m=!1,format:g="text"}={}){var p;const _=[o?"analyze":null,d?"verbose":null,h?"settings":null,x?"buffers":null,m?"wal":null].filter(Boolean).join("|"),y=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${g}; for="${y}"; options=${_};`,g==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Nn.default=s,Nn}var zm;function ju(){if(zm)return En;zm=1;var i=En&&En.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(En,"__esModule",{value:!0});const n=i(D0());class s extends n.default{eq(o,d){return this.url.searchParams.append(o,`eq.${d}`),this}neq(o,d){return this.url.searchParams.append(o,`neq.${d}`),this}gt(o,d){return this.url.searchParams.append(o,`gt.${d}`),this}gte(o,d){return this.url.searchParams.append(o,`gte.${d}`),this}lt(o,d){return this.url.searchParams.append(o,`lt.${d}`),this}lte(o,d){return this.url.searchParams.append(o,`lte.${d}`),this}like(o,d){return this.url.searchParams.append(o,`like.${d}`),this}likeAllOf(o,d){return this.url.searchParams.append(o,`like(all).{${d.join(",")}}`),this}likeAnyOf(o,d){return this.url.searchParams.append(o,`like(any).{${d.join(",")}}`),this}ilike(o,d){return this.url.searchParams.append(o,`ilike.${d}`),this}ilikeAllOf(o,d){return this.url.searchParams.append(o,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(o,d){return this.url.searchParams.append(o,`ilike(any).{${d.join(",")}}`),this}is(o,d){return this.url.searchParams.append(o,`is.${d}`),this}in(o,d){const h=Array.from(new Set(d)).map(x=>typeof x=="string"&&new RegExp("[,()]").test(x)?`"${x}"`:`${x}`).join(",");return this.url.searchParams.append(o,`in.(${h})`),this}contains(o,d){return typeof d=="string"?this.url.searchParams.append(o,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(o,`cs.{${d.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(d)}`),this}containedBy(o,d){return typeof d=="string"?this.url.searchParams.append(o,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(o,`cd.{${d.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(d)}`),this}rangeGt(o,d){return this.url.searchParams.append(o,`sr.${d}`),this}rangeGte(o,d){return this.url.searchParams.append(o,`nxl.${d}`),this}rangeLt(o,d){return this.url.searchParams.append(o,`sl.${d}`),this}rangeLte(o,d){return this.url.searchParams.append(o,`nxr.${d}`),this}rangeAdjacent(o,d){return this.url.searchParams.append(o,`adj.${d}`),this}overlaps(o,d){return typeof d=="string"?this.url.searchParams.append(o,`ov.${d}`):this.url.searchParams.append(o,`ov.{${d.join(",")}}`),this}textSearch(o,d,{config:h,type:x}={}){let m="";x==="plain"?m="pl":x==="phrase"?m="ph":x==="websearch"&&(m="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(o,`${m}fts${g}.${d}`),this}match(o){return Object.entries(o).forEach(([d,h])=>{this.url.searchParams.append(d,`eq.${h}`)}),this}not(o,d,h){return this.url.searchParams.append(o,`not.${d}.${h}`),this}or(o,{foreignTable:d,referencedTable:h=d}={}){const x=h?`${h}.or`:"or";return this.url.searchParams.append(x,`(${o})`),this}filter(o,d,h){return this.url.searchParams.append(o,`${d}.${h}`),this}}return En.default=s,En}var qm;function k0(){if(qm)return jn;qm=1;var i=jn&&jn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(jn,"__esModule",{value:!0});const n=i(ju());class s{constructor(o,{headers:d={},schema:h,fetch:x}){this.url=o,this.headers=d,this.schema=h,this.fetch=x}select(o,{head:d=!1,count:h}={}){const x=d?"HEAD":"GET";let m=!1;const g=(o??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",g),h&&(this.headers.Prefer=`count=${h}`),new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:d,defaultToNull:h=!0}={}){const x="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),d&&m.push(`count=${d}`),h||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(o)){const g=o.reduce((p,_)=>p.concat(Object.keys(_)),[]);if(g.length>0){const p=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",p.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:d,ignoreDuplicates:h=!1,count:x,defaultToNull:m=!0}={}){const g="POST",p=[`resolution=${h?"ignore":"merge"}-duplicates`];if(d!==void 0&&this.url.searchParams.set("on_conflict",d),this.headers.Prefer&&p.push(this.headers.Prefer),x&&p.push(`count=${x}`),m||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(o)){const _=o.reduce((y,A)=>y.concat(Object.keys(A)),[]);if(_.length>0){const y=[...new Set(_)].map(A=>`"${A}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:d}={}){const h="PATCH",x=[];return this.headers.Prefer&&x.push(this.headers.Prefer),d&&x.push(`count=${d}`),this.headers.Prefer=x.join(","),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const d="DELETE",h=[];return o&&h.push(`count=${o}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new n.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return jn.default=s,jn}var Bs={},$s={},Bm;function iy(){return Bm||(Bm=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.version=void 0,$s.version="0.0.0-automated"),$s}var $m;function oy(){if($m)return Bs;$m=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.DEFAULT_HEADERS=void 0;const i=iy();return Bs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i.version}`},Bs}var Hm;function cy(){if(Hm)return Sn;Hm=1;var i=Sn&&Sn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Sn,"__esModule",{value:!0});const n=i(k0()),s=i(ju()),l=oy();class o{constructor(h,{headers:x={},schema:m,fetch:g}={}){this.url=h,this.headers=Object.assign(Object.assign({},l.DEFAULT_HEADERS),x),this.schemaName=m,this.fetch=g}from(h){const x=new URL(`${this.url}/${h}`);return new n.default(x,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new o(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,x={},{head:m=!1,get:g=!1,count:p}={}){let _;const y=new URL(`${this.url}/rpc/${h}`);let A;m||g?(_=m?"HEAD":"GET",Object.entries(x).filter(([R,T])=>T!==void 0).map(([R,T])=>[R,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([R,T])=>{y.searchParams.append(R,T)})):(_="POST",A=x);const E=Object.assign({},this.headers);return p&&(E.Prefer=`count=${p}`),new s.default({method:_,url:y,headers:E,schema:this.schemaName,body:A,fetch:this.fetch,allowEmpty:!1})}}return Sn.default=o,Sn}var Vm;function uy(){if(Vm)return ut;Vm=1;var i=ut&&ut.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(ut,"__esModule",{value:!0}),ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const n=i(cy());ut.PostgrestClient=n.default;const s=i(k0());ut.PostgrestQueryBuilder=s.default;const l=i(ju());ut.PostgrestFilterBuilder=l.default;const o=i(D0());ut.PostgrestTransformBuilder=o.default;const d=i(C0());ut.PostgrestBuilder=d.default;const h=i(R0());return ut.PostgrestError=h.default,ut.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:d.default,PostgrestError:h.default},ut}var dy=uy();const fy=db(dy),{PostgrestClient:hy,PostgrestQueryBuilder:V1,PostgrestFilterBuilder:G1,PostgrestTransformBuilder:Y1,PostgrestBuilder:F1,PostgrestError:Q1}=fy,my="2.11.2",gy={"X-Client-Info":`realtime-js/${my}`},xy="1.0.0",O0=1e4,by=1e3;var Un;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Un||(Un={}));var $t;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})($t||($t={}));var aa;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(aa||(aa={}));var ou;(function(i){i.websocket="websocket"})(ou||(ou={}));var Mr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Mr||(Mr={}));class py{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),l=new TextDecoder;return this._decodeBroadcast(n,s,l)}_decodeBroadcast(n,s,l){const o=s.getUint8(1),d=s.getUint8(2);let h=this.HEADER_LENGTH+2;const x=l.decode(n.slice(h,h+o));h=h+o;const m=l.decode(n.slice(h,h+d));h=h+d;const g=JSON.parse(l.decode(n.slice(h,n.byteLength)));return{ref:null,topic:x,event:m,payload:g}}}class U0{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(He||(He={}));const Gm=(i,n,s={})=>{var l;const o=(l=s.skipTypes)!==null&&l!==void 0?l:[];return Object.keys(n).reduce((d,h)=>(d[h]=yy(h,i,n,o),d),{})},yy=(i,n,s,l)=>{const o=n.find(x=>x.name===i),d=o==null?void 0:o.type,h=s[i];return d&&!l.includes(d)?M0(d,h):cu(h)},M0=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return Sy(n,s)}switch(i){case He.bool:return vy(n);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return _y(n);case He.json:case He.jsonb:return wy(n);case He.timestamp:return jy(n);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return cu(n);default:return cu(n)}},cu=i=>i,vy=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},_y=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},wy=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},Sy=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,l=i[s];if(i[0]==="{"&&l==="}"){let d;const h=i.slice(1,s);try{d=JSON.parse("["+h+"]")}catch{d=h?h.split(","):[]}return d.map(x=>M0(n,x))}return i},jy=i=>typeof i=="string"?i.replace(" ","T"):i,L0=i=>{let n=i;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class Ic{constructor(n,s,l={},o=O0){this.channel=n,this.event=s,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var l;return this._hasReceived(n)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Ym;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Ym||(Ym={}));class Vs{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:d,onLeave:h,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vs.syncState(this.state,o,d,h),this.pendingDiffs.forEach(m=>{this.state=Vs.syncDiff(this.state,m,d,h)}),this.pendingDiffs=[],x()}),this.channel._on(l.diff,{},o=>{const{onJoin:d,onLeave:h,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Vs.syncDiff(this.state,o,d,h),x())}),this.onJoin((o,d,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:d,newPresences:h})}),this.onLeave((o,d,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:d,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,l,o){const d=this.cloneDeep(n),h=this.transformState(s),x={},m={};return this.map(d,(g,p)=>{h[g]||(m[g]=p)}),this.map(h,(g,p)=>{const _=d[g];if(_){const y=p.map(T=>T.presence_ref),A=_.map(T=>T.presence_ref),E=p.filter(T=>A.indexOf(T.presence_ref)<0),R=_.filter(T=>y.indexOf(T.presence_ref)<0);E.length>0&&(x[g]=E),R.length>0&&(m[g]=R)}else x[g]=p}),this.syncDiff(d,{joins:x,leaves:m},l,o)}static syncDiff(n,s,l,o){const{joins:d,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(d,(x,m)=>{var g;const p=(g=n[x])!==null&&g!==void 0?g:[];if(n[x]=this.cloneDeep(m),p.length>0){const _=n[x].map(A=>A.presence_ref),y=p.filter(A=>_.indexOf(A.presence_ref)<0);n[x].unshift(...y)}l(x,p,m)}),this.map(h,(x,m)=>{let g=n[x];if(!g)return;const p=m.map(_=>_.presence_ref);g=g.filter(_=>p.indexOf(_.presence_ref)<0),n[x]=g,o(x,g,m),g.length===0&&delete n[x]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(l=>s(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,l)=>{const o=n[l];return"metas"in o?s[l]=o.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[l]=o,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fm;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Fm||(Fm={}));var Qm;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Qm||(Qm={}));var ka;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(ka||(ka={}));class Eu{constructor(n,s={config:{}},l){this.topic=n,this.params=s,this.socket=l,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ic(this,aa.join,this.params,this.timeout),this.rejoinTimer=new U0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(aa.reply,{},(o,d)=>{this._trigger(this._replyEventName(d),o)}),this.presence=new Vs(this),this.broadcastEndpointURL=L0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var l,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:d,presence:h,private:x}}=this.params;this._onError(p=>n==null?void 0:n(ka.CHANNEL_ERROR,p)),this._onClose(()=>n==null?void 0:n(ka.CLOSED));const m={},g={broadcast:d,presence:h,postgres_changes:(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(p=>p.filter))!==null&&o!==void 0?o:[],private:x};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var _;if(this.socket.setAuth(),p===void 0){n==null||n(ka.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,A=(_=y==null?void 0:y.length)!==null&&_!==void 0?_:0,E=[];for(let R=0;R<A;R++){const T=y[R],{filter:{event:O,schema:H,table:G,filter:Z}}=T,V=p&&p[R];if(V&&V.event===O&&V.schema===H&&V.table===G&&V.filter===Z)E.push(Object.assign(Object.assign({},T),{id:V.id}));else{this.unsubscribe(),n==null||n(ka.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,n&&n(ka.SUBSCRIBED);return}}).receive("error",p=>{n==null||n(ka.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(ka.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,l){return this._on(n,s,l)}async send(n,s={}){var l,o;if(!this._canPush()&&n.type==="broadcast"){const{event:d,payload:h}=n,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var h,x,m;const g=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(x=(h=this.params)===null||h===void 0?void 0:h.config)===null||x===void 0?void 0:x.broadcast)===null||m===void 0)&&m.ack)&&d("ok"),g.receive("ok",()=>d("ok")),g.receive("error",()=>d("error")),g.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=$t.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(aa.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(l=>{const o=new Ic(this,aa.leave,{},n);o.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(n,s,l){const o=new AbortController,d=setTimeout(()=>o.abort(),l),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(d),h}_push(n,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Ic(this,n,s,l);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(n,s,l){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,l){var o,d;const h=n.toLocaleLowerCase(),{close:x,error:m,leave:g,join:p}=aa;if(l&&[x,m,g,p].indexOf(h)>=0&&l!==this._joinRef())return;let y=this._onMessage(h,s,l);if(s&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(A=>{var E,R,T;return((E=A.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(R=A.filter)===null||R===void 0?void 0:R.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===h}).map(A=>A.callback(y,l)):(d=this.bindings[h])===null||d===void 0||d.filter(A=>{var E,R,T,O,H,G;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in A){const Z=A.id,V=(E=A.filter)===null||E===void 0?void 0:E.event;return Z&&((R=s.ids)===null||R===void 0?void 0:R.includes(Z))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((T=s.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const Z=(H=(O=A==null?void 0:A.filter)===null||O===void 0?void 0:O.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return Z==="*"||Z===((G=s==null?void 0:s.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===h}).map(A=>{if(typeof y=="object"&&"ids"in y){const E=y.data,{schema:R,table:T,commit_timestamp:O,type:H,errors:G}=E;y=Object.assign(Object.assign({},{schema:R,table:T,commit_timestamp:O,eventType:H,new:{},old:{},errors:G}),this._getPayloadRecords(E))}A.callback(y,l)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,l){const o=n.toLocaleLowerCase(),d={type:o,filter:s,callback:l};return this.bindings[o]?this.bindings[o].push(d):this.bindings[o]=[d],this}_off(n,s){const l=n.toLocaleLowerCase();return this.bindings[l]=this.bindings[l].filter(o=>{var d;return!(((d=o.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&Eu.isEqual(o.filter,s))}),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const l in n)if(n[l]!==s[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(aa.close,{},n)}_onError(n){this._on(aa.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=Gm(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=Gm(n.columns,n.old_record)),s}}const Ey=()=>{},Ny=typeof WebSocket<"u",Ty=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ay{constructor(n,s){var l;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=gy,this.params={},this.timeout=O0,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ey,this.conn=null,this.sendBuffer=[],this.serializer=new py,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=d=>{let h;return d?h=d:typeof fetch>"u"?h=(...x)=>Mn(async()=>{const{default:m}=await Promise.resolve().then(()=>Bn);return{default:m}},void 0).then(({default:m})=>m(...x)):h=fetch,(...x)=>h(...x)},this.endPoint=`${n}/${ou.websocket}`,this.httpEndpoint=L0(n),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const o=(l=s==null?void 0:s.params)===null||l===void 0?void 0:l.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:d=>[1e3,2e3,5e3,1e4][d-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(d,h)=>h(JSON.stringify(d)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new U0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Ny){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Ry(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Mn(async()=>{const{default:n}=await import("./browser-kHSxedSi.js").then(s=>s.b);return{default:n}},[]).then(({default:n})=>{this.conn=new n(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xy}))}disconnect(n,s){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),n}log(n,s,l){this.logger(n,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Un.connecting:return Mr.Connecting;case Un.open:return Mr.Open;case Un.closing:return Mr.Closing;default:return Mr.Closed}}isConnected(){return this.connectionState()===Mr.Open}channel(n,s={config:{}}){const l=new Eu(`realtime:${n}`,s,this);return this.channels.push(l),l}push(n){const{topic:s,event:l,payload:o,ref:d}=n,h=()=>{this.encode(n,x=>{var m;(m=this.conn)===null||m===void 0||m.send(x)})};this.log("push",`${s} ${l} (${d})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){let s=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let l=null;try{l=JSON.parse(atob(s.split(".")[1]))}catch{}if(l&&l.exp&&!(Math.floor(Date.now()/1e3)-l.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${l.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${l.exp}`);this.accessTokenValue=s,this.channels.forEach(o=>{s&&o.updateJoinPayload({access_token:s}),o.joinedOnce&&o._isJoined()&&o._push(aa.access_token,{access_token:s})})}}async sendHeartbeat(){var n;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(n=this.conn)===null||n===void 0||n.close(by,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s._joinRef()!==n._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,s=>{let{topic:l,event:o,payload:d,ref:h}=s;h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${d.status||""} ${l} ${o} ${h&&"("+h+")"||""}`,d),this.channels.filter(x=>x._isMember(l)).forEach(x=>x._trigger(o,d,h)),this.stateChangeCallbacks.message.forEach(x=>x(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(n=>n())}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(n))}_onConnError(n){this.log("transport",n.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(aa.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const l=n.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${n}${l}${o}`}_workerObjectUrl(n){let s;if(n)s=n;else{const l=new Blob([Ty],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}}class Ry{constructor(n,s,l){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Un.connecting,this.send=()=>{},this.url=null,this.url=n,this.close=l.close}}class Nu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function dt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Cy extends Nu{constructor(n,s){super(n),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class uu extends Nu{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Dy=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const z0=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Mn(async()=>{const{default:l}=await Promise.resolve().then(()=>Bn);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)},ky=()=>Dy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mn(()=>Promise.resolve().then(()=>Bn),void 0)).Response:Response}),du=i=>{if(Array.isArray(i))return i.map(s=>du(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,l])=>{const o=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[o]=du(l)}),n};var Lr=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const Wc=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Oy=(i,n,s)=>Lr(void 0,void 0,void 0,function*(){const l=yield ky();i instanceof l&&!(s!=null&&s.noResolveJson)?i.json().then(o=>{n(new Cy(Wc(o),i.status||500))}).catch(o=>{n(new uu(Wc(o),o))}):n(new uu(Wc(i),i))}),Uy=(i,n,s,l)=>{const o={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),l&&(o.body=JSON.stringify(l)),Object.assign(Object.assign({},o),s))};function Is(i,n,s,l,o,d){return Lr(this,void 0,void 0,function*(){return new Promise((h,x)=>{i(s,Uy(n,l,o,d)).then(m=>{if(!m.ok)throw m;return l!=null&&l.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>Oy(m,x,l))})})}function Ei(i,n,s,l){return Lr(this,void 0,void 0,function*(){return Is(i,"GET",n,s,l)})}function ur(i,n,s,l,o){return Lr(this,void 0,void 0,function*(){return Is(i,"POST",n,l,o,s)})}function My(i,n,s,l,o){return Lr(this,void 0,void 0,function*(){return Is(i,"PUT",n,l,o,s)})}function Ly(i,n,s,l){return Lr(this,void 0,void 0,function*(){return Is(i,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),l)})}function q0(i,n,s,l,o){return Lr(this,void 0,void 0,function*(){return Is(i,"DELETE",n,l,o,s)})}var kt=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const zy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qy{constructor(n,s={},l,o){this.url=n,this.headers=s,this.bucketId=l,this.fetch=z0(o)}uploadOrUpdate(n,s,l,o){return kt(this,void 0,void 0,function*(){try{let d;const h=Object.assign(Object.assign({},Pm),o);let x=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&l instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),m&&d.append("metadata",this.encodeMetadata(m)),d.append("",l)):typeof FormData<"u"&&l instanceof FormData?(d=l,d.append("cacheControl",h.cacheControl),m&&d.append("metadata",this.encodeMetadata(m))):(d=l,x["cache-control"]=`max-age=${h.cacheControl}`,x["content-type"]=h.contentType,m&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o!=null&&o.headers&&(x=Object.assign(Object.assign({},x),o.headers));const g=this._removeEmptyFolders(s),p=this._getFinalPath(g),_=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:n,body:d,headers:x},h!=null&&h.duplex?{duplex:h.duplex}:{})),y=yield _.json();return _.ok?{data:{path:g,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(d){if(dt(d))return{data:null,error:d};throw d}})}upload(n,s,l){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,l)})}uploadToSignedUrl(n,s,l,o){return kt(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),x=new URL(this.url+`/object/upload/sign/${h}`);x.searchParams.set("token",s);try{let m;const g=Object.assign({upsert:Pm.upsert},o),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&l instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",l)):typeof FormData<"u"&&l instanceof FormData?(m=l,m.append("cacheControl",g.cacheControl)):(m=l,p["cache-control"]=`max-age=${g.cacheControl}`,p["content-type"]=g.contentType);const _=yield this.fetch(x.toString(),{method:"PUT",body:m,headers:p}),y=yield _.json();return _.ok?{data:{path:d,fullPath:y.Key},error:null}:{data:null,error:y}}catch(m){if(dt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(n,s){return kt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n);const o=Object.assign({},this.headers);s!=null&&s.upsert&&(o["x-upsert"]="true");const d=yield ur(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:o}),h=new URL(this.url+d.url),x=h.searchParams.get("token");if(!x)throw new Nu("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:x},error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}update(n,s,l){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,l)})}move(n,s,l){return kt(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}})}copy(n,s,l){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}})}createSignedUrl(n,s,l){return kt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),d=yield ur(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:s},l!=null&&l.transform?{transform:l.transform}:{}),{headers:this.headers});const h=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${h}`)},{data:d,error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}})}createSignedUrls(n,s,l){return kt(this,void 0,void 0,function*(){try{const o=yield ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),d=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return{data:o.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${d}`):null})),error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}})}download(n,s){return kt(this,void 0,void 0,function*(){const o=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),h=d?`?${d}`:"";try{const x=this._getFinalPath(n);return{data:yield(yield Ei(this.fetch,`${this.url}/${o}/${x}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(x){if(dt(x))return{data:null,error:x};throw x}})}info(n){return kt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const l=yield Ei(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:du(l),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}exists(n){return kt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Ly(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(dt(l)&&l instanceof uu){const o=l.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:l}}throw l}})}getPublicUrl(n,s){const l=this._getFinalPath(n),o=[],d=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&o.push(d);const x=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});m!==""&&o.push(m);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${l}${g}`)}}}remove(n){return kt(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}list(n,s,l){return kt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},zy),s),{prefix:n||""});return{data:yield ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},l),error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const By="2.7.1",$y={"X-Client-Info":`storage-js/${By}`};var An=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};class Hy{constructor(n,s={},l){this.url=n,this.headers=Object.assign(Object.assign({},$y),s),this.fetch=z0(l)}listBuckets(){return An(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}getBucket(n){return An(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return An(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}updateBucket(n,s){return An(this,void 0,void 0,function*(){try{return{data:yield My(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}emptyBucket(n){return An(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return An(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}}class Vy extends Hy{constructor(n,s={},l){super(n,s,l)}from(n){return new qy(this.url,this.headers,n,this.fetch)}}const Gy="2.49.8";let Hs="";typeof Deno<"u"?Hs="deno":typeof document<"u"?Hs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hs="react-native":Hs="node";const Yy={"X-Client-Info":`supabase-js-${Hs}/${Gy}`},Fy={headers:Yy},Qy={schema:"public"},Py={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xy={};var Ky=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const Zy=i=>{let n;return i?n=i:typeof fetch>"u"?n=T0:n=fetch,(...s)=>n(...s)},Jy=()=>typeof Headers>"u"?A0:Headers,Iy=(i,n,s)=>{const l=Zy(s),o=Jy();return(d,h)=>Ky(void 0,void 0,void 0,function*(){var x;const m=(x=yield n())!==null&&x!==void 0?x:i;let g=new o(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),l(d,Object.assign(Object.assign({},h),{headers:g}))})};var Wy=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};function ev(i){return i.endsWith("/")?i:i+"/"}function tv(i,n){var s,l;const{db:o,auth:d,realtime:h,global:x}=i,{db:m,auth:g,realtime:p,global:_}=n,y={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},g),d),realtime:Object.assign(Object.assign({},p),h),global:Object.assign(Object.assign(Object.assign({},_),x),{headers:Object.assign(Object.assign({},(s=_==null?void 0:_.headers)!==null&&s!==void 0?s:{}),(l=x==null?void 0:x.headers)!==null&&l!==void 0?l:{})}),accessToken:()=>Wy(this,void 0,void 0,function*(){return""})};return i.accessToken?y.accessToken=i.accessToken:delete y.accessToken,y}const B0="2.69.1",kn=30*1e3,fu=3,eu=fu*kn,av="http://localhost:9999",rv="supabase.auth.token",nv={"X-Client-Info":`gotrue-js/${B0}`},hu="X-Supabase-Api-Version",$0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lv=6e5;class Tu extends Error{constructor(n,s,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function ve(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class iv extends Tu{constructor(n,s,l){super(n,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function ov(i){return ve(i)&&i.name==="AuthApiError"}class H0 extends Tu{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class fr extends Tu{constructor(n,s,l,o){super(n,l,o),this.name=s,this.status=l}}class or extends fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cv(i){return ve(i)&&i.name==="AuthSessionMissingError"}class tu extends fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bi extends fr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class pi extends fr{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uv(i){return ve(i)&&i.name==="AuthImplicitGrantRedirectError"}class Xm extends fr{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mu extends fr{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function au(i){return ve(i)&&i.name==="AuthRetryableFetchError"}class Km extends fr{constructor(n,s,l){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class Gs extends fr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jm=` 	
\r=`.split(""),dv=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Jm.length;n+=1)i[Jm[n].charCodeAt(0)]=-2;for(let n=0;n<Zm.length;n+=1)i[Zm[n].charCodeAt(0)]=n;return i})();function V0(i,n,s){const l=dv[i];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Im(i){const n=[],s=h=>{n.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},d=h=>{mv(h,l,s)};for(let h=0;h<i.length;h+=1)V0(i.charCodeAt(h),o,d);return n.join("")}function fv(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function hv(i,n){for(let s=0;s<i.length;s+=1){let l=i.charCodeAt(s);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(i.charCodeAt(s+1)-56320&65535|o)+65536,s+=1}fv(l,n)}}function mv(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let l=1;l<6;l+=1)if((i>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function gv(i){const n=[],s={queue:0,queuedBits:0},l=o=>{n.push(o)};for(let o=0;o<i.length;o+=1)V0(i.charCodeAt(o),s,l);return new Uint8Array(n)}function xv(i){const n=[];return hv(i,s=>n.push(s)),new Uint8Array(n)}function bv(i){return Math.round(Date.now()/1e3)+i}function pv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i=="x"?n:n&3|8).toString(16)})}const ha=()=>typeof window<"u"&&typeof document<"u",kr={tested:!1,writable:!1},Ys=()=>{if(!ha())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kr.tested)return kr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),kr.tested=!0,kr.writable=!0}catch{kr.tested=!0,kr.writable=!1}return kr.writable};function yv(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,d)=>{n[d]=o})}catch{}return s.searchParams.forEach((l,o)=>{n[o]=l}),n}const G0=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>Mn(async()=>{const{default:l}=await Promise.resolve().then(()=>Bn);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)},vv=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Y0=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},yi=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},vi=async(i,n)=>{await i.removeItem(n)};class Ri{constructor(){this.promise=new Ri.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Ri.promiseConstructor=Promise;function ru(i){const n=i.split(".");if(n.length!==3)throw new Gs("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!sv.test(n[l]))throw new Gs("JWT not in base64url format");return{header:JSON.parse(Im(n[0])),payload:JSON.parse(Im(n[1])),signature:gv(n[2]),raw:{header:n[0],payload:n[1]}}}async function _v(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function wv(i,n){return new Promise((l,o)=>{(async()=>{for(let d=0;d<1/0;d++)try{const h=await i(d);if(!n(d,null,h)){l(h);return}}catch(h){if(!n(d,h)){o(h);return}}})()})}function Sv(i){return("0"+i.toString(16)).substr(-2)}function jv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let o="";for(let d=0;d<56;d++)o+=s.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(n),Array.from(n,Sv).join("")}async function Ev(i){const s=new TextEncoder().encode(i),l=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(l);return Array.from(o).map(d=>String.fromCharCode(d)).join("")}async function Nv(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await Ev(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rn(i,n,s=!1){const l=jv();let o=l;s&&(o+="/PASSWORD_RECOVERY"),await Y0(i,`${n}-code-verifier`,o);const d=await Nv(l);return[d,l===d?"plain":"s256"]}const Tv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Av(i){const n=i.headers.get(hu);if(!n||!n.match(Tv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Rv(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Cv(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Dv=function(i,n){var s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(s[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(i);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(i,l[o])&&(s[l[o]]=i[l[o]]);return s};const Ur=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),kv=[502,503,504];async function Wm(i){var n;if(!vv(i))throw new mu(Ur(i),0);if(kv.includes(i.status))throw new mu(Ur(i),i.status);let s;try{s=await i.json()}catch(d){throw new H0(Ur(d),d)}let l;const o=Av(i);if(o&&o.getTime()>=$0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new Km(Ur(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new or}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,h)=>d&&typeof h=="string",!0))throw new Km(Ur(s),i.status,s.weak_password.reasons);throw new iv(Ur(s),i.status||500,l)}const Ov=(i,n,s,l)=>{const o={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),s))};async function Ae(i,n,s,l){var o;const d=Object.assign({},l==null?void 0:l.headers);d[hu]||(d[hu]=$0["2024-01-01"].name),l!=null&&l.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const h=(o=l==null?void 0:l.query)!==null&&o!==void 0?o:{};l!=null&&l.redirectTo&&(h.redirect_to=l.redirectTo);const x=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await Uv(i,n,s+x,{headers:d,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(m):{data:Object.assign({},m),error:null}}async function Uv(i,n,s,l,o,d){const h=Ov(n,l,o,d);let x;try{x=await i(s,Object.assign({},h))}catch(m){throw console.error(m),new mu(Ur(m),0)}if(x.ok||await Wm(x),l!=null&&l.noResolveJson)return x;try{return await x.json()}catch(m){await Wm(m)}}function cr(i){var n;let s=null;qv(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=bv(i.expires_in)));const l=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:l},error:null}}function e0(i){const n=cr(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(n.data.weak_password=i.weak_password),n}function dr(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function Mv(i){return{data:i,error:null}}function Lv(i){const{action_link:n,email_otp:s,hashed_token:l,redirect_to:o,verification_type:d}=i,h=Dv(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:n,email_otp:s,hashed_token:l,redirect_to:o,verification_type:d},m=Object.assign({},h);return{data:{properties:x,user:m},error:null}}function zv(i){return i}function qv(i){return i.access_token&&i.refresh_token&&i.expires_in}var Bv=function(i,n){var s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(s[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(i);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(i,l[o])&&(s[l[o]]=i[l[o]]);return s};class $v{constructor({url:n="",headers:s={},fetch:l}){this.url=n,this.headers=s,this.fetch=G0(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s="global"){try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(ve(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,s={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:dr})}catch(l){if(ve(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:s}=n,l=Bv(n,["options"]),o=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(o.new_email=l==null?void 0:l.newEmail,delete o.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Lv,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ve(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:dr})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,l,o,d,h,x,m;try{const g={nextPage:null,lastPage:0,total:0},p=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(d=(o=n==null?void 0:n.perPage)===null||o===void 0?void 0:o.toString())!==null&&d!==void 0?d:""},xform:zv});if(p.error)throw p.error;const _=await p.json(),y=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,A=(m=(x=p.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&m!==void 0?m:[];return A.length>0&&(A.forEach(E=>{const R=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);g[`${T}Page`]=R}),g.total=parseInt(y)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(ve(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:dr})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:dr})}catch(l){if(ve(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,s=!1){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:dr})}catch(l){if(ve(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){try{const{data:s,error:l}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:l}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _deleteFactor(n){try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}}const Hv={getItem:i=>Ys()?globalThis.localStorage.getItem(i):null,setItem:(i,n)=>{Ys()&&globalThis.localStorage.setItem(i,n)},removeItem:i=>{Ys()&&globalThis.localStorage.removeItem(i)}};function t0(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}function Vv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Cn={debug:!!(globalThis&&Ys()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class F0 extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Gv extends F0{}async function Yv(i,n,s){Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await s()}finally{Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(n===0)throw Cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Gv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Cn.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Vv();const Fv={url:av,storageKey:rv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function a0(i,n,s){return await s()}class Qs{constructor(n){var s,l;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qs.nextInstanceID,Qs.nextInstanceID+=1,this.instanceID>0&&ha()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Fv),n);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new $v({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=G0(o.fetch),this.lock=o.lock||a0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:ha()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Yv:this.lock=a0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:Ys()?this.storage=Hv:(this.memoryStorage={},this.storage=t0(this.memoryStorage)):(this.memoryStorage={},this.storage=t0(this.memoryStorage)),ha()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${B0}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=yv(window.location.href);let l="none";if(this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce"),ha()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:d}=await this._getSessionFromURL(s,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),uv(d)){const m=(n=d.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:h,redirectType:x}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",x),await this._saveSession(h),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ve(s)?{error:s}:{error:new H0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,l,o;try{const d=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=n==null?void 0:n.options)===null||o===void 0?void 0:o.captchaToken}},xform:cr}),{data:h,error:x}=d;if(x||!h)return{data:{user:null,session:null},error:x};const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(d){if(ve(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(n){var s,l,o;try{let d;if("email"in n){const{email:p,password:_,options:y}=n;let A=null,E=null;this.flowType==="pkce"&&([A,E]=await Rn(this.storage,this.storageKey)),d=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:_,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:A,code_challenge_method:E},xform:cr})}else if("phone"in n){const{phone:p,password:_,options:y}=n;d=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:_,data:(l=y==null?void 0:y.data)!==null&&l!==void 0?l:{},channel:(o=y==null?void 0:y.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:cr})}else throw new bi("You must provide either an email or phone number and a password");const{data:h,error:x}=d;if(x||!h)return{data:{user:null,session:null},error:x};const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(d){if(ve(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(n){try{let s;if("email"in n){const{email:d,password:h,options:x}=n;s=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:h,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:e0})}else if("phone"in n){const{phone:d,password:h,options:x}=n;s=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:h,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:e0})}else throw new bi("You must provide either an email or phone number and a password");const{data:l,error:o}=s;return o?{data:{user:null,session:null},error:o}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new tu}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,l,o,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async _exchangeCodeForSession(n){const s=await yi(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(s??"").split("/");try{const{data:d,error:h}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:cr});if(await vi(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new tu}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:o??null}),error:h})}catch(d){if(ve(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(n){try{const{options:s,provider:l,token:o,access_token:d,nonce:h}=n,x=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:d,nonce:h,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:cr}),{data:m,error:g}=x;return g?{data:{user:null,session:null},error:g}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new tu}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:g})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,l,o,d,h;try{if("email"in n){const{email:x,options:m}=n;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Rn(this.storage,this.storageKey));const{error:_}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:p},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in n){const{phone:x,options:m}=n,{data:g,error:p}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(d=m==null?void 0:m.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:p}}throw new bi("You must provide either an email or phone number.")}catch(x){if(ve(x))return{data:{user:null,session:null},error:x};throw x}}async verifyOtp(n){var s,l;try{let o,d;"options"in n&&(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo,d=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:x}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:o,xform:cr});if(x)throw x;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(n){var s,l,o;try{let d=null,h=null;return this.flowType==="pkce"&&([d,h]=await Rn(this.storage,this.storageKey)),await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=n==null?void 0:n.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:Mv})}catch(d){if(ve(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:l}=n;if(l)throw l;if(!s)throw new or;const{error:o}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:o}})}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:l,type:o,options:d}=n,{error:h}=await Ae(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:l,type:o,options:d}=n,{data:h,error:x}=await Ae(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:x}}throw new bi("You must provide either an email or phone number and a type")}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await yi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<eu:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.storage.isServer){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(m,g,p)=>(!h&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,g,p))})}return{data:{session:n},error:null}}const{session:o,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{session:null},error:d}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:dr}):await this._useSession(async s=>{var l,o,d;const{data:h,error:x}=s;if(x)throw x;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new or}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0,xform:dr})})}catch(s){if(ve(s))return cv(s)&&(await this._removeSession(),await vi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async l=>{const{data:o,error:d}=l;if(d)throw d;if(!o.session)throw new or;const h=o.session;let x=null,m=null;this.flowType==="pkce"&&n.email!=null&&([x,m]=await Rn(this.storage,this.storageKey));const{data:g,error:p}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:x,code_challenge_method:m}),jwt:h.access_token,xform:dr});if(p)throw p;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(l){if(ve(l))return{data:{user:null},error:l};throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new or;const s=Date.now()/1e3;let l=s,o=!0,d=null;const{payload:h}=ru(n.access_token);if(h.exp&&(l=h.exp,o=l<=s),o){const{session:x,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!x)return{data:{user:null,session:null},error:null};d=x}else{const{data:x,error:m}=await this._getUser(n.access_token);if(m)throw m;d={access_token:n.access_token,refresh_token:n.refresh_token,user:x.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(s){if(ve(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var l;if(!n){const{data:h,error:x}=s;if(x)throw x;n=(l=h.session)!==null&&l!==void 0?l:void 0}if(!(n!=null&&n.refresh_token))throw new or;const{session:o,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{user:null,session:null},error:d}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!ha())throw new pi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new pi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Xm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Xm("No code detected.");const{data:H,error:G}=await this._exchangeCodeForSession(n.code);if(G)throw G;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:d,refresh_token:h,expires_in:x,expires_at:m,token_type:g}=n;if(!d||!x||!h||!g)throw new pi("No session defined in URL");const p=Math.round(Date.now()/1e3),_=parseInt(x);let y=p+_;m&&(y=parseInt(m));const A=y-p;A*1e3<=kn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${_}s`);const E=y-_;p-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,y,p):p-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,y,p);const{data:R,error:T}=await this._getUser(d);if(T)throw T;const O={provider_token:l,provider_refresh_token:o,access_token:d,expires_in:_,expires_at:y,refresh_token:h,token_type:g,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:n.type},error:null}}catch(l){if(ve(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await yi(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:o,error:d}=s;if(d)return{error:d};const h=(l=o.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:x}=await this.admin.signOut(h,n);if(x&&!(ov(x)&&(x.status===404||x.status===401||x.status===403)))return{error:x}}return n!=="others"&&(await this._removeSession(),await vi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=pv(),l={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async s=>{var l,o;try{const{data:{session:d},error:h}=s;if(h)throw h;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,s={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await Rn(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(ve(d))return{data:null,error:d};throw d}}async getUserIdentities(){var n;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:l,error:o}=await this._useSession(async d=>{var h,x,m,g,p;const{data:_,error:y}=d;if(y)throw y;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(x=n.options)===null||x===void 0?void 0:x.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",A,{headers:this.headers,jwt:(p=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return ha()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),{data:{provider:n.provider,url:l==null?void 0:l.url},error:null}}catch(l){if(ve(l))return{data:{provider:n.provider,url:null},error:l};throw l}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var l,o;const{data:d,error:h}=s;if(h)throw h;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await wv(async o=>(o>0&&await _v(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:cr})),(o,d)=>{const h=200*Math.pow(2,o);return d&&au(d)&&Date.now()+h-l<kn})}catch(l){if(this._debug(s,"error",l),ve(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",l),ha()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const l=await yi(this.storage,this.storageKey);if(this._debug(s,"session from storage",l),!this._isValidSession(l)){this._debug(s,"session is not valid"),l!==null&&await this._removeSession();return}const o=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<eu;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${eu}s`),o){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),au(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(s,"error",l),console.error(l);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var s,l;if(!n)throw new or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ri;const{data:d,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!d.session)throw new or;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const x={session:d.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(d){if(this._debug(o,"error",d),ve(d)){const h={session:null,error:d};return au(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,s,l=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:s});const d=[],h=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(n,s)}catch(m){d.push(m)}});if(await Promise.all(h),d.length>0){for(let x=0;x<d.length;x+=1)console.error(d[x]);throw d[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Y0(this.storage,this.storageKey,n)}async _removeSession(){this._debug("#_removeSession()"),await vi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ha()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),kn);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-n)/kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${kn}ms, refresh threshold is ${fu} ticks`),o<=fu&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof F0)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ha()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,l){const o=[`provider=${encodeURIComponent(s)}`];if(l!=null&&l.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,h]=await Rn(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(x.toString())}if(l!=null&&l.queryParams){const d=new URLSearchParams(l.queryParams);o.push(d.toString())}return l!=null&&l.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var l;const{data:o,error:d}=s;return d?{data:null,error:d}:await Ae(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var l,o;const{data:d,error:h}=s;if(h)return{data:null,error:h};const x=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:m,error:g}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:o,error:d}=s;if(d)return{data:null,error:d};const{data:h,error:x}=await Ae(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token});return x?{data:null,error:x}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:x})})}catch(s){if(ve(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:o,error:d}=s;return d?{data:null,error:d}:await Ae(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(ve(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:l}=await this._challenge({factorId:n.factorId});return l?{data:null,error:l}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const l=(n==null?void 0:n.factors)||[],o=l.filter(h=>h.factor_type==="totp"&&h.status==="verified"),d=l.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:l,totp:o,phone:d},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,l;const{data:{session:o},error:d}=n;if(d)return{data:null,error:d};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=ru(o.access_token);let x=null;h.aal&&(x=h.aal);let m=x;((l=(s=o.user.factors)===null||s===void 0?void 0:s.filter(_=>_.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(m="aal2");const p=h.amr||[];return{data:{currentLevel:x,nextLevel:m,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(n,s={keys:[]}){let l=s.keys.find(h=>h.kid===n);if(l||(l=this.jwks.keys.find(h=>h.kid===n),l&&this.jwks_cached_at+lv>Date.now()))return l;const{data:o,error:d}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;if(!o.keys||o.keys.length===0)throw new Gs("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),l=o.keys.find(h=>h.kid===n),!l)throw new Gs("No matching signing key found in JWKS");return l}async getClaims(n,s={keys:[]}){try{let l=n;if(!l){const{data:A,error:E}=await this.getSession();if(E||!A.session)return{data:null,error:E};l=A.session.access_token}const{header:o,payload:d,signature:h,raw:{header:x,payload:m}}=ru(l);if(Rv(d.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:A}=await this.getUser(l);if(A)throw A;return{data:{claims:d,header:o,signature:h},error:null}}const g=Cv(o.alg),p=await this.fetchJwk(o.kid,s),_=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,_,h,xv(`${x}.${m}`)))throw new Gs("Invalid JWT signature");return{data:{claims:d,header:o,signature:h},error:null}}catch(l){if(ve(l))return{data:null,error:l};throw l}}}Qs.nextInstanceID=0;const Qv=Qs;class Pv extends Qv{constructor(n){super(n)}}var Xv=function(i,n,s,l){function o(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?d(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};class Kv{constructor(n,s,l){var o,d,h;if(this.supabaseUrl=n,this.supabaseKey=s,!n)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const x=ev(n),m=new URL(x);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:Qy,realtime:Xy,auth:Object.assign(Object.assign({},Py),{storageKey:g}),global:Fy},_=tv(l??{},p);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(d=_.global.headers)!==null&&d!==void 0?d:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(y,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=_.auth)!==null&&h!==void 0?h:{},this.headers,_.global.fetch),this.fetch=Iy(s,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new hy(new URL("rest/v1",m).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new ty(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Vy(this.storageUrl.href,this.headers,this.fetch)}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},l={}){return this.rest.rpc(n,s,l)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return Xv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:l}=yield this.auth.getSession();return(s=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:o,storageKey:d,flowType:h,lock:x,debug:m},g,p){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pv({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),g),storageKey:d,autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:o,flowType:h,lock:x,debug:m,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new Ay(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,l)=>{this._handleTokenChanged(s,"CLIENT",l==null?void 0:l.access_token)})}_handleTokenChanged(n,s,l){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==l?this.changedAccessToken=l:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zv=(i,n,s)=>new Kv(i,n,s),Jv="https://aimpevquppizoqtljypl.supabase.co",Iv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFpbXBldnF1cHBpem9xdGxqeXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzMjMwMDksImV4cCI6MjA2Mzg5OTAwOX0.0aoSUv50eLElw_ZFaTBYnV4doJ7D_2lMt2q-XCa3sOo",K=Zv(Jv,Iv),Q0=w.forwardRef((i,n)=>{const[s,l]=w.useState(null),[o,d]=w.useState(null),[h,x]=w.useState(!1),m=sa();w.useEffect(()=>{K.auth.getSession().then(({data:{session:R}})=>{l(R),R?g(R.user.id):d(null)});const{data:E}=K.auth.onAuthStateChange((R,T)=>{l(T),T?g(T.user.id):d(null)});return()=>E.subscription.unsubscribe()},[]);const g=async E=>{const{data:R,error:T}=await K.from("users").select("role").eq("id",E).single();T?(console.error("Error fetching user role for NavBar:",T),d(null)):R&&d(R.role)},p=async()=>{const{error:E}=await K.auth.signOut();E?console.error("Error logging out:",E.message):m("/login")},_=()=>{x(!h)};w.useEffect(()=>{const E=R=>{h&&!R.target.closest(".settings-dropdown-container")&&x(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[h]);const y={user:[{to:"/user/dashboard",label:"Dashboard"},{to:"/user/documents",label:"My Documents"},{to:"/user/signature-requests",label:"Signatures"}],admin:[{to:"/admin/dashboard",label:"Admin Dashboard"},{to:"/admin/manage-users",label:"Manage Users"},{to:"/admin/reports",label:"Reports"},{to:"/admin/audit",label:"Audit Logs"},{to:"/admin/anomalies",label:"Reported Anomalies"},{to:"/admin/master-edit",label:"Master Editor"}]};let A=[];return o==="admin"?A=y.admin:o==="user"&&(A=y.user),u.jsxs("nav",{ref:n,className:`bg-[var(--brand-bg-light)] shadow-md py-4 px-10 flex justify-between items-center\r
                 border-b border-[var(--brand-border)] fixed w-full top-0 left-0 z-50 transition-all duration-300`,children:[u.jsx("div",{className:"text-4xl font-extrabold",children:u.jsx(Ve,{to:o?`/${o}/dashboard`:"/user/dashboard",className:"text-[var(--color-button-primary)] no-underline drop-shadow-sm",children:"SignSeal"})}),u.jsxs("div",{className:"flex items-center space-x-8",children:[A.map(E=>u.jsx(Ve,{to:E.to,className:`text-[var(--brand-text)] no-underline text-lg font-medium transition-colors duration-300\r
                         hover:text-[var(--color-text-accent-light)]`,children:E.label},E.to)),u.jsxs("div",{className:"relative inline-block settings-dropdown-container",children:[u.jsxs("button",{onClick:_,className:`bg-transparent border-none text-[var(--brand-text)] text-lg font-medium cursor-pointer\r
                       flex items-center gap-1 transition-colors duration-300 focus:outline-none\r
                       hover:text-[var(--color-text-accent-light)]`,children:["Settings",u.jsx("span",{className:`text-xs leading-none transform transition-transform duration-300 ${h?"rotate-180":"rotate-0"}`,children:"▼"})]}),h&&u.jsxs("div",{className:`absolute top-full right-0 bg-[var(--brand-card)] shadow-lg rounded-lg\r
                         min-w-[160px] flex flex-col overflow-hidden mt-3 z-50\r
                         border border-[var(--brand-border-light)] animate-fade-in-up origin-top-right`,children:[u.jsx(Ve,{to:"/user/profile",className:`py-3 px-5 text-[var(--brand-text)] no-underline text-base font-normal\r
                           transition-all duration-200 hover:bg-[var(--color-button-primary)] hover:text-white`,onClick:()=>x(!1),children:"Profile"}),u.jsx("button",{onClick:p,className:`py-3 px-5 text-[var(--brand-text)] no-underline text-base font-normal\r
                           transition-all duration-200 hover:bg-[var(--color-button-primary)] hover:text-white\r
                           border-none bg-transparent w-full text-left`,children:"Logout"})]})]})]})]})}),Wv=()=>{const[i,n]=w.useState(null),[s,l]=w.useState(!0);return w.useEffect(()=>{K.auth.getSession().then(({data:{session:d}})=>{n(d),l(!1)});const{data:o}=K.auth.onAuthStateChange((d,h)=>{n(h),l(!1)});return()=>{o.subscription.unsubscribe()}},[]),s?null:u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(to bottom right, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:[u.jsxs("header",{className:"w-full max-w-6xl mx-auto flex justify-between items-center mb-16 px-4 md:px-0 z-10",children:[u.jsx("h1",{className:"text-4xl font-extrabold drop-shadow-lg",style:{color:"var(--color-button-primary)"},children:"SignSeal"}),u.jsx("nav",{className:"space-x-6",children:i?u.jsx(Ve,{to:"/user/dashboard",className:"py-2 px-5 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 font-semibold",style:{backgroundColor:"var(--color-button-primary)",color:"white"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary-hover)",onMouseLeave:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary)",children:"Dashboard"}):u.jsxs(u.Fragment,{children:[u.jsx(Ve,{to:"/login",className:"transition duration-300 ease-in-out font-medium",style:{color:"var(--brand-text)"},onMouseEnter:o=>o.currentTarget.style.color="var(--color-text-accent-light)",onMouseLeave:o=>o.currentTarget.style.color="var(--brand-text)",children:"Login"}),u.jsx(Ve,{to:"/register",className:"py-2 px-5 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 font-semibold",style:{backgroundColor:"var(--color-button-primary)",color:"white"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary-hover)",onMouseLeave:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary)",children:"Register"})]})})]}),u.jsxs("main",{className:"flex-grow flex flex-col justify-center items-center text-center max-w-4xl mx-auto px-4 z-0 relative",children:[u.jsx("div",{className:"absolute -top-16 -left-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),u.jsx("div",{className:"absolute -bottom-16 -right-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000 -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),u.jsxs("h2",{className:"text-6xl md:text-7xl font-extrabold leading-tight mb-6 animate-fade-in-up drop-shadow-md",style:{color:"var(--brand-heading)"},children:["Signature Simplified.",u.jsx("br",{})," ",u.jsx("span",{style:{color:"var(--color-button-primary)"},children:"Future Forward."})]}),u.jsx("p",{className:"text-xl md:text-2xl mb-10 leading-relaxed animate-fade-in-up delay-200",style:{color:"var(--brand-text-light)"},children:"Streamline your workflow with secure, legally binding electronic signatures. Fast, intuitive, and designed for the modern era."}),!i&&u.jsx(Ve,{to:"/register",className:"inline-block py-3 px-8 rounded-full shadow-xl transition duration-300 ease-in-out transform hover:scale-105 animate-fade-in-up delay-400 font-bold",style:{backgroundColor:"var(--color-button-primary)",color:"white"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary-hover)",onMouseLeave:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary)",children:"Get Started Free"})]}),u.jsxs("section",{className:"mt-20 w-full max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-8 px-4 z-10",children:[u.jsxs("div",{className:"p-8 rounded-xl shadow-2xl flex flex-col items-center text-center border transform hover:scale-105 transition-transform duration-300",style:{backgroundColor:"var(--brand-card)",borderColor:"var(--brand-border)"},children:[u.jsx("div",{className:"text-6xl mb-4 transform rotate-3 hover:rotate-0 transition-transform duration-300",style:{color:"var(--color-button-primary)"},children:"✍️"}),u.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:"var(--brand-heading)"},children:"Effortless Signing"}),u.jsx("p",{style:{color:"var(--brand-text-light)"},children:"Sign documents from anywhere, on any device. Simple and intuitive process."})]}),u.jsxs("div",{className:"p-8 rounded-xl shadow-2xl flex flex-col items-center text-center border transform hover:scale-105 transition-transform duration-300",style:{backgroundColor:"var(--brand-card)",borderColor:"var(--brand-border)"},children:[u.jsx("div",{className:"text-6xl mb-4 transform -rotate-3 hover:rotate-0 transition-transform duration-300",style:{color:"var(--color-button-primary)"},children:"🔒"}),u.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:"var(--brand-heading)"},children:"Robust Security"}),u.jsx("p",{style:{color:"var(--brand-text-light)"},children:"Your data is protected with advanced encryption, audit trails, and compliance."})]}),u.jsxs("div",{className:"p-8 rounded-xl shadow-2xl flex flex-col items-center text-center border transform hover:scale-105 transition-transform duration-300",style:{backgroundColor:"var(--brand-card)",borderColor:"var(--brand-border)"},children:[u.jsx("div",{className:"text-6xl mb-4 transform rotate-3 hover:rotate-0 transition-transform duration-300",style:{color:"var(--color-button-primary)"},children:"⚡"}),u.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:"var(--brand-heading)"},children:"Blazing Fast"}),u.jsx("p",{style:{color:"var(--brand-text-light)"},children:"Streamline approvals and get documents signed in minutes, not days."})]})]}),u.jsx("section",{className:"mt-12 text-center text-sm z-10",style:{color:"var(--brand-text-light)"},children:u.jsx("p",{children:"Powered by Vite & modern web technologies for a seamless experience."})})]})},Et=({message:i,type:n,onClose:s,duration:l=3e3})=>{const[o,d]=w.useState(!1),[h,x]=w.useState(!1);if(w.useEffect(()=>{if(i){x(!0);const _=setTimeout(()=>{d(!0)},50),y=setTimeout(()=>{d(!1)},l+50);return()=>{clearTimeout(_),clearTimeout(y)}}else d(!1),x(!1)},[i,l]),w.useEffect(()=>{if(!o&&h){const _=setTimeout(()=>{x(!1),s&&s()},300);return()=>clearTimeout(_)}},[o,h,s]),!h)return null;let m="",g="",p="";switch(n){case"success":m="bg-green-100 dark:bg-green-900",g="text-green-800 dark:text-green-200",p="border-green-400 dark:border-green-700";break;case"error":m="bg-red-100 dark:bg-red-900",g="text-red-800 dark:text-red-200",p="border-red-400 dark:border-red-700";break;case"info":default:m="bg-blue-100 dark:bg-blue-900",g="text-blue-800 dark:text-blue-200",p="border-blue-400 dark:border-blue-700";break}return u.jsxs("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg max-w-sm w-full z-50
                  flex items-center justify-between border-l-4 transform transition-all duration-300 ease-in-out
                  ${m} ${g} ${p}
                  ${o?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[u.jsx("p",{className:"flex-grow text-sm font-medium",children:i}),u.jsx("button",{onClick:()=>d(!1),className:`ml-4 p-1 rounded-full ${g} hover:bg-opacity-75 transition-colors`,"aria-label":"Close notification",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},r0=120,n0=5,s0=60,e1=()=>{const[i,n]=w.useState(""),[s,l]=w.useState(""),[o,d]=w.useState(null),[h,x]=w.useState(!1),[m,g]=w.useState(!1),[p,_]=w.useState(!1),[y,A]=w.useState(0),[E,R]=w.useState(0),[T,O]=w.useState(0),[H,G]=w.useState(null),[Z,V]=w.useState(0),te=w.useRef(null),[se,ie]=w.useState(!1),ne=sa(),oe=Ma();w.useEffect(()=>{new URLSearchParams(oe.search).get("message")==="check_email"&&(d({message:"Registration successful! Please check your email to verify your account.",type:"success"}),ne(oe.pathname,{replace:!0}))},[oe,ne]),w.useEffect(()=>{let ce;const ue=localStorage.getItem("lastResendAttempt");if(ue){const q=parseInt(ue,10),J=Math.floor((Date.now()-q)/1e3),j=r0-J;j>0&&(A(!0),R(j),ce=setInterval(()=>{R(Q=>Q<=1?(clearInterval(ce),A(!1),localStorage.removeItem("lastResendAttempt"),0):Q-1)},1e3))}return()=>clearInterval(ce)},[]),w.useEffect(()=>{const ce=localStorage.getItem(`failedLoginAttempts_${i}`),ue=localStorage.getItem(`lastFailedLoginTime_${i}`);if(ce&&O(parseInt(ce,10)),ue&&G(parseInt(ue,10)),ue&&parseInt(ce,10)>=n0){const q=parseInt(ue,10),J=Math.floor((Date.now()-q)/1e3),j=s0-J;j>0?(V(j),_(!0),te.current&&clearInterval(te.current),te.current=setInterval(()=>{V(Q=>Q<=1?(clearInterval(te.current),te.current=null,_(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),O(0),G(null),0):Q-1)},1e3)):(_(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),O(0),G(null))}return()=>{te.current&&clearInterval(te.current)}},[i]);const be=(ce,ue=!0)=>{let q=parseInt(localStorage.getItem(`failedLoginAttempts_${ce}`)||"0",10),J;if(ue?J=q+1:J=0,O(J),localStorage.setItem(`failedLoginAttempts_${ce}`,J.toString()),J>0&&ue){const j=Date.now();G(j),localStorage.setItem(`lastFailedLoginTime_${ce}`,j.toString())}else G(null),localStorage.removeItem(`lastFailedLoginTime_${ce}`)},ae=async ce=>{var J;if(ce.preventDefault(),d(null),x(!1),g(!1),_(!1),!i||!s){d({message:"Please enter both email and password.",type:"error"});return}const ue=parseInt(localStorage.getItem(`failedLoginAttempts_${i}`)||"0",10),q=parseInt(localStorage.getItem(`lastFailedLoginTime_${i}`)||"0",10);if(ue>=n0){const j=Math.floor((Date.now()-q)/1e3),Q=s0-j;if(Q>0){V(Q),_(!0),d({message:`Too many failed login attempts. Please try again in ${Q} seconds.`,type:"error"}),te.current&&clearInterval(te.current),te.current=setInterval(()=>{V(S=>S<=1?(clearInterval(te.current),te.current=null,_(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),O(0),G(null),0):S-1)},1e3);return}else _(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),O(0),G(null)}try{const S=(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown",z=navigator.userAgent||"unknown";let U=!1,Y=null,D=null;const{data:ee,error:I}=await K.auth.signInWithPassword({email:i,password:s});I?(U=!1,Y=I.message,be(i,!0),I.message==="Email not confirmed"&&x(!0)):ee&&ee.user?(U=!0,D=ee.user.id,be(i,!1)):(U=!1,Y="An unexpected response from Supabase Auth.",be(i,!0));const{data:xe,error:re}=await K.rpc("track_login_attempt",{p_email:i,p_user_id:D,p_is_success:U,p_ip_address:S,p_user_agent:z,p_auth_error_message:Y});if(re){console.error("RPC Error during tracking:",re),d({message:"A system error occurred. Please try again later.",type:"error"});return}const{success:ge,message:pe,blocked:Ee}=xe;if(ie(Ee),Ee)g(!0),d({message:pe,type:"error"});else if(ge){d({message:pe,type:"success"});const bt=((J=ee.user.user_metadata)==null?void 0:J.role)||"user";setTimeout(bt==="admin"?()=>ne("/admin/dashboard"):()=>ne("/user/dashboard"),500)}else d({message:pe,type:"error"})}catch(j){console.error("Overall login process error:",j),d({message:"An unexpected error occurred during the login process.",type:"error"}),be(i,!0)}},_e=async()=>{if(y)return;d(null),A(!0),R(r0),localStorage.setItem("lastResendAttempt",Date.now().toString());let ce=setInterval(()=>{R(q=>q<=1?(clearInterval(ce),A(!1),localStorage.removeItem("lastResendAttempt"),0):q-1)},1e3);const{error:ue}=await K.auth.resend({type:"signup",email:i,options:{emailRedirectTo:`${window.location.origin}/SignatureApp/verify-email-success`}});ue?d({message:`Failed to resend verification email: ${ue.message}`,type:"error"}):(d({message:"Verification email sent! Please check your inbox.",type:"success"}),x(!1))};return u.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 py-8 bg-gray-50 dark:bg-gray-900",children:[u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl animate-fade-in-up",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsx(Ve,{to:"/",className:"inline-block no-underline",children:u.jsxs("h1",{className:"text-4xl font-extrabold text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300 transition duration-200 ease-in-out",children:["Login to ",u.jsx("span",{style:{color:"var(--color-button-primary)"},children:"SignSeal"})]})})}),u.jsx("h2",{className:"text-4xl font-bold text-center mb-8 text-gray-800 dark:text-white sr-only",children:"Login to SignSeal"}),u.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                                bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                                focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                                transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"you@example.com",value:i,onChange:ce=>{n(ce.target.value),_(!1),V(0),te.current&&(clearInterval(te.current),te.current=null);const ue=localStorage.getItem(`failedLoginAttempts_${ce.target.value}`),q=localStorage.getItem(`lastFailedLoginTime_${ce.target.value}`);O(parseInt(ue||"0",10)),G(parseInt(q||"0",10))},required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),u.jsx("input",{type:"password",id:"password",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                                bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                                focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                                transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"••••••••",value:s,onChange:ce=>l(ce.target.value),required:!0,autoComplete:"current-password"})]}),u.jsx("button",{type:"submit",disabled:p||se,className:`w-full text-white font-bold py-3 px-6 rounded-md shadow-lg
                        transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2
                        focus:ring-[var(--color-button-primary)] focus:ring-offset-2 dark:focus:ring-offset-gray-900
                        ${p||se?"bg-gray-400 cursor-not-allowed":"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)]"}`,children:"Login"})]}),u.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-6",children:["Don't have an account?"," ",u.jsx(Ve,{to:"/register",className:"text-[var(--color-button-primary)] hover:text-[var(--color-text-accent-light)] font-semibold transition duration-200",children:"Register here"})]})]}),o&&u.jsx(Et,{message:o.message,type:o.type,onClose:()=>d(null)}),h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:u.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl max-w-sm w-full text-center",children:[u.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-white",children:"Email Verification Needed"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"To ensure the security of your account, please verify your email address. Kindly check your inbox and click the verification link we've sent."}),u.jsx("button",{onClick:_e,disabled:y,className:`
                font-bold py-2 px-4 rounded-md shadow-md
                transition duration-200 ease-in-out
                ${y?"bg-gray-400 cursor-not-allowed":"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)] text-white"}
              `,children:y?`Resend in ${E}s`:"Resend Verification Email"}),u.jsx("button",{onClick:()=>x(!1),className:`ml-4 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600\r
                          text-gray-800 dark:text-white font-bold py-2 px-4 rounded-md shadow-md\r
                          transition duration-200 ease-in-out`,children:"Close"})]})}),m&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:u.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl max-w-sm w-full text-center",children:[u.jsx("h3",{className:"text-2xl font-bold mb-4 text-red-600 dark:text-red-400",children:"Account Blocked"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"Your account has been blocked due to too many failed login attempts or administrator action. Please contact the administrator for assistance."}),u.jsx("button",{onClick:()=>g(!1),className:"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)] text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-200 ease-in-out",children:"Close"})]})}),p&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:u.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl max-w-sm w-full text-center",children:[u.jsx("h3",{className:"text-2xl font-bold mb-4 text-yellow-600 dark:text-yellow-400",children:"Too Many Login Attempts!"}),u.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["You have made too many failed login attempts. Please try again in ",Z," seconds."]}),u.jsx("button",{onClick:()=>_(!1),className:"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)] text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-200 ease-in-out",children:"Close"})]})})]})},t1={};var gu=null;function a1(i){try{return crypto.getRandomValues(new Uint8Array(i))}catch{}try{return t1.randomBytes(i)}catch{}if(!gu)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return gu(i)}function r1(i){gu=i}function Au(i,n){if(i=i||Ru,typeof i!="number")throw Error("Illegal arguments: "+typeof i+", "+typeof n);i<4?i=4:i>31&&(i=31);var s=[];return s.push("$2b$"),i<10&&s.push("0"),s.push(i.toString()),s.push("$"),s.push(Ni(a1(Ps),Ps)),s.join("")}function P0(i,n,s){if(typeof n=="function"&&(s=n,n=void 0),typeof i=="function"&&(s=i,i=void 0),typeof i>"u")i=Ru;else if(typeof i!="number")throw Error("illegal arguments: "+typeof i);function l(o){ra(function(){try{o(null,Au(i))}catch(d){o(d)}})}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);l(s)}else return new Promise(function(o,d){l(function(h,x){if(h){d(h);return}o(x)})})}function X0(i,n){if(typeof n>"u"&&(n=Ru),typeof n=="number"&&(n=Au(n)),typeof i!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof i+", "+typeof n);return xu(i,n)}function K0(i,n,s,l){function o(d){typeof i=="string"&&typeof n=="number"?P0(n,function(h,x){xu(i,x,d,l)}):typeof i=="string"&&typeof n=="string"?xu(i,n,d,l):ra(d.bind(this,Error("Illegal arguments: "+typeof i+", "+typeof n)))}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);o(s)}else return new Promise(function(d,h){o(function(x,m){if(x){h(x);return}d(m)})})}function Z0(i,n){for(var s=i.length^n.length,l=0;l<i.length;++l)s|=i.charCodeAt(l)^n.charCodeAt(l);return s===0}function n1(i,n){if(typeof i!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof i+", "+typeof n);return n.length!==60?!1:Z0(X0(i,n.substring(0,n.length-31)),n)}function s1(i,n,s,l){function o(d){if(typeof i!="string"||typeof n!="string"){ra(d.bind(this,Error("Illegal arguments: "+typeof i+", "+typeof n)));return}if(n.length!==60){ra(d.bind(this,null,!1));return}K0(i,n.substring(0,29),function(h,x){h?d(h):d(null,Z0(x,n))},l)}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);o(s)}else return new Promise(function(d,h){o(function(x,m){if(x){h(x);return}d(m)})})}function l1(i){if(typeof i!="string")throw Error("Illegal arguments: "+typeof i);return parseInt(i.split("$")[2],10)}function i1(i){if(typeof i!="string")throw Error("Illegal arguments: "+typeof i);if(i.length!==60)throw Error("Illegal hash length: "+i.length+" != 60");return i.substring(0,29)}function o1(i){if(typeof i!="string")throw Error("Illegal arguments: "+typeof i);return J0(i)>72}var ra=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function J0(i){for(var n=0,s=0,l=0;l<i.length;++l)s=i.charCodeAt(l),s<128?n+=1:s<2048?n+=2:(s&64512)===55296&&(i.charCodeAt(l+1)&64512)===56320?(++l,n+=4):n+=3;return n}function c1(i){for(var n=0,s,l,o=new Array(J0(i)),d=0,h=i.length;d<h;++d)s=i.charCodeAt(d),s<128?o[n++]=s:s<2048?(o[n++]=s>>6|192,o[n++]=s&63|128):(s&64512)===55296&&((l=i.charCodeAt(d+1))&64512)===56320?(s=65536+((s&1023)<<10)+(l&1023),++d,o[n++]=s>>18|240,o[n++]=s>>12&63|128,o[n++]=s>>6&63|128,o[n++]=s&63|128):(o[n++]=s>>12|224,o[n++]=s>>6&63|128,o[n++]=s&63|128);return o}var Dn="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ir=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Ni(i,n){var s=0,l=[],o,d;if(n<=0||n>i.length)throw Error("Illegal len: "+n);for(;s<n;){if(o=i[s++]&255,l.push(Dn[o>>2&63]),o=(o&3)<<4,s>=n){l.push(Dn[o&63]);break}if(d=i[s++]&255,o|=d>>4&15,l.push(Dn[o&63]),o=(d&15)<<2,s>=n){l.push(Dn[o&63]);break}d=i[s++]&255,o|=d>>6&3,l.push(Dn[o&63]),l.push(Dn[d&63])}return l.join("")}function I0(i,n){var s=0,l=i.length,o=0,d=[],h,x,m,g,p,_;if(n<=0)throw Error("Illegal len: "+n);for(;s<l-1&&o<n&&(_=i.charCodeAt(s++),h=_<ir.length?ir[_]:-1,_=i.charCodeAt(s++),x=_<ir.length?ir[_]:-1,!(h==-1||x==-1||(p=h<<2>>>0,p|=(x&48)>>4,d.push(String.fromCharCode(p)),++o>=n||s>=l)||(_=i.charCodeAt(s++),m=_<ir.length?ir[_]:-1,m==-1)||(p=(x&15)<<4>>>0,p|=(m&60)>>2,d.push(String.fromCharCode(p)),++o>=n||s>=l)));)_=i.charCodeAt(s++),g=_<ir.length?ir[_]:-1,p=(m&3)<<6>>>0,p|=g,d.push(String.fromCharCode(p)),++o;var y=[];for(s=0;s<o;s++)y.push(d[s].charCodeAt(0));return y}var Ps=16,Ru=10,u1=16,d1=100,l0=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],i0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],W0=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Xs(i,n,s,l){var o,d=i[n],h=i[n+1];return d^=s[0],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[1],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[2],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[3],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[4],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[5],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[6],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[7],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[8],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[9],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[10],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[11],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[12],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[13],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[14],o=l[d>>>24],o+=l[256|d>>16&255],o^=l[512|d>>8&255],o+=l[768|d&255],h^=o^s[15],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],d^=o^s[16],i[n]=h^s[u1+1],i[n+1]=d,i}function On(i,n){for(var s=0,l=0;s<4;++s)l=l<<8|i[n]&255,n=(n+1)%i.length;return{key:l,offp:n}}function o0(i,n,s){for(var l=0,o=[0,0],d=n.length,h=s.length,x,m=0;m<d;m++)x=On(i,l),l=x.offp,n[m]=n[m]^x.key;for(m=0;m<d;m+=2)o=Xs(o,0,n,s),n[m]=o[0],n[m+1]=o[1];for(m=0;m<h;m+=2)o=Xs(o,0,n,s),s[m]=o[0],s[m+1]=o[1]}function f1(i,n,s,l){for(var o=0,d=[0,0],h=s.length,x=l.length,m,g=0;g<h;g++)m=On(n,o),o=m.offp,s[g]=s[g]^m.key;for(o=0,g=0;g<h;g+=2)m=On(i,o),o=m.offp,d[0]^=m.key,m=On(i,o),o=m.offp,d[1]^=m.key,d=Xs(d,0,s,l),s[g]=d[0],s[g+1]=d[1];for(g=0;g<x;g+=2)m=On(i,o),o=m.offp,d[0]^=m.key,m=On(i,o),o=m.offp,d[1]^=m.key,d=Xs(d,0,s,l),l[g]=d[0],l[g+1]=d[1]}function c0(i,n,s,l,o){var d=W0.slice(),h=d.length,x;if(s<4||s>31)if(x=Error("Illegal number of rounds (4-31): "+s),l){ra(l.bind(this,x));return}else throw x;if(n.length!==Ps)if(x=Error("Illegal salt length: "+n.length+" != "+Ps),l){ra(l.bind(this,x));return}else throw x;s=1<<s>>>0;var m,g,p=0,_;typeof Int32Array=="function"?(m=new Int32Array(l0),g=new Int32Array(i0)):(m=l0.slice(),g=i0.slice()),f1(n,i,m,g);function y(){if(o&&o(p/s),p<s)for(var E=Date.now();p<s&&(p=p+1,o0(i,m,g),o0(n,m,g),!(Date.now()-E>d1)););else{for(p=0;p<64;p++)for(_=0;_<h>>1;_++)Xs(d,_<<1,m,g);var R=[];for(p=0;p<h;p++)R.push((d[p]>>24&255)>>>0),R.push((d[p]>>16&255)>>>0),R.push((d[p]>>8&255)>>>0),R.push((d[p]&255)>>>0);if(l){l(null,R);return}else return R}l&&ra(y)}if(typeof l<"u")y();else for(var A;;)if(typeof(A=y())<"u")return A||[]}function xu(i,n,s,l){var o;if(typeof i!="string"||typeof n!="string")if(o=Error("Invalid string / salt: Not a string"),s){ra(s.bind(this,o));return}else throw o;var d,h;if(n.charAt(0)!=="$"||n.charAt(1)!=="2")if(o=Error("Invalid salt version: "+n.substring(0,2)),s){ra(s.bind(this,o));return}else throw o;if(n.charAt(2)==="$")d="\0",h=3;else{if(d=n.charAt(2),d!=="a"&&d!=="b"&&d!=="y"||n.charAt(3)!=="$")if(o=Error("Invalid salt revision: "+n.substring(2,4)),s){ra(s.bind(this,o));return}else throw o;h=4}if(n.charAt(h+2)>"$")if(o=Error("Missing salt rounds"),s){ra(s.bind(this,o));return}else throw o;var x=parseInt(n.substring(h,h+1),10)*10,m=parseInt(n.substring(h+1,h+2),10),g=x+m,p=n.substring(h+3,h+25);i+=d>="a"?"\0":"";var _=c1(i),y=I0(p,Ps);function A(E){var R=[];return R.push("$2"),d>="a"&&R.push(d),R.push("$"),g<10&&R.push("0"),R.push(g.toString()),R.push("$"),R.push(Ni(y,y.length)),R.push(Ni(E,W0.length*4-1)),R.join("")}if(typeof s>"u")return A(c0(_,y,g));c0(_,y,g,function(E,R){E?s(E,null):s(null,A(R))},l)}function h1(i,n){return Ni(i,n)}function m1(i,n){return I0(i,n)}const u0={setRandomFallback:r1,genSaltSync:Au,genSalt:P0,hashSync:X0,hash:K0,compareSync:n1,compare:s1,getRounds:l1,getSalt:i1,truncates:o1,encodeBase64:h1,decodeBase64:m1},g1=()=>{const[i,n]=w.useState(""),[s,l]=w.useState(""),[o,d]=w.useState(""),[h,x]=w.useState(""),[m,g]=w.useState(""),[p,_]=w.useState(""),[y,A]=w.useState(null),E=sa(),R=async T=>{var O,H,G;if(T.preventDefault(),A(null),!i||!s||!o||!h||!m||!p){A({message:"Please fill in all fields.",type:"error"});return}if(s!==o){A({message:"Passwords do not match.",type:"error"});return}if(s.length<6){A({message:"Password must be at least 6 characters.",type:"error"});return}try{const{data:Z,error:V}=await K.auth.signUp({email:i,password:s,options:{emailRedirectTo:`${window.location.origin}/verify-email-success`}});if(V){A({message:V.message,type:"error"});return}const te=((O=Z.user)==null?void 0:O.id)||((G=(H=Z.session)==null?void 0:H.user)==null?void 0:G.id);if(!te){A({message:"An unexpected error occurred: User ID not found after signup.",type:"error"}),console.error("Auth data:",Z);return}let se=null;try{const oe=await u0.genSalt(10);se=await u0.hash(s,oe)}catch(ne){console.error("Error hashing password with bcryptjs:",ne),A({message:"Failed to process password securely. Please try again.",type:"error"});return}const{error:ie}=await K.from("users").update({password_hash:se,full_name:h,title:m,department:p,is_verified:!1}).eq("id",te);if(ie){console.error("Error updating public.users table:",ie.message),A({message:"Registration failed: Could not save profile data. Please try again.",type:"error"});return}A({message:"Registration successful! Please check your email to verify your account.",type:"success"}),n(""),l(""),d(""),x(""),g(""),_(""),setTimeout(()=>{E("/login?message=check_email")},3e3)}catch(Z){console.error("An unexpected error occurred:",Z),A({message:"An unexpected error occurred during registration. Please try again.",type:"error"})}};return u.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 py-8",children:[u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl animate-fade-in-up",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsx(Ve,{to:"/",className:"inline-block no-underline",children:u.jsxs("h1",{className:`text-4xl font-extrabold text-gray-800 dark:text-white\r
                           hover:text-gray-600 dark:hover:text-gray-300 transition duration-200 ease-in-out`,children:["Register to ",u.jsx("span",{className:"text-[var(--color-button-primary)]",children:"SignSeal"})]})})}),u.jsx("h2",{className:"text-4xl font-bold text-center mb-8 text-gray-800 dark:text-white sr-only",children:"Register for SignSeal"}),u.jsxs("form",{onSubmit:R,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"you@example.com",value:i,onChange:T=>n(T.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),u.jsx("input",{type:"password",id:"password",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"••••••••",value:s,onChange:T=>l(T.target.value),required:!0,autoComplete:"new-password"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirm-password",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),u.jsx("input",{type:"password",id:"confirm-password",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"••••••••",value:o,onChange:T=>d(T.target.value),required:!0,autoComplete:"new-password"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"full-name",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),u.jsx("input",{type:"text",id:"full-name",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"John Doe",value:h,onChange:T=>x(T.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"title",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title (e.g., Registrar, IT Head)"}),u.jsx("input",{type:"text",id:"title",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"Registrar",value:m,onChange:T=>g(T.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"department",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Department (e.g., IT, HR, Finance)"}),u.jsx("input",{type:"text",id:"department",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"IT",value:p,onChange:T=>_(T.target.value),required:!0})]}),u.jsx("button",{type:"submit",className:`w-full bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)]\r
                       text-white font-bold py-3 px-6 rounded-md shadow-lg\r
                       transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2\r
                       focus:ring-[var(--color-button-primary)] focus:ring-offset-2 dark:focus:ring-offset-gray-900`,children:"Register"})]}),u.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-6",children:["Already have an account?"," ",u.jsx(Ve,{to:"/login",className:"text-[var(--color-button-primary)] hover:text-[var(--color-text-accent-light)] font-semibold transition duration-200",children:"Login here"})]})]}),y&&u.jsx(Et,{message:y.message,type:y.type,onClose:()=>A(null)}),u.jsx("style",{children:`
        @keyframes fade-in-up {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.6s ease-out forwards;
        }
      `})]})},x1=()=>{var O;const i=sa(),[n,s]=w.useState(!0),[l,o]=w.useState(null),[d,h]=w.useState(null),[x,m]=w.useState(null),[g,p]=w.useState({length:0}),[_,y]=w.useState({length:0}),[A,E]=w.useState({length:0}),[R,T]=w.useState({message:"",type:""});return w.useEffect(()=>{(async()=>{s(!0),T({message:"Loading your dashboard...",type:"info"});const{data:{user:G},error:Z}=await K.auth.getUser();if(Z||!G){T({message:"You need to be logged in to view the dashboard.",type:"error"}),i("/login");return}o(G),h(G.email);const{data:V,error:te}=await K.from("users").select("full_name, role").eq("id",G.id).single();if(te)console.error("Error fetching user profile:",te),T({message:"Error loading your profile data.",type:"error"});else if(V&&(m(V.role),V.role==="admin")){T({message:"Redirecting to Admin Dashboard...",type:"info"}),i("/admin/dashboard");return}const{count:se,error:ie}=await K.from("documents").select("id",{count:"exact",head:!0}).eq("owner_id",G.id);ie&&(console.error("Error fetching owned documents count:",ie),T({message:"Error loading your documents count.",type:"error"})),p({length:se||0});const{count:ne,error:oe}=await K.from("signature_requests").select("id",{count:"exact",head:!0}).eq("signer_email",G.email).eq("status","pending");oe&&(console.error("Error fetching pending signatures count:",oe),T({message:"Error loading pending signatures count.",type:"error"})),y({length:ne||0});const{count:be,error:ae}=await K.from("signature_requests").select("id",{count:"exact",head:!0}).eq("signer_email",G.email).eq("status","signed");ae&&(console.error("Error fetching completed signatures count:",ae),T({message:"Error loading completed signatures count.",type:"error"})),E({length:be||0}),s(!1),!Z&&!te&&!ie&&!oe&&!ae&&(T({message:"Dashboard loaded!",type:"success"}),setTimeout(()=>T({message:"",type:""}),3e3))})()},[i,d]),u.jsxs("div",{className:"min-h-screen flex flex-col items-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:[R.message&&u.jsx(Et,{message:R.message,type:R.type}),u.jsxs("div",{className:"w-full bg-gradient-to-br from-[var(--color-primary-dark)] to-[var(--color-secondary)] text-[var(--color-text-white)] py-24 md:py-32 text-center mb-16 shadow-xl rounded-b-3xl flex flex-col items-center justify-center relative overflow-hidden",children:[u.jsx("div",{className:"absolute -top-16 -left-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),u.jsx("div",{className:"absolute -bottom-16 -right-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000 -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),u.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-5 leading-tight drop-shadow-lg animate-fade-in-up",style:{color:"var(--color-text-white)"},children:["Welcome, ",((O=l==null?void 0:l.user_metadata)==null?void 0:O.full_name)||(l==null?void 0:l.email)||"User","!"]}),u.jsx("p",{className:"text-lg md:text-xl lg:text-2xl mb-0 max-w-3xl leading-relaxed animate-fade-in-up delay-200",style:{color:"var(--color-text-white-subtle)"},children:"Your central hub for document management and signatures."})]}),n?u.jsx("div",{className:"text-center p-24 text-2xl text-[var(--brand-text-light)]",children:"Loading dashboard data..."}):u.jsx("div",{className:"w-full max-w-7xl px-4 pb-16 box-border",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-md p-8 border border-[var(--brand-border-light)]\r
                         flex flex-col items-center text-center relative overflow-hidden\r
                         transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-lg group`,children:[u.jsx("h2",{className:"text-3xl font-extrabold text-[var(--brand-heading)] mb-6 pb-4 border-b-2 border-[var(--brand-border)] w-full",children:"My Documents"}),u.jsxs("div",{className:"my-8 flex flex-col items-center flex-grow",children:[u.jsx("span",{className:"text-7xl font-extrabold block mb-4 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent drop-shadow-md",children:g.length}),u.jsx("p",{className:"text-xl text-[var(--brand-text-light)] leading-relaxed",children:"documents uploaded"})]}),u.jsx(Ve,{to:"/user/documents",className:`inline-flex justify-center items-center w-auto\r
                           bg-gradient-to-br from-[var(--color-primary-light)] to-[var(--color-primary)]\r
                           text-[var(--color-text-white)] border-none py-4 px-8 rounded-full font-bold text-lg\r
                           transition-all duration-300 ease-out shadow-md\r
                           hover:from-[var(--color-primary)] hover:to-[var(--color-primary-dark)] hover:translate-y-[-4px] hover:shadow-lg`,children:"View All My Documents"})]}),u.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-md p-8 border border-[var(--brand-border-light)]\r
                         flex flex-col items-center text-center relative overflow-hidden\r
                         transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-lg group`,children:[u.jsx("h2",{className:"text-3xl font-extrabold text-[var(--brand-heading)] mb-6 pb-4 border-b-2 border-[var(--brand-border)] w-full",children:"Pending My Signature"}),u.jsxs("div",{className:"my-8 flex flex-col items-center flex-grow",children:[u.jsx("span",{className:"text-7xl font-extrabold block mb-4 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent drop-shadow-md",children:_.length}),u.jsx("p",{className:"text-xl text-[var(--brand-text-light)] leading-relaxed",children:"documents awaiting your signature"})]}),u.jsx(Ve,{to:"/user/signature-requests?tab=received",className:`inline-flex justify-center items-center w-auto\r
                           bg-gradient-to-br from-[var(--color-primary-light)] to-[var(--color-primary)]\r
                           text-[var(--color-text-white)] border-none py-4 px-8 rounded-full font-bold text-lg\r
                           transition-all duration-300 ease-out shadow-md\r
                           hover:from-[var(--color-primary)] hover:to-[var(--color-primary-dark)] hover:translate-y-[-4px] hover:shadow-lg`,children:"View All Pending"})]}),u.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-md p-8 border border-[var(--brand-border-light)]\r
                         flex flex-col items-center text-center relative overflow-hidden\r
                         transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-lg group`,children:[u.jsx("h2",{className:"text-3xl font-extrabold text-[var(--brand-heading)] mb-6 pb-4 border-b-2 border-[var(--brand-border)] w-full",children:"Recently Signed"}),u.jsxs("div",{className:"my-8 flex flex-col items-center flex-grow",children:[u.jsx("span",{className:"text-7xl font-extrabold block mb-4 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent drop-shadow-md",children:A.length}),u.jsx("p",{className:"text-xl text-[var(--brand-text-light)] leading-relaxed",children:"documents you've signed"})]}),u.jsx(Ve,{to:"/user/signature-requests?tab=received",className:`inline-flex justify-center items-center w-auto\r
                           bg-gradient-to-br from-[var(--color-primary-light)] to-[var(--color-primary)]\r
                           text-[var(--color-text-white)] border-none py-4 px-8 rounded-full font-bold text-lg\r
                           transition-all duration-300 ease-out shadow-md\r
                           hover:from-[var(--color-primary)] hover:to-[var(--color-primary-dark)] hover:translate-y-[-4px] hover:shadow-lg`,children:"View All Signed"})]}),u.jsxs("div",{className:`bg-gradient-to-br from-[var(--color-bg-dark-start)] to-[var(--color-bg-dark-end)]\r
                         text-[var(--color-text-white)] rounded-2xl shadow-xl p-16\r
                         flex flex-col items-center text-center col-span-1 md:col-span-2 lg:col-span-3\r
                         transition-all duration-300 ease-out hover:scale-[1.01] hover:shadow-2xl`,children:[u.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-6 drop-shadow-lg",children:"Ready to Sign?"}),u.jsx("p",{className:"text-lg md:text-xl mb-10 max-w-2xl leading-relaxed text-[var(--color-text-white-subtle)]",children:"Start a new signing process or upload a document to send for signatures."}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[u.jsx(Ve,{to:"/user/documents/upload",className:`inline-block py-4 px-10 rounded-full shadow-md font-bold text-xl\r
                             bg-[var(--brand-card)] text-[var(--color-button-primary)]\r
                             transition-all duration-300 ease-out hover:bg-gray-100 hover:translate-y-[-4px] hover:shadow-lg`,children:"Upload New Document"}),u.jsx(Ve,{to:"/user/signature-requests",className:`inline-block py-4 px-10 rounded-full shadow-md font-bold text-xl\r
                             bg-transparent text-[var(--color-text-white)] border-2 border-[var(--color-text-white-subtle)]\r
                             transition-all duration-300 ease-out hover:bg-[rgba(255,255,255,0.1)] hover:translate-y-[-4px] hover:border-white`,children:"Request Signature"})]})]})]})})]})},b1=()=>{const[i,n]=w.useState(!0),[s,l]=w.useState([]),[o,d]=w.useState({message:"",type:""}),h=sa(),[x,m]=w.useState(null);w.useEffect(()=>{(async()=>{n(!0),d({message:"Fetching your documents...",type:"info"});const{data:{user:y},error:A}=await K.auth.getUser();if(A||!y){d({message:"Please log in to view your documents.",type:"error"}),h("/login");return}const{data:E,error:R}=await K.from("documents").select(`
        id,
        title,
        status,
        created_at,
        updated_at,
        document_versions:fk_document_versions_document_id (
          id,
          version_number,
          file_path,
          created_at
        )
      `).eq("owner_id",y.id).order("updated_at",{ascending:!1});R?(console.error("Error fetching documents:",R),d({message:"Error loading your documents.",type:"error"})):(l(E),d({message:"Documents loaded successfully!",type:"success"}),setTimeout(()=>d({message:"",type:""}),3e3)),n(!1)})()},[h]);const g=_=>!_.document_versions||_.document_versions.length===0?null:_.document_versions.reduce((y,A)=>new Date(A.created_at)>new Date(y.created_at)?A:y),p=_=>{const y=g(_),A=`doc-${_.id}`;return u.jsx("li",{style:xt.documentItem,children:u.jsxs(Ve,{to:`/user/documents/${_.id}`,style:{...xt.documentLink,...x===A&&xt.documentLinkHover},onMouseEnter:()=>m(A),onMouseLeave:()=>m(null),children:[u.jsxs("div",{style:xt.documentTitleContainer,children:[u.jsx("span",{style:xt.documentTitle,children:_.title||"Untitled Document"}),u.jsxs("span",{style:xt.documentStatus,children:["(",_.status,")"]})]}),u.jsxs("div",{style:xt.documentMeta,children:[u.jsxs("span",{children:["Created: ",new Date(_.created_at).toLocaleDateString()]}),u.jsxs("span",{children:["Last Updated: ",new Date(_.updated_at).toLocaleDateString()]}),y&&u.jsxs("span",{children:["Version: ",y.version_number]})]})]})},_.id)};return u.jsxs("div",{style:xt.pageContainer,children:[o.message&&u.jsx(Et,{message:o.message,type:o.type}),u.jsx("h1",{style:xt.heading,children:"My Documents"}),u.jsx("p",{style:xt.subheading,children:"Manage all the documents you've uploaded."}),i?u.jsx("div",{style:xt.loadingContainer,children:"Loading your documents..."}):u.jsxs("div",{style:xt.contentArea,children:[u.jsx("div",{style:xt.topActions,children:u.jsx(Ve,{to:"/user/documents/upload",style:xt.uploadButton,children:"Upload New Document"})}),s.length===0?u.jsxs("p",{style:xt.noDocuments,children:["You haven't uploaded any documents yet.",u.jsxs(Ve,{to:"/user/documents/upload",style:xt.actionLink,children:[" ","Click here to upload your first document!"]})]}):u.jsx("ul",{style:xt.documentList,children:s.map(p)})]})]})},xt={pageContainer:{backgroundColor:"var(--brand-bg-light)",minHeight:"calc(100vh - var(--navbar-height, 0px))",padding:"40px",fontFamily:"'Inter', sans-serif",color:"var(--brand-text)"},heading:{fontSize:"3.2em",fontWeight:"800",color:"var(--brand-heading)",marginBottom:"10px",textShadow:"0 2px 4px rgba(0,0,0,0.05)"},subheading:{fontSize:"1.3em",color:"var(--brand-text-light)",marginBottom:"40px"},loadingContainer:{textAlign:"center",padding:"60px",fontSize:"1.2em",color:"var(--brand-text-light)"},contentArea:{backgroundColor:"var(--brand-card)",borderRadius:"12px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.08)",padding:"30px",border:"1px solid var(--brand-border)"},topActions:{marginBottom:"30px",textAlign:"right"},uploadButton:{backgroundColor:"var(--color-button-primary)",color:"white",border:"none",padding:"12px 28px",borderRadius:"9999px",fontWeight:"600",textDecoration:"none",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",cursor:"pointer",transition:"background-color 0.3s ease, transform 0.2s ease",fontSize:"1em",display:"inline-block","&:hover":{backgroundColor:"var(--color-button-primary-hover)",transform:"translateY(-2px)"}},noDocuments:{color:"var(--brand-text-light)",fontStyle:"italic",textAlign:"center",padding:"30px 0",fontSize:"1.1em"},actionLink:{color:"var(--color-button-primary)",textDecoration:"none",fontWeight:"600",transition:"text-decoration 0.2s ease-in-out","&:hover":{textDecoration:"underline"}},documentList:{listStyleType:"none",padding:0,margin:0},documentItem:{marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid var(--brand-border-light)","&:last-child":{borderBottom:"none"}},documentLink:{textDecoration:"none",display:"block",color:"var(--brand-text)",transition:"color 0.2s ease-in-out"},documentLinkHover:{color:"var(--color-button-primary)"},documentTitleContainer:{display:"flex",alignItems:"center",marginBottom:"5px"},documentTitle:{fontSize:"1.3em",fontWeight:"600",marginRight:"10px"},documentStatus:{fontSize:"0.9em",backgroundColor:"var(--brand-bg-light)",color:"var(--brand-text-light)",padding:"4px 10px",borderRadius:"20px",fontWeight:"500"},documentMeta:{fontSize:"0.9em",color:"var(--brand-text-light)",display:"flex",gap:"20px",flexWrap:"wrap"}},p1=()=>{const[i,n]=w.useState(null),[s,l]=w.useState(""),[o,d]=w.useState(""),[h,x]=w.useState(!1),[m,g]=w.useState({message:"",type:""}),[p,_]=w.useState(null),y=sa(),A=w.useRef(null);w.useEffect(()=>{(async()=>{const{data:{user:O},error:H}=await K.auth.getUser();H||!O?(g({message:"You need to be logged in to upload documents.",type:"error"}),y("/login")):_(O)})()},[y]);const E=T=>{n(T.target.files[0])},R=async T=>{if(T.preventDefault(),!p){g({message:"No user logged in.",type:"error"});return}if(!i){g({message:"Please select a file first.",type:"error"});return}if(!s.trim()){g({message:"Please enter a document title.",type:"error"});return}x(!0),g({message:"Uploading document...",type:"info"});try{const{data:O,error:H}=await K.from("documents").insert([{owner_id:p.id,title:s.trim(),description:o.trim()||null,status:"draft",latest_version_number:0,current_document_version_id:null}]).select().single();if(H)throw H;const G=`${p.id}/${O.id}/version_1_${i.name}`,{data:Z,error:V}=await K.storage.from("documents").upload(G,i,{cacheControl:"3600",upsert:!1});if(V)throw await K.from("documents").delete().eq("id",O.id),V;const{data:te,error:se}=await K.from("document_versions").insert([{document_id:O.id,version_number:1,file_path:Z.path,file_name:i.name,file_type:i.type||"application/octet-stream",file_size:i.size,created_by_user_id:p.id,description_of_changes:"Initial upload of document.",is_signed_version:!1}]).select().single();if(se)throw await K.storage.from("documents").remove([Z.path]),await K.from("documents").delete().eq("id",O.id),se;const{error:ie}=await K.from("documents").update({latest_version_number:1,current_document_version_id:te.id,updated_at:new Date().toISOString()}).eq("id",O.id);ie?(console.error("Critical error: Failed to link document to its first version.",ie),g({message:"Document uploaded, but failed to link to its version. Please contact support.",type:"error"})):(g({message:"Document uploaded successfully!",type:"success"}),n(null),l(""),d(""),A.current&&(A.current.value="")),y(`/user/documents/${O.id}`)}catch(O){console.error("Upload failed:",O),g({message:`Upload failed: ${O.message}`,type:"error"})}finally{x(!1)}};return u.jsxs("div",{style:jt.pageContainer,children:[m.message&&u.jsx(Et,{message:m.message,type:m.type}),u.jsx("h1",{style:jt.heading,children:"Upload New Document"}),u.jsx("p",{style:jt.subheading,children:"Start by uploading your first document to the system."}),u.jsxs("form",{onSubmit:R,style:jt.uploadForm,children:[u.jsxs("div",{style:jt.formGroup,children:[u.jsx("label",{htmlFor:"documentTitle",style:jt.label,children:"Document Title:"}),u.jsx("input",{type:"text",id:"documentTitle",value:s,onChange:T=>l(T.target.value),placeholder:"e.g., Q2 Financial Report",required:!0,style:jt.input})]}),u.jsxs("div",{style:jt.formGroup,children:[u.jsx("label",{htmlFor:"documentDescription",style:jt.label,children:"Description (Optional):"}),u.jsx("textarea",{id:"documentDescription",value:o,onChange:T=>d(T.target.value),rows:"4",placeholder:"A brief description of the document's content.",style:jt.textarea})]}),u.jsxs("div",{style:jt.formGroup,children:[u.jsx("label",{htmlFor:"fileUpload",style:jt.label,children:"Select File:"}),u.jsx("input",{type:"file",id:"fileUpload",ref:A,onChange:E,required:!0,style:jt.fileInput}),i&&u.jsxs("p",{style:jt.fileName,children:["Selected: ",i.name," (",(i.size/1024/1024).toFixed(2)," MB)"]})]}),u.jsx("button",{type:"submit",disabled:h||!p,style:jt.uploadButton,children:h?"Uploading...":"Upload Document"})]})]})},jt={pageContainer:{backgroundColor:"var(--brand-bg-light)",minHeight:"calc(100vh - var(--navbar-height, 0px))",padding:"40px",fontFamily:"'Inter', sans-serif",color:"var(--brand-text)",display:"flex",flexDirection:"column",alignItems:"center"},heading:{fontSize:"3.2em",fontWeight:"800",color:"var(--brand-heading)",marginBottom:"10px",textShadow:"0 2px 4px rgba(0,0,0,0.05)",textAlign:"center"},subheading:{fontSize:"1.3em",color:"var(--brand-text-light)",marginBottom:"40px",textAlign:"center",maxWidth:"800px"},uploadForm:{backgroundColor:"var(--brand-card)",borderRadius:"12px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.08)",padding:"40px",border:"1px solid var(--brand-border)",width:"100%",maxWidth:"600px",display:"flex",flexDirection:"column",gap:"25px"},formGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"1.1em",fontWeight:"600",color:"var(--brand-text)"},input:{padding:"12px 15px",border:"1px solid var(--brand-border-light)",borderRadius:"8px",fontSize:"1em",color:"var(--brand-text)",backgroundColor:"var(--brand-bg-dark-accent)",transition:"border-color 0.2s ease, box-shadow 0.2s ease","&:focus":{borderColor:"var(--color-primary)",boxShadow:"0 0 0 3px rgba(var(--color-primary-rgb), 0.2)",outline:"none"}},textarea:{padding:"12px 15px",border:"1px solid var(--brand-border-light)",borderRadius:"8px",fontSize:"1em",color:"var(--brand-text)",backgroundColor:"var(--brand-bg-dark-accent)",minHeight:"100px",resize:"vertical",transition:"border-color 0.2s ease, box-shadow 0.2s ease","&:focus":{borderColor:"var(--color-primary)",boxShadow:"0 0 0 3px rgba(var(--color-primary-rgb), 0.2)",outline:"none"}},fileInput:{padding:"10px",border:"1px solid var(--brand-border-light)",borderRadius:"8px",backgroundColor:"var(--brand-bg-dark-accent)",color:"var(--brand-text)",cursor:"pointer"},fileName:{fontSize:"0.9em",color:"var(--brand-text-light)",marginTop:"5px"},uploadButton:{backgroundColor:"var(--color-button-primary)",color:"white",border:"none",padding:"15px 30px",borderRadius:"9999px",fontWeight:"700",fontSize:"1.1em",cursor:"pointer",transition:"background-color 0.3s ease, transform 0.2s ease",boxShadow:"0 5px 15px rgba(0,0,0,0.15)",marginTop:"20px",alignSelf:"center",width:"fit-content","&:hover":{backgroundColor:"var(--color-button-primary-hover)",transform:"translateY(-2px)"},"&:disabled":{backgroundColor:"var(--color-grey)",cursor:"not-allowed",transform:"none",boxShadow:"none"}}},y1=({filePath:i,fileType:n})=>{const[s,l]=w.useState(null),[o,d]=w.useState(!0),[h,x]=w.useState(null);if(w.useEffect(()=>{(async()=>{if(!i){x("No file path provided for viewer."),d(!1);return}d(!0),x(null);try{const{data:_,error:y}=await K.storage.from("documents").createSignedUrl(i,60);if(y)throw y;l(_.signedUrl)}catch(_){console.error("Error fetching signed URL:",_),x(`Failed to load document preview: ${_.message}`)}finally{d(!1)}})()},[i]),o)return u.jsx("div",{style:Or.container,children:"Loading preview..."});if(h)return u.jsx("div",{style:Or.error,children:h});if(!s)return u.jsx("div",{style:Or.container,children:"No preview available."});const m=n==="application/pdf",g=n.startsWith("image/");return m?u.jsx("div",{style:Or.container,children:s?u.jsx("embed",{src:s+"#toolbar=1&navpanes=0&scrollbar=1",type:"application/pdf",width:"100%",height:"100%"}):u.jsx("p",{children:"No preview available"})}):g?u.jsx("div",{style:Or.container,children:u.jsx("img",{src:s,alt:"Document Preview",style:Or.image,loading:"lazy"})}):u.jsxs("div",{style:Or.container,children:[u.jsxs("p",{children:["No preview available for this file type (",n,")."]}),u.jsx("p",{children:"Please download the file to view its content."})]})},Or={container:{width:"100%",height:"600px",backgroundColor:"var(--brand-bg-dark)",borderRadius:"8px",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",color:"var(--brand-text-light)",fontSize:"1.1em",border:"1px solid var(--brand-border)"},image:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},error:{color:"var(--color-error-text)",backgroundColor:"var(--color-error-bg)",padding:"15px",borderRadius:"8px",textAlign:"center"}},na=({show:i,onClose:n,children:s})=>i?u.jsx("div",{style:nu.overlay,onClick:n,children:u.jsxs("div",{style:nu.modalContent,onClick:l=>l.stopPropagation(),children:[u.jsx("button",{style:nu.closeButton,onClick:n,children:"×"}),s]})}):null,nu={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modalContent:{backgroundColor:"var(--brand-card)",padding:"30px",borderRadius:"12px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.25)",position:"relative",minWidth:"350px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},closeButton:{position:"absolute",top:"15px",right:"15px",background:"none",border:"none",fontSize:"1.8em",color:"var(--brand-text-light)",cursor:"pointer",transition:"color 0.2s ease","&:hover":{color:"var(--brand-heading)"}}},v1=i=>{const n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=i.split(/[,;\n]/).map(h=>h.trim()).filter(h=>h.length>0),l=[],o=[],d=new Set;return s.forEach(h=>{n.test(h)?d.has(h)||(l.push(h),d.add(h)):o.push(h)}),{validEmails:l,invalidEmails:o}},_1=()=>{var yt;const{id:i}=Wb(),n=sa(),[s,l]=w.useState(null),[o,d]=w.useState([]),[h,x]=w.useState([]),[m,g]=w.useState(!0),[p,_]=w.useState({message:"",type:""}),[y,A]=w.useState(null),[E,R]=w.useState(!1),[T,O]=w.useState(""),[H,G]=w.useState(""),[Z,V]=w.useState(!1),[te,se]=w.useState(null),[ie,ne]=w.useState(""),oe=w.useRef(null),[be,ae]=w.useState(!1),[_e,ce]=w.useState(null),[ue,q]=w.useState([]),[J,j]=w.useState(!1),[Q,S]=w.useState(!1),[z,U]=w.useState(""),[Y,D]=w.useState("requests"),[ee,I]=w.useState(""),[xe,re]=w.useState(!1),[ge,pe]=w.useState(""),[Ee,bt]=w.useState(""),la=async W=>{const{data:we,error:ke}=await K.from("audit_logs").select(`
        *,
        signature_request:signature_request_id (
          signer_email,
          signer:signer_id (
            full_name,
            title,
            department
          )
        )
      `).eq("signature_request_id",W).order("timestamp",{ascending:!0});if(ke)throw ke;return we||[]},Jt=async()=>{g(!0);const{data:{user:W},error:we}=await K.auth.getUser();if(we||!W){_({message:"You need to be logged in to view document details.",type:"error"}),n("/login"),g(!1);return}A(W),bt(W.email||"");const{data:ke,error:Ce}=await K.from("documents").select(`
          *,
          current_document_version:current_document_version_id (
            id, file_path, file_name, file_type, file_size, version_number
          )
        `).eq("id",i).eq("owner_id",W.id).single();if(Ce){console.error("Error fetching document:",Ce),_({message:`Error loading document: ${Ce.message}`,type:"error"}),g(!1),(Ce.code==="PGRST116"||Ce.message.includes("Row not found"))&&(_({message:"Document not found or you don't have access.",type:"error"}),n("/user/documents"));return}l(ke),O(ke.title),G(ke.description||"");const{data:Ye,error:Fe}=await K.from("document_versions").select(`
          id, version_number, file_path, file_name, file_type, file_size,
          created_at, created_by_user_id, description_of_changes, is_signed_version
        `).eq("document_id",i).order("version_number",{ascending:!1});Fe?(console.error("Error fetching document versions:",Fe),_({message:`Error loading document versions: ${Fe.message}`,type:"error"})):(d(Ye),ke.current_document_version_id?I(ke.current_document_version_id):Ye.length>0&&I(Ye[0].id));const{data:ft,error:st}=await K.from("signature_requests").select(`
        id, document_version_id, signer_email, status, requested_at, signed_at,
        declined_at, cancelled_at, signing_url,
        signer:signer_id (full_name, title, department)
        `).eq("document_id",i).order("requested_at",{ascending:!0});st?(console.error("Error fetching signature requests:",st),_({message:`Error loading signature requests: ${st.message}`,type:"error"})):x(ft),g(!1)};w.useEffect(()=>{Jt()},[i,n]);const Ws=async(W,we)=>{if(typeof window>"u"||typeof window.document>"u"){console.error("Download attempted outside the browser environment.");return}if(!W||!we){_({message:"File path or name is missing.",type:"error"});return}try{const{data:ke,error:Ce}=await K.storage.from("documents").download(W);if(Ce)throw Ce;const Ye=URL.createObjectURL(ke),Fe=window.document.createElement("a");Fe.href=Ye,Fe.download=we,window.document.body.appendChild(Fe),Fe.click(),window.document.body.removeChild(Fe),URL.revokeObjectURL(Ye),_({message:`Downloading ${we}...`,type:"info"})}catch(ke){console.error("Error downloading file:",ke),_({message:`Failed to download file: ${ke.message}`,type:"error"})}},Ci=async()=>{g(!0);const{error:W}=await K.from("documents").update({title:T,description:H}).eq("id",s.id).eq("owner_id",y.id);W?(_({message:`Failed to update document details: ${W.message}`,type:"error"}),console.error("Error updating document:",W)):(l(we=>({...we,title:T,description:H})),_({message:"Document details updated successfully!",type:"success"}),R(!1)),g(!1)},Ht=async W=>{if(W.preventDefault(),!te){_({message:"Please select a file to upload.",type:"error"});return}if(!s){_({message:"Document not loaded.",type:"error"});return}g(!0),V(!1);const we=(s.latest_version_number||0)+1,ke=te.name.replace(/[^a-zA-Z0-9.\-_]/g,"_"),Ce=`${y.id}/${s.id}/version_${we}_${ke}`;try{console.log("--- Starting New Version Upload ---"),console.log("Document ID:",s.id),console.log("Current Document Version ID (before new upload):",s.current_document_version_id),console.log("New Version Number:",we),console.log("File Name:",te.name);const{data:Ye,error:Fe}=await K.storage.from("documents").upload(Ce,te,{cacheControl:"3600",upsert:!1});if(Fe)throw console.error("Supabase Storage Upload Error:",Fe),Fe;if(console.log("File uploaded to storage successfully:",Ye.path),s.current_document_version_id){console.log("Attempting to void previous signature requests...");const tt=new Date().toISOString(),{data:Nt,error:La}=await K.from("signature_requests").update({status:"void",voided_at:tt},{returning:"representation"}).eq("document_id",s.id).eq("document_version_id",s.current_document_version_id);La?(console.error("Error voiding previous signature requests:",La),_({message:"New version uploaded, but failed to void some old signature requests.",type:"warning"})):(console.log("Previous signature requests update result:",Nt==null?void 0:Nt.length,"requests updated to 'void'."),_({message:"Previous signature requests voided.",type:"info"}))}else console.log("No previous document_version_id found. Skipping voiding of old requests.");const{data:ft,error:st}=await K.from("document_versions").insert([{document_id:s.id,version_number:we,file_path:Ye.path,file_name:te.name,file_type:te.type||"application/octet-stream",file_size:te.size,created_by_user_id:y.id,description_of_changes:ie,is_signed_version:!1}]).select().single();if(st)throw console.error("Document Version Insert Error:",st),await K.storage.from("documents").remove([Ye.path]),st;console.log("New document version inserted:",ft);const{error:Ze}=await K.from("documents").update({latest_version_number:we,current_document_version_id:ft.id}).eq("id",s.id);Ze?(console.error("Critical error: Failed to update document's current version:",Ze),_({message:"Document updated, but link to new version failed. Please contact support.",type:"error"})):(_({message:`Document updated to Version ${we}!`,type:"success"}),console.log("Document successfully updated to new current version.")),se(null),ne(""),oe.current&&(oe.current.value=""),await Jt()}catch(Ye){console.error("Overall New Version Upload Process Failed:",Ye),_({message:`Upload failed: ${Ye.message}`,type:"error"})}finally{g(!1),console.log("--- New Version Upload Process Finished ---")}},Di=async W=>{W.preventDefault();const{validEmails:we,invalidEmails:ke}=v1(z);if(we.length===0){_({message:"Please enter at least one valid email address to send the request.",type:"error"});return}if(!s||!s.current_document_version){_({message:"No current document version to send for signature.",type:"error"});return}g(!0),S(!1);const Ce=[],Ye=[],Fe=we.map(async Ze=>{try{const tt=crypto.randomUUID(),Nt=`${window.location.origin}/user/sign/${tt}`,{data:La,error:za}=await K.from("signature_requests").select("id").eq("document_id",s.id).eq("document_version_id",s.current_document_version_id).eq("signer_email",Ze).maybeSingle();if(za)throw za;if(La){Ce.push({email:Ze,status:"already_sent"});return}const{data:nl,error:$n}=await K.from("signature_requests").insert([{id:tt,document_id:s.id,document_version_id:s.current_document_version_id,signer_email:Ze,status:"pending",requested_at:new Date().toISOString(),signing_url:Nt}]).select().single();if($n)throw $n;await K.from("audit_logs").insert({user_id:y.id,user_email:y.email,event_type:"SIGNATURE_REQUEST_SENT",document_id:s.id,document_version_id:s.current_document_version_id,signature_request_id:nl.id,details:{signer_email:Ze,signing_url:Nt}}),Ce.push({email:Ze,id:nl.id,signing_url:Nt})}catch(tt){console.error(`Error sending signature request to ${Ze}:`,tt),Ye.push({email:Ze,error:tt.message})}});if(await Promise.allSettled(Fe),Ce.length>0&&s.status!=="pending_signature"&&s.status!=="signed"){const{error:Ze}=await K.from("documents").update({status:"pending_signature"}).eq("id",s.id);Ze?(console.error("Failed to update document status after signature request:",Ze),_({message:"Some signature requests sent, but document status update failed. Please check document status manually.",type:"warning"})):l(tt=>({...tt,status:"pending_signature"}))}let ft="",st="success";if(Ce.length>0){const Ze=Ce.filter(Nt=>Nt.status!=="already_sent").length,tt=Ce.filter(Nt=>Nt.status==="already_sent").length;ft+=`${Ze} signature request(s) sent successfully.`,tt>0&&(ft+=` (${tt} request(s) were already pending for the current version.)`)}if(Ye.length>0){st=Ce.length>0?"warning":"error";const Ze=Ye.map(tt=>tt.email).join(", ");ft+=` Failed to send to: ${Ze}.`,ft+=` Details: ${Ye.map(tt=>tt.error).join("; ")}`}if(ke.length>0){st=st==="success"?"warning":"error";const Ze=ke.join(", ");ft+=` Invalid emails ignored: ${Ze}.`}_(ft?{message:ft,type:st}:{message:"No valid emails provided.",type:"error"}),U(""),await Jt(),g(!1)},el=async()=>{if(!(!s||!y)&&window.confirm("Are you sure you want to cancel this document and all pending signature requests? This action cannot be undone.")){g(!0);try{const{error:W}=await K.from("documents").update({status:"cancelled"}).eq("id",s.id).eq("owner_id",y.id);if(W)throw W;const{error:we}=await K.from("signature_requests").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancelled_by_user_id:y.id}).eq("document_id",s.id).in("status",["pending","declined","expired"]);we&&console.warn("Could not update all related signature requests to cancelled:",we),await K.from("audit_logs").insert({user_id:y.id,user_email:y.email,event_type:"DOCUMENT_CANCELLED",document_id:s.id,details:{cancellation_reason:"Cancelled by sender",old_status:s.status}}),_({message:"Document and all pending signature requests have been cancelled.",type:"success"}),await Jt()}catch(W){console.error("Error cancelling document:",W),_({message:`Failed to cancel document: ${W.message}`,type:"error"})}finally{g(!1)}}},tl=async W=>{if(W.preventDefault(),!ge.trim()){_({message:"Please provide a description for the issue.",type:"error"});return}g(!0),re(!1);try{const{error:we}=await K.from("incident_reports").insert([{document_id:s.id,reported_by_user_id:y.id,reported_by_email:Ee,reason:"User Reported Issue",details:ge,status:"pending"}]);if(we)throw we;_({message:"Your issue has been reported successfully. We will look into it shortly.",type:"success"}),pe("")}catch(we){console.error("Error reporting issue:",we),_({message:`Failed to report issue: ${we.message}`,type:"error"})}finally{g(!1)}},hr=ee?h.filter(W=>W.document_version_id===ee):h;if(m)return u.jsxs("div",{className:"bg-brand-bg-light min-h-[calc(100vh-var(--navbar-height,0px))] p-10 font-inter text-brand-text flex flex-col items-center justify-center",children:[u.jsx("h1",{className:"text-5xl font-extrabold text-brand-heading mb-2 drop-shadow-sm text-center break-words",children:"Document Details"}),u.jsx("p",{className:"text-xl text-brand-text-light text-center",children:"Loading document details..."})]});if(!s)return u.jsxs("div",{className:"bg-brand-bg-light min-h-[calc(100vh-var(--navbar-height,0px))] p-10 font-inter text-brand-text flex flex-col items-center justify-center",children:[u.jsx("h1",{className:"text-5xl font-extrabold text-brand-heading mb-2 drop-shadow-sm text-center break-words",children:"Document Not Found"}),u.jsx("p",{className:"text-xl text-brand-text-light text-center mb-10",children:"The document you are looking for does not exist or you do not have permission to view it."}),u.jsx(Ve,{to:"/user/documents",className:"bg-gray-500 text-white px-6 py-3 rounded-full font-semibold text-lg cursor-pointer transition duration-300 ease-in-out hover:bg-gray-600 hover:translate-y-[-2px]",children:"Back to My Documents"})]});const al=y&&s.owner_id===y.id,rl=al&&s.status!=="signed"&&s.status!=="cancelled",ki=al&&s.status==="pending_signature",It=s.current_document_version,mr=["application/pdf","image/jpeg","image/png","image/gif"],pt=W=>{switch(W){case"draft":return"bg-color-info-bg text-color-info-text";case"pending_signature":return"bg-color-warning-bg text-color-warning-text";case"signed":return"bg-color-success-bg text-color-success-text";case"cancelled":return"bg-color-error-bg text-color-error-text";case"approved":return"bg-color-success-bg text-color-success-text";case"rejected":return"bg-color-error-bg text-color-error-text";case"void":return"bg-gray-400 text-gray-900";default:return"bg-gray-200 text-gray-800"}},ia=W=>{if(W===0)return"0 Bytes";const we=1024,ke=["Bytes","KB","MB","GB","TB"],Ce=Math.floor(Math.log(W)/Math.log(we));return parseFloat((W/Math.pow(we,Ce)).toFixed(2))+" "+ke[Ce]};return u.jsxs("div",{className:"bg-brand-bg-light min-h-[calc(100vh-var(--navbar-height,0px))] p-4 md:p-8 font-inter text-brand-text flex flex-col items-center antialiased",children:[p.message&&u.jsx(Et,{message:p.message,type:p.type}),u.jsxs("div",{className:"w-full max-w-7xl mb-8 px-4 md:px-0",children:[" ",u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-brand-heading drop-shadow-sm break-words tracking-tight flex-1",children:s.title}),u.jsx("span",{className:`px-4 py-1 rounded-full text-base font-semibold whitespace-nowrap mt-2 md:mt-0 ${pt(s.status)}`,children:s.status.replace(/_/g," ")})]}),u.jsx("p",{className:"text-base md:text-lg text-brand-text-light mb-6 leading-relaxed",children:"Comprehensive details and management for your document."}),s.status==="cancelled"&&u.jsxs("div",{className:"bg-color-error-bg text-color-error-text border-2 border-color-error-border rounded-xl p-4 text-center text-lg font-semibold flex items-center justify-center gap-3",children:[u.jsx("span",{className:"text-2xl",children:"⚠️"}),u.jsxs("p",{children:["This document has been ",u.jsx("strong",{children:"cancelled"})," by the sender and is no longer valid for signing."]})]})]}),u.jsxs("div",{className:"w-full max-w-7xl grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-8 min-w-0",children:[" ",u.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-6 md:p-8 border border-brand-border",children:[" ",u.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-brand-heading mb-4 pb-2 border-b border-brand-border-light",children:"Document Preview"}),It&&mr.includes(It.file_type)?u.jsxs("div",{className:"rounded-lg overflow-hidden border border-brand-border-light bg-brand-bg-dark-accent h-[500px] lg:h-[600px] flex items-center justify-center",children:[" ",u.jsx(y1,{filePath:It.file_path,fileType:It.file_type})]}):It?u.jsxs("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg h-[500px] lg:h-[600px] flex items-center justify-center",children:["No preview available for this file type (",It.file_type,"). Please download to view."]}):u.jsx("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg h-[500px] lg:h-[600px] flex items-center justify-center",children:"No current version to preview. Please upload a version."})]}),u.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-6 md:p-8 border border-brand-border",children:[u.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-brand-heading mb-4 pb-2 border-b border-brand-border-light",children:"Document Summary"}),u.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[u.jsx("strong",{children:"Title:"})," ",E?u.jsx("input",{type:"text",value:T,onChange:W=>O(W.target.value),className:"p-2 border border-brand-border rounded-md text-base text-brand-text bg-brand-bg-dark-accent w-full focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200"}):u.jsx("span",{children:s.title})]}),u.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[u.jsx("strong",{children:"Created:"})," ",new Date(s.created_at).toLocaleDateString()]}),u.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[u.jsx("strong",{children:"Last Updated:"})," ",new Date(s.updated_at).toLocaleDateString()]}),u.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[u.jsx("strong",{children:"Latest Version:"})," ",s.latest_version_number]}),u.jsxs("div",{className:"text-base md:text-lg text-brand-text",children:[u.jsx("strong",{children:"Description:"})," ",E?u.jsx("textarea",{value:H,onChange:W=>G(W.target.value),className:"p-2 border border-brand-border rounded-md text-base text-brand-text bg-brand-bg-dark-accent w-full h-20 resize-y focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",rows:"3"}):u.jsx("span",{children:s.description||"No description provided."})]})]})]}),u.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-8 w-full",children:[" ",u.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-6 md:p-8 border border-brand-border",children:[u.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-brand-heading mb-4 pb-2 border-b border-brand-border-light",children:"Actions"}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[rl?u.jsxs(u.Fragment,{children:[E?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:Ci,className:"bg-color-success text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-success-hover hover:-translate-y-1 shadow-md",children:"Save"}),u.jsx("button",{onClick:()=>R(!1),className:"bg-gray-500 text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-gray-600 hover:-translate-y-1 shadow-md",children:"Cancel"})]}):u.jsx("button",{onClick:()=>R(!0),className:"bg-color-info text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-info-hover hover:-translate-y-1 shadow-md",children:"Edit Details"}),u.jsx("button",{onClick:()=>V(!0),className:"bg-color-secondary text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-secondary-hover hover:-translate-y-1 shadow-md",children:"Upload New Version"}),u.jsx("button",{onClick:()=>S(!0),className:"bg-color-secondary text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-secondary-hover hover:-translate-y-1 shadow-md",children:"Send for Signature"})]}):u.jsxs("p",{className:"text-brand-text-light italic p-3 bg-brand-bg-dark-accent rounded-md border border-brand-border text-center w-full",children:["Document status (",s.status.replace(/_/g," "),") prevents further modifications."]}),ki&&u.jsx("button",{onClick:el,className:"bg-color-error text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-error-hover hover:-translate-y-1 shadow-md",children:"Cancel Document"}),It&&u.jsx("button",{onClick:()=>Ws(It.file_path,It.file_name),className:"bg-color-button-primary text-white px-5 py-2 rounded-full font-bold text-base cursor-pointer transition duration-300 ease-in-out shadow-md hover:bg-color-button-primary-hover hover:-translate-y-1",children:"Download Current Version"})]})]}),u.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-0 border border-brand-border flex-1 flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"flex border-b border-brand-border-light",children:[u.jsx("button",{className:`flex-1 px-4 py-3 text-base font-semibold rounded-t-lg ${Y==="requests"?"border-b-2 border-color-button-primary text-color-button-primary bg-brand-bg-light":"text-brand-text-light hover:text-brand-heading"} transition-colors duration-200`,onClick:()=>D("requests"),children:"Signature Requests"}),u.jsx("button",{className:`flex-1 px-4 py-3 text-base font-semibold rounded-t-lg ${Y==="versions"?"border-b-2 border-color-button-primary text-color-button-primary bg-brand-bg-light":"text-brand-text-light hover:text-brand-heading"} transition-colors duration-200`,onClick:()=>D("versions"),children:"Document Versions"})]}),u.jsxs("div",{className:"p-6 md:p-8 flex-1 flex flex-col",children:[Y==="requests"&&u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"version-select",className:"block text-brand-text mb-2 text-base font-medium",children:"Select Document Version:"}),u.jsxs("select",{id:"version-select",value:ee,onChange:W=>I(W.target.value),className:"w-full p-2 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",children:[u.jsx("option",{value:"",children:"All Versions"}),o.map(W=>u.jsxs("option",{value:W.id,children:["Version ",W.version_number," (",new Date(W.created_at).toLocaleDateString(),")"]},W.id))]})]}),hr.length===0?u.jsx("div",{className:"flex-1 flex items-center justify-center",children:u.jsx("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg",children:"No signature requests found for the selected version."})}):u.jsx("div",{className:"overflow-y-auto max-h-[340px] pr-1",children:u.jsx("ul",{className:"list-none p-0 m-0 space-y-3",children:hr.map(W=>{var we,ke;return u.jsxs("li",{className:"bg-brand-bg-dark-accent rounded-lg p-4 border border-brand-border transition-all duration-200 hover:shadow-md",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2 text-brand-heading",children:[u.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[u.jsx("strong",{className:"text-base",children:"Signer:"}),u.jsx("span",{className:"text-base",children:((we=W.signer)==null?void 0:we.full_name)||W.signer_email}),u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${pt(W.status)}`,children:W.status.replace(/_/g," ")})]}),u.jsxs("span",{className:"text-brand-text-light text-xs",children:["Requested: ",new Date(W.requested_at).toLocaleDateString()]})]}),u.jsx("div",{className:"text-xs text-brand-text-light mb-1",children:W.signer?u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",children:"Full Name:"})," ",W.signer.full_name||"N/A"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",children:"Title:"})," ",W.signer.title||"N/A"]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",children:"Department:"})," ",W.signer.department||"N/A"]})]}):u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",children:"Email:"})," ",W.signer_email]})}),u.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Version: ",u.jsx("span",{className:"font-semibold",children:((ke=o.find(Ce=>Ce.id===W.document_version_id))==null?void 0:ke.version_number)||"N/A"})]}),W.status==="signed"&&W.signed_at&&u.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Signed: ",new Date(W.signed_at).toLocaleDateString()]}),W.status==="declined"&&W.declined_at&&u.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Declined: ",new Date(W.declined_at).toLocaleDateString()]}),W.status==="cancelled"&&W.cancelled_at&&u.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Cancelled: ",new Date(W.cancelled_at).toLocaleDateString()]}),u.jsx("button",{onClick:async()=>{ce(W),ae(!0),j(!0);try{const Ce=await la(W.id);q(Ce)}catch(Ce){console.error("Error fetching audit logs:",Ce.message),_({message:`Failed to fetch audit logs: ${Ce.message}`,type:"error"}),q([])}j(!1)},className:"mt-2 bg-color-info text-white px-4 py-2 rounded-full text-xs font-semibold hover:bg-color-info-hover transition duration-300 ease-in-out shadow-sm",children:"See Audit"})]},W.id)})})})]}),Y==="versions"&&u.jsx("div",{className:"flex-1 flex flex-col",children:o.length===0?u.jsx("div",{className:"flex-1 flex items-center justify-center",children:u.jsx("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg",children:"No previous versions of this document exist."})}):u.jsx("div",{className:"overflow-y-auto max-h-[340px] pr-1",children:u.jsx("ul",{className:"list-none p-0 m-0 space-y-3",children:o.map(W=>u.jsxs("li",{className:"bg-brand-bg-dark-accent rounded-lg p-4 border border-brand-border transition-all duration-200 hover:shadow-md",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2 text-brand-heading",children:[u.jsxs("strong",{className:"text-base",children:["Version ",W.version_number]}),u.jsxs("span",{className:"text-brand-text-light text-xs",children:["Uploaded: ",new Date(W.created_at).toLocaleDateString()]})]}),u.jsxs("p",{className:"text-sm text-brand-text mb-1",children:["File: ",W.file_name," (",ia(W.file_size),")"]}),u.jsxs("p",{className:"text-xs text-brand-text-light mb-2",children:["Changes: ",W.description_of_changes||"No description provided."]}),W.is_signed_version&&u.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-color-success-bg text-color-success-text mr-2",children:"SIGNED VERSION"}),u.jsx("button",{onClick:()=>Ws(W.file_path,W.file_name),className:"mt-2 bg-color-button-secondary text-white px-4 py-2 rounded-full text-xs font-semibold hover:bg-color-button-secondary-hover transition duration-300 ease-in-out shadow-sm",children:"Download Version"})]},W.id))})})})]})]}),u.jsx("div",{className:"text-center",children:u.jsx("button",{onClick:()=>re(!0),className:"bg-gray-700 text-white px-6 py-3 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-gray-800 hover:-translate-y-1 shadow-md",children:"Report an Issue"})})]})]}),u.jsx(na,{show:Z,onClose:()=>V(!1),title:"Upload New Document Version",children:u.jsxs("form",{onSubmit:Ht,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newVersionFile",className:"block text-brand-text text-base font-medium mb-2",children:"Select File:"}),u.jsx("input",{type:"file",id:"newVersionFile",ref:oe,onChange:W=>se(W.target.files[0]),className:"w-full p-2 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-color-button-secondary file:text-white hover:file:bg-color-button-secondary-hover",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newVersionDescription",className:"block text-brand-text text-base font-medium mb-2",children:"Description of Changes (Optional):"}),u.jsx("textarea",{id:"newVersionDescription",value:ie,onChange:W=>ne(W.target.value),rows:"3",className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"e.g., Fixed typos, Added new clause, Minor revisions"})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>V(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-brand-text font-semibold hover:bg-gray-100 transition duration-300 ease-in-out",children:"Cancel"}),u.jsx("button",{type:"submit",className:"bg-color-button-primary text-white px-6 py-2 rounded-full font-semibold hover:bg-color-button-primary-hover transition duration-300 ease-in-out",children:"Upload Version"})]})]})}),u.jsx(na,{show:Q,onClose:()=>S(!1),title:"Send Document for Signature",children:u.jsxs("form",{onSubmit:Di,className:"space-y-4",children:[u.jsxs("p",{className:"text-brand-text-light mb-4",children:["Enter one or more signer email addresses, separated by commas, semicolons, or new lines. A signature request will be sent for the current version of the document (Version"," ",((yt=s==null?void 0:s.current_document_version)==null?void 0:yt.version_number)||"N/A",")."]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"signerEmails",className:"block text-brand-text text-base font-medium mb-2",children:"Signer Email(s):"}),u.jsx("textarea",{id:"signerEmails",value:z,onChange:W=>U(W.target.value),rows:"5",className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"signer1@example.com, signer2@example.com",required:!0})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-brand-text font-semibold hover:bg-gray-100 transition duration-300 ease-in-out",children:"Cancel"}),u.jsx("button",{type:"submit",className:"bg-color-button-primary text-white px-6 py-2 rounded-full font-semibold hover:bg-color-button-primary-hover transition duration-300 ease-in-out",children:"Send Request(s)"})]})]})}),u.jsx(na,{show:xe,onClose:()=>re(!1),title:"Report an Issue",children:u.jsxs("form",{onSubmit:tl,className:"space-y-4",children:[u.jsx("p",{className:"text-brand-text-light mb-4",children:"Please describe the issue you are experiencing with this document or the platform. Provide as much detail as possible."}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"issueDescription",className:"block text-brand-text text-base font-medium mb-2",children:"Issue Description:"}),u.jsx("textarea",{id:"issueDescription",value:ge,onChange:W=>pe(W.target.value),rows:"6",className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"e.g., Document is not rendering correctly, Signature request failed for a signer, Typo in document details",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"issueContactEmail",className:"block text-brand-text text-base font-medium mb-2",children:"Your Email (for follow-up):"}),u.jsx("input",{type:"email",id:"issueContactEmail",value:Ee,onChange:W=>bt(W.target.value),className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"your.email@example.com",required:!0})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>re(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-brand-text font-semibold hover:bg-gray-100 transition duration-300 ease-in-out",children:"Cancel"}),u.jsx("button",{type:"submit",className:"bg-color-error text-white px-6 py-2 rounded-full font-semibold hover:bg-color-error-hover transition duration-300 ease-in-out",children:"Submit Report"})]})]})}),u.jsx(na,{show:be,onClose:()=>ae(!1),title:"Signature Audit Trail",children:J?u.jsx("div",{className:"text-center py-8 text-brand-text-light",children:"Loading audit logs..."}):u.jsx("div",{children:ue.length===0?u.jsx("div",{className:"text-center py-8 text-brand-text-light",children:"No audit logs found for this signature request."}):u.jsx("ul",{className:"divide-y divide-brand-border",children:ue.map(W=>u.jsxs("li",{className:"py-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-semibold text-brand-heading",children:W.event_type.replace(/_/g," ")}),u.jsx("span",{className:"text-xs text-brand-text-light",children:new Date(W.timestamp).toLocaleString()})]}),u.jsxs("div",{className:"text-xs text-brand-text-light mt-1",children:[W.details&&typeof W.details=="object"?Object.entries(W.details).map(([we,ke])=>u.jsxs("div",{children:[u.jsxs("span",{className:"font-semibold capitalize",children:[we.replace(/_/g," "),":"]})," ",u.jsx("span",{children:we==="signing_location"&&typeof ke=="object"&&ke!==null?`Latitude: ${ke.latitude}, Longitude: ${ke.longitude}`:String(ke)})]},we)):String(W.details)," "]})]},W.id))})})})]})},w1=({show:i,onClose:n,onVerified:s,requiredFactors:l=["totp"]})=>{const[o,d]=w.useState(!1),[h,x]=w.useState(""),[m,g]=w.useState(""),[p,_]=w.useState(""),[y,A]=w.useState(null);w.useEffect(()=>{if(!i){d(!1),x(""),g(""),_(""),A(null);return}(async()=>{var O;d(!0),x("");try{const{data:H,error:G}=await K.auth.mfa.listFactors();if(G)throw G;const Z=(O=H.totp)==null?void 0:O.find(V=>V.status==="verified");l.includes("totp")&&Z?(g("totp"),A(Z.id)):(x("No verified MFA factor found for challenge. Please enable 2FA on your profile."),g(null))}catch(H){console.error("Error listing MFA factors:",H),x("Failed to determine 2FA method. Please try again."),g(null)}finally{d(!1)}})()},[i,l]);const E=async()=>{if(x(""),!p||p.length!==6){x("Please enter a valid 6-digit TOTP code.");return}if(!y){x("No active TOTP factor found for verification.");return}d(!0);try{const{data:T,error:O}=await K.auth.mfa.challengeAndVerify({factorId:y,code:p});O?(console.error("TOTP verification failed:",O),x(O.message||"Invalid TOTP code. Please try again.")):T?(s(T.session),n()):x("Unknown error during verification.")}catch(T){console.error("Unexpected error during TOTP verification:",T),x("An unexpected error occurred during verification.")}finally{d(!1)}},R=()=>{x(""),_(""),n()};return u.jsxs(na,{show:i,onClose:R,children:[u.jsx("h3",{className:"text-2xl font-semibold text-brand-heading mb-4 text-center",children:"Action Requires Verification"}),o&&u.jsx("p",{className:"text-center text-brand-text-light",children:"Loading verification methods..."}),h&&u.jsx("p",{className:"text-color-error-text bg-color-error-bg p-3 rounded-md text-sm mb-4",children:h}),!o&&m==="totp"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-brand-text text-center",children:"Please enter the 6-digit code from your authenticator app."}),u.jsx("input",{type:"text",value:p,onChange:T=>_(T.target.value.trim()),placeholder:"Authenticator code",maxLength:6,className:"w-full p-3 rounded-md border border-brand-border bg-brand-card text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary text-center text-xl tracking-widest",inputMode:"numeric",pattern:"[0-9]*",disabled:o}),u.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[u.jsx("button",{onClick:R,disabled:o,className:"px-6 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors disabled:opacity-50",children:"Cancel"}),u.jsx("button",{onClick:E,disabled:o||!p||p.length!==6,className:"px-6 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors disabled:opacity-50",children:"Verify"})]})]}),!o&&!m&&!h&&u.jsx("p",{className:"text-center text-brand-text",children:"No suitable 2FA method found or enabled. Please enable 2FA in your profile to perform this action."})]})},S1=()=>{const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,d]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState(""),[p,_]=w.useState("sent"),[y,A]=w.useState(null),[E,R]=w.useState(1),[T]=w.useState(6),[O,H]=w.useState(0),G=sa(),[Z,V]=w.useState(!1),[te,se]=w.useState(null),ie=async()=>{try{const j=await fetch("https://speed.cloudflare.com/meta"),Q=j.ok?await j.json():{},S=await fetch("https://cloudflare.tv/cdn-cgi/trace"),z=S.ok?await S.text():"",U={};return z.split(`
`).forEach(Y=>{const[D,...ee]=Y.split("=");D&&ee.length&&(U[D]=ee.join("="))}),{ip:Q.clientIp||U.ip||null,userAgent:U.uag||navigator.userAgent||null,location:{country:Q.country||U.loc||null,city:Q.city||null,region:Q.region||null,latitude:Q.latitude||null,longitude:Q.longitude||null},meta:Q,trace:U}}catch(j){return console.error("Error fetching user meta info:",j),{ip:null,userAgent:navigator.userAgent||null,location:{},meta:{},trace:{}}}},ne=w.useCallback(async()=>{if(l(!0),d({message:"",type:""}),!K){d({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}const{data:{session:j},error:Q}=await K.auth.getSession();if(Q){d({message:Q.message||"Failed to get user session.",type:"error"}),l(!1);return}if(!(j!=null&&j.user)){d({message:"You must be logged in to view signature requests.",type:"error"}),l(!1);return}A(j.user);const S=j.user.id,z=j.user.email;try{const U=(E-1)*T,Y=U+T-1;let D=K.from("signature_requests").select(`
          id,
          signer_email,
          status,
          requested_at,
          signed_at,
          declined_at,
          cancelled_at,
          voided_at,
          signature_data_path,
          document_id,
          document_version_id,
          documents (
            id,
            title,
            owner_id
          ),
          document_versions (
            id,
            version_number,
            file_name
          )
        `,{count:"exact"});p==="sent"?D=D.eq("documents.owner_id",S):D=D.eq("signer_email",z),h!=="all"&&(D=D.eq("status",h)),m&&(D=D.or(`documents.title.ilike.%${m}%,signer_email.ilike.%${m}%`)),D=D.order("requested_at",{ascending:!1});const{data:ee,error:I,count:xe}=await D.range(U,Y);if(I)console.error("Supabase fetch error:",I),I.code==="42501"?d({message:"Permission denied. Check Supabase Row Level Security policies.",type:"error"}):d({message:`Failed to fetch signature requests: ${I.message}`,type:"error"}),n([]),H(0);else{H(xe);const re=ee.map(ge=>{var pe,Ee,bt,la,Jt;return{...ge,document_id:(pe=ge.documents)==null?void 0:pe.id,document_title:((Ee=ge.documents)==null?void 0:Ee.title)||"N/A",document_owner_id:(bt=ge.documents)==null?void 0:bt.owner_id,document_version_id:(la=ge.document_versions)==null?void 0:la.id,document_version_number:((Jt=ge.document_versions)==null?void 0:Jt.version_number)||0}});n(re)}}catch(U){console.error("Unexpected error during fetch:",U),d({message:U.message||"An unexpected error occurred while fetching requests.",type:"error"})}finally{l(!1)}},[p,h,m,E,T]);w.useEffect(()=>{R(1)},[p,h,m]),w.useEffect(()=>{ne()},[E,ne]);const oe=j=>{switch(j){case"pending":return"bg-color-warning-bg text-color-warning-text";case"signed":return"bg-color-success-bg text-color-success-text";case"declined":return"bg-color-error-bg text-color-error-text";case"cancelled":return"bg-gray-400 text-gray-800";case"expired":return"bg-color-info-bg text-color-info-text";case"void":return"bg-gray-500 text-white";default:return"bg-gray-200 text-gray-800"}},be=(j,Q,S=null,z=null)=>{n(U=>U.map(Y=>Y.id===j?{...Y,status:Q,...S&&{[S]:z}}:Y))},ae=async(j,Q,S,z)=>{var U;if(!y){d({message:"User not authenticated.",type:"error"});return}l(!0);try{const{data:{user:Y}}=await K.auth.getUser();if(!Y){d({message:"User session not found.",type:"error"}),l(!1);return}const{data:D,error:ee}=await K.auth.mfa.listFactors();if(ee)throw ee;const I=(U=D.totp)==null?void 0:U.some(re=>re.status==="verified");["sign","cancel"].includes(z)&&I?(se({id:j,documentId:Q,documentVersionId:S,actionType:z}),V(!0)):await _e(j,Q,S,z)}catch(Y){console.error("Error during MFA check for protected action:",Y),d({message:`Failed to initiate action due to MFA check: ${Y.message||"Unknown error"}`,type:"error"})}finally{l(!1)}},_e=async(j,Q,S,z,U=null)=>{if(l(!0),!await new Promise(pe=>{const Ee=document.createElement("div");Ee.className="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",Ee.innerHTML=`
        <div class="bg-white p-6 rounded-lg shadow-xl text-center max-w-sm mx-auto">
          <p class="text-lg font-semibold mb-4 text-gray-800">${z==="cancel"?"Are you sure you want to cancel this request? This cannot be undone.":`Are you sure you want to ${z} this document?`}</p>
          <div class="flex justify-center space-x-4">
            <button id="confirmBtn" class="px-5 py-2 bg-color-error text-white rounded-md hover:bg-red-600 transition-colors">Confirm</button>
            <button id="cancelBtn" class="px-5 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors">Cancel</button>
          </div>
        </div>
      `,document.body.appendChild(Ee),document.getElementById("confirmBtn").onclick=()=>{document.body.removeChild(Ee),pe(!0)},document.getElementById("cancelBtn").onclick=()=>{document.body.removeChild(Ee),pe(!1)}})){l(!1);return}let D="",ee="",I="",xe="";switch(z){case"sign":D="signed",ee="signed_at",I="DOCUMENT_SIGNED",xe="Document signed successfully.";break;case"reject":D="declined",ee="declined_at",I="SIGNATURE_REQUEST_DECLINED",xe="Signature request rejected.";break;case"cancel":D="cancelled",ee="cancelled_at",I="SIGNATURE_REQUEST_CANCELLED",xe="Signature request cancelled successfully.";break;default:d({message:"Invalid action.",type:"error"}),l(!1);return}const re=new Date().toISOString(),ge=await ie();try{const pe={status:D,[ee]:re};z==="sign"?Object.assign(pe,{signer_ip_address:ge.ip,signer_user_agent:ge.userAgent,signing_location:ge.location}):z==="cancel"&&(pe.cancelled_by_user_id=y.id);const{error:Ee}=await K.from("signature_requests").update(pe).eq("id",j);if(Ee)throw Ee.code==="42501"?d({message:"Permission denied. Check Supabase Row Level Security policies.",type:"error"}):d({message:`Failed to ${z} request: `+Ee.message,type:"error"}),Ee;be(j,D,ee,re),d({message:xe,type:"success"}),await K.from("audit_logs").insert({user_id:y.id,user_email:y.email,event_type:I,signature_request_id:j,document_id:Q,document_version_id:S,ip_address:ge.ip,details:{status:D,userAgent:ge.userAgent,location:ge.location,...z==="cancel"&&{cancelled_by_user_id:y.id}}})}catch{o.message||d({message:`An unexpected error occurred during ${z}.`,type:"error"})}finally{l(!1),ne()}},ce=async j=>{V(!1),te&&(await _e(te.id,te.documentId,te.documentVersionId,te.actionType,j),se(null))},ue=()=>{V(!1),se(null),d({message:"Action cancelled due to failed verification.",type:"info"}),l(!1)},q=async j=>{d({message:`Sending reminder to ${j}... (Simulated)`,type:"info"}),setTimeout(()=>{d({message:`Reminder sent to ${j}!`,type:"success"})},1500)},J=j=>{const Q=j.document_id||j.documents&&j.documents.id||j.id;G(`/user/documents/${Q}`)};return s?u.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:u.jsx("p",{className:"text-xl",children:"Loading signature requests..."})}):u.jsxs("div",{className:"container mx-auto p-4 md:p-8 animate-fade-in-up min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&u.jsx(Et,{message:o.message,type:o.type}),u.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Signature Requests"}),u.jsx("p",{className:"text-brand-text-light mt-2",children:"Manage all incoming and outgoing document signature requests."})]}),u.jsx("section",{className:"mb-6",children:u.jsxs("div",{className:"flex border-b border-brand-border-light",children:[u.jsx("button",{className:`px-6 py-3 text-lg font-medium transition-colors duration-200
              ${p==="sent"?"border-b-2 border-color-button-primary text-color-button-primary":"text-brand-text-light hover:text-brand-heading"}`,onClick:()=>_("sent"),children:"Sent by me"}),u.jsx("button",{className:`px-6 py-3 text-lg font-medium transition-colors duration-200
              ${p==="received"?"border-b-2 border-color-button-primary text-color-button-primary":"text-brand-text-light hover:text-brand-heading"}`,onClick:()=>_("received"),children:"Requested from me"})]})}),u.jsxs("section",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[u.jsx("div",{className:"w-full md:w-1/2",children:u.jsx("input",{type:"text",placeholder:"Search by document title or signer email...",className:"w-full p-3 rounded-md border border-brand-border bg-brand-card text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:j=>g(j.target.value)})}),u.jsx("div",{className:"w-full md:w-auto flex flex-wrap gap-2",children:["all","pending","signed","declined","cancelled","expired","void"].map(j=>u.jsx("button",{onClick:()=>x(j),className:`px-4 py-2 rounded-md capitalize text-sm font-medium transition-colors duration-200
                ${h===j?"bg-color-button-primary text-white hover:bg-color-button-primary-hover":"bg-brand-card text-brand-text border border-brand-border hover:bg-brand-bg-dark"}`,children:j},j))})]}),i.length===0&&!s?u.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:u.jsxs("p",{className:"text-lg",children:["No signature requests found in the '",p,"' tab matching your criteria."]})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.filter(j=>y?p==="sent"?j.document_owner_id===y.id:j.signer_email===y.email:!1).map(j=>u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border flex flex-col justify-between animate-fade-in-up",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-2",children:j.document_title}),u.jsx("p",{className:"text-brand-text-light mb-4 text-sm",children:p==="sent"?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"font-medium",children:"To:"})," ",j.signer_email]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"font-medium",children:"From:"})," ",j.document_owner_id===(y==null?void 0:y.id)?"Me":"Document Owner"]})}),u.jsxs("p",{className:"text-brand-text text-sm",children:[u.jsx("span",{className:"font-medium",children:"Date Sent:"})," ",new Date(j.requested_at).toLocaleDateString()]}),j.status==="signed"&&j.signed_at&&u.jsxs("p",{className:"text-brand-text text-sm",children:[u.jsx("span",{className:"font-medium",children:"Signed:"})," ",new Date(j.signed_at).toLocaleDateString()]}),j.status==="declined"&&j.declined_at&&u.jsxs("p",{className:"text-brand-text text-sm",children:[u.jsx("span",{className:"font-medium",children:"Declined:"})," ",new Date(j.declined_at).toLocaleDateString()]}),j.status==="cancelled"&&j.cancelled_at&&u.jsxs("p",{className:"text-brand-text text-sm",children:[u.jsx("span",{className:"font-medium",children:"Cancelled:"})," ",new Date(j.cancelled_at).toLocaleDateString()]}),j.status==="void"&&j.voided_at&&u.jsxs("p",{className:"text-brand-text text-sm",children:[u.jsx("span",{className:"font-medium",children:"Voided:"})," ",new Date(j.voided_at).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex flex-col gap-3 mt-4",children:[u.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold self-start ${oe(j.status)}`,children:[j.status.charAt(0).toUpperCase()+j.status.slice(1),j.document_version_number>0&&` (v${j.document_version_number})`]}),u.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[p==="received"&&j.status==="pending"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ae(j.id,j.document_id,j.document_version_id,"sign"),className:"flex-1 px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200 text-sm z-10 pointer-events-auto cursor-pointer",disabled:s,children:"Sign Document"}),u.jsx("button",{onClick:()=>ae(j.id,j.document_id,j.document_version_id,"reject"),className:"flex-1 px-4 py-2 bg-color-error text-white rounded-md hover:bg-color-error-hover transition-colors duration-200 text-sm z-10 pointer-events-auto cursor-pointer",disabled:s,children:"Reject"})]}),p==="sent"&&j.status==="pending"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>q(j.signer_email),className:"flex-1 px-4 py-2 bg-color-secondary text-white rounded-md hover:bg-color-secondary-hover transition-colors duration-200 text-sm cursor-pointer",disabled:s,children:"Remind Signer"}),u.jsx("button",{onClick:()=>ae(j.id,j.document_id,j.document_version_id,"cancel"),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-200 text-sm cursor-pointer",disabled:s,children:"Cancel Request"})]}),u.jsx("button",{onClick:()=>J(j),className:"flex-1 px-4 py-2 bg-brand-bg-dark text-brand-text rounded-md hover:bg-brand-border transition-colors duration-200 text-sm cursor-pointer",disabled:s,children:"View Details"}),j.status==="signed"&&j.signature_data_path&&u.jsx("a",{href:j.signature_data_path,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-center px-4 py-2 bg-color-success text-white rounded-md hover:bg-color-success-hover transition-colors duration-200 text-sm cursor-pointer",children:"Download Signed"})]})]})]},j.id))}),O>0&&u.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-4",children:[u.jsx("button",{onClick:()=>R(j=>Math.max(1,j-1)),disabled:E===1||s,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Previous"}),u.jsxs("span",{className:"text-lg font-medium text-brand-text",children:["Page ",E," of ",Math.ceil(O/T)]}),u.jsx("button",{onClick:()=>R(j=>j+1),disabled:E*T>=O||s,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Next"})]}),u.jsx(w1,{show:Z,onClose:ue,onVerified:ce,requiredFactors:["totp"]})]})},j1=({show:i,onClose:n,onEnrolled:s})=>{var O;const[l,o]=w.useState(""),[d,h]=w.useState(""),[x,m]=w.useState(""),[g,p]=w.useState(""),[_,y]=w.useState(!0),[A,E]=w.useState(!1);w.useEffect(()=>{if(!i){o(""),h(""),m(""),p(""),y(!0),E(!1);return}(async()=>{var G;y(!0),p("");try{const{data:Z,error:V}=await K.auth.mfa.listFactors();if(V)throw V;if((G=Z==null?void 0:Z.factors)==null?void 0:G.find(oe=>oe.factor_type==="totp"&&oe.status==="verified")){p("You already have a verified TOTP factor. Please disable it first."),y(!1);return}const se=`TOTP-${Date.now()}`,{data:ie,error:ne}=await K.auth.mfa.enroll({factorType:"totp",friendlyName:se});if(ne)throw ne;o(ie.id),h(ie.totp.qr_code),E(!0)}catch(Z){console.error("2FA Enrollment Error:",Z),p(Z.message||"Failed to start 2FA enrollment. Please try again.")}finally{y(!1)}})()},[i]);const R=async()=>{if(p(""),!x){p("Please enter the 6-digit code.");return}if(!l){p("Enrollment not started. Please close and reopen the modal.");return}y(!0);try{const{data:H,error:G}=await K.auth.mfa.challenge({factorId:l});if(G)throw G;const Z=H.id,{error:V}=await K.auth.mfa.verify({factorId:l,challengeId:Z,code:x});if(V)throw V;s&&s(),n(),alert("Two-factor authentication enabled successfully!")}catch(H){console.error("2FA Verification Error:",H),p(H.message||"Verification failed. Check your code and try again.")}finally{y(!1)}},T=()=>{n()};return u.jsxs(na,{show:i,onClose:T,children:[u.jsx("h3",{children:"Set Up 2FA"}),_&&!g&&u.jsx("p",{children:"Loading QR code and preparing for enrollment..."}),g&&u.jsxs("p",{style:{color:"red"},children:["Error: ",g]}),!_&&!g&&A&&d&&u.jsxs(u.Fragment,{children:[u.jsx("p",{children:"Scan this QR code with your authenticator app."}),u.jsx("div",{style:{textAlign:"center",margin:"15px 0"},children:u.jsx("img",{src:d,alt:"QR Code",style:{maxWidth:"200px",height:"auto",border:"1px solid #eee"}})}),u.jsx("p",{children:"Alternatively, manually input the secret:"}),u.jsx("input",{type:"text",value:((O=d.split("secret=")[1])==null?void 0:O.split("&")[0])||"Loading...",readOnly:!0,style:{width:"100%",padding:"8px",margin:"10px 0",textAlign:"center",background:"#f0f0f0",border:"1px dashed #ccc"}}),u.jsx("p",{children:"Enter the 6-digit code from your app:"}),u.jsx("input",{type:"text",value:x,onChange:H=>m(H.target.value.replace(/\D/g,"").substring(0,6)),placeholder:"______",maxLength:"6",style:{width:"100%",padding:"8px",margin:"10px 0",textAlign:"center"},disabled:_}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[u.jsx("button",{onClick:T,disabled:_,style:{padding:"8px 15px"},children:"Cancel"}),u.jsx("button",{onClick:R,disabled:_||x.length!==6,style:{padding:"8px 15px",background:"#007bff",color:"white"},children:_?"Verifying...":"Enable 2FA"})]})]}),!_&&!g&&!A&&!d&&u.jsx("p",{children:"Failed to load 2FA enrollment. Please try again or contact support."})]})},E1=()=>{const i=sa(),[n,s]=w.useState(!0),[l,o]=w.useState(null),[d,h]=w.useState({full_name:"",title:"",department:"",email:"",role:"",is_verified:!1,is_totp_enabled:!1,created_at:"",updated_at:""}),[x,m]=w.useState({message:"",type:""}),[g,p]=w.useState(""),[_,y]=w.useState(""),[A,E]=w.useState(!1),[R,T]=w.useState(!1),[O,H]=w.useState([]),[G,Z]=w.useState(""),[V,te]=w.useState(!1),[se,ie]=w.useState(""),ne=async(j,Q)=>{if(Q){const{error:S}=await K.from("users").update({is_totp_enabled:j,updated_at:new Date().toISOString()}).eq("id",Q);S&&(console.error("Error updating is_totp_enabled in DB:",S),m({message:`Failed to update 2FA status in database: ${S.message}`,type:"error"}))}},oe=async j=>{if(j)try{s(!0),ie("");const{data:Q,error:S}=await K.auth.mfa.listFactors();if(S){console.error("Error listing MFA factors for profile page:",S),m({message:"Failed to load 2FA status. Please try refreshing.",type:"error"}),h(Y=>({...Y,is_totp_enabled:!1})),H([]);return}const z=[...Q.totp||[],...Q.phone||[]],U=z.some(Y=>Y.factor_type==="totp"&&Y.status==="verified");h(Y=>(Y.is_totp_enabled!==U&&ne(U,j.id),{...Y,is_totp_enabled:U})),H(z)}catch(Q){console.error("Unexpected error fetching MFA status:",Q),m({message:"An unexpected error occurred while checking 2FA status.",type:"error"}),h(S=>({...S,is_totp_enabled:!1})),H([])}finally{s(!1)}};w.useEffect(()=>{(async()=>{s(!0),m({message:"Loading profile...",type:"info"});const{data:{user:Q},error:S}=await K.auth.getUser();if(S||!Q){m({message:"You need to be logged in to view your profile.",type:"error"}),i("/login");return}o(Q);const{data:z,error:U}=await K.from("users").select("full_name, title, department, role, is_verified, is_totp_enabled, created_at, updated_at").eq("id",Q.id).single();if(U){console.error("Error fetching user profile:",U),m({message:"Error loading your profile data.",type:"error"}),s(!1);return}z&&h({full_name:z.full_name||"",title:z.title||"",department:z.department||"",email:Q.email,role:z.role||"user",is_verified:z.is_verified||!1,is_totp_enabled:z.is_totp_enabled||!1,created_at:z.created_at||"",updated_at:z.updated_at||""}),await oe(Q),s(!1),m({message:"",type:""})})()},[i]);const be=j=>{const{name:Q,value:S}=j.target;h(z=>({...z,[Q]:S}))},ae=async j=>{if(j.preventDefault(),m({message:"Updating profile...",type:"info"}),!l){m({message:"No user session found.",type:"error"});return}const{error:Q}=await K.from("users").update({full_name:d.full_name,title:d.title,department:d.department,updated_at:new Date().toISOString()}).eq("id",l.id);if(Q)console.error("Error updating profile:",Q.message),m({message:`Error updating profile: ${Q.message}`,type:"error"});else{m({message:"Profile updated successfully!",type:"success"}),setTimeout(()=>m({message:"",type:""}),3e3);const{data:S,error:z}=await K.from("users").select("full_name, title, department, role, is_verified, is_totp_enabled, created_at, updated_at").eq("id",l.id).single();!z&&S&&h(U=>({...U,...S,email:l.email}))}},_e=async j=>{if(j.preventDefault(),g!==_){m({message:"Passwords do not match!",type:"error"});return}if(g.length<6){m({message:"Password must be at least 6 characters long.",type:"error"});return}m({message:"Changing password...",type:"info"});const{error:Q}=await K.auth.updateUser({password:g});Q?(console.error("Error changing password:",Q.message),m({message:`Error changing password: ${Q.message}`,type:"error"})):(m({message:"Password updated successfully! For security, you might be logged out and need to re-login.",type:"success"}),p(""),y(""),E(!1),setTimeout(()=>{m({message:"",type:""}),i("/login")},3e3))},ce=async()=>{m({message:"Two-Factor Authentication has been successfully enabled!",type:"success"}),T(!1),await oe(l)},ue=()=>{m({message:"Two-Factor Authentication setup cancelled.",type:"info"}),T(!1),oe(l)},q=async()=>{if(ie(""),!G){ie("Please enter the Factor ID to disable.");return}te(!0);try{const{error:j}=await K.auth.mfa.unenroll({factorId:G});if(j)throw j;m({message:"Two-Factor Authentication successfully disabled!",type:"success"}),Z(""),await oe(l)}catch(j){console.error("2FA Unenrollment Error:",j),ie(j.message||"Failed to disable 2FA. Check the Factor ID and try again."),m({message:"Error disabling 2FA: "+(j.message||"Unknown error"),type:"error"})}finally{te(!1)}},J=j=>j?new Date(j).toLocaleString():"N/A";return u.jsxs("div",{className:"min-h-screen flex flex-col items-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:[x.message&&u.jsx(Et,{message:x.message,type:x.type}),n?u.jsx("div",{className:"text-center p-24 text-2xl text-[var(--brand-text-light)]",children:"Loading profile data..."}):u.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 border border-[var(--brand-border-light)]\r
                     max-w-4xl w-full mx-auto my-12 animate-fade-in-up`,children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-[var(--brand-heading)] mb-8 text-center drop-shadow-md",children:"My Profile"}),u.jsxs("section",{className:"mb-10 pb-6 border-b border-[var(--brand-border)]",children:[u.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Personal Information"}),u.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Email Address"}),u.jsx("input",{type:"email",id:"email",value:d.email,disabled:!0,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-100 dark:bg-gray-700\r
                             text-[var(--brand-text)] cursor-not-allowed`})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Full Name"}),u.jsx("input",{type:"text",id:"full_name",name:"full_name",value:d.full_name,onChange:be,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                             text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                             transition-colors duration-200`})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Title"}),u.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:be,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                             text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                             transition-colors duration-200`})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Department"}),u.jsx("input",{type:"text",id:"department",name:"department",value:d.department,onChange:be,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                             text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                             transition-colors duration-200`})]}),u.jsx("button",{type:"submit",className:`w-full inline-flex justify-center items-center\r
                           bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                           text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                           transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                           hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-lg`,children:"Update Profile"})]})]}),u.jsxs("section",{className:"mb-10 pb-6 border-b border-[var(--brand-border)]",children:[u.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Account Details"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-[var(--brand-border-light)] last:border-b-0",children:[u.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Role:"}),u.jsx("span",{className:"text-lg text-[var(--brand-text-light)]",children:d.role})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-[var(--brand-border-light)] last:border-b-0",children:[u.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Member Since:"}),u.jsx("span",{className:"text-lg text-[var(--brand-text-light)]",children:J(d.created_at)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 last:border-b-0",children:[u.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Last Updated:"}),u.jsx("span",{className:"text-lg text-[var(--brand-text-light)]",children:J(d.updated_at)})]})]})]}),u.jsxs("section",{className:"mb-10 pb-6 border-b border-[var(--brand-border)]",children:[u.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Two-Factor Authentication (2FA)"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center py-2",children:[u.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Status:"}),u.jsx("span",{className:`text-lg font-semibold ${d.is_totp_enabled?"text-[var(--color-success)]":"text-[var(--color-error)]"}`,children:d.is_totp_enabled?"Enabled":"Disabled"})]}),d.is_totp_enabled?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-[var(--brand-text-light)] mt-2",children:"Two-Factor Authentication is active. You can disable it by entering the Factor ID below."}),se&&u.jsxs("p",{style:{color:"red",marginTop:"10px"},children:["Error: ",se]}),O.length>0?u.jsx("div",{className:"mt-4 mb-4",style:{maxHeight:"250px",overflowY:"auto",border:"1px solid var(--brand-border-light)",borderRadius:"8px"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{background:"var(--brand-bg-dark)",borderBottom:"1px solid var(--brand-border)"},children:[u.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontSize:"0.9em",color:"var(--brand-text-light)",borderRight:"1px solid var(--brand-border-light)"},children:"Factor ID"}),u.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontSize:"0.9em",color:"var(--brand-text-light)",borderRight:"1px solid var(--brand-border-light)"},children:"Friendly Name"}),u.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontSize:"0.9em",color:"var(--brand-text-light)"},children:"Type / Status"})]})}),u.jsx("tbody",{children:O.map(j=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--brand-border-light)"},children:[u.jsx("td",{style:{padding:"10px 8px",wordBreak:"break-all",fontSize:"0.85em",color:"var(--brand-text)"},children:j.id}),u.jsx("td",{style:{padding:"10px 8px",fontSize:"0.85em",color:"var(--brand-text)"},children:j.friendly_name}),u.jsx("td",{style:{padding:"10px 8px",fontSize:"0.85em",color:"var(--brand-text)"},children:`${j.factor_type} (${j.status})`})]},j.id))})]})}):u.jsx("p",{className:"text-sm text-[var(--brand-text-light)]",children:"No active 2FA factors found. This might be a temporary state or an issue with fetching."}),u.jsx("p",{className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Enter Factor ID to Disable:"}),u.jsx("input",{type:"text",value:G,onChange:j=>Z(j.target.value.trim()),placeholder:"Paste Factor ID here (e.g., 2c3e1f4a-...)",className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                               text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                               transition-colors duration-200`,disabled:V}),u.jsx("button",{onClick:q,className:`w-full inline-flex justify-center items-center\r
                               bg-red-500 text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                               transition-all duration-300 ease-out hover:bg-red-600 hover:translate-y-[-2px] hover:shadow-lg\r
                               disabled:opacity-50 disabled:cursor-not-allowed`,disabled:V||!G,children:V?"Disabling...":"Disable 2FA"})]}):u.jsx("button",{onClick:()=>T(!0),className:`w-full inline-flex justify-center items-center\r
                             bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                             text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                             transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                             hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-lg`,children:"Enable 2FA"})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Password Settings"}),A?u.jsxs("form",{onSubmit:_e,className:"space-y-6 animate-fade-in-up",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"New Password"}),u.jsx("input",{type:"password",id:"newPassword",value:g,onChange:j=>p(j.target.value),className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                               text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                               transition-colors duration-200`,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Confirm New Password"}),u.jsx("input",{type:"password",id:"confirmPassword",value:_,onChange:j=>y(j.target.value),className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                               text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                               transition-colors duration-200`,required:!0})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{type:"submit",className:`flex-1 inline-flex justify-center items-center\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                               transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-lg`,children:"Set New Password"}),u.jsx("button",{type:"button",onClick:()=>E(!1),className:`flex-1 inline-flex justify-center items-center\r
                               bg-gray-300 text-gray-800 border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                               transition-all duration-300 ease-out hover:bg-gray-400 hover:translate-y-[-2px] hover:shadow-lg\r
                               dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500`,children:"Cancel"})]})]}):u.jsx("button",{onClick:()=>E(!0),className:`inline-flex justify-center items-center\r
                           bg-transparent border-2 border-[var(--color-button-primary)] text-[var(--color-button-primary)]\r
                           py-3 px-6 rounded-full font-bold text-lg shadow-sm\r
                           transition-all duration-300 ease-out hover:bg-[var(--color-button-primary)]\r
                           hover:text-white hover:shadow-md`,children:"Change Password"})]})]}),R&&l&&u.jsx(j1,{show:R,onClose:ue,onEnrolled:ce})]})},N1=()=>u.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{cx:"8",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),u.jsx("circle",{cx:"16",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),u.jsx("ellipse",{cx:"8",cy:"18",rx:"6",ry:"3",stroke:"currentColor",strokeWidth:"2"}),u.jsx("ellipse",{cx:"16",cy:"18",rx:"6",ry:"3",stroke:"currentColor",strokeWidth:"2"})]}),T1=()=>u.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"}),u.jsx("line",{x1:"8",y1:"6",x2:"16",y2:"6",stroke:"currentColor",strokeWidth:"2"}),u.jsx("line",{x1:"8",y1:"10",x2:"16",y2:"10",stroke:"currentColor",strokeWidth:"2"}),u.jsx("line",{x1:"8",y1:"14",x2:"14",y2:"14",stroke:"currentColor",strokeWidth:"2"})]}),A1=()=>u.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("rect",{x:"3",y:"12",width:"4",height:"8",stroke:"currentColor",strokeWidth:"2"}),u.jsx("rect",{x:"9",y:"8",width:"4",height:"12",stroke:"currentColor",strokeWidth:"2"}),u.jsx("rect",{x:"15",y:"4",width:"4",height:"16",stroke:"currentColor",strokeWidth:"2"})]}),R1=()=>u.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("path",{d:"M3 12a9 9 0 1 1 9 9",stroke:"currentColor",strokeWidth:"2"}),u.jsx("polyline",{points:"3 8 3 12 7 12",stroke:"currentColor",strokeWidth:"2",fill:"none"}),u.jsx("line",{x1:"12",y1:"7",x2:"12",y2:"12",stroke:"currentColor",strokeWidth:"2"}),u.jsx("line",{x1:"12",y1:"12",x2:"15",y2:"15",stroke:"currentColor",strokeWidth:"2"})]}),C1=[{title:"Users",countKey:"userCount",icon:u.jsx(N1,{size:36,color:"var(--color-primary)"}),to:"/admin/manage-users",desc:"Manage all platform users",bg:"var(--brand-card)"},{title:"Documents",countKey:"documentCount",icon:u.jsx(T1,{size:36,color:"var(--color-secondary)"}),to:"/admin/master-edit",desc:"View and manage documents",bg:"var(--brand-card)"},{title:"Reports",icon:u.jsx(A1,{size:36,color:"var(--color-primary-light)"}),to:"/admin/reports",desc:"View platform reports",bg:"var(--brand-card)"},{title:"Audit Logs",icon:u.jsx(R1,{size:36,color:"var(--color-secondary)"}),to:"/admin/audit",desc:"Review activity logs",bg:"var(--brand-card)"}],D1=()=>{const[i,n]=w.useState(!0),[s,l]=w.useState({message:"",type:""}),[o,d]=w.useState(0),[h,x]=w.useState(0),[m,g]=w.useState(null),p=sa();return w.useEffect(()=>{(async()=>{n(!0),l({message:"Loading admin dashboard...",type:"info"});const{data:{user:y},error:A}=await K.auth.getUser();if(A||!y){l({message:"You must be logged in as admin.",type:"error"}),p("/login");return}const{data:E,error:R}=await K.from("users").select("role, full_name").eq("id",y.id).single();if(R||(E==null?void 0:E.role)!=="admin"){l({message:"Access denied. Admins only.",type:"error"}),p("/user/dashboard");return}g(E);const{count:T}=await K.from("users").select("id",{count:"exact",head:!0});d(T||0);const{count:O}=await K.from("documents").select("id",{count:"exact",head:!0});x(O||0),n(!1),l({message:"",type:""})})()},[p]),u.jsxs("div",{style:{minHeight:"100vh",background:"var(--brand-bg-light)"},children:[u.jsx(Q0,{}),u.jsxs("div",{style:{paddingTop:"90px",maxWidth:1200,margin:"0 auto"},children:[s.message&&u.jsx(Et,{message:s.message,type:s.type}),u.jsx("h1",{style:{fontSize:"2.5em",fontWeight:800,color:"var(--brand-heading)",marginBottom:10,marginTop:30},children:"Admin Dashboard"}),u.jsxs("p",{style:{color:"var(--brand-text-light)",fontSize:"1.2em"},children:["Welcome",m!=null&&m.full_name?`, ${m.full_name}`:"","! Here you can manage users, documents, reports, and platform settings."]}),u.jsxs("div",{style:{display:"flex",gap:"2em",margin:"2em 0 1em 0",flexWrap:"wrap"},children:[u.jsxs("div",{style:{background:"var(--brand-card)",borderRadius:16,padding:"1.5em 2em",minWidth:200,flex:1,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:[u.jsx("div",{style:{fontSize:"1.1em",color:"var(--brand-text-light)"},children:"Total Users"}),u.jsx("div",{style:{fontSize:"2.5em",fontWeight:700,color:"var(--color-primary)"},children:o})]}),u.jsxs("div",{style:{background:"var(--brand-card)",borderRadius:16,padding:"1.5em 2em",minWidth:200,flex:1,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:[u.jsx("div",{style:{fontSize:"1.1em",color:"var(--brand-text-light)"},children:"Total Documents"}),u.jsx("div",{style:{fontSize:"2.5em",fontWeight:700,color:"var(--color-secondary)"},children:h})]})]}),i?u.jsx("div",{style:{padding:"3em",textAlign:"center",color:"var(--brand-text-light)"},children:"Loading dashboard data..."}):u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"2em",marginTop:"2em"},children:C1.map(_=>u.jsxs(Ve,{to:_.to,style:{background:_.bg,borderRadius:20,padding:"2em 1.5em",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",textAlign:"center",textDecoration:"none",color:"inherit",transition:"box-shadow 0.2s, transform 0.2s",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},children:[u.jsx("div",{style:{marginBottom:10},children:_.icon}),u.jsx("h2",{style:{fontSize:"1.5em",fontWeight:700,color:"var(--brand-heading)",margin:0},children:_.title}),_.countKey&&u.jsx("div",{style:{fontSize:"2em",fontWeight:800,margin:"0.5em 0"},children:_.countKey==="userCount"?o:h}),u.jsx("div",{style:{color:"var(--brand-text-light)",marginTop:8},children:_.desc})]},_.title))})]})]})},k1=()=>{const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,d]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState("all"),[p,_]=w.useState(""),[y,A]=w.useState(""),[E,R]=w.useState(""),[T,O]=w.useState(1),[H]=w.useState(10),[G,Z]=w.useState(0),[V,te]=w.useState([]),[se,ie]=w.useState([]),[ne,oe]=w.useState(!1),[be,ae]=w.useState(""),[_e,ce]=w.useState(!1),[ue,q]=w.useState(""),J=D=>{if(!D)return"N/A";const ee=new Date(D),I={month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return ee.toLocaleDateString(void 0,I)+" "+ee.toLocaleTimeString(void 0,I)},j=w.useCallback(async()=>{if(l(!0),d({message:"",type:""}),!K){d({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}const{data:{user:D},error:ee}=await K.auth.getUser();if(ee||!D){d({message:(ee==null?void 0:ee.message)||"User not authenticated.",type:"error"}),l(!1);return}try{const I=(T-1)*H,xe=I+H-1;let re=K.from("audit_logs").select(`
          id,
          timestamp,
          user_id,
          user_email,
          event_type,
          details,
          ip_address,
          user_agent, 
          document_id,
          document_version_id,
          signature_request_id,
          user:users!fk_audit_logs_user_id(full_name),
          documents(title),
          document_versions(version_number, file_name)
        `,{count:"exact"});if(h!=="all"&&(re=re.eq("event_type",h)),m!=="all"&&(re=re.eq("user_id",m)),y&&(re=re.gte("timestamp",new Date(y).toISOString())),E){const bt=new Date(E);bt.setHours(23,59,59,999),re=re.lte("timestamp",bt.toISOString())}p&&(re=re.or(`event_type.ilike.%${p}%,user_email.ilike.%${p}%`)),re=re.order("timestamp",{ascending:!1});const{data:ge,error:pe,count:Ee}=await re.range(I,xe);pe?(console.error("Supabase fetch audit logs error:",pe),d({message:`Failed to fetch audit logs: ${pe.message}`,type:"error"}),n([]),Z(0)):(Z(Ee),n(ge))}catch(I){console.error("Unexpected error during audit log fetch:",I),d({message:I.message||"An unexpected error occurred while fetching audit logs.",type:"error"})}finally{l(!1)}},[T,H,h,m,p,y,E]);w.useEffect(()=>{(async()=>{const{data:ee,error:I}=await K.from("audit_logs").select("user_id, user_email, users!fk_audit_logs_user_id(full_name)");if(I)console.error("Error fetching distinct users for filter:",I);else{const ge=Array.from(new Map(ee.filter(pe=>pe.user_id!==null).map(pe=>{var Ee;return[pe.user_id,{id:pe.user_id,email:pe.user_email,fullName:((Ee=pe.user)==null?void 0:Ee.full_name)||pe.user_email}]})).values());te(ge)}const{data:xe,error:re}=await K.from("audit_logs").select("event_type").distinct("event_type").order("event_type",{ascending:!0});re?console.error("Error fetching distinct event types for filter:",re):ie(xe.map(ge=>ge.event_type))})()},[]),w.useEffect(()=>{O(1)},[h,m,p,y,E]),w.useEffect(()=>{j()},[T,j]);const Q=Math.ceil(G/H),S=D=>{D>=1&&D<=Q&&O(D)},z=D=>{if(!D)return"N/A";let ee;try{ee=typeof D=="string"?JSON.parse(D):D}catch{return String(D)}return typeof ee=="object"&&ee!==null?JSON.stringify(ee,null,2):String(ee)},U=D=>{ae(z(D)),oe(!0)},Y=D=>{var I,xe,re,ge,pe,Ee;let ee="No related document information available.";((I=D.documents)!=null&&I.title||D.document_id||(xe=D.document_versions)!=null&&xe.version_number||(re=D.document_versions)!=null&&re.file_name||D.signature_request_id)&&(ee=`
            ${(ge=D.documents)!=null&&ge.title?`Document Title: ${D.documents.title}
`:""}
            ${D.document_id?`Document ID: ${D.document_id}
`:""}
            ${(pe=D.document_versions)!=null&&pe.version_number?`Version: ${D.document_versions.version_number}
`:""}
            ${(Ee=D.document_versions)!=null&&Ee.file_name?`File Name: ${D.document_versions.file_name}
`:""}
            ${D.signature_request_id?`Signature Request ID: ${D.signature_request_id}
`:""}
        `.trim()),q(ee),ce(!0)};return s?u.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:u.jsx("p",{className:"text-xl",children:"Loading audit logs..."})}):u.jsxs("div",{className:"container mx-auto p-4 md:p-8 animate-fade-in-up min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&u.jsx(Et,{message:o.message,type:o.type}),u.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Audit Logs"}),u.jsx("p",{className:"text-brand-text-light mt-2",children:"Review all system activities and user actions."})]}),u.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-brand-text mb-1",children:"Search"}),u.jsx("input",{type:"text",id:"searchTerm",placeholder:"Event, user, details...",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:p,onChange:D=>_(D.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"filterEventType",className:"block text-sm font-medium text-brand-text mb-1",children:"Event Type"}),u.jsxs("select",{id:"filterEventType",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:D=>x(D.target.value),children:[u.jsx("option",{value:"all",children:"All Event Types"}),se.map(D=>u.jsx("option",{value:D,children:D.replace(/_/g," ").toLowerCase().replace(/\b\w/g,ee=>ee.toUpperCase())},D))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"filterUserId",className:"block text-sm font-medium text-brand-text mb-1",children:"User"}),u.jsxs("select",{id:"filterUserId",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:D=>g(D.target.value),children:[u.jsx("option",{value:"all",children:"All Users"}),V.map(D=>u.jsxs("option",{value:D.id,children:[D.fullName," (",D.email,")"]},D.id))]})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 lg:col-span-1",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-brand-text mb-1",children:"From Date"}),u.jsx("input",{type:"date",id:"startDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-button-primary",value:y,onChange:D=>A(D.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-brand-text mb-1",children:"To Date"}),u.jsx("input",{type:"date",id:"endDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-button-primary",value:E,onChange:D=>R(D.target.value)})]})]})]}),i.length===0&&!s?u.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:u.jsx("p",{className:"text-lg",children:"No audit logs found matching your criteria."})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:u.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[u.jsx("thead",{className:"bg-brand-bg-dark",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Timestamp"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"User"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Event Type"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Related Document"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"IP Address"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"User Agent"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Details"})]})}),u.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:i.map(D=>{var ee,I,xe;return u.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:J(D.timestamp)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((ee=D.user)==null?void 0:ee.full_name)||D.user_email||"System"})," ",u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-button-primary",children:D.event_type.replace(/_/g," ").toUpperCase()}),u.jsx("td",{className:"px-6 py-4 text-sm text-brand-text",children:(I=D.documents)!=null&&I.title||D.document_id||(xe=D.document_versions)!=null&&xe.version_number||D.signature_request_id?u.jsx("button",{onClick:()=>Y(D),className:"px-3 py-1 bg-color-button-secondary text-white rounded-md text-xs hover:bg-color-button-secondary-hover transition-colors duration-200",children:"View Document"}):"N/A"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:D.ip_address||"N/A"}),u.jsxs("td",{className:"px-6 py-4 text-sm text-brand-text overflow-hidden text-ellipsis max-w-xs",title:D.user_agent,children:[D.user_agent?`${D.user_agent.substring(0,50)}...`:"N/A"," "]}),u.jsx("td",{className:"px-6 py-4 text-sm text-brand-text",children:D.details?u.jsx("button",{onClick:()=>U(D.details),className:"px-3 py-1 bg-color-button-secondary text-white rounded-md text-xs hover:bg-color-button-secondary-hover transition-colors duration-200",children:"View Details"}):"N/A"})]},D.id)})})]})}),Q>1&&u.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[u.jsx("button",{onClick:()=>S(T-1),disabled:T===1,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),u.jsxs("span",{className:"text-brand-text",children:["Page ",T," of ",Q]}),u.jsx("button",{onClick:()=>S(T+1),disabled:T===Q,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]}),u.jsxs(na,{show:ne,onClose:()=>oe(!1),children:[u.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"Audit Log Details"}),u.jsx("pre",{className:"whitespace-pre-wrap text-brand-text-light text-sm bg-brand-bg-dark p-4 rounded-md",children:be})]}),u.jsxs(na,{show:_e,onClose:()=>ce(!1),children:[u.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"Related Document Information"}),u.jsx("pre",{className:"whitespace-pre-wrap text-brand-text-light text-sm bg-brand-bg-dark p-4 rounded-md",children:ue})]})]})},O1=()=>{const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,d]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState("all"),[p,_]=w.useState(""),[y,A]=w.useState(""),[E,R]=w.useState(""),[T,O]=w.useState(1),[H]=w.useState(10),[G,Z]=w.useState(0),[V,te]=w.useState([]),se=[{value:"all",label:"All"},{value:"true",label:"Verified"},{value:"false",label:"Unverified"}],[ie,ne]=w.useState(!1),[oe,be]=w.useState({}),ae=j=>{if(!j)return"N/A";const Q=new Date(j),S=Q.getFullYear(),z=String(Q.getMonth()+1).padStart(2,"0"),U=String(Q.getDate()).padStart(2,"0"),Y=String(Q.getHours()).padStart(2,"0"),D=String(Q.getMinutes()).padStart(2,"0"),ee=String(Q.getSeconds()).padStart(2,"0");return`${z} ${U}, ${S} ${Y}:${D}:${ee}`},_e=w.useCallback(async()=>{if(l(!0),d({message:"",type:""}),!K){d({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}const{data:{user:j},error:Q}=await K.auth.getUser();if(Q||!j){d({message:(Q==null?void 0:Q.message)||"User not authenticated.",type:"error"}),l(!1);return}try{const S=(T-1)*H,z=S+H-1;let U=K.from("users").select(`
          id,
          email,
          full_name,
          title,
          department,
          role,
          is_verified,
          created_at,
          updated_at
        `,{count:"exact"});if(h!=="all"&&(U=U.eq("role",h)),m!=="all"&&(U=U.eq("is_verified",m==="true")),y&&(U=U.gte("created_at",new Date(y).toISOString())),E){const I=new Date(E);I.setHours(23,59,59,999),U=U.lte("created_at",I.toISOString())}if(p){const I=`%${p}%`;U=U.or(`full_name.ilike.${I},email.ilike.${I}`)}U=U.order("created_at",{ascending:!1}),U=U.range(S,z);const{data:Y,error:D,count:ee}=await U;D?(console.error("Supabase fetch users error:",D),d({message:`Failed to fetch users: ${D.message}`,type:"error"}),n([]),Z(0)):(Z(ee),n(Y))}catch(S){console.error("Unexpected error during user fetch:",S),d({message:S.message||"An unexpected error occurred while fetching users.",type:"error"})}finally{l(!1)}},[T,H,h,m,p,y,E]);w.useEffect(()=>{(async()=>{const{data:Q,error:S}=await K.from("users").select("role").distinct("role").order("role",{ascending:!0});S?console.error("Error fetching distinct roles for filter:",S):te(Q.map(z=>z.role))})()},[]),w.useEffect(()=>{O(1)},[h,m,p,y,E]),w.useEffect(()=>{_e()},[T,_e]);const ce=Math.ceil(G/H),ue=j=>{j>=1&&j<=ce&&O(j)},q=j=>{const Q={...j};delete Q.password_hash,be(Q),ne(!0)},J=j=>j?`
ID: ${j.id}
Email: ${j.email}
Full Name: ${j.full_name||"N/A"}
Role: ${String(j.role).toUpperCase()}
Verified: ${j.is_verified?"Yes":"No"}
Title: ${j.title||"N/A"}
Department: ${j.department||"N/A"}
Created At: ${ae(j.created_at)}
Last Updated: ${ae(j.updated_at)}
    `.trim():"No user data available.";return s?u.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:u.jsx("p",{className:"text-xl",children:"Loading users..."})}):u.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&u.jsx(Et,{message:o.message,type:o.type}),u.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Manage Users"}),u.jsx("p",{className:"text-brand-text-light mt-2",children:"View and manage all registered users in the system."})]}),u.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-brand-text mb-1",children:"Search"}),u.jsx("input",{type:"text",id:"searchTerm",placeholder:"Name, email...",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:p,onChange:j=>_(j.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"filterRole",className:"block text-sm font-medium text-brand-text mb-1",children:"Role"}),u.jsxs("select",{id:"filterRole",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:j=>x(j.target.value),children:[u.jsx("option",{value:"all",children:"All Roles"}),V.map(j=>u.jsx("option",{value:j,children:j.replace(/_/g," ").toLowerCase().replace(/\b\w/g,Q=>Q.toUpperCase())},j))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"filterVerificationStatus",className:"block text-sm font-medium text-brand-text mb-1",children:"Verification Status"}),u.jsx("select",{id:"filterVerificationStatus",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:j=>g(j.target.value),children:se.map(j=>u.jsx("option",{value:j.value,children:j.label},j.value))})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 lg:col-span-1",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Created From"}),u.jsx("input",{type:"date",id:"startDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:y,onChange:j=>A(j.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Created To"}),u.jsx("input",{type:"date",id:"endDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:E,onChange:j=>R(j.target.value)})]})]})]}),i.length===0&&!s?u.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:u.jsx("p",{className:"text-lg",children:"No users found matching your criteria."})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:u.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[u.jsx("thead",{className:"bg-brand-bg-dark",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Full Name"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Email"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Role"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Verified"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Created At"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Last Updated"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:i.map(j=>u.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-brand-text",children:j.full_name}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:j.email}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.role==="admin"?"bg-purple-100 text-purple-800":j.role==="user"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:j.role.replace(/_/g," ").toUpperCase()})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.is_verified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.is_verified?"Yes":"No"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:ae(j.created_at)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:ae(j.updated_at)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>q(j),className:"text-color-button-primary hover:text-color-button-primary-hover transition-colors duration-200",children:"View Details"})})]},j.id))})]})}),ce>1&&u.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[u.jsx("button",{onClick:()=>ue(T-1),disabled:T===1,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),u.jsxs("span",{className:"text-brand-text",children:["Page ",T," of ",ce]}),u.jsx("button",{onClick:()=>ue(T+1),disabled:T===ce,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]}),u.jsxs(na,{show:ie,onClose:()=>ne(!1),children:[u.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"User Details"}),u.jsx("pre",{className:"whitespace-pre-wrap text-brand-text-light text-sm bg-brand-bg-dark p-4 rounded-md",children:J(oe)})]})]})},U1=()=>{const[i,n]=w.useState(!0),[s,l]=w.useState({message:"",type:""}),[o,d]=w.useState({documentStatus:[],signatureStatus:[],userRoles:[],incidentStatus:[],totalDocuments:0,totalSignatureRequests:0,totalUsers:0,totalIncidentReports:0,averageSigningTime:"N/A",recentAuditLogs:[]}),[h,x]=w.useState(""),[m,g]=w.useState(""),p=y=>{if(!y)return"N/A";const A=new Date(y),E={month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return A.toLocaleDateString("en-US",E)},_=w.useCallback(async()=>{if(n(!0),l({message:"",type:""}),!K){l({message:"Supabase client not available. Please check configuration.",type:"error"}),n(!1);return}try{const y=(ee,I,xe,re)=>{let ge=ee;if(xe&&(ge=ge.gte(I,new Date(xe).toISOString())),re){const pe=new Date(re);pe.setHours(23,59,59,999),ge=ge.lte(I,pe.toISOString())}return ge},A={start_date_param:h?new Date(h).toISOString():null,end_date_param:m?new Date(m).toISOString():null},{data:E,error:R}=await K.rpc("count_documents_by_status",A),{data:T,error:O}=await K.rpc("count_signature_requests_by_status",A),{data:H,error:G}=await K.rpc("count_users_by_role",A),{data:Z,error:V}=await K.rpc("count_incident_reports_by_status",A);let te=K.from("documents").select("*",{count:"exact",head:!0});te=y(te,"created_at",h,m);const{count:se,error:ie}=await te;let ne=K.from("signature_requests").select("*",{count:"exact",head:!0});ne=y(ne,"requested_at",h,m);const{count:oe,error:be}=await ne;let ae=K.from("users").select("*",{count:"exact",head:!0});ae=y(ae,"created_at",h,m);const{count:_e,error:ce}=await ae;let ue=K.from("incident_reports").select("*",{count:"exact",head:!0});ue=y(ue,"timestamp",h,m);const{count:q,error:J}=await ue;let j=K.from("audit_logs").select("timestamp, event_type, user_email, details");j=y(j,"timestamp",h,m);const{data:Q,error:S}=await j.order("timestamp",{ascending:!1}).limit(10);let z="N/A",U=K.from("signature_requests").select("requested_at, signed_at").eq("status","signed").not("signed_at","is",null);U=y(U,"signed_at",h,m);const{data:Y,error:D}=await U;if(!D&&Y&&Y.length>0){let ee=0;Y.forEach(Ee=>{if(Ee.requested_at&&Ee.signed_at){const bt=new Date(Ee.requested_at),la=new Date(Ee.signed_at);ee+=(la.getTime()-bt.getTime())/1e3}});const I=ee/Y.length,xe=Math.floor(I/60),re=Math.floor(xe/60),ge=xe%60,pe=Math.floor(I%60);z=`${re}h ${ge}m ${pe}s`}R||O||G||V||ie||be||ce||J||S||D?(console.error("Error fetching report data:",R,O,G,V,ie,be,ce,J,S,D),l({message:"Failed to fetch all report data. Check console for details.",type:"error"})):d({documentStatus:E||[],signatureStatus:T||[],userRoles:H||[],incidentStatus:Z||[],totalDocuments:se||0,totalSignatureRequests:oe||0,totalUsers:_e||0,totalIncidentReports:q||0,averageSigningTime:z,recentAuditLogs:Q||[]})}catch(y){console.error("Unexpected error during report fetch:",y),l({message:y.message||"An unexpected error occurred while fetching reports.",type:"error"})}finally{n(!1)}},[h,m]);return w.useEffect(()=>{_()},[_]),i?u.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:u.jsx("p",{className:"text-xl",children:"Loading reports..."})}):u.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[s.message&&u.jsx(Et,{message:s.message,type:s.type}),u.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Analytics & Reports"}),u.jsx("p",{className:"text-brand-text-light mt-2",children:"Get insights into system performance and user activity."})]}),u.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 flex flex-col md:flex-row gap-4 justify-end items-center",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"reportStartDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Start Date"}),u.jsx("input",{type:"date",id:"reportStartDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:y=>x(y.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"reportEndDate",className:"block text-sm font-medium text-brand-text mb-1",children:"End Date"}),u.jsx("input",{type:"date",id:"reportEndDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:y=>g(y.target.value)})]}),u.jsx("button",{onClick:_,className:"mt-4 md:mt-0 px-6 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200",children:"Apply Filter"})]}),u.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Total Documents"}),u.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.totalDocuments})]}),u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Total Sign Requests"}),u.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.totalSignatureRequests})]}),u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Total Users"}),u.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.totalUsers})]}),u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Avg. Signing Time"}),u.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.averageSigningTime})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Documents by Status"}),o.documentStatus.length>0?u.jsx("div",{className:"h-64",children:u.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.documentStatus.map(y=>u.jsxs("li",{children:[y.status.replace(/_/g," ").toUpperCase(),": ",y.count]},y.status))})}):u.jsx("p",{className:"text-brand-text-light",children:"No document status data available for this period."})]}),u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Signature Requests by Status"}),o.signatureStatus.length>0?u.jsx("div",{className:"h-64",children:u.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.signatureStatus.map(y=>u.jsxs("li",{children:[y.status.replace(/_/g," ").toUpperCase(),": ",y.count]},y.status))})}):u.jsx("p",{className:"text-brand-text-light",children:"No signature request status data available for this period."})]}),u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Users by Role"}),o.userRoles.length>0?u.jsx("div",{className:"h-64",children:u.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.userRoles.map(y=>u.jsxs("li",{children:[y.role.replace(/_/g," ").toUpperCase(),": ",y.count]},y.role))})}):u.jsx("p",{className:"text-brand-text-light",children:"No user role data available."})]}),u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[u.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Incident Reports by Status"}),o.incidentStatus.length>0?u.jsx("div",{className:"h-64",children:u.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.incidentStatus.map(y=>u.jsxs("li",{children:[y.status.replace(/_/g," ").toUpperCase(),": ",y.count]},y.status))})}):u.jsx("p",{className:"text-brand-text-light",children:"No incident report data available for this period."})]}),u.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border lg:col-span-2",children:[u.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Recent System Activity (Audit Logs)"}),o.recentAuditLogs.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[u.jsx("thead",{className:"bg-brand-bg-dark",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Timestamp"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Event Type"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"User Email"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Details"})]})}),u.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:o.recentAuditLogs.map(y=>u.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:p(y.timestamp)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:y.event_type}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:y.user_email||"System"}),u.jsx("td",{className:"px-6 py-4 text-sm text-brand-text overflow-hidden text-ellipsis max-w-xs",children:u.jsx("pre",{className:"whitespace-pre-wrap text-xs text-brand-text-light",children:JSON.stringify(y.details,null,2)})})]},y.id||y.timestamp+y.event_type))})]})}):u.jsx("p",{className:"text-brand-text-light",children:"No recent audit logs available."})]})]})]})},M1=()=>{var j,Q,S,z;const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,d]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState(""),[p,_]=w.useState(""),[y,A]=w.useState(""),[E,R]=w.useState(1),[T]=w.useState(10),[O,H]=w.useState(0),[G,Z]=w.useState(!1),[V,te]=w.useState({}),[se,ie]=w.useState(""),[ne,oe]=w.useState(""),be=[{value:"all",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"resolved",label:"Resolved"}],ae=U=>{if(!U)return"N/A";const Y=new Date(U),D={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return Y.toLocaleDateString("en-US",D)},_e=w.useCallback(async()=>{if(l(!0),d({message:"",type:""}),!K){d({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}try{const U=(E-1)*T,Y=U+T-1;let D=K.from("incident_reports").select(`
          id,
          timestamp,
          reported_by_user_id,
          reported_by_email,
          document_id,
          reason,
          details,
          status,
          resolved_by_user_id,
          resolved_at,
          reporter:users!fk_incident_reports_reported_by_user_id(full_name),
          resolver:users!fk_incident_reports_resolved_by_user_id(full_name),
          documents!fk_incident_reports_document_id(title)
        `,{count:"exact"});if(h!=="all"&&(D=D.eq("status",h)),p&&(D=D.gte("timestamp",new Date(p).toISOString())),y){const re=new Date(y);re.setHours(23,59,59,999),D=D.lte("timestamp",re.toISOString())}if(m){const re=`%${m}%`;D=D.or(`reported_by_email.ilike.${re},reason.ilike.${re},details.ilike.${re}`)}D=D.order("timestamp",{ascending:!1}),D=D.range(U,Y);const{data:ee,error:I,count:xe}=await D;I?(console.error("Supabase fetch incident reports error:",I),d({message:`Failed to fetch incident reports: ${I.message}`,type:"error"}),n([]),H(0)):(H(xe),n(ee))}catch(U){console.error("Unexpected error during report fetch:",U),d({message:U.message||"An unexpected error occurred while fetching reports.",type:"error"})}finally{l(!1)}},[E,T,h,m,p,y]);w.useEffect(()=>{R(1)},[h,m,p,y]),w.useEffect(()=>{_e()},[E,_e]);const ce=Math.ceil(O/T),ue=U=>{U>=1&&U<=ce&&R(U)},q=U=>{te(U),ie(U.status),oe(U.details||""),Z(!0)},J=async()=>{l(!0),d({message:"",type:""});const{data:{user:U},error:Y}=await K.auth.getUser();if(Y||!U){d({message:(Y==null?void 0:Y.message)||"User not authenticated.",type:"error"}),l(!1);return}try{const D={status:se,details:ne};se==="resolved"&&V.status!=="resolved"?(D.resolved_by_user_id=U.id,D.resolved_at=new Date().toISOString()):se!=="resolved"&&V.status==="resolved"&&(D.resolved_by_user_id=null,D.resolved_at=null);const{data:ee,error:I}=await K.from("incident_reports").update(D).eq("id",V.id);I?d({message:`Failed to update report: ${I.message}`,type:"error"}):(d({message:"Report updated successfully!",type:"success"}),Z(!1),_e())}catch(D){d({message:D.message||"An unexpected error occurred during update.",type:"error"})}finally{l(!1)}};return s?u.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:u.jsx("p",{className:"text-xl",children:"Loading incident reports..."})}):u.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&u.jsx(Et,{message:o.message,type:o.type}),u.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Anomalies & Incident Reports"}),u.jsx("p",{className:"text-brand-text-light mt-2",children:"Review and manage reported issues within the system."})]}),u.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-brand-text mb-1",children:"Search"}),u.jsx("input",{type:"text",id:"searchTerm",placeholder:"Email, reason, details...",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:U=>g(U.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"filterStatus",className:"block text-sm font-medium text-brand-text mb-1",children:"Status"}),u.jsx("select",{id:"filterStatus",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:U=>x(U.target.value),children:be.map(U=>u.jsx("option",{value:U.value,children:U.label},U.value))})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 lg:col-span-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Reported From"}),u.jsx("input",{type:"date",id:"startDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:p,onChange:U=>_(U.target.value)})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Reported To"}),u.jsx("input",{type:"date",id:"endDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:y,onChange:U=>A(U.target.value)})]})]})]}),i.length===0&&!s?u.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:u.jsx("p",{className:"text-lg",children:"No incident reports found matching your criteria."})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:u.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[u.jsx("thead",{className:"bg-brand-bg-dark",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Timestamp"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Reported By"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Document"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Reason"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:i.map(U=>{var Y,D;return u.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:ae(U.timestamp)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((Y=U.reporter)==null?void 0:Y.full_name)||U.reported_by_email}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((D=U["documents!fk_incident_reports_document_id"])==null?void 0:D.title)||"N/A"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:U.reason}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${U.status==="pending"?"bg-yellow-100 text-yellow-800":U.status==="resolved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:U.status.toUpperCase()})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>q(U),className:"text-color-button-primary hover:text-color-button-primary-hover transition-colors duration-200",children:"View / Resolve"})})]},U.id)})})]})}),ce>1&&u.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[u.jsx("button",{onClick:()=>ue(E-1),disabled:E===1,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),u.jsxs("span",{className:"text-brand-text",children:["Page ",E," of ",ce]}),u.jsx("button",{onClick:()=>ue(E+1),disabled:E===ce,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]}),u.jsxs(na,{show:G,onClose:()=>Z(!1),children:[u.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"Incident Report Details"}),u.jsxs("div",{className:"space-y-4 text-brand-text-light",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Report ID:"})," ",V.id]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Timestamp:"})," ",ae(V.timestamp)]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Reported By:"})," ",((j=V.reporter)==null?void 0:j.full_name)||V.reported_by_email]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Associated Document:"})," ",((Q=V["documents!fk_incident_reports_document_id"])==null?void 0:Q.title)||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Reason:"})," ",V.reason]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"modalDetails",className:"block text-sm font-medium text-brand-text mb-1",children:"Details:"}),u.jsx("textarea",{id:"modalDetails",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary h-32",value:ne,onChange:U=>oe(U.target.value),placeholder:"Add resolution notes or further details here..."})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Current Status:"})," ",u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${V.status==="pending"?"bg-yellow-100 text-yellow-800":V.status==="resolved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(S=V.status)==null?void 0:S.toUpperCase()})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newStatus",className:"block text-sm font-medium text-brand-text mb-1",children:"Update Status:"}),u.jsxs("select",{id:"newStatus",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:se,onChange:U=>ie(U.target.value),children:[u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"resolved",children:"Resolved"})]})]}),(V.resolved_by_user_id||V.resolved_at)&&u.jsxs("p",{children:[u.jsx("strong",{children:"Resolved By:"})," ",((z=V.resolver)==null?void 0:z.full_name)||"N/A"," at ",ae(V.resolved_at)]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 border border-brand-border-light text-brand-text rounded-md hover:bg-brand-bg-dark transition-colors duration-200",children:"Cancel"}),u.jsx("button",{onClick:J,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200",children:"Update Report"})]})]})]})]})},L1=({show:i,onClose:n,tableName:s,record:l,onSaveSuccess:o})=>{const[d,h]=w.useState(!1),[x,m]=w.useState({message:"",type:""}),[g,p]=w.useState({});w.useEffect(()=>{i&&l&&(p(l),m({message:"",type:""}))},[i,l]);const _=R=>{const{name:T,value:O,type:H,checked:G}=R.target;p(Z=>({...Z,[T]:H==="checkbox"?G:O}))},y=(R,T)=>{const O={};for(const H in T)R[H]!==T[H]&&H!=="id"&&H!=="created_at"&&H!=="updated_at"&&(O[H]={old:R[H],new:T[H]});return O},A=async()=>{h(!0),m({message:"",type:""});const{data:R,error:T}=await K.auth.getUser();if(T||!(R!=null&&R.user)){m({message:(T==null?void 0:T.message)||"Authentication required.",type:"error"}),h(!1);return}const O=R.user.id,H=R.user.email;try{const{data:G,error:Z}=await K.from(s).select("*").eq("id",l.id).single();if(Z)throw new Error(`Failed to fetch old record for audit: ${Z.message}`);const{data:V,error:te}=await K.from(s).update(g).eq("id",l.id).select();if(te)throw new Error(`Failed to update ${s} record: ${te.message}`);const se=y(G,g),ie={table_name:s,record_id:l.id,changes:se};let ne=null,oe=null,be=null;s==="documents"?ne=l.id:s==="signature_requests"?(oe=l.id,ne=l.document_id):s==="users"?be=l.id:s==="incident_reports"&&(ne=l.document_id);const{error:ae}=await K.from("audit_logs").insert({user_id:O,user_email:H,event_type:`${s.toUpperCase()}_UPDATED`,details:ie,document_id:ne,signature_request_id:oe,user_id:be});ae&&console.warn("Audit log insertion failed:",ae.message),m({message:`${s} record updated successfully!`,type:"success"}),o(V[0]),n()}catch(G){console.error("Error during record update:",G),m({message:G.message||"An unexpected error occurred.",type:"error"})}finally{h(!1)}},E=async()=>{if(!window.confirm(`Are you sure you want to delete this ${s} record? This action cannot be undone.`))return;h(!0),m({message:"",type:""});const{data:R,error:T}=await K.auth.getUser();if(T||!(R!=null&&R.user)){m({message:(T==null?void 0:T.message)||"Authentication required.",type:"error"}),h(!1);return}const O=R.user.id,H=R.user.email;try{const{data:G,error:Z}=await K.from(s).select("*").eq("id",l.id).single();if(Z)throw new Error(`Failed to fetch record for audit before deletion: ${Z.message}`);const{error:V}=await K.from(s).delete().eq("id",l.id);if(V)throw new Error(`Failed to delete ${s} record: ${V.message}`);const te={table_name:s,record_id:l.id,deleted_data:G};let se=null,ie=null,ne=null;s==="documents"?se=l.id:s==="signature_requests"?(ie=l.id,se=l.document_id):s==="users"&&(ne=l.id);const{error:oe}=await K.from("audit_logs").insert({user_id:O,user_email:H,event_type:`${s.toUpperCase()}_DELETED`,details:te,document_id:se,signature_request_id:ie,user_id:ne});oe&&console.warn("Audit log insertion failed:",oe.message),m({message:`${s} record deleted successfully!`,type:"success"}),o(),n()}catch(G){console.error("Error during record deletion:",G),m({message:G.message||"An unexpected error occurred during deletion.",type:"error"})}finally{h(!1)}};return!i||!l?null:u.jsxs(na,{show:i,onClose:n,children:[u.jsxs("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:["Edit ",s.replace("_"," ").toUpperCase()," Record"]}),x.message&&u.jsx(Et,{message:x.message,type:x.type}),u.jsxs("div",{className:"space-y-4 text-brand-text-light",children:[Object.entries(g).map(([R,T])=>R==="id"||R==="created_at"||R==="updated_at"||R.endsWith("_id")?u.jsxs("p",{children:[u.jsxs("strong",{children:[R.replace(/_/g," ").replace(/\b\w/g,O=>O.toUpperCase()),":"]})," ",String(T)]},R):typeof T=="boolean"?u.jsx("div",{children:u.jsxs("label",{className:"block text-sm font-medium text-brand-text",children:[u.jsx("input",{type:"checkbox",name:R,checked:T,onChange:_,className:"mr-2"}),R.replace(/_/g," ").replace(/\b\w/g,O=>O.toUpperCase())]})},R):u.jsxs("div",{children:[u.jsxs("label",{htmlFor:R,className:"block text-sm font-medium text-brand-text mb-1",children:[R.replace(/_/g," ").replace(/\b\w/g,O=>O.toUpperCase()),":"]}),u.jsx("input",{type:typeof T=="number"?"number":"text",id:R,name:R,value:T||"",onChange:_,className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary"})]},R)),u.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[u.jsx("button",{onClick:n,className:"px-4 py-2 border border-brand-border-light text-brand-text rounded-md hover:bg-brand-bg-dark transition-colors duration-200",children:"Cancel"}),u.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200",disabled:d,children:d?"Deleting...":"Delete Record"}),u.jsx("button",{onClick:A,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200",disabled:d,children:d?"Saving...":"Save Changes"})]})]})]})},_i=[{name:"users",display:"Users",orderColumn:"created_at"},{name:"documents",display:"Documents",orderColumn:"created_at"},{name:"document_versions",display:"Document Versions",orderColumn:"created_at"},{name:"signature_requests",display:"Signature Requests",orderColumn:"requested_at"},{name:"incident_reports",display:"Incident Reports",orderColumn:"timestamp"}],z1=i=>{if(!i)return"N/A";const n=new Date(i),s={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return n.toLocaleDateString("en-US",s)},q1=(i,n)=>i.includes("timestamp")||i.includes("at")?z1(n):typeof n=="boolean"?n?"True":"False":n==null?"N/A":Array.isArray(n)||typeof n=="object"?JSON.stringify(n):String(n),B1=()=>{var be;const[i,n]=w.useState(_i[0].name),[s,l]=w.useState([]),[o,d]=w.useState(!0),[h,x]=w.useState({message:"",type:""}),[m,g]=w.useState(1),[p]=w.useState(10),[_,y]=w.useState(0),[A,E]=w.useState(!1),[R,T]=w.useState(null),[O,H]=w.useState([]),G=w.useCallback(async()=>{if(d(!0),x({message:"",type:""}),!K){x({message:"Supabase client not available. Please check configuration.",type:"error"}),d(!1);return}try{const ae=(m-1)*p,_e=ae+p-1,ce=_i.find(Q=>Q.name===i),ue=(ce==null?void 0:ce.orderColumn)||"id",{data:q,error:J,count:j}=await K.from(i).select("*",{count:"exact"}).order(ue,{ascending:!1}).range(ae,_e);if(J)console.error(`Supabase fetch ${i} records error:`,J),x({message:`Failed to fetch ${i} records: ${J.message}`,type:"error"}),l([]),y(0);else if(y(j),l(q),q.length>0){const Q=Object.keys(q[0]);H(Q)}else H([])}catch(ae){console.error("Unexpected error during record fetch:",ae),x({message:ae.message||"An unexpected error occurred while fetching records.",type:"error"})}finally{d(!1)}},[i,m,p]);w.useEffect(()=>{g(1),G()},[i,G]);const Z=Math.ceil(_/p),V=ae=>{ae>=1&&ae<=Z&&g(ae)},te=ae=>{T(ae),E(!0)},se=()=>{E(!1),T(null)},ie=ae=>{G()},[ne,oe]=w.useState(!1);return w.useEffect(()=>{(async()=>{const{data:_e,error:ce}=await K.auth.getUser();if(ce||!(_e!=null&&_e.user)){oe(!1);return}const{data:ue,error:q}=await K.from("users").select("role").eq("id",_e.user.id).single();q||!ue||ue.role!=="admin"?oe(!1):oe(!0)})()},[]),ne?o&&s.length===0?u.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:u.jsx("p",{className:"text-xl",children:"Loading records..."})}):u.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text flex",children:[h.message&&u.jsx(Et,{message:h.message,type:h.type}),u.jsxs("aside",{className:"w-64 bg-brand-card p-6 rounded-lg shadow-card mr-8 flex-shrink-0",children:[u.jsx("h2",{className:"text-2xl font-semibold mb-6 text-brand-heading",children:"Manage Data"}),u.jsx("nav",{children:u.jsx("ul",{children:_i.map(ae=>u.jsx("li",{className:"mb-2",children:u.jsx("button",{onClick:()=>n(ae.name),className:`w-full text-left py-2 px-4 rounded-md transition-colors duration-200 ${i===ae.name?"bg-color-button-primary text-white":"bg-brand-bg-light hover:bg-brand-bg-dark text-brand-text"}`,children:ae.display})},ae.name))})})]}),u.jsxs("main",{className:"flex-grow",children:[u.jsxs("header",{className:"mb-6 border-b border-brand-border-light pb-4",children:[u.jsxs("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:[(be=_i.find(ae=>ae.name===i))==null?void 0:be.display," Records"]}),u.jsx("p",{className:"text-brand-text-light mt-2",children:"View and manage data for the selected table."})]}),o&&s.length===0?u.jsx("div",{className:"flex justify-center items-center py-10",children:u.jsx("p",{className:"text-xl",children:"Loading data..."})}):s.length===0?u.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:u.jsxs("p",{className:"text-lg",children:["No records found for ",i,"."]})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:u.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[u.jsx("thead",{className:"bg-brand-bg-dark",children:u.jsxs("tr",{children:[O.map(ae=>u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:ae.replace(/_/g," ").replace(/\b\w/g,_e=>_e.toUpperCase())},ae)),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:s.map(ae=>u.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[O.map(_e=>u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:q1(_e,ae[_e])},`${ae.id}-${_e}`)),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>te(ae),className:"text-color-button-primary hover:text-color-button-primary-hover transition-colors duration-200 mr-4",children:"Edit"})})]},ae.id||JSON.stringify(ae)))})]})}),Z>1&&u.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[u.jsx("button",{onClick:()=>V(m-1),disabled:m===1||o,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),u.jsxs("span",{className:"text-brand-text",children:["Page ",m," of ",Z]}),u.jsx("button",{onClick:()=>V(m+1),disabled:m===Z||o,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]})]}),u.jsx(L1,{show:A,onClose:se,tableName:i,record:R,onSaveSuccess:ie})]}):u.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-red-500",children:u.jsx("p",{className:"text-xl",children:"Access Denied. You do not have administrative privileges."})})};function $1({session:i}){const n=Ma(),[s,l]=w.useState(0),o=w.useRef(null),h=i&&!["/","/login","/register","/verify-email-success","/access-denied"].includes(n.pathname);return w.useEffect(()=>{h&&o.current?l(o.current.offsetHeight):l(0)},[h,n.pathname]),u.jsxs(u.Fragment,{children:[h&&u.jsx(Q0,{ref:o}),u.jsx("div",{style:{paddingTop:`${s}px`},children:u.jsxs(mp,{children:[u.jsx(nt,{path:"/",element:u.jsx(Wv,{})}),u.jsx(nt,{path:"/login",element:u.jsx(e1,{})}),u.jsx(nt,{path:"/register",element:u.jsx(g1,{})}),u.jsx(nt,{path:"/verify-email-success",element:u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:u.jsxs("div",{className:"bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 text-center max-w-md w-full animate-fade-in-up",children:[u.jsx("h1",{className:"text-4xl font-extrabold text-[var(--brand-heading)] mb-4 drop-shadow-md",children:"Email Verified!"}),u.jsx("p",{className:"text-lg text-[var(--brand-text-light)] mb-6 leading-relaxed",children:"Your email has been successfully verified. You can now securely log in."}),u.jsx(Ve,{to:"/login",className:`inline-block py-3 px-8 rounded-full shadow-lg font-bold text-lg\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-xl`,children:"Go to Login"})]})})}),u.jsx(nt,{path:"/access-denied",element:u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:u.jsxs("div",{className:"bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 text-center max-w-md w-full animate-fade-in-up",children:[u.jsx("h1",{className:"text-4xl font-extrabold text-[var(--brand-heading)] mb-4 drop-shadow-md",children:"Access Denied"}),u.jsx("p",{className:"text-lg text-[var(--brand-text-light)] mb-6 leading-relaxed",children:"You do not have permission to view this page. Please log in with appropriate credentials."}),u.jsx(Ve,{to:"/login",className:`inline-block py-3 px-8 rounded-full shadow-lg font-bold text-lg\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-xl`,children:"Go to Login"})]})})}),u.jsx(nt,{path:"/user/dashboard",element:u.jsx(x1,{})}),u.jsx(nt,{path:"/user/documents",element:u.jsx(b1,{})}),u.jsx(nt,{path:"/user/documents/upload",element:u.jsx(p1,{})}),u.jsx(nt,{path:"/user/documents/:id",element:u.jsx(_1,{})}),u.jsx(nt,{path:"/user/signature-requests",element:u.jsx(S1,{})}),u.jsx(nt,{path:"/user/profile",element:u.jsx(E1,{})}),u.jsx(nt,{path:"/admin/dashboard",element:u.jsx(D1,{})}),u.jsx(nt,{path:"/admin/audit",element:u.jsx(k1,{})}),u.jsx(nt,{path:"/admin/manage-users",element:u.jsx(O1,{})}),u.jsx(nt,{path:"/admin/reports",element:u.jsx(U1,{})}),u.jsx(nt,{path:"/admin/anomalies",element:u.jsx(M1,{})}),u.jsx(nt,{path:"/admin/master-edit",element:u.jsx(B1,{})}),u.jsx(nt,{path:"*",element:u.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:u.jsxs("div",{className:"bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 text-center max-w-md w-full animate-fade-in-up",children:[u.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold text-[var(--brand-heading)] mb-4 drop-shadow-md",children:"404"}),u.jsx("p",{className:"text-xl md:text-2xl text-[var(--brand-text-light)] mb-6 leading-relaxed",children:"Oops! The page you're looking for doesn't exist."}),u.jsx(Ve,{to:"/",className:`inline-block py-3 px-8 rounded-full shadow-lg font-bold text-lg\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-xl`,children:"Go Home"})]})})})]})})]})}function H1(){const i="/SignatureApp/",[n,s]=w.useState(null),[l,o]=w.useState(!0);return w.useEffect(()=>{K.auth.getSession().then(({data:{session:h}})=>{s(h),o(!1)});const{data:d}=K.auth.onAuthStateChange((h,x)=>{s(x),o(!1)});return()=>{d.subscription.unsubscribe()}},[]),l?u.jsx("div",{style:{textAlign:"center",padding:"50px",fontSize:"1.2em",color:"#666"},children:"Loading application..."}):u.jsx(qp,{basename:i,children:u.jsx($1,{session:n})})}wb.createRoot(document.getElementById("root")).render(u.jsx(w.StrictMode,{children:u.jsx(H1,{})}));export{db as g};
