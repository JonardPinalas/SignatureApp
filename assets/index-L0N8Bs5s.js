(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function Nb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Tb(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var s=function l(){return this instanceof l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(l){var o=Object.getOwnPropertyDescriptor(i,l);Object.defineProperty(s,l,o.get?o:{enumerable:!0,get:function(){return i[l]}})}),s}var Pc={exports:{}},zs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function Ab(){if(_m)return zs;_m=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(l,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var x in o)x!=="key"&&(u[x]=o[x])}else u=o;return o=u.ref,{$$typeof:i,type:l,key:h,ref:o!==void 0?o:null,props:u}}return zs.Fragment=n,zs.jsx=s,zs.jsxs=s,zs}var wm;function Rb(){return wm||(wm=1,Pc.exports=Ab()),Pc.exports}var d=Rb(),Qc={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function Cb(){if(Sm)return pe;Sm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.iterator;function y(S){return S===null||typeof S!="object"?null:(S=_&&S[_]||S["@@iterator"],typeof S=="function"?S:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function T(S,q,O){this.props=S,this.context=q,this.refs=R,this.updater=O||A}T.prototype.isReactComponent={},T.prototype.setState=function(S,q){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,q,"setState")},T.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function U(){}U.prototype=T.prototype;function $(S,q,O){this.props=S,this.context=q,this.refs=R,this.updater=O||A}var G=$.prototype=new U;G.constructor=$,E(G,T.prototype),G.isPureReactComponent=!0;var Z=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function le(S,q,O,Y,D,ee){return O=ee.ref,{$$typeof:i,type:S,key:q,ref:O!==void 0?O:null,props:ee}}function se(S,q){return le(S.type,q,void 0,void 0,void 0,S.props)}function ne(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function ue(S){var q={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(O){return q[O]})}var be=/\/+/g;function ae(S,q){return typeof S=="object"&&S!==null&&S.key!=null?ue(""+S.key):q.toString(36)}function ve(){}function ce(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(ve,ve):(S.status="pending",S.then(function(q){S.status==="pending"&&(S.status="fulfilled",S.value=q)},function(q){S.status==="pending"&&(S.status="rejected",S.reason=q)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function oe(S,q,O,Y,D){var ee=typeof S;(ee==="undefined"||ee==="boolean")&&(S=null);var J=!1;if(S===null)J=!0;else switch(ee){case"bigint":case"string":case"number":J=!0;break;case"object":switch(S.$$typeof){case i:case n:J=!0;break;case p:return J=S._init,oe(J(S._payload),q,O,Y,D)}}if(J)return D=D(S),J=Y===""?"."+ae(S,0):Y,Z(D)?(O="",J!=null&&(O=J.replace(be,"$&/")+"/"),oe(D,q,O,"",function(ge){return ge})):D!=null&&(ne(D)&&(D=se(D,O+(D.key==null||S&&S.key===D.key?"":(""+D.key).replace(be,"$&/")+"/")+J)),q.push(D)),1;J=0;var me=Y===""?".":Y+":";if(Z(S))for(var re=0;re<S.length;re++)Y=S[re],ee=me+ae(Y,re),J+=oe(Y,q,O,ee,D);else if(re=y(S),typeof re=="function")for(S=re.call(S),re=0;!(Y=S.next()).done;)Y=Y.value,ee=me+ae(Y,re++),J+=oe(Y,q,O,ee,D);else if(ee==="object"){if(typeof S.then=="function")return oe(ce(S),q,O,Y,D);throw q=String(S),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return J}function z(S,q,O){if(S==null)return S;var Y=[],D=0;return oe(S,Y,"","",function(ee){return q.call(O,ee,D++)}),Y}function I(S){if(S._status===-1){var q=S._result;q=q(),q.then(function(O){(S._status===0||S._status===-1)&&(S._status=1,S._result=O)},function(O){(S._status===0||S._status===-1)&&(S._status=2,S._result=O)}),S._status===-1&&(S._status=0,S._result=q)}if(S._status===1)return S._result.default;throw S._result}var j=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function P(){}return pe.Children={map:z,forEach:function(S,q,O){z(S,function(){q.apply(this,arguments)},O)},count:function(S){var q=0;return z(S,function(){q++}),q},toArray:function(S){return z(S,function(q){return q})||[]},only:function(S){if(!ne(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},pe.Component=T,pe.Fragment=s,pe.Profiler=o,pe.PureComponent=$,pe.StrictMode=l,pe.Suspense=m,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,pe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return V.H.useMemoCache(S)}},pe.cache=function(S){return function(){return S.apply(null,arguments)}},pe.cloneElement=function(S,q,O){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var Y=E({},S.props),D=S.key,ee=void 0;if(q!=null)for(J in q.ref!==void 0&&(ee=void 0),q.key!==void 0&&(D=""+q.key),q)!te.call(q,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&q.ref===void 0||(Y[J]=q[J]);var J=arguments.length-2;if(J===1)Y.children=O;else if(1<J){for(var me=Array(J),re=0;re<J;re++)me[re]=arguments[re+2];Y.children=me}return le(S.type,D,void 0,void 0,ee,Y)},pe.createContext=function(S){return S={$$typeof:h,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:u,_context:S},S},pe.createElement=function(S,q,O){var Y,D={},ee=null;if(q!=null)for(Y in q.key!==void 0&&(ee=""+q.key),q)te.call(q,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(D[Y]=q[Y]);var J=arguments.length-2;if(J===1)D.children=O;else if(1<J){for(var me=Array(J),re=0;re<J;re++)me[re]=arguments[re+2];D.children=me}if(S&&S.defaultProps)for(Y in J=S.defaultProps,J)D[Y]===void 0&&(D[Y]=J[Y]);return le(S,ee,void 0,void 0,null,D)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(S){return{$$typeof:x,render:S}},pe.isValidElement=ne,pe.lazy=function(S){return{$$typeof:p,_payload:{_status:-1,_result:S},_init:I}},pe.memo=function(S,q){return{$$typeof:g,type:S,compare:q===void 0?null:q}},pe.startTransition=function(S){var q=V.T,O={};V.T=O;try{var Y=S(),D=V.S;D!==null&&D(O,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(P,j)}catch(ee){j(ee)}finally{V.T=q}},pe.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},pe.use=function(S){return V.H.use(S)},pe.useActionState=function(S,q,O){return V.H.useActionState(S,q,O)},pe.useCallback=function(S,q){return V.H.useCallback(S,q)},pe.useContext=function(S){return V.H.useContext(S)},pe.useDebugValue=function(){},pe.useDeferredValue=function(S,q){return V.H.useDeferredValue(S,q)},pe.useEffect=function(S,q,O){var Y=V.H;if(typeof O=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(S,q)},pe.useId=function(){return V.H.useId()},pe.useImperativeHandle=function(S,q,O){return V.H.useImperativeHandle(S,q,O)},pe.useInsertionEffect=function(S,q){return V.H.useInsertionEffect(S,q)},pe.useLayoutEffect=function(S,q){return V.H.useLayoutEffect(S,q)},pe.useMemo=function(S,q){return V.H.useMemo(S,q)},pe.useOptimistic=function(S,q){return V.H.useOptimistic(S,q)},pe.useReducer=function(S,q,O){return V.H.useReducer(S,q,O)},pe.useRef=function(S){return V.H.useRef(S)},pe.useState=function(S){return V.H.useState(S)},pe.useSyncExternalStore=function(S,q,O){return V.H.useSyncExternalStore(S,q,O)},pe.useTransition=function(){return V.H.useTransition()},pe.version="19.1.0",pe}var jm;function vu(){return jm||(jm=1,Qc.exports=Cb()),Qc.exports}var w=vu(),Xc={exports:{}},qs={},Kc={exports:{}},Zc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function Db(){return Em||(Em=1,function(i){function n(z,I){var j=z.length;z.push(I);e:for(;0<j;){var P=j-1>>>1,S=z[P];if(0<o(S,I))z[P]=I,z[j]=S,j=P;else break e}}function s(z){return z.length===0?null:z[0]}function l(z){if(z.length===0)return null;var I=z[0],j=z.pop();if(j!==I){z[0]=j;e:for(var P=0,S=z.length,q=S>>>1;P<q;){var O=2*(P+1)-1,Y=z[O],D=O+1,ee=z[D];if(0>o(Y,j))D<S&&0>o(ee,Y)?(z[P]=ee,z[D]=j,P=D):(z[P]=Y,z[O]=j,P=O);else if(D<S&&0>o(ee,j))z[P]=ee,z[D]=j,P=D;else break e}}return I}function o(z,I){var j=z.sortIndex-I.sortIndex;return j!==0?j:z.id-I.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,x=h.now();i.unstable_now=function(){return h.now()-x}}var m=[],g=[],p=1,_=null,y=3,A=!1,E=!1,R=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Z(z){for(var I=s(g);I!==null;){if(I.callback===null)l(g);else if(I.startTime<=z)l(g),I.sortIndex=I.expirationTime,n(m,I);else break;I=s(g)}}function V(z){if(R=!1,Z(z),!E)if(s(m)!==null)E=!0,te||(te=!0,ae());else{var I=s(g);I!==null&&oe(V,I.startTime-z)}}var te=!1,le=-1,se=5,ne=-1;function ue(){return T?!0:!(i.unstable_now()-ne<se)}function be(){if(T=!1,te){var z=i.unstable_now();ne=z;var I=!0;try{e:{E=!1,R&&(R=!1,$(le),le=-1),A=!0;var j=y;try{t:{for(Z(z),_=s(m);_!==null&&!(_.expirationTime>z&&ue());){var P=_.callback;if(typeof P=="function"){_.callback=null,y=_.priorityLevel;var S=P(_.expirationTime<=z);if(z=i.unstable_now(),typeof S=="function"){_.callback=S,Z(z),I=!0;break t}_===s(m)&&l(m),Z(z)}else l(m);_=s(m)}if(_!==null)I=!0;else{var q=s(g);q!==null&&oe(V,q.startTime-z),I=!1}}break e}finally{_=null,y=j,A=!1}I=void 0}}finally{I?ae():te=!1}}}var ae;if(typeof G=="function")ae=function(){G(be)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ce=ve.port2;ve.port1.onmessage=be,ae=function(){ce.postMessage(null)}}else ae=function(){U(be,0)};function oe(z,I){le=U(function(){z(i.unstable_now())},I)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(z){switch(y){case 1:case 2:case 3:var I=3;break;default:I=y}var j=y;y=I;try{return z()}finally{y=j}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(z,I){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var j=y;y=z;try{return I()}finally{y=j}},i.unstable_scheduleCallback=function(z,I,j){var P=i.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?P+j:P):j=P,z){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=j+S,z={id:p++,callback:I,priorityLevel:z,startTime:j,expirationTime:S,sortIndex:-1},j>P?(z.sortIndex=j,n(g,z),s(m)===null&&z===s(g)&&(R?($(le),le=-1):R=!0,oe(V,j-P))):(z.sortIndex=S,n(m,z),E||A||(E=!0,te||(te=!0,ae()))),z},i.unstable_shouldYield=ue,i.unstable_wrapCallback=function(z){var I=y;return function(){var j=y;y=I;try{return z.apply(this,arguments)}finally{y=j}}}}(Zc)),Zc}var Nm;function kb(){return Nm||(Nm=1,Kc.exports=Db()),Kc.exports}var Jc={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function Ob(){if(Tm)return Et;Tm=1;var i=vu();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:m,containerInfo:g,implementation:p}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Et.createPortal=function(m,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(m,g,null,p)},Et.flushSync=function(m){var g=h.T,p=l.p;try{if(h.T=null,l.p=2,m)return m()}finally{h.T=g,l.p=p,l.d.f()}},Et.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(m,g))},Et.prefetchDNS=function(m){typeof m=="string"&&l.d.D(m)},Et.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var p=g.as,_=x(p,g.crossOrigin),y=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?l.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:y,fetchPriority:A}):p==="script"&&l.d.X(m,{crossOrigin:_,integrity:y,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Et.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=x(g.as,g.crossOrigin);l.d.M(m,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(m)},Et.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,_=x(p,g.crossOrigin);l.d.L(m,p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Et.preloadModule=function(m,g){if(typeof m=="string")if(g){var p=x(g.as,g.crossOrigin);l.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(m)},Et.requestFormReset=function(m){l.d.r(m)},Et.unstable_batchedUpdates=function(m,g){return m(g)},Et.useFormState=function(m,g,p){return h.H.useFormState(m,g,p)},Et.useFormStatus=function(){return h.H.useHostTransitionStatus()},Et.version="19.1.0",Et}var Am;function Ub(){if(Am)return Jc.exports;Am=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Jc.exports=Ob(),Jc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function Mb(){if(Rm)return qs;Rm=1;var i=kb(),n=vu(),s=Ub();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(u(e)!==e)throw Error(l(188))}function m(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,r=t;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(r=c.return,r!==null){a=r;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return x(c),e;if(f===r)return x(c),t;f=f.sibling}throw Error(l(188))}if(a.return!==r.return)a=c,r=f;else{for(var b=!1,v=c.child;v;){if(v===a){b=!0,a=c,r=f;break}if(v===r){b=!0,r=c,a=f;break}v=v.sibling}if(!b){for(v=f.child;v;){if(v===a){b=!0,a=f,r=c;break}if(v===r){b=!0,r=f,a=c;break}v=v.sibling}if(!b)throw Error(l(189))}}if(a.alternate!==r)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=be&&e[be]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case T:return"Profiler";case R:return"StrictMode";case V:return"Suspense";case te:return"SuspenseList";case ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case G:return(e.displayName||"Context")+".Provider";case $:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case le:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}var oe=Array.isArray,z=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},P=[],S=-1;function q(e){return{current:e}}function O(e){0>S||(e.current=P[S],P[S]=null,S--)}function Y(e,t){S++,P[S]=e.current,e.current=t}var D=q(null),ee=q(null),J=q(null),me=q(null);function re(e,t){switch(Y(J,t),Y(ee,e),Y(D,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Kh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Kh(t),e=Zh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}O(D),Y(D,e)}function ge(){O(D),O(ee),O(J)}function Se(e){e.memoizedState!==null&&Y(me,e);var t=D.current,a=Zh(t,e.type);t!==a&&(Y(ee,e),Y(D,a))}function Oe(e){ee.current===e&&(O(D),O(ee)),me.current===e&&(O(me),ks._currentValue=j)}var Be=Object.prototype.hasOwnProperty,Ye=i.unstable_scheduleCallback,Fe=i.unstable_cancelCallback,oa=i.unstable_shouldYield,ki=i.unstable_requestPaint,Yt=i.unstable_now,Oi=i.unstable_getCurrentPriorityLevel,al=i.unstable_ImmediatePriority,rl=i.unstable_UserBlockingPriority,gr=i.unstable_NormalPriority,nl=i.unstable_LowPriority,sl=i.unstable_IdlePriority,Ui=i.log,ea=i.unstable_setDisableYieldValue,xr=null,_t=null;function ca(e){if(typeof Ui=="function"&&ea(e),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(xr,e)}catch{}}var wt=Math.clz32?Math.clz32:De,W=Math.log,_e=Math.LN2;function De(e){return e>>>=0,e===0?32:31-(W(e)/_e|0)|0}var Re=256,Qe=4194304;function Xe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function gt(e,t,a){var r=e.pendingLanes;if(r===0)return 0;var c=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var v=r&134217727;return v!==0?(r=v&~f,r!==0?c=Xe(r):(b&=v,b!==0?c=Xe(b):a||(a=v&~e,a!==0&&(c=Xe(a))))):(v=r&~f,v!==0?c=Xe(v):b!==0?c=Xe(b):a||(a=r&~e,a!==0&&(c=Xe(a)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,a=t&-t,f>=a||f===32&&(a&4194048)!==0)?t:c}function ot(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function We(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nt(){var e=Re;return Re<<=1,(Re&4194048)===0&&(Re=256),e}function Rt(){var e=Qe;return Qe<<=1,(Qe&62914560)===0&&(Qe=4194304),e}function qa(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ba(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ll(e,t,a,r,c,f){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,N=e.expirationTimes,L=e.hiddenUpdates;for(a=b&~a;0<a;){var F=31-wt(a),K=1<<F;v[F]=0,N[F]=-1;var B=L[F];if(B!==null)for(L[F]=null,F=0;F<B.length;F++){var H=B[F];H!==null&&(H.lane&=-536870913)}a&=~K}r!==0&&Vn(e,r,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~t))}function Vn(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-wt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|a&4194090}function Uu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-wt(a),c=1<<r;c&t|e[r]&t&&(e[r]|=t),a&=~c}}function Mi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Li(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Mu(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:gm(e.type))}function g0(e,t){var a=I.p;try{return I.p=e,t()}finally{I.p=a}}var $a=Math.random().toString(36).slice(2),St="__reactFiber$"+$a,Ct="__reactProps$"+$a,Br="__reactContainer$"+$a,zi="__reactEvents$"+$a,x0="__reactListeners$"+$a,b0="__reactHandles$"+$a,Lu="__reactResources$"+$a,Gn="__reactMarker$"+$a;function qi(e){delete e[St],delete e[Ct],delete e[zi],delete e[x0],delete e[b0]}function $r(e){var t=e[St];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Br]||a[St]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=em(e);e!==null;){if(a=e[St])return a;e=em(e)}return t}e=a,a=e.parentNode}return null}function Hr(e){if(e=e[St]||e[Br]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Yn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Vr(e){var t=e[Lu];return t||(t=e[Lu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[Gn]=!0}var zu=new Set,qu={};function br(e,t){Gr(e,t),Gr(e+"Capture",t)}function Gr(e,t){for(qu[e]=t,e=0;e<t.length;e++)zu.add(t[e])}var p0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bu={},$u={};function y0(e){return Be.call($u,e)?!0:Be.call(Bu,e)?!1:p0.test(e)?$u[e]=!0:(Bu[e]=!0,!1)}function il(e,t,a){if(y0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ol(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ya(e,t,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+r)}}var Bi,Hu;function Yr(e){if(Bi===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Bi=t&&t[1]||"",Hu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bi+e+Hu}var $i=!1;function Hi(e,t){if(!e||$i)return"";$i=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(H){var B=H}Reflect.construct(e,[],K)}else{try{K.call()}catch(H){B=H}e.call(K.prototype)}}else{try{throw Error()}catch(H){B=H}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(H){if(H&&B&&typeof H.stack=="string")return[H.stack,B.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=r.DetermineComponentFrameRoot(),b=f[0],v=f[1];if(b&&v){var N=b.split(`
`),L=v.split(`
`);for(c=r=0;r<N.length&&!N[r].includes("DetermineComponentFrameRoot");)r++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(r===N.length||c===L.length)for(r=N.length-1,c=L.length-1;1<=r&&0<=c&&N[r]!==L[c];)c--;for(;1<=r&&0<=c;r--,c--)if(N[r]!==L[c]){if(r!==1||c!==1)do if(r--,c--,0>c||N[r]!==L[c]){var F=`
`+N[r].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=r&&0<=c);break}}}finally{$i=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Yr(a):""}function v0(e){switch(e.tag){case 26:case 27:case 5:return Yr(e.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 15:return Hi(e.type,!1);case 11:return Hi(e.type.render,!1);case 1:return Hi(e.type,!0);case 31:return Yr("Activity");default:return""}}function Vu(e){try{var t="";do t+=v0(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _0(e){var t=Gu(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(b){r=""+b,f.call(this,b)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cl(e){e._valueTracker||(e._valueTracker=_0(e))}function Yu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=Gu(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function ul(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var w0=/[\n"\\]/g;function Pt(e){return e.replace(w0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Vi(e,t,a,r,c,f,b,v){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ft(t)):e.value!==""+Ft(t)&&(e.value=""+Ft(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?Gi(e,b,Ft(t)):a!=null?Gi(e,b,Ft(a)):r!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Ft(v):e.removeAttribute("name")}function Fu(e,t,a,r,c,f,b,v){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;a=a!=null?""+Ft(a):"",t=t!=null?""+Ft(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=v?e.checked:!!r,e.defaultChecked=!!r,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function Gi(e,t,a){t==="number"&&ul(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Fr(e,t,a,r){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&r&&(e[a].defaultSelected=!0)}else{for(a=""+Ft(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Pu(e,t,a){if(t!=null&&(t=""+Ft(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ft(a):""}function Qu(e,t,a,r){if(t==null){if(r!=null){if(a!=null)throw Error(l(92));if(oe(r)){if(1<r.length)throw Error(l(93));r=r[0]}a=r}a==null&&(a=""),t=a}a=Ft(t),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r)}function Pr(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var S0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xu(e,t,a){var r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a!="number"||a===0||S0.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ku(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in t)r=t[c],t.hasOwnProperty(c)&&a[c]!==r&&Xu(e,c,r)}else for(var f in t)t.hasOwnProperty(f)&&Xu(e,f,t[f])}function Yi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(e){return E0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Fi=null;function Pi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qr=null,Xr=null;function Zu(e){var t=Hr(e);if(t&&(e=t.stateNode)){var a=e[Ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(Vi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var c=r[Ct]||null;if(!c)throw Error(l(90));Vi(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)r=a[t],r.form===e.form&&Yu(r)}break e;case"textarea":Pu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Fr(e,!!a.multiple,t,!1)}}}var Qi=!1;function Ju(e,t,a){if(Qi)return e(t,a);Qi=!0;try{var r=e(t);return r}finally{if(Qi=!1,(Qr!==null||Xr!==null)&&(Zl(),Qr&&(t=Qr,e=Xr,Xr=Qr=null,Zu(t),e)))for(t=0;t<e.length;t++)Zu(e[t])}}function Fn(e,t){var a=e.stateNode;if(a===null)return null;var r=a[Ct]||null;if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xi=!1;if(va)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Xi=!1}var Ha=null,Ki=null,fl=null;function Iu(){if(fl)return fl;var e,t=Ki,a=t.length,r,c="value"in Ha?Ha.value:Ha.textContent,f=c.length;for(e=0;e<a&&t[e]===c[e];e++);var b=a-e;for(r=1;r<=b&&t[a-r]===c[f-r];r++);return fl=c.slice(e,1<r?1-r:void 0)}function hl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ml(){return!0}function Wu(){return!1}function Dt(e){function t(a,r,c,f,b){this._reactName=a,this._targetInst=c,this.type=r,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ml:Wu,this.isPropagationStopped=Wu,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=Dt(pr),Qn=p({},pr,{view:0,detail:0}),N0=Dt(Qn),Zi,Ji,Xn,xl=p({},Qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xn&&(Xn&&e.type==="mousemove"?(Zi=e.screenX-Xn.screenX,Ji=e.screenY-Xn.screenY):Ji=Zi=0,Xn=e),Zi)},movementY:function(e){return"movementY"in e?e.movementY:Ji}}),ed=Dt(xl),T0=p({},xl,{dataTransfer:0}),A0=Dt(T0),R0=p({},Qn,{relatedTarget:0}),Ii=Dt(R0),C0=p({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),D0=Dt(C0),k0=p({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),O0=Dt(k0),U0=p({},pr,{data:0}),td=Dt(U0),M0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z0[e])?!!t[e]:!1}function Wi(){return q0}var B0=p({},Qn,{key:function(e){if(e.key){var t=M0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(e){return e.type==="keypress"?hl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$0=Dt(B0),H0=p({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=Dt(H0),V0=p({},Qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),G0=Dt(V0),Y0=p({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),F0=Dt(Y0),P0=p({},xl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q0=Dt(P0),X0=p({},pr,{newState:0,oldState:0}),K0=Dt(X0),Z0=[9,13,27,32],eo=va&&"CompositionEvent"in window,Kn=null;va&&"documentMode"in document&&(Kn=document.documentMode);var J0=va&&"TextEvent"in window&&!Kn,rd=va&&(!eo||Kn&&8<Kn&&11>=Kn),nd=" ",sd=!1;function ld(e,t){switch(e){case"keyup":return Z0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function I0(e,t){switch(e){case"compositionend":return id(t);case"keypress":return t.which!==32?null:(sd=!0,nd);case"textInput":return e=t.data,e===nd&&sd?null:e;default:return null}}function W0(e,t){if(Kr)return e==="compositionend"||!eo&&ld(e,t)?(e=Iu(),fl=Ki=Ha=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rd&&t.locale!=="ko"?null:t.data;default:return null}}var ex={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ex[e.type]:t==="textarea"}function cd(e,t,a,r){Qr?Xr?Xr.push(r):Xr=[r]:Qr=r,t=ai(t,"onChange"),0<t.length&&(a=new gl("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var Zn=null,Jn=null;function tx(e){Yh(e,0)}function bl(e){var t=Yn(e);if(Yu(t))return e}function ud(e,t){if(e==="change")return t}var dd=!1;if(va){var to;if(va){var ao="oninput"in document;if(!ao){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),ao=typeof fd.oninput=="function"}to=ao}else to=!1;dd=to&&(!document.documentMode||9<document.documentMode)}function hd(){Zn&&(Zn.detachEvent("onpropertychange",md),Jn=Zn=null)}function md(e){if(e.propertyName==="value"&&bl(Jn)){var t=[];cd(t,Jn,e,Pi(e)),Ju(tx,t)}}function ax(e,t,a){e==="focusin"?(hd(),Zn=t,Jn=a,Zn.attachEvent("onpropertychange",md)):e==="focusout"&&hd()}function rx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bl(Jn)}function nx(e,t){if(e==="click")return bl(t)}function sx(e,t){if(e==="input"||e==="change")return bl(t)}function lx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:lx;function In(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var c=a[r];if(!Be.call(t,c)||!Lt(e[c],t[c]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xd(e,t){var a=gd(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gd(a)}}function bd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ul(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ul(e.document)}return t}function ro(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ix=va&&"documentMode"in document&&11>=document.documentMode,Zr=null,no=null,Wn=null,so=!1;function yd(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;so||Zr==null||Zr!==ul(r)||(r=Zr,"selectionStart"in r&&ro(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wn&&In(Wn,r)||(Wn=r,r=ai(no,"onSelect"),0<r.length&&(t=new gl("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=Zr)))}function yr(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Jr={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},lo={},vd={};va&&(vd=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function vr(e){if(lo[e])return lo[e];if(!Jr[e])return e;var t=Jr[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in vd)return lo[e]=t[a];return e}var _d=vr("animationend"),wd=vr("animationiteration"),Sd=vr("animationstart"),ox=vr("transitionrun"),cx=vr("transitionstart"),ux=vr("transitioncancel"),jd=vr("transitionend"),Ed=new Map,io="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");io.push("scrollEnd");function ta(e,t){Ed.set(e,t),br(t,[e])}var Nd=new WeakMap;function Qt(e,t){if(typeof e=="object"&&e!==null){var a=Nd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Vu(t)},Nd.set(e,t),t)}return{value:e,source:t,stack:Vu(t)}}var Xt=[],Ir=0,oo=0;function pl(){for(var e=Ir,t=oo=Ir=0;t<e;){var a=Xt[t];Xt[t++]=null;var r=Xt[t];Xt[t++]=null;var c=Xt[t];Xt[t++]=null;var f=Xt[t];if(Xt[t++]=null,r!==null&&c!==null){var b=r.pending;b===null?c.next=c:(c.next=b.next,b.next=c),r.pending=c}f!==0&&Td(a,c,f)}}function yl(e,t,a,r){Xt[Ir++]=e,Xt[Ir++]=t,Xt[Ir++]=a,Xt[Ir++]=r,oo|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function co(e,t,a,r){return yl(e,t,a,r),vl(e)}function Wr(e,t){return yl(e,null,null,t),vl(e)}function Td(e,t,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,r=f.alternate,r!==null&&(r.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-wt(a),e=f.hiddenUpdates,r=e[c],r===null?e[c]=[t]:r.push(t),t.lane=a|536870912),f):null}function vl(e){if(50<js)throw js=0,xc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var en={};function dx(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,a,r){return new dx(e,t,a,r)}function uo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _a(e,t){var a=e.alternate;return a===null?(a=zt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ad(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function _l(e,t,a,r,c,f){var b=0;if(r=e,typeof e=="function")uo(e)&&(b=1);else if(typeof e=="string")b=hb(e,a,D.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ne:return e=zt(31,a,t,c),e.elementType=ne,e.lanes=f,e;case E:return _r(a.children,c,f,t);case R:b=8,c|=24;break;case T:return e=zt(12,a,t,c|2),e.elementType=T,e.lanes=f,e;case V:return e=zt(13,a,t,c),e.elementType=V,e.lanes=f,e;case te:return e=zt(19,a,t,c),e.elementType=te,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:case G:b=10;break e;case $:b=9;break e;case Z:b=11;break e;case le:b=14;break e;case se:b=16,r=null;break e}b=29,a=Error(l(130,e===null?"null":typeof e,"")),r=null}return t=zt(b,a,t,c),t.elementType=e,t.type=r,t.lanes=f,t}function _r(e,t,a,r){return e=zt(7,e,r,t),e.lanes=a,e}function fo(e,t,a){return e=zt(6,e,null,t),e.lanes=a,e}function ho(e,t,a){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tn=[],an=0,wl=null,Sl=0,Kt=[],Zt=0,wr=null,wa=1,Sa="";function Sr(e,t){tn[an++]=Sl,tn[an++]=wl,wl=e,Sl=t}function Rd(e,t,a){Kt[Zt++]=wa,Kt[Zt++]=Sa,Kt[Zt++]=wr,wr=e;var r=wa;e=Sa;var c=32-wt(r)-1;r&=~(1<<c),a+=1;var f=32-wt(t)+c;if(30<f){var b=c-c%5;f=(r&(1<<b)-1).toString(32),r>>=b,c-=b,wa=1<<32-wt(t)+c|a<<c|r,Sa=f+e}else wa=1<<f|a<<c|r,Sa=e}function mo(e){e.return!==null&&(Sr(e,1),Rd(e,1,0))}function go(e){for(;e===wl;)wl=tn[--an],tn[an]=null,Sl=tn[--an],tn[an]=null;for(;e===wr;)wr=Kt[--Zt],Kt[Zt]=null,Sa=Kt[--Zt],Kt[Zt]=null,wa=Kt[--Zt],Kt[Zt]=null}var Nt=null,Je=null,ke=!1,jr=null,ua=!1,xo=Error(l(519));function Er(e){var t=Error(l(418,""));throw as(Qt(t,e)),xo}function Cd(e){var t=e.stateNode,a=e.type,r=e.memoizedProps;switch(t[St]=e,t[Ct]=r,a){case"dialog":Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":case"embed":Ne("load",t);break;case"video":case"audio":for(a=0;a<Ns.length;a++)Ne(Ns[a],t);break;case"source":Ne("error",t);break;case"img":case"image":case"link":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"input":Ne("invalid",t),Fu(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),cl(t);break;case"select":Ne("invalid",t);break;case"textarea":Ne("invalid",t),Qu(t,r.value,r.defaultValue,r.children),cl(t)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||r.suppressHydrationWarning===!0||Xh(t.textContent,a)?(r.popover!=null&&(Ne("beforetoggle",t),Ne("toggle",t)),r.onScroll!=null&&Ne("scroll",t),r.onScrollEnd!=null&&Ne("scrollend",t),r.onClick!=null&&(t.onclick=ri),t=!0):t=!1,t||Er(e)}function Dd(e){for(Nt=e.return;Nt;)switch(Nt.tag){case 5:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:Nt=Nt.return}}function es(e){if(e!==Nt)return!1;if(!ke)return Dd(e),ke=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||kc(e.type,e.memoizedProps)),a=!a),a&&Je&&Er(e),Dd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Je=ra(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Je=null}}else t===27?(t=Je,rr(e.type)?(e=Lc,Lc=null,Je=e):Je=t):Je=Nt?ra(e.stateNode.nextSibling):null;return!0}function ts(){Je=Nt=null,ke=!1}function kd(){var e=jr;return e!==null&&(Ut===null?Ut=e:Ut.push.apply(Ut,e),jr=null),e}function as(e){jr===null?jr=[e]:jr.push(e)}var bo=q(null),Nr=null,ja=null;function Va(e,t,a){Y(bo,t._currentValue),t._currentValue=a}function Ea(e){e._currentValue=bo.current,O(bo)}function po(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function yo(e,t,a,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var b=c.child;f=f.firstContext;e:for(;f!==null;){var v=f;f=c;for(var N=0;N<t.length;N++)if(v.context===t[N]){f.lanes|=a,v=f.alternate,v!==null&&(v.lanes|=a),po(f.return,a,e),r||(b=null);break e}f=v.next}}else if(c.tag===18){if(b=c.return,b===null)throw Error(l(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),po(b,a,e),b=null}else b=c.child;if(b!==null)b.return=c;else for(b=c;b!==null;){if(b===e){b=null;break}if(c=b.sibling,c!==null){c.return=b.return,b=c;break}b=b.return}c=b}}function rs(e,t,a,r){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var b=c.alternate;if(b===null)throw Error(l(387));if(b=b.memoizedProps,b!==null){var v=c.type;Lt(c.pendingProps.value,b.value)||(e!==null?e.push(v):e=[v])}}else if(c===me.current){if(b=c.alternate,b===null)throw Error(l(387));b.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ks):e=[ks])}c=c.return}e!==null&&yo(t,e,a,r),t.flags|=262144}function jl(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Tr(e){Nr=e,ja=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function jt(e){return Od(Nr,e)}function El(e,t){return Nr===null&&Tr(e),Od(e,t)}function Od(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ja===null){if(e===null)throw Error(l(308));ja=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ja=ja.next=t;return a}var fx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},hx=i.unstable_scheduleCallback,mx=i.unstable_NormalPriority,st={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vo(){return{controller:new fx,data:new Map,refCount:0}}function ns(e){e.refCount--,e.refCount===0&&hx(mx,function(){e.controller.abort()})}var ss=null,_o=0,rn=0,nn=null;function gx(e,t){if(ss===null){var a=ss=[];_o=0,rn=Sc(),nn={status:"pending",value:void 0,then:function(r){a.push(r)}}}return _o++,t.then(Ud,Ud),t}function Ud(){if(--_o===0&&ss!==null){nn!==null&&(nn.status="fulfilled");var e=ss;ss=null,rn=0,nn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xx(e,t){var a=[],r={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(r.status="rejected",r.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),r}var Md=z.S;z.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&gx(e,t),Md!==null&&Md(e,t)};var Ar=q(null);function wo(){var e=Ar.current;return e!==null?e:He.pooledCache}function Nl(e,t){t===null?Y(Ar,Ar.current):Y(Ar,t.pool)}function Ld(){var e=wo();return e===null?null:{parent:st._currentValue,pool:e}}var ls=Error(l(460)),zd=Error(l(474)),Tl=Error(l(542)),So={then:function(){}};function qd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Al(){}function Bd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Al,Al),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e;default:if(typeof t.status=="string")t.then(Al,Al);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=r}},function(r){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e}throw is=t,ls}}var is=null;function $d(){if(is===null)throw Error(l(459));var e=is;return is=null,e}function Hd(e){if(e===ls||e===Tl)throw Error(l(483))}var Ga=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ya(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ue&2)!==0){var c=r.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),r.pending=t,t=vl(e),Td(e,null,a),t}return yl(e,r,t,a),vl(e)}function os(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Uu(e,a)}}function No(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?c=f=t:f=f.next=t}else c=f=t;a={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var To=!1;function cs(){if(To){var e=nn;if(e!==null)throw e}}function us(e,t,a,r){To=!1;var c=e.updateQueue;Ga=!1;var f=c.firstBaseUpdate,b=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var N=v,L=N.next;N.next=null,b===null?f=L:b.next=L,b=N;var F=e.alternate;F!==null&&(F=F.updateQueue,v=F.lastBaseUpdate,v!==b&&(v===null?F.firstBaseUpdate=L:v.next=L,F.lastBaseUpdate=N))}if(f!==null){var K=c.baseState;b=0,F=L=N=null,v=f;do{var B=v.lane&-536870913,H=B!==v.lane;if(H?(Ae&B)===B:(r&B)===B){B!==0&&B===rn&&(To=!0),F!==null&&(F=F.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var xe=e,fe=v;B=t;var qe=a;switch(fe.tag){case 1:if(xe=fe.payload,typeof xe=="function"){K=xe.call(qe,K,B);break e}K=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=fe.payload,B=typeof xe=="function"?xe.call(qe,K,B):xe,B==null)break e;K=p({},K,B);break e;case 2:Ga=!0}}B=v.callback,B!==null&&(e.flags|=64,H&&(e.flags|=8192),H=c.callbacks,H===null?c.callbacks=[B]:H.push(B))}else H={lane:B,tag:v.tag,payload:v.payload,callback:v.callback,next:null},F===null?(L=F=H,N=K):F=F.next=H,b|=B;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;H=v,v=H.next,H.next=null,c.lastBaseUpdate=H,c.shared.pending=null}}while(!0);F===null&&(N=K),c.baseState=N,c.firstBaseUpdate=L,c.lastBaseUpdate=F,f===null&&(c.shared.lanes=0),Wa|=b,e.lanes=b,e.memoizedState=K}}function Vd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Gd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Vd(a[e],t)}var sn=q(null),Rl=q(0);function Yd(e,t){e=ka,Y(Rl,e),Y(sn,t),ka=e|t.baseLanes}function Ao(){Y(Rl,ka),Y(sn,sn.current)}function Ro(){ka=Rl.current,O(sn),O(Rl)}var Pa=0,we=null,Le=null,at=null,Cl=!1,ln=!1,Rr=!1,Dl=0,ds=0,on=null,bx=0;function et(){throw Error(l(321))}function Co(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Lt(e[a],t[a]))return!1;return!0}function Do(e,t,a,r,c,f){return Pa=f,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=e===null||e.memoizedState===null?Af:Rf,Rr=!1,f=a(r,c),Rr=!1,ln&&(f=Pd(t,a,r,c)),Fd(e),f}function Fd(e){z.H=zl;var t=Le!==null&&Le.next!==null;if(Pa=0,at=Le=we=null,Cl=!1,ds=0,on=null,t)throw Error(l(300));e===null||ut||(e=e.dependencies,e!==null&&jl(e)&&(ut=!0))}function Pd(e,t,a,r){we=e;var c=0;do{if(ln&&(on=null),ds=0,ln=!1,25<=c)throw Error(l(301));if(c+=1,at=Le=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}z.H=jx,f=t(a,r)}while(ln);return f}function px(){var e=z.H,t=e.useState()[0];return t=typeof t.then=="function"?fs(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(we.flags|=1024),t}function ko(){var e=Dl!==0;return Dl=0,e}function Oo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Uo(e){if(Cl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Cl=!1}Pa=0,at=Le=we=null,ln=!1,ds=Dl=0,on=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?we.memoizedState=at=e:at=at.next=e,at}function rt(){if(Le===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=at===null?we.memoizedState:at.next;if(t!==null)at=t,Le=e;else{if(e===null)throw we.alternate===null?Error(l(467)):Error(l(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},at===null?we.memoizedState=at=e:at=at.next=e}return at}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fs(e){var t=ds;return ds+=1,on===null&&(on=[]),e=Bd(on,e,t),t=we,(at===null?t.memoizedState:at.next)===null&&(t=t.alternate,z.H=t===null||t.memoizedState===null?Af:Rf),e}function kl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fs(e);if(e.$$typeof===G)return jt(e)}throw Error(l(438,String(e)))}function Lo(e){var t=null,a=we.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var r=we.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Mo(),we.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),r=0;r<e;r++)a[r]=ue;return t.index++,a}function Na(e,t){return typeof t=="function"?t(e):t}function Ol(e){var t=rt();return zo(t,Le,e)}function zo(e,t,a){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=a;var c=e.baseQueue,f=r.pending;if(f!==null){if(c!==null){var b=c.next;c.next=f.next,f.next=b}t.baseQueue=c=f,r.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var v=b=null,N=null,L=t,F=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(Ae&K)===K:(Pa&K)===K){var B=L.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===rn&&(F=!0);else if((Pa&B)===B){L=L.next,B===rn&&(F=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(v=N=K,b=f):N=N.next=K,we.lanes|=B,Wa|=B;K=L.action,Rr&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else B={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(v=N=B,b=f):N=N.next=B,we.lanes|=K,Wa|=K;L=L.next}while(L!==null&&L!==t);if(N===null?b=f:N.next=v,!Lt(f,e.memoizedState)&&(ut=!0,F&&(a=nn,a!==null)))throw a;e.memoizedState=f,e.baseState=b,e.baseQueue=N,r.lastRenderedState=f}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function qo(e){var t=rt(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var r=a.dispatch,c=a.pending,f=t.memoizedState;if(c!==null){a.pending=null;var b=c=c.next;do f=e(f,b.action),b=b.next;while(b!==c);Lt(f,t.memoizedState)||(ut=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,r]}function Qd(e,t,a){var r=we,c=rt(),f=ke;if(f){if(a===void 0)throw Error(l(407));a=a()}else a=t();var b=!Lt((Le||c).memoizedState,a);b&&(c.memoizedState=a,ut=!0),c=c.queue;var v=Zd.bind(null,r,c,e);if(hs(2048,8,v,[e]),c.getSnapshot!==t||b||at!==null&&at.memoizedState.tag&1){if(r.flags|=2048,cn(9,Ul(),Kd.bind(null,r,c,a,t),null),He===null)throw Error(l(349));f||(Pa&124)!==0||Xd(r,t,a)}return a}function Xd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=we.updateQueue,t===null?(t=Mo(),we.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Kd(e,t,a,r){t.value=a,t.getSnapshot=r,Jd(t)&&Id(e)}function Zd(e,t,a){return a(function(){Jd(t)&&Id(e)})}function Jd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Lt(e,a)}catch{return!0}}function Id(e){var t=Wr(e,2);t!==null&&Vt(t,e,2)}function Bo(e){var t=kt();if(typeof e=="function"){var a=e;if(e=a(),Rr){ca(!0);try{a()}finally{ca(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:e},t}function Wd(e,t,a,r){return e.baseState=a,zo(e,Le,typeof r=="function"?r:Na)}function yx(e,t,a,r,c){if(Ll(e))throw Error(l(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};z.T!==null?a(!0):f.isTransition=!1,r(f),a=t.pending,a===null?(f.next=t.pending=f,ef(t,f)):(f.next=a.next,t.pending=a.next=f)}}function ef(e,t){var a=t.action,r=t.payload,c=e.state;if(t.isTransition){var f=z.T,b={};z.T=b;try{var v=a(c,r),N=z.S;N!==null&&N(b,v),tf(e,t,v)}catch(L){$o(e,t,L)}finally{z.T=f}}else try{f=a(c,r),tf(e,t,f)}catch(L){$o(e,t,L)}}function tf(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){af(e,t,r)},function(r){return $o(e,t,r)}):af(e,t,a)}function af(e,t,a){t.status="fulfilled",t.value=a,rf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,ef(e,a)))}function $o(e,t,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=a,rf(t),t=t.next;while(t!==r)}e.action=null}function rf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function nf(e,t){return t}function sf(e,t){if(ke){var a=He.formState;if(a!==null){e:{var r=we;if(ke){if(Je){t:{for(var c=Je,f=ua;c.nodeType!==8;){if(!f){c=null;break t}if(c=ra(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Je=ra(c.nextSibling),r=c.data==="F!";break e}}Er(r)}r=!1}r&&(t=a[0])}}return a=kt(),a.memoizedState=a.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nf,lastRenderedState:t},a.queue=r,a=Ef.bind(null,we,r),r.dispatch=a,r=Bo(!1),f=Fo.bind(null,we,!1,r.queue),r=kt(),c={state:t,dispatch:null,action:e,pending:null},r.queue=c,a=yx.bind(null,we,c,f,a),c.dispatch=a,r.memoizedState=e,[t,a,!1]}function lf(e){var t=rt();return of(t,Le,e)}function of(e,t,a){if(t=zo(e,t,nf)[0],e=Ol(Na)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=fs(t)}catch(b){throw b===ls?Tl:b}else r=t;t=rt();var c=t.queue,f=c.dispatch;return a!==t.memoizedState&&(we.flags|=2048,cn(9,Ul(),vx.bind(null,c,a),null)),[r,f,e]}function vx(e,t){e.action=t}function cf(e){var t=rt(),a=Le;if(a!==null)return of(t,a,e);rt(),t=t.memoizedState,a=rt();var r=a.queue.dispatch;return a.memoizedState=e,[t,r,!1]}function cn(e,t,a,r){return e={tag:e,create:a,deps:r,inst:t,next:null},t=we.updateQueue,t===null&&(t=Mo(),we.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function Ul(){return{destroy:void 0,resource:void 0}}function uf(){return rt().memoizedState}function Ml(e,t,a,r){var c=kt();r=r===void 0?null:r,we.flags|=e,c.memoizedState=cn(1|t,Ul(),a,r)}function hs(e,t,a,r){var c=rt();r=r===void 0?null:r;var f=c.memoizedState.inst;Le!==null&&r!==null&&Co(r,Le.memoizedState.deps)?c.memoizedState=cn(t,f,a,r):(we.flags|=e,c.memoizedState=cn(1|t,f,a,r))}function df(e,t){Ml(8390656,8,e,t)}function ff(e,t){hs(2048,8,e,t)}function hf(e,t){return hs(4,2,e,t)}function mf(e,t){return hs(4,4,e,t)}function gf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xf(e,t,a){a=a!=null?a.concat([e]):null,hs(4,4,gf.bind(null,t,e),a)}function Ho(){}function bf(e,t){var a=rt();t=t===void 0?null:t;var r=a.memoizedState;return t!==null&&Co(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function pf(e,t){var a=rt();t=t===void 0?null:t;var r=a.memoizedState;if(t!==null&&Co(t,r[1]))return r[0];if(r=e(),Rr){ca(!0);try{e()}finally{ca(!1)}}return a.memoizedState=[r,t],r}function Vo(e,t,a){return a===void 0||(Pa&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=_h(),we.lanes|=e,Wa|=e,a)}function yf(e,t,a,r){return Lt(a,t)?a:sn.current!==null?(e=Vo(e,a,r),Lt(e,t)||(ut=!0),e):(Pa&42)===0?(ut=!0,e.memoizedState=a):(e=_h(),we.lanes|=e,Wa|=e,t)}function vf(e,t,a,r,c){var f=I.p;I.p=f!==0&&8>f?f:8;var b=z.T,v={};z.T=v,Fo(e,!1,t,a);try{var N=c(),L=z.S;if(L!==null&&L(v,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var F=xx(N,r);ms(e,t,F,Ht(e))}else ms(e,t,r,Ht(e))}catch(K){ms(e,t,{then:function(){},status:"rejected",reason:K},Ht())}finally{I.p=f,z.T=b}}function _x(){}function Go(e,t,a,r){if(e.tag!==5)throw Error(l(476));var c=_f(e).queue;vf(e,c,t,j,a===null?_x:function(){return wf(e),a(r)})}function _f(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:j},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function wf(e){var t=_f(e).next.queue;ms(e,t,{},Ht())}function Yo(){return jt(ks)}function Sf(){return rt().memoizedState}function jf(){return rt().memoizedState}function wx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ht();e=Ya(a);var r=Fa(t,e,a);r!==null&&(Vt(r,t,a),os(r,t,a)),t={cache:vo()},e.payload=t;return}t=t.return}}function Sx(e,t,a){var r=Ht();a={lane:r,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ll(e)?Nf(t,a):(a=co(e,t,a,r),a!==null&&(Vt(a,e,r),Tf(a,t,r)))}function Ef(e,t,a){var r=Ht();ms(e,t,a,r)}function ms(e,t,a,r){var c={lane:r,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ll(e))Nf(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var b=t.lastRenderedState,v=f(b,a);if(c.hasEagerState=!0,c.eagerState=v,Lt(v,b))return yl(e,t,c,0),He===null&&pl(),!1}catch{}finally{}if(a=co(e,t,c,r),a!==null)return Vt(a,e,r),Tf(a,t,r),!0}return!1}function Fo(e,t,a,r){if(r={lane:2,revertLane:Sc(),action:r,hasEagerState:!1,eagerState:null,next:null},Ll(e)){if(t)throw Error(l(479))}else t=co(e,a,r,2),t!==null&&Vt(t,e,2)}function Ll(e){var t=e.alternate;return e===we||t!==null&&t===we}function Nf(e,t){ln=Cl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Tf(e,t,a){if((a&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Uu(e,a)}}var zl={readContext:jt,use:kl,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et},Af={readContext:jt,use:kl,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:df,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ml(4194308,4,gf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ml(4194308,4,e,t)},useInsertionEffect:function(e,t){Ml(4,2,e,t)},useMemo:function(e,t){var a=kt();t=t===void 0?null:t;var r=e();if(Rr){ca(!0);try{e()}finally{ca(!1)}}return a.memoizedState=[r,t],r},useReducer:function(e,t,a){var r=kt();if(a!==void 0){var c=a(t);if(Rr){ca(!0);try{a(t)}finally{ca(!1)}}}else c=t;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=Sx.bind(null,we,e),[r.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=Bo(e);var t=e.queue,a=Ef.bind(null,we,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Ho,useDeferredValue:function(e,t){var a=kt();return Vo(a,e,t)},useTransition:function(){var e=Bo(!1);return e=vf.bind(null,we,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var r=we,c=kt();if(ke){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),He===null)throw Error(l(349));(Ae&124)!==0||Xd(r,t,a)}c.memoizedState=a;var f={value:a,getSnapshot:t};return c.queue=f,df(Zd.bind(null,r,f,e),[e]),r.flags|=2048,cn(9,Ul(),Kd.bind(null,r,f,a,t),null),a},useId:function(){var e=kt(),t=He.identifierPrefix;if(ke){var a=Sa,r=wa;a=(r&~(1<<32-wt(r)-1)).toString(32)+a,t="«"+t+"R"+a,a=Dl++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=bx++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Yo,useFormState:sf,useActionState:sf,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Fo.bind(null,we,!0,a),a.dispatch=t,[e,t]},useMemoCache:Lo,useCacheRefresh:function(){return kt().memoizedState=wx.bind(null,we)}},Rf={readContext:jt,use:kl,useCallback:bf,useContext:jt,useEffect:ff,useImperativeHandle:xf,useInsertionEffect:hf,useLayoutEffect:mf,useMemo:pf,useReducer:Ol,useRef:uf,useState:function(){return Ol(Na)},useDebugValue:Ho,useDeferredValue:function(e,t){var a=rt();return yf(a,Le.memoizedState,e,t)},useTransition:function(){var e=Ol(Na)[0],t=rt().memoizedState;return[typeof e=="boolean"?e:fs(e),t]},useSyncExternalStore:Qd,useId:Sf,useHostTransitionStatus:Yo,useFormState:lf,useActionState:lf,useOptimistic:function(e,t){var a=rt();return Wd(a,Le,e,t)},useMemoCache:Lo,useCacheRefresh:jf},jx={readContext:jt,use:kl,useCallback:bf,useContext:jt,useEffect:ff,useImperativeHandle:xf,useInsertionEffect:hf,useLayoutEffect:mf,useMemo:pf,useReducer:qo,useRef:uf,useState:function(){return qo(Na)},useDebugValue:Ho,useDeferredValue:function(e,t){var a=rt();return Le===null?Vo(a,e,t):yf(a,Le.memoizedState,e,t)},useTransition:function(){var e=qo(Na)[0],t=rt().memoizedState;return[typeof e=="boolean"?e:fs(e),t]},useSyncExternalStore:Qd,useId:Sf,useHostTransitionStatus:Yo,useFormState:cf,useActionState:cf,useOptimistic:function(e,t){var a=rt();return Le!==null?Wd(a,Le,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Lo,useCacheRefresh:jf},un=null,gs=0;function ql(e){var t=gs;return gs+=1,un===null&&(un=[]),Bd(un,e,t)}function xs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Bl(e,t){throw t.$$typeof===_?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Cf(e){var t=e._init;return t(e._payload)}function Df(e){function t(k,C){if(e){var M=k.deletions;M===null?(k.deletions=[C],k.flags|=16):M.push(C)}}function a(k,C){if(!e)return null;for(;C!==null;)t(k,C),C=C.sibling;return null}function r(k){for(var C=new Map;k!==null;)k.key!==null?C.set(k.key,k):C.set(k.index,k),k=k.sibling;return C}function c(k,C){return k=_a(k,C),k.index=0,k.sibling=null,k}function f(k,C,M){return k.index=M,e?(M=k.alternate,M!==null?(M=M.index,M<C?(k.flags|=67108866,C):M):(k.flags|=67108866,C)):(k.flags|=1048576,C)}function b(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function v(k,C,M,Q){return C===null||C.tag!==6?(C=fo(M,k.mode,Q),C.return=k,C):(C=c(C,M),C.return=k,C)}function N(k,C,M,Q){var ie=M.type;return ie===E?F(k,C,M.props.children,Q,M.key):C!==null&&(C.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===se&&Cf(ie)===C.type)?(C=c(C,M.props),xs(C,M),C.return=k,C):(C=_l(M.type,M.key,M.props,null,k.mode,Q),xs(C,M),C.return=k,C)}function L(k,C,M,Q){return C===null||C.tag!==4||C.stateNode.containerInfo!==M.containerInfo||C.stateNode.implementation!==M.implementation?(C=ho(M,k.mode,Q),C.return=k,C):(C=c(C,M.children||[]),C.return=k,C)}function F(k,C,M,Q,ie){return C===null||C.tag!==7?(C=_r(M,k.mode,Q,ie),C.return=k,C):(C=c(C,M),C.return=k,C)}function K(k,C,M){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=fo(""+C,k.mode,M),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case y:return M=_l(C.type,C.key,C.props,null,k.mode,M),xs(M,C),M.return=k,M;case A:return C=ho(C,k.mode,M),C.return=k,C;case se:var Q=C._init;return C=Q(C._payload),K(k,C,M)}if(oe(C)||ae(C))return C=_r(C,k.mode,M,null),C.return=k,C;if(typeof C.then=="function")return K(k,ql(C),M);if(C.$$typeof===G)return K(k,El(k,C),M);Bl(k,C)}return null}function B(k,C,M,Q){var ie=C!==null?C.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return ie!==null?null:v(k,C,""+M,Q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case y:return M.key===ie?N(k,C,M,Q):null;case A:return M.key===ie?L(k,C,M,Q):null;case se:return ie=M._init,M=ie(M._payload),B(k,C,M,Q)}if(oe(M)||ae(M))return ie!==null?null:F(k,C,M,Q,null);if(typeof M.then=="function")return B(k,C,ql(M),Q);if(M.$$typeof===G)return B(k,C,El(k,M),Q);Bl(k,M)}return null}function H(k,C,M,Q,ie){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(M)||null,v(C,k,""+Q,ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case y:return k=k.get(Q.key===null?M:Q.key)||null,N(C,k,Q,ie);case A:return k=k.get(Q.key===null?M:Q.key)||null,L(C,k,Q,ie);case se:var je=Q._init;return Q=je(Q._payload),H(k,C,M,Q,ie)}if(oe(Q)||ae(Q))return k=k.get(M)||null,F(C,k,Q,ie,null);if(typeof Q.then=="function")return H(k,C,M,ql(Q),ie);if(Q.$$typeof===G)return H(k,C,M,El(C,Q),ie);Bl(C,Q)}return null}function xe(k,C,M,Q){for(var ie=null,je=null,de=C,he=C=0,ft=null;de!==null&&he<M.length;he++){de.index>he?(ft=de,de=null):ft=de.sibling;var Ce=B(k,de,M[he],Q);if(Ce===null){de===null&&(de=ft);break}e&&de&&Ce.alternate===null&&t(k,de),C=f(Ce,C,he),je===null?ie=Ce:je.sibling=Ce,je=Ce,de=ft}if(he===M.length)return a(k,de),ke&&Sr(k,he),ie;if(de===null){for(;he<M.length;he++)de=K(k,M[he],Q),de!==null&&(C=f(de,C,he),je===null?ie=de:je.sibling=de,je=de);return ke&&Sr(k,he),ie}for(de=r(de);he<M.length;he++)ft=H(de,k,he,M[he],Q),ft!==null&&(e&&ft.alternate!==null&&de.delete(ft.key===null?he:ft.key),C=f(ft,C,he),je===null?ie=ft:je.sibling=ft,je=ft);return e&&de.forEach(function(or){return t(k,or)}),ke&&Sr(k,he),ie}function fe(k,C,M,Q){if(M==null)throw Error(l(151));for(var ie=null,je=null,de=C,he=C=0,ft=null,Ce=M.next();de!==null&&!Ce.done;he++,Ce=M.next()){de.index>he?(ft=de,de=null):ft=de.sibling;var or=B(k,de,Ce.value,Q);if(or===null){de===null&&(de=ft);break}e&&de&&or.alternate===null&&t(k,de),C=f(or,C,he),je===null?ie=or:je.sibling=or,je=or,de=ft}if(Ce.done)return a(k,de),ke&&Sr(k,he),ie;if(de===null){for(;!Ce.done;he++,Ce=M.next())Ce=K(k,Ce.value,Q),Ce!==null&&(C=f(Ce,C,he),je===null?ie=Ce:je.sibling=Ce,je=Ce);return ke&&Sr(k,he),ie}for(de=r(de);!Ce.done;he++,Ce=M.next())Ce=H(de,k,he,Ce.value,Q),Ce!==null&&(e&&Ce.alternate!==null&&de.delete(Ce.key===null?he:Ce.key),C=f(Ce,C,he),je===null?ie=Ce:je.sibling=Ce,je=Ce);return e&&de.forEach(function(Eb){return t(k,Eb)}),ke&&Sr(k,he),ie}function qe(k,C,M,Q){if(typeof M=="object"&&M!==null&&M.type===E&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case y:e:{for(var ie=M.key;C!==null;){if(C.key===ie){if(ie=M.type,ie===E){if(C.tag===7){a(k,C.sibling),Q=c(C,M.props.children),Q.return=k,k=Q;break e}}else if(C.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===se&&Cf(ie)===C.type){a(k,C.sibling),Q=c(C,M.props),xs(Q,M),Q.return=k,k=Q;break e}a(k,C);break}else t(k,C);C=C.sibling}M.type===E?(Q=_r(M.props.children,k.mode,Q,M.key),Q.return=k,k=Q):(Q=_l(M.type,M.key,M.props,null,k.mode,Q),xs(Q,M),Q.return=k,k=Q)}return b(k);case A:e:{for(ie=M.key;C!==null;){if(C.key===ie)if(C.tag===4&&C.stateNode.containerInfo===M.containerInfo&&C.stateNode.implementation===M.implementation){a(k,C.sibling),Q=c(C,M.children||[]),Q.return=k,k=Q;break e}else{a(k,C);break}else t(k,C);C=C.sibling}Q=ho(M,k.mode,Q),Q.return=k,k=Q}return b(k);case se:return ie=M._init,M=ie(M._payload),qe(k,C,M,Q)}if(oe(M))return xe(k,C,M,Q);if(ae(M)){if(ie=ae(M),typeof ie!="function")throw Error(l(150));return M=ie.call(M),fe(k,C,M,Q)}if(typeof M.then=="function")return qe(k,C,ql(M),Q);if(M.$$typeof===G)return qe(k,C,El(k,M),Q);Bl(k,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,C!==null&&C.tag===6?(a(k,C.sibling),Q=c(C,M),Q.return=k,k=Q):(a(k,C),Q=fo(M,k.mode,Q),Q.return=k,k=Q),b(k)):a(k,C)}return function(k,C,M,Q){try{gs=0;var ie=qe(k,C,M,Q);return un=null,ie}catch(de){if(de===ls||de===Tl)throw de;var je=zt(29,de,null,k.mode);return je.lanes=Q,je.return=k,je}finally{}}}var dn=Df(!0),kf=Df(!1),Jt=q(null),da=null;function Qa(e){var t=e.alternate;Y(lt,lt.current&1),Y(Jt,e),da===null&&(t===null||sn.current!==null||t.memoizedState!==null)&&(da=e)}function Of(e){if(e.tag===22){if(Y(lt,lt.current),Y(Jt,e),da===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(da=e)}}else Xa()}function Xa(){Y(lt,lt.current),Y(Jt,Jt.current)}function Ta(e){O(Jt),da===e&&(da=null),O(lt)}var lt=q(0);function $l(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Mc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Po(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:p({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Qo={enqueueSetState:function(e,t,a){e=e._reactInternals;var r=Ht(),c=Ya(r);c.payload=t,a!=null&&(c.callback=a),t=Fa(e,c,r),t!==null&&(Vt(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=Ht(),c=Ya(r);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=Fa(e,c,r),t!==null&&(Vt(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ht(),r=Ya(a);r.tag=2,t!=null&&(r.callback=t),t=Fa(e,r,a),t!==null&&(Vt(t,e,a),os(t,e,a))}};function Uf(e,t,a,r,c,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,f,b):t.prototype&&t.prototype.isPureReactComponent?!In(a,r)||!In(c,f):!0}function Mf(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&Qo.enqueueReplaceState(t,t.state,null)}function Cr(e,t){var a=t;if("ref"in t){a={};for(var r in t)r!=="ref"&&(a[r]=t[r])}if(e=e.defaultProps){a===t&&(a=p({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Hl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Lf(e){Hl(e)}function zf(e){console.error(e)}function qf(e){Hl(e)}function Vl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Bf(e,t,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Xo(e,t,a){return a=Ya(a),a.tag=3,a.payload={element:null},a.callback=function(){Vl(e,t)},a}function $f(e){return e=Ya(e),e.tag=3,e}function Hf(e,t,a,r){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;e.payload=function(){return c(f)},e.callback=function(){Bf(t,a,r)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Bf(t,a,r),typeof c!="function"&&(er===null?er=new Set([this]):er.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})})}function Ex(e,t,a,r,c){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=a.alternate,t!==null&&rs(t,a,c,!0),a=Jt.current,a!==null){switch(a.tag){case 13:return da===null?pc():a.alternate===null&&Ie===0&&(Ie=3),a.flags&=-257,a.flags|=65536,a.lanes=c,r===So?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([r]):t.add(r),vc(e,r,c)),!1;case 22:return a.flags|=65536,r===So?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([r]):a.add(r)),vc(e,r,c)),!1}throw Error(l(435,a.tag))}return vc(e,r,c),pc(),!1}if(ke)return t=Jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,r!==xo&&(e=Error(l(422),{cause:r}),as(Qt(e,a)))):(r!==xo&&(t=Error(l(423),{cause:r}),as(Qt(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=Qt(r,a),c=Xo(e.stateNode,r,c),No(e,c),Ie!==4&&(Ie=2)),!1;var f=Error(l(520),{cause:r});if(f=Qt(f,a),Ss===null?Ss=[f]:Ss.push(f),Ie!==4&&(Ie=2),t===null)return!0;r=Qt(r,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Xo(a.stateNode,r,e),No(a,e),!1;case 1:if(t=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(er===null||!er.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=$f(c),Hf(c,e,a,r),No(a,c),!1}a=a.return}while(a!==null);return!1}var Vf=Error(l(461)),ut=!1;function xt(e,t,a,r){t.child=e===null?kf(t,null,a,r):dn(t,e.child,a,r)}function Gf(e,t,a,r,c){a=a.render;var f=t.ref;if("ref"in r){var b={};for(var v in r)v!=="ref"&&(b[v]=r[v])}else b=r;return Tr(t),r=Do(e,t,a,b,f,c),v=ko(),e!==null&&!ut?(Oo(e,t,c),Aa(e,t,c)):(ke&&v&&mo(t),t.flags|=1,xt(e,t,r,c),t.child)}function Yf(e,t,a,r,c){if(e===null){var f=a.type;return typeof f=="function"&&!uo(f)&&f.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=f,Ff(e,t,f,r,c)):(e=_l(a.type,null,r,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!ac(e,c)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:In,a(b,r)&&e.ref===t.ref)return Aa(e,t,c)}return t.flags|=1,e=_a(f,r),e.ref=t.ref,e.return=t,t.child=e}function Ff(e,t,a,r,c){if(e!==null){var f=e.memoizedProps;if(In(f,r)&&e.ref===t.ref)if(ut=!1,t.pendingProps=r=f,ac(e,c))(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,Aa(e,t,c)}return Ko(e,t,a,r,c)}function Pf(e,t,a){var r=t.pendingProps,c=r.children,f=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((t.flags&128)!==0){if(r=f!==null?f.baseLanes|a:a,e!==null){for(c=t.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;t.childLanes=f&~r}else t.childLanes=0,t.child=null;return Qf(e,t,r,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Nl(t,f!==null?f.cachePool:null),f!==null?Yd(t,f):Ao(),Of(t);else return t.lanes=t.childLanes=536870912,Qf(e,t,f!==null?f.baseLanes|a:a,a)}else f!==null?(Nl(t,f.cachePool),Yd(t,f),Xa(),t.memoizedState=null):(e!==null&&Nl(t,null),Ao(),Xa());return xt(e,t,c,a),t.child}function Qf(e,t,a,r){var c=wo();return c=c===null?null:{parent:st._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&Nl(t,null),Ao(),Of(t),e!==null&&rs(e,t,r,!0),null}function Gl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Ko(e,t,a,r,c){return Tr(t),a=Do(e,t,a,r,void 0,c),r=ko(),e!==null&&!ut?(Oo(e,t,c),Aa(e,t,c)):(ke&&r&&mo(t),t.flags|=1,xt(e,t,a,c),t.child)}function Xf(e,t,a,r,c,f){return Tr(t),t.updateQueue=null,a=Pd(t,r,a,c),Fd(e),r=ko(),e!==null&&!ut?(Oo(e,t,f),Aa(e,t,f)):(ke&&r&&mo(t),t.flags|=1,xt(e,t,a,f),t.child)}function Kf(e,t,a,r,c){if(Tr(t),t.stateNode===null){var f=en,b=a.contextType;typeof b=="object"&&b!==null&&(f=jt(b)),f=new a(r,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Qo,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=r,f.state=t.memoizedState,f.refs={},jo(t),b=a.contextType,f.context=typeof b=="object"&&b!==null?jt(b):en,f.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Po(t,a,b,r),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Qo.enqueueReplaceState(f,f.state,null),us(t,r,f,c),cs(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){f=t.stateNode;var v=t.memoizedProps,N=Cr(a,v);f.props=N;var L=f.context,F=a.contextType;b=en,typeof F=="object"&&F!==null&&(b=jt(F));var K=a.getDerivedStateFromProps;F=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v||L!==b)&&Mf(t,f,r,b),Ga=!1;var B=t.memoizedState;f.state=B,us(t,r,f,c),cs(),L=t.memoizedState,v||B!==L||Ga?(typeof K=="function"&&(Po(t,a,K,r),L=t.memoizedState),(N=Ga||Uf(t,a,N,r,B,L,b))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=L),f.props=r,f.state=L,f.context=b,r=N):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{f=t.stateNode,Eo(e,t),b=t.memoizedProps,F=Cr(a,b),f.props=F,K=t.pendingProps,B=f.context,L=a.contextType,N=en,typeof L=="object"&&L!==null&&(N=jt(L)),v=a.getDerivedStateFromProps,(L=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==K||B!==N)&&Mf(t,f,r,N),Ga=!1,B=t.memoizedState,f.state=B,us(t,r,f,c),cs();var H=t.memoizedState;b!==K||B!==H||Ga||e!==null&&e.dependencies!==null&&jl(e.dependencies)?(typeof v=="function"&&(Po(t,a,v,r),H=t.memoizedState),(F=Ga||Uf(t,a,F,r,B,H,N)||e!==null&&e.dependencies!==null&&jl(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(r,H,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(r,H,N)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=H),f.props=r,f.state=H,f.context=N,r=F):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),r=!1)}return f=r,Gl(e,t),r=(t.flags&128)!==0,f||r?(f=t.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&r?(t.child=dn(t,e.child,null,c),t.child=dn(t,null,a,c)):xt(e,t,a,c),t.memoizedState=f.state,e=t.child):e=Aa(e,t,c),e}function Zf(e,t,a,r){return ts(),t.flags|=256,xt(e,t,a,r),t.child}var Zo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:Ld()}}function Io(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=It),e}function Jf(e,t,a){var r=t.pendingProps,c=!1,f=(t.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(lt.current&2)!==0),b&&(c=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(ke){if(c?Qa(t):Xa(),ke){var v=Je,N;if(N=v){e:{for(N=v,v=ua;N.nodeType!==8;){if(!v){v=null;break e}if(N=ra(N.nextSibling),N===null){v=null;break e}}v=N}v!==null?(t.memoizedState={dehydrated:v,treeContext:wr!==null?{id:wa,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},N=zt(18,null,null,0),N.stateNode=v,N.return=t,t.child=N,Nt=t,Je=null,N=!0):N=!1}N||Er(t)}if(v=t.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Mc(v)?t.lanes=32:t.lanes=536870912,null;Ta(t)}return v=r.children,r=r.fallback,c?(Xa(),c=t.mode,v=Yl({mode:"hidden",children:v},c),r=_r(r,c,a,null),v.return=t,r.return=t,v.sibling=r,t.child=v,c=t.child,c.memoizedState=Jo(a),c.childLanes=Io(e,b,a),t.memoizedState=Zo,r):(Qa(t),Wo(t,v))}if(N=e.memoizedState,N!==null&&(v=N.dehydrated,v!==null)){if(f)t.flags&256?(Qa(t),t.flags&=-257,t=ec(e,t,a)):t.memoizedState!==null?(Xa(),t.child=e.child,t.flags|=128,t=null):(Xa(),c=r.fallback,v=t.mode,r=Yl({mode:"visible",children:r.children},v),c=_r(c,v,a,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,dn(t,e.child,null,a),r=t.child,r.memoizedState=Jo(a),r.childLanes=Io(e,b,a),t.memoizedState=Zo,t=c);else if(Qa(t),Mc(v)){if(b=v.nextSibling&&v.nextSibling.dataset,b)var L=b.dgst;b=L,r=Error(l(419)),r.stack="",r.digest=b,as({value:r,source:null,stack:null}),t=ec(e,t,a)}else if(ut||rs(e,t,a,!1),b=(a&e.childLanes)!==0,ut||b){if(b=He,b!==null&&(r=a&-a,r=(r&42)!==0?1:Mi(r),r=(r&(b.suspendedLanes|a))!==0?0:r,r!==0&&r!==N.retryLane))throw N.retryLane=r,Wr(e,r),Vt(b,e,r),Vf;v.data==="$?"||pc(),t=ec(e,t,a)}else v.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Je=ra(v.nextSibling),Nt=t,ke=!0,jr=null,ua=!1,e!==null&&(Kt[Zt++]=wa,Kt[Zt++]=Sa,Kt[Zt++]=wr,wa=e.id,Sa=e.overflow,wr=t),t=Wo(t,r.children),t.flags|=4096);return t}return c?(Xa(),c=r.fallback,v=t.mode,N=e.child,L=N.sibling,r=_a(N,{mode:"hidden",children:r.children}),r.subtreeFlags=N.subtreeFlags&65011712,L!==null?c=_a(L,c):(c=_r(c,v,a,null),c.flags|=2),c.return=t,r.return=t,r.sibling=c,t.child=r,r=c,c=t.child,v=e.child.memoizedState,v===null?v=Jo(a):(N=v.cachePool,N!==null?(L=st._currentValue,N=N.parent!==L?{parent:L,pool:L}:N):N=Ld(),v={baseLanes:v.baseLanes|a,cachePool:N}),c.memoizedState=v,c.childLanes=Io(e,b,a),t.memoizedState=Zo,r):(Qa(t),a=e.child,e=a.sibling,a=_a(a,{mode:"visible",children:r.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function Wo(e,t){return t=Yl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Yl(e,t){return e=zt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ec(e,t,a){return dn(t,e.child,null,a),e=Wo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function If(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),po(e.return,t,a)}function tc(e,t,a,r,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=r,f.tail=a,f.tailMode=c)}function Wf(e,t,a){var r=t.pendingProps,c=r.revealOrder,f=r.tail;if(xt(e,t,r.children,a),r=lt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&If(e,a,t);else if(e.tag===19)If(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(Y(lt,r),c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&$l(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),tc(t,!1,c,a,f);break;case"backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&$l(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}tc(t,!0,a,null,f);break;case"together":tc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Aa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Wa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(rs(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=_a(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=_a(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function ac(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&jl(e)))}function Nx(e,t,a){switch(t.tag){case 3:re(t,t.stateNode.containerInfo),Va(t,st,e.memoizedState.cache),ts();break;case 27:case 5:Se(t);break;case 4:re(t,t.stateNode.containerInfo);break;case 10:Va(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Qa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Jf(e,t,a):(Qa(t),e=Aa(e,t,a),e!==null?e.sibling:null);Qa(t);break;case 19:var c=(e.flags&128)!==0;if(r=(a&t.childLanes)!==0,r||(rs(e,t,a,!1),r=(a&t.childLanes)!==0),c){if(r)return Wf(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Y(lt,lt.current),r)break;return null;case 22:case 23:return t.lanes=0,Pf(e,t,a);case 24:Va(t,st,e.memoizedState.cache)}return Aa(e,t,a)}function eh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)ut=!0;else{if(!ac(e,a)&&(t.flags&128)===0)return ut=!1,Nx(e,t,a);ut=(e.flags&131072)!==0}else ut=!1,ke&&(t.flags&1048576)!==0&&Rd(t,Sl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,c=r._init;if(r=c(r._payload),t.type=r,typeof r=="function")uo(r)?(e=Cr(r,e),t.tag=1,t=Kf(null,t,r,e,a)):(t.tag=0,t=Ko(null,t,r,e,a));else{if(r!=null){if(c=r.$$typeof,c===Z){t.tag=11,t=Gf(null,t,r,e,a);break e}else if(c===le){t.tag=14,t=Yf(null,t,r,e,a);break e}}throw t=ce(r)||r,Error(l(306,t,""))}}return t;case 0:return Ko(e,t,t.type,t.pendingProps,a);case 1:return r=t.type,c=Cr(r,t.pendingProps),Kf(e,t,r,c,a);case 3:e:{if(re(t,t.stateNode.containerInfo),e===null)throw Error(l(387));r=t.pendingProps;var f=t.memoizedState;c=f.element,Eo(e,t),us(t,r,null,a);var b=t.memoizedState;if(r=b.cache,Va(t,st,r),r!==f.cache&&yo(t,[st],a,!0),cs(),r=b.element,f.isDehydrated)if(f={element:r,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Zf(e,t,r,a);break e}else if(r!==c){c=Qt(Error(l(424)),t),as(c),t=Zf(e,t,r,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Je=ra(e.firstChild),Nt=t,ke=!0,jr=null,ua=!0,a=kf(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ts(),r===c){t=Aa(e,t,a);break e}xt(e,t,r,a)}t=t.child}return t;case 26:return Gl(e,t),e===null?(a=nm(t.type,null,t.pendingProps,null))?t.memoizedState=a:ke||(a=t.type,e=t.pendingProps,r=ni(J.current).createElement(a),r[St]=t,r[Ct]=e,pt(r,a,e),ct(r),t.stateNode=r):t.memoizedState=nm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Se(t),e===null&&ke&&(r=t.stateNode=tm(t.type,t.pendingProps,J.current),Nt=t,ua=!0,c=Je,rr(t.type)?(Lc=c,Je=ra(r.firstChild)):Je=c),xt(e,t,t.pendingProps.children,a),Gl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ke&&((c=r=Je)&&(r=eb(r,t.type,t.pendingProps,ua),r!==null?(t.stateNode=r,Nt=t,Je=ra(r.firstChild),ua=!1,c=!0):c=!1),c||Er(t)),Se(t),c=t.type,f=t.pendingProps,b=e!==null?e.memoizedProps:null,r=f.children,kc(c,f)?r=null:b!==null&&kc(c,b)&&(t.flags|=32),t.memoizedState!==null&&(c=Do(e,t,px,null,null,a),ks._currentValue=c),Gl(e,t),xt(e,t,r,a),t.child;case 6:return e===null&&ke&&((e=a=Je)&&(a=tb(a,t.pendingProps,ua),a!==null?(t.stateNode=a,Nt=t,Je=null,e=!0):e=!1),e||Er(t)),null;case 13:return Jf(e,t,a);case 4:return re(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=dn(t,null,r,a):xt(e,t,r,a),t.child;case 11:return Gf(e,t,t.type,t.pendingProps,a);case 7:return xt(e,t,t.pendingProps,a),t.child;case 8:return xt(e,t,t.pendingProps.children,a),t.child;case 12:return xt(e,t,t.pendingProps.children,a),t.child;case 10:return r=t.pendingProps,Va(t,t.type,r.value),xt(e,t,r.children,a),t.child;case 9:return c=t.type._context,r=t.pendingProps.children,Tr(t),c=jt(c),r=r(c),t.flags|=1,xt(e,t,r,a),t.child;case 14:return Yf(e,t,t.type,t.pendingProps,a);case 15:return Ff(e,t,t.type,t.pendingProps,a);case 19:return Wf(e,t,a);case 31:return r=t.pendingProps,a=t.mode,r={mode:r.mode,children:r.children},e===null?(a=Yl(r,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=_a(e.child,r),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Pf(e,t,a);case 24:return Tr(t),r=jt(st),e===null?(c=wo(),c===null&&(c=He,f=vo(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),t.memoizedState={parent:r,cache:c},jo(t),Va(t,st,c)):((e.lanes&a)!==0&&(Eo(e,t),us(t,null,null,a),cs()),c=e.memoizedState,f=t.memoizedState,c.parent!==r?(c={parent:r,cache:r},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Va(t,st,r)):(r=f.cache,Va(t,st,r),r!==c.cache&&yo(t,[st],a,!0))),xt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ra(e){e.flags|=4}function th(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!cm(t)){if(t=Jt.current,t!==null&&((Ae&4194048)===Ae?da!==null:(Ae&62914560)!==Ae&&(Ae&536870912)===0||t!==da))throw is=So,zd;e.flags|=8192}}function Fl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Rt():536870912,e.lanes|=t,gn|=t)}function bs(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function Tx(e,t,a){var r=t.pendingProps;switch(go(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return Ke(t),null;case 3:return a=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ea(st),ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(es(t)?Ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,kd())),Ke(t),null;case 26:return a=t.memoizedState,e===null?(Ra(t),a!==null?(Ke(t),th(t,a)):(Ke(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Ra(t),Ke(t),th(t,a)):(Ke(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ra(t),Ke(t),t.flags&=-16777217),null;case 27:Oe(t),a=J.current;var c=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ra(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Ke(t),null}e=D.current,es(t)?Cd(t):(e=tm(c,r,a),t.stateNode=e,Ra(t))}return Ke(t),null;case 5:if(Oe(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ra(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Ke(t),null}if(e=D.current,es(t))Cd(t);else{switch(c=ni(J.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?c.createElement("select",{is:r.is}):c.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?c.createElement(a,{is:r.is}):c.createElement(a)}}e[St]=t,e[Ct]=r;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=e;e:switch(pt(e,a,r),a){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ra(t)}}return Ke(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Ra(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(l(166));if(e=J.current,es(t)){if(e=t.stateNode,a=t.memoizedProps,r=null,c=Nt,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[St]=t,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||Xh(e.nodeValue,a)),e||Er(t)}else e=ni(e).createTextNode(r),e[St]=t,t.stateNode=e}return Ke(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=es(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[St]=t}else ts(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ke(t),c=!1}else c=kd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Ta(t),t):(Ta(t),null)}if(Ta(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=r!==null,e=e!==null&&e.memoizedState!==null,a){r=t.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool);var f=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Fl(t,t.updateQueue),Ke(t),null;case 4:return ge(),e===null&&Tc(t.stateNode.containerInfo),Ke(t),null;case 10:return Ea(t.type),Ke(t),null;case 19:if(O(lt),c=t.memoizedState,c===null)return Ke(t),null;if(r=(t.flags&128)!==0,f=c.rendering,f===null)if(r)bs(c,!1);else{if(Ie!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=$l(e),f!==null){for(t.flags|=128,bs(c,!1),e=f.updateQueue,t.updateQueue=e,Fl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Ad(a,e),a=a.sibling;return Y(lt,lt.current&1|2),t.child}e=e.sibling}c.tail!==null&&Yt()>Xl&&(t.flags|=128,r=!0,bs(c,!1),t.lanes=4194304)}else{if(!r)if(e=$l(f),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Fl(t,e),bs(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!ke)return Ke(t),null}else 2*Yt()-c.renderingStartTime>Xl&&a!==536870912&&(t.flags|=128,r=!0,bs(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(e=c.last,e!==null?e.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Yt(),t.sibling=null,e=lt.current,Y(lt,r?e&1|2:e&1),t):(Ke(t),null);case 22:case 23:return Ta(t),Ro(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(a&536870912)!==0&&(t.flags&128)===0&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),a=t.updateQueue,a!==null&&Fl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==a&&(t.flags|=2048),e!==null&&O(Ar),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ea(st),Ke(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function Ax(e,t){switch(go(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ea(st),ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Oe(t),null;case 13:if(Ta(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));ts()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return O(lt),null;case 4:return ge(),null;case 10:return Ea(t.type),null;case 22:case 23:return Ta(t),Ro(),e!==null&&O(Ar),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ea(st),null;case 25:return null;default:return null}}function ah(e,t){switch(go(t),t.tag){case 3:Ea(st),ge();break;case 26:case 27:case 5:Oe(t);break;case 4:ge();break;case 13:Ta(t);break;case 19:O(lt);break;case 10:Ea(t.type);break;case 22:case 23:Ta(t),Ro(),e!==null&&O(Ar);break;case 24:Ea(st)}}function ps(e,t){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var c=r.next;a=c;do{if((a.tag&e)===e){r=void 0;var f=a.create,b=a.inst;r=f(),b.destroy=r}a=a.next}while(a!==c)}}catch(v){$e(t,t.return,v)}}function Ka(e,t,a){try{var r=t.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&e)===e){var b=r.inst,v=b.destroy;if(v!==void 0){b.destroy=void 0,c=t;var N=a,L=v;try{L()}catch(F){$e(c,N,F)}}}r=r.next}while(r!==f)}}catch(F){$e(t,t.return,F)}}function rh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Gd(t,a)}catch(r){$e(e,e.return,r)}}}function nh(e,t,a){a.props=Cr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){$e(e,t,r)}}function ys(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(c){$e(e,t,c)}}function fa(e,t){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(c){$e(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){$e(e,t,c)}else a.current=null}function sh(e){var t=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(c){$e(e,e.return,c)}}function rc(e,t,a){try{var r=e.stateNode;Kx(r,e.type,a,t),r[Ct]=t}catch(c){$e(e,e.return,c)}}function lh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rr(e.type)||e.tag===4}function nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sc(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ri));else if(r!==4&&(r===27&&rr(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(sc(e,t,a),e=e.sibling;e!==null;)sc(e,t,a),e=e.sibling}function Pl(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(r===27&&rr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Pl(e,t,a),e=e.sibling;e!==null;)Pl(e,t,a),e=e.sibling}function ih(e){var t=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);pt(t,r,a),t[St]=e,t[Ct]=a}catch(f){$e(e,e.return,f)}}var Ca=!1,tt=!1,lc=!1,oh=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Rx(e,t){if(e=e.containerInfo,Cc=ui,e=pd(e),ro(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var c=r.anchorOffset,f=r.focusNode;r=r.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,v=-1,N=-1,L=0,F=0,K=e,B=null;t:for(;;){for(var H;K!==a||c!==0&&K.nodeType!==3||(v=b+c),K!==f||r!==0&&K.nodeType!==3||(N=b+r),K.nodeType===3&&(b+=K.nodeValue.length),(H=K.firstChild)!==null;)B=K,K=H;for(;;){if(K===e)break t;if(B===a&&++L===c&&(v=b),B===f&&++F===r&&(N=b),(H=K.nextSibling)!==null)break;K=B,B=K.parentNode}K=H}a=v===-1||N===-1?null:{start:v,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dc={focusedElem:e,selectionRange:a},ui=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){switch(t=dt,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=t,c=f.memoizedProps,f=f.memoizedState,r=a.stateNode;try{var xe=Cr(a.type,c,a.elementType===a.type);e=r.getSnapshotBeforeUpdate(xe,f),r.__reactInternalSnapshotBeforeUpdate=e}catch(fe){$e(a,a.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Uc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Uc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}}function ch(e,t,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Za(e,a),r&4&&ps(5,a);break;case 1:if(Za(e,a),r&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(b){$e(a,a.return,b)}else{var c=Cr(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){$e(a,a.return,b)}}r&64&&rh(a),r&512&&ys(a,a.return);break;case 3:if(Za(e,a),r&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Gd(e,t)}catch(b){$e(a,a.return,b)}}break;case 27:t===null&&r&4&&ih(a);case 26:case 5:Za(e,a),t===null&&r&4&&sh(a),r&512&&ys(a,a.return);break;case 12:Za(e,a);break;case 13:Za(e,a),r&4&&fh(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=qx.bind(null,a),ab(e,a))));break;case 22:if(r=a.memoizedState!==null||Ca,!r){t=t!==null&&t.memoizedState!==null||tt,c=Ca;var f=tt;Ca=r,(tt=t)&&!f?Ja(e,a,(a.subtreeFlags&8772)!==0):Za(e,a),Ca=c,tt=f}break;case 30:break;default:Za(e,a)}}function uh(e){var t=e.alternate;t!==null&&(e.alternate=null,uh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pe=null,Ot=!1;function Da(e,t,a){for(a=a.child;a!==null;)dh(e,t,a),a=a.sibling}function dh(e,t,a){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(xr,a)}catch{}switch(a.tag){case 26:tt||fa(a,t),Da(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:tt||fa(a,t);var r=Pe,c=Ot;rr(a.type)&&(Pe=a.stateNode,Ot=!1),Da(e,t,a),As(a.stateNode),Pe=r,Ot=c;break;case 5:tt||fa(a,t);case 6:if(r=Pe,c=Ot,Pe=null,Da(e,t,a),Pe=r,Ot=c,Pe!==null)if(Ot)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(a.stateNode)}catch(f){$e(a,t,f)}else try{Pe.removeChild(a.stateNode)}catch(f){$e(a,t,f)}break;case 18:Pe!==null&&(Ot?(e=Pe,Wh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ls(e)):Wh(Pe,a.stateNode));break;case 4:r=Pe,c=Ot,Pe=a.stateNode.containerInfo,Ot=!0,Da(e,t,a),Pe=r,Ot=c;break;case 0:case 11:case 14:case 15:tt||Ka(2,a,t),tt||Ka(4,a,t),Da(e,t,a);break;case 1:tt||(fa(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"&&nh(a,t,r)),Da(e,t,a);break;case 21:Da(e,t,a);break;case 22:tt=(r=tt)||a.memoizedState!==null,Da(e,t,a),tt=r;break;default:Da(e,t,a)}}function fh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ls(e)}catch(a){$e(t,t.return,a)}}function Cx(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new oh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new oh),t;default:throw Error(l(435,e.tag))}}function ic(e,t){var a=Cx(e);t.forEach(function(r){var c=Bx.bind(null,e,r);a.has(r)||(a.add(r),r.then(c,c))})}function qt(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var c=a[r],f=e,b=t,v=b;e:for(;v!==null;){switch(v.tag){case 27:if(rr(v.type)){Pe=v.stateNode,Ot=!1;break e}break;case 5:Pe=v.stateNode,Ot=!1;break e;case 3:case 4:Pe=v.stateNode.containerInfo,Ot=!0;break e}v=v.return}if(Pe===null)throw Error(l(160));dh(f,b,c),Pe=null,Ot=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)hh(t,e),t=t.sibling}var aa=null;function hh(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qt(t,e),Bt(e),r&4&&(Ka(3,e,e.return),ps(3,e),Ka(5,e,e.return));break;case 1:qt(t,e),Bt(e),r&512&&(tt||a===null||fa(a,a.return)),r&64&&Ca&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var c=aa;if(qt(t,e),Bt(e),r&512&&(tt||a===null||fa(a,a.return)),r&4){var f=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Gn]||f[St]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(r),c.head.insertBefore(f,c.querySelector("head > title"))),pt(f,r,a),f[St]=e,ct(f),r=f;break e;case"link":var b=im("link","href",c).get(r+(a.href||""));if(b){for(var v=0;v<b.length;v++)if(f=b[v],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(v,1);break t}}f=c.createElement(r),pt(f,r,a),c.head.appendChild(f);break;case"meta":if(b=im("meta","content",c).get(r+(a.content||""))){for(v=0;v<b.length;v++)if(f=b[v],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(v,1);break t}}f=c.createElement(r),pt(f,r,a),c.head.appendChild(f);break;default:throw Error(l(468,r))}f[St]=e,ct(f),r=f}e.stateNode=r}else om(c,e.type,e.stateNode);else e.stateNode=lm(c,r,e.memoizedProps);else f!==r?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,r===null?om(c,e.type,e.stateNode):lm(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&rc(e,e.memoizedProps,a.memoizedProps)}break;case 27:qt(t,e),Bt(e),r&512&&(tt||a===null||fa(a,a.return)),a!==null&&r&4&&rc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(qt(t,e),Bt(e),r&512&&(tt||a===null||fa(a,a.return)),e.flags&32){c=e.stateNode;try{Pr(c,"")}catch(H){$e(e,e.return,H)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,rc(e,c,a!==null?a.memoizedProps:c)),r&1024&&(lc=!0);break;case 6:if(qt(t,e),Bt(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch(H){$e(e,e.return,H)}}break;case 3:if(ii=null,c=aa,aa=si(t.containerInfo),qt(t,e),aa=c,Bt(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Ls(t.containerInfo)}catch(H){$e(e,e.return,H)}lc&&(lc=!1,mh(e));break;case 4:r=aa,aa=si(e.stateNode.containerInfo),qt(t,e),Bt(e),aa=r;break;case 12:qt(t,e),Bt(e);break;case 13:qt(t,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hc=Yt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ic(e,r)));break;case 22:c=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,L=Ca,F=tt;if(Ca=L||c,tt=F||N,qt(t,e),tt=F,Ca=L,Bt(e),r&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||N||Ca||tt||Dr(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){N=a=t;try{if(f=N.stateNode,c)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{v=N.stateNode;var K=N.memoizedProps.style,B=K!=null&&K.hasOwnProperty("display")?K.display:null;v.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(H){$e(N,N.return,H)}}}else if(t.tag===6){if(a===null){N=t;try{N.stateNode.nodeValue=c?"":N.memoizedProps}catch(H){$e(N,N.return,H)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,ic(e,a))));break;case 19:qt(t,e),Bt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ic(e,r)));break;case 30:break;case 21:break;default:qt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{for(var a,r=e.return;r!==null;){if(lh(r)){a=r;break}r=r.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var c=a.stateNode,f=nc(e);Pl(e,f,c);break;case 5:var b=a.stateNode;a.flags&32&&(Pr(b,""),a.flags&=-33);var v=nc(e);Pl(e,v,b);break;case 3:case 4:var N=a.stateNode.containerInfo,L=nc(e);sc(e,L,N);break;default:throw Error(l(161))}}catch(F){$e(e,e.return,F)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;mh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Za(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ch(e,t.alternate,t),t=t.sibling}function Dr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ka(4,t,t.return),Dr(t);break;case 1:fa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&nh(t,t.return,a),Dr(t);break;case 27:As(t.stateNode);case 26:case 5:fa(t,t.return),Dr(t);break;case 22:t.memoizedState===null&&Dr(t);break;case 30:Dr(t);break;default:Dr(t)}e=e.sibling}}function Ja(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,c=e,f=t,b=f.flags;switch(f.tag){case 0:case 11:case 15:Ja(c,f,a),ps(4,f);break;case 1:if(Ja(c,f,a),r=f,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){$e(r,r.return,L)}if(r=f,c=r.updateQueue,c!==null){var v=r.stateNode;try{var N=c.shared.hiddenCallbacks;if(N!==null)for(c.shared.hiddenCallbacks=null,c=0;c<N.length;c++)Vd(N[c],v)}catch(L){$e(r,r.return,L)}}a&&b&64&&rh(f),ys(f,f.return);break;case 27:ih(f);case 26:case 5:Ja(c,f,a),a&&r===null&&b&4&&sh(f),ys(f,f.return);break;case 12:Ja(c,f,a);break;case 13:Ja(c,f,a),a&&b&4&&fh(c,f);break;case 22:f.memoizedState===null&&Ja(c,f,a),ys(f,f.return);break;case 30:break;default:Ja(c,f,a)}t=t.sibling}}function oc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ns(a))}function cc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ns(e))}function ha(e,t,a,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gh(e,t,a,r),t=t.sibling}function gh(e,t,a,r){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ha(e,t,a,r),c&2048&&ps(9,t);break;case 1:ha(e,t,a,r);break;case 3:ha(e,t,a,r),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ns(e)));break;case 12:if(c&2048){ha(e,t,a,r),e=t.stateNode;try{var f=t.memoizedProps,b=f.id,v=f.onPostCommit;typeof v=="function"&&v(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){$e(t,t.return,N)}}else ha(e,t,a,r);break;case 13:ha(e,t,a,r);break;case 23:break;case 22:f=t.stateNode,b=t.alternate,t.memoizedState!==null?f._visibility&2?ha(e,t,a,r):vs(e,t):f._visibility&2?ha(e,t,a,r):(f._visibility|=2,fn(e,t,a,r,(t.subtreeFlags&10256)!==0)),c&2048&&oc(b,t);break;case 24:ha(e,t,a,r),c&2048&&cc(t.alternate,t);break;default:ha(e,t,a,r)}}function fn(e,t,a,r,c){for(c=c&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,b=t,v=a,N=r,L=b.flags;switch(b.tag){case 0:case 11:case 15:fn(f,b,v,N,c),ps(8,b);break;case 23:break;case 22:var F=b.stateNode;b.memoizedState!==null?F._visibility&2?fn(f,b,v,N,c):vs(f,b):(F._visibility|=2,fn(f,b,v,N,c)),c&&L&2048&&oc(b.alternate,b);break;case 24:fn(f,b,v,N,c),c&&L&2048&&cc(b.alternate,b);break;default:fn(f,b,v,N,c)}t=t.sibling}}function vs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,r=t,c=r.flags;switch(r.tag){case 22:vs(a,r),c&2048&&oc(r.alternate,r);break;case 24:vs(a,r),c&2048&&cc(r.alternate,r);break;default:vs(a,r)}t=t.sibling}}var _s=8192;function hn(e){if(e.subtreeFlags&_s)for(e=e.child;e!==null;)xh(e),e=e.sibling}function xh(e){switch(e.tag){case 26:hn(e),e.flags&_s&&e.memoizedState!==null&&gb(aa,e.memoizedState,e.memoizedProps);break;case 5:hn(e);break;case 3:case 4:var t=aa;aa=si(e.stateNode.containerInfo),hn(e),aa=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=_s,_s=16777216,hn(e),_s=t):hn(e));break;default:hn(e)}}function bh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ws(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];dt=r,yh(r,e)}bh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ph(e),e=e.sibling}function ph(e){switch(e.tag){case 0:case 11:case 15:ws(e),e.flags&2048&&Ka(9,e,e.return);break;case 3:ws(e);break;case 12:ws(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ql(e)):ws(e);break;default:ws(e)}}function Ql(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];dt=r,yh(r,e)}bh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ka(8,t,t.return),Ql(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function yh(e,t){for(;dt!==null;){var a=dt;switch(a.tag){case 0:case 11:case 15:Ka(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ns(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,dt=r;else e:for(a=e;dt!==null;){r=dt;var c=r.sibling,f=r.return;if(uh(r),r===a){dt=null;break e}if(c!==null){c.return=f,dt=c;break e}dt=f}}}var Dx={getCacheForType:function(e){var t=jt(st),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},kx=typeof WeakMap=="function"?WeakMap:Map,Ue=0,He=null,Ee=null,Ae=0,Me=0,$t=null,Ia=!1,mn=!1,uc=!1,ka=0,Ie=0,Wa=0,kr=0,dc=0,It=0,gn=0,Ss=null,Ut=null,fc=!1,hc=0,Xl=1/0,Kl=null,er=null,bt=0,tr=null,xn=null,bn=0,mc=0,gc=null,vh=null,js=0,xc=null;function Ht(){if((Ue&2)!==0&&Ae!==0)return Ae&-Ae;if(z.T!==null){var e=rn;return e!==0?e:Sc()}return Mu()}function _h(){It===0&&(It=(Ae&536870912)===0||ke?nt():536870912);var e=Jt.current;return e!==null&&(e.flags|=32),It}function Vt(e,t,a){(e===He&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(pn(e,0),ar(e,Ae,It,!1)),Ba(e,a),((Ue&2)===0||e!==He)&&(e===He&&((Ue&2)===0&&(kr|=a),Ie===4&&ar(e,Ae,It,!1)),ma(e))}function wh(e,t,a){if((Ue&6)!==0)throw Error(l(327));var r=!a&&(t&124)===0&&(t&e.expiredLanes)===0||ot(e,t),c=r?Mx(e,t):yc(e,t,!0),f=r;do{if(c===0){mn&&!r&&ar(e,t,0,!1);break}else{if(a=e.current.alternate,f&&!Ox(a)){c=yc(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var v=e;c=Ss;var N=v.current.memoizedState.isDehydrated;if(N&&(pn(v,b).flags|=256),b=yc(v,b,!1),b!==2){if(uc&&!N){v.errorRecoveryDisabledLanes|=f,kr|=f,c=4;break e}f=Ut,Ut=c,f!==null&&(Ut===null?Ut=f:Ut.push.apply(Ut,f))}c=b}if(f=!1,c!==2)continue}}if(c===1){pn(e,0),ar(e,t,0,!0);break}e:{switch(r=e,f=c,f){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:ar(r,t,It,!Ia);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=hc+300-Yt(),10<c)){if(ar(r,t,It,!Ia),gt(r,0,!0)!==0)break e;r.timeoutHandle=Jh(Sh.bind(null,r,a,Ut,Kl,fc,t,It,kr,gn,Ia,f,2,-0,0),c);break e}Sh(r,a,Ut,Kl,fc,t,It,kr,gn,Ia,f,0,-0,0)}}break}while(!0);ma(e)}function Sh(e,t,a,r,c,f,b,v,N,L,F,K,B,H){if(e.timeoutHandle=-1,K=t.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(Ds={stylesheets:null,count:0,unsuspend:mb},xh(t),K=xb(),K!==null)){e.cancelPendingCommit=K(Ch.bind(null,e,t,f,a,r,c,b,v,N,F,1,B,H)),ar(e,f,b,!L);return}Ch(e,t,f,a,r,c,b,v,N)}function Ox(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var c=a[r],f=c.getSnapshot;c=c.value;try{if(!Lt(f(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ar(e,t,a,r){t&=~dc,t&=~kr,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var c=t;0<c;){var f=31-wt(c),b=1<<f;r[f]=-1,c&=~b}a!==0&&Vn(e,a,t)}function Zl(){return(Ue&6)===0?(Es(0),!1):!0}function bc(){if(Ee!==null){if(Me===0)var e=Ee.return;else e=Ee,ja=Nr=null,Uo(e),un=null,gs=0,e=Ee;for(;e!==null;)ah(e.alternate,e),e=e.return;Ee=null}}function pn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Jx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),bc(),He=e,Ee=a=_a(e.current,null),Ae=t,Me=0,$t=null,Ia=!1,mn=ot(e,t),uc=!1,gn=It=dc=kr=Wa=Ie=0,Ut=Ss=null,fc=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var c=31-wt(r),f=1<<c;t|=e[c],r&=~f}return ka=t,pl(),a}function jh(e,t){we=null,z.H=zl,t===ls||t===Tl?(t=$d(),Me=3):t===zd?(t=$d(),Me=4):Me=t===Vf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$t=t,Ee===null&&(Ie=1,Vl(e,Qt(t,e.current)))}function Eh(){var e=z.H;return z.H=zl,e===null?zl:e}function Nh(){var e=z.A;return z.A=Dx,e}function pc(){Ie=4,Ia||(Ae&4194048)!==Ae&&Jt.current!==null||(mn=!0),(Wa&134217727)===0&&(kr&134217727)===0||He===null||ar(He,Ae,It,!1)}function yc(e,t,a){var r=Ue;Ue|=2;var c=Eh(),f=Nh();(He!==e||Ae!==t)&&(Kl=null,pn(e,t)),t=!1;var b=Ie;e:do try{if(Me!==0&&Ee!==null){var v=Ee,N=$t;switch(Me){case 8:bc(),b=6;break e;case 3:case 2:case 9:case 6:Jt.current===null&&(t=!0);var L=Me;if(Me=0,$t=null,yn(e,v,N,L),a&&mn){b=0;break e}break;default:L=Me,Me=0,$t=null,yn(e,v,N,L)}}Ux(),b=Ie;break}catch(F){jh(e,F)}while(!0);return t&&e.shellSuspendCounter++,ja=Nr=null,Ue=r,z.H=c,z.A=f,Ee===null&&(He=null,Ae=0,pl()),b}function Ux(){for(;Ee!==null;)Th(Ee)}function Mx(e,t){var a=Ue;Ue|=2;var r=Eh(),c=Nh();He!==e||Ae!==t?(Kl=null,Xl=Yt()+500,pn(e,t)):mn=ot(e,t);e:do try{if(Me!==0&&Ee!==null){t=Ee;var f=$t;t:switch(Me){case 1:Me=0,$t=null,yn(e,t,f,1);break;case 2:case 9:if(qd(f)){Me=0,$t=null,Ah(t);break}t=function(){Me!==2&&Me!==9||He!==e||(Me=7),ma(e)},f.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:qd(f)?(Me=0,$t=null,Ah(t)):(Me=0,$t=null,yn(e,t,f,7));break;case 5:var b=null;switch(Ee.tag){case 26:b=Ee.memoizedState;case 5:case 27:var v=Ee;if(!b||cm(b)){Me=0,$t=null;var N=v.sibling;if(N!==null)Ee=N;else{var L=v.return;L!==null?(Ee=L,Jl(L)):Ee=null}break t}}Me=0,$t=null,yn(e,t,f,5);break;case 6:Me=0,$t=null,yn(e,t,f,6);break;case 8:bc(),Ie=6;break e;default:throw Error(l(462))}}Lx();break}catch(F){jh(e,F)}while(!0);return ja=Nr=null,z.H=r,z.A=c,Ue=a,Ee!==null?0:(He=null,Ae=0,pl(),Ie)}function Lx(){for(;Ee!==null&&!oa();)Th(Ee)}function Th(e){var t=eh(e.alternate,e,ka);e.memoizedProps=e.pendingProps,t===null?Jl(e):Ee=t}function Ah(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Xf(a,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=Xf(a,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:Uo(t);default:ah(a,t),t=Ee=Ad(t,ka),t=eh(a,t,ka)}e.memoizedProps=e.pendingProps,t===null?Jl(e):Ee=t}function yn(e,t,a,r){ja=Nr=null,Uo(t),un=null,gs=0;var c=t.return;try{if(Ex(e,c,t,a,Ae)){Ie=1,Vl(e,Qt(a,e.current)),Ee=null;return}}catch(f){if(c!==null)throw Ee=c,f;Ie=1,Vl(e,Qt(a,e.current)),Ee=null;return}t.flags&32768?(ke||r===1?e=!0:mn||(Ae&536870912)!==0?e=!1:(Ia=e=!0,(r===2||r===9||r===3||r===6)&&(r=Jt.current,r!==null&&r.tag===13&&(r.flags|=16384))),Rh(t,e)):Jl(t)}function Jl(e){var t=e;do{if((t.flags&32768)!==0){Rh(t,Ia);return}e=t.return;var a=Tx(t.alternate,t,ka);if(a!==null){Ee=a;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Ie===0&&(Ie=5)}function Rh(e,t){do{var a=Ax(e.alternate,e);if(a!==null){a.flags&=32767,Ee=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=a}while(e!==null);Ie=6,Ee=null}function Ch(e,t,a,r,c,f,b,v,N){e.cancelPendingCommit=null;do Il();while(bt!==0);if((Ue&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(f=t.lanes|t.childLanes,f|=oo,ll(e,a,f,b,v,N),e===He&&(Ee=He=null,Ae=0),xn=t,tr=e,bn=a,mc=f,gc=c,vh=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,$x(gr,function(){return Mh(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=z.T,z.T=null,c=I.p,I.p=2,b=Ue,Ue|=4;try{Rx(e,t,a)}finally{Ue=b,I.p=c,z.T=r}}bt=1,Dh(),kh(),Oh()}}function Dh(){if(bt===1){bt=0;var e=tr,t=xn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var r=I.p;I.p=2;var c=Ue;Ue|=4;try{hh(t,e);var f=Dc,b=pd(e.containerInfo),v=f.focusedElem,N=f.selectionRange;if(b!==v&&v&&v.ownerDocument&&bd(v.ownerDocument.documentElement,v)){if(N!==null&&ro(v)){var L=N.start,F=N.end;if(F===void 0&&(F=L),"selectionStart"in v)v.selectionStart=L,v.selectionEnd=Math.min(F,v.value.length);else{var K=v.ownerDocument||document,B=K&&K.defaultView||window;if(B.getSelection){var H=B.getSelection(),xe=v.textContent.length,fe=Math.min(N.start,xe),qe=N.end===void 0?fe:Math.min(N.end,xe);!H.extend&&fe>qe&&(b=qe,qe=fe,fe=b);var k=xd(v,fe),C=xd(v,qe);if(k&&C&&(H.rangeCount!==1||H.anchorNode!==k.node||H.anchorOffset!==k.offset||H.focusNode!==C.node||H.focusOffset!==C.offset)){var M=K.createRange();M.setStart(k.node,k.offset),H.removeAllRanges(),fe>qe?(H.addRange(M),H.extend(C.node,C.offset)):(M.setEnd(C.node,C.offset),H.addRange(M))}}}}for(K=[],H=v;H=H.parentNode;)H.nodeType===1&&K.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<K.length;v++){var Q=K[v];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}ui=!!Cc,Dc=Cc=null}finally{Ue=c,I.p=r,z.T=a}}e.current=t,bt=2}}function kh(){if(bt===2){bt=0;var e=tr,t=xn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var r=I.p;I.p=2;var c=Ue;Ue|=4;try{ch(e,t.alternate,t)}finally{Ue=c,I.p=r,z.T=a}}bt=3}}function Oh(){if(bt===4||bt===3){bt=0,ki();var e=tr,t=xn,a=bn,r=vh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?bt=5:(bt=0,xn=tr=null,Uh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(er=null),Li(a),t=t.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(xr,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=z.T,c=I.p,I.p=2,z.T=null;try{for(var f=e.onRecoverableError,b=0;b<r.length;b++){var v=r[b];f(v.value,{componentStack:v.stack})}}finally{z.T=t,I.p=c}}(bn&3)!==0&&Il(),ma(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===xc?js++:(js=0,xc=e):js=0,Es(0)}}function Uh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ns(t)))}function Il(e){return Dh(),kh(),Oh(),Mh()}function Mh(){if(bt!==5)return!1;var e=tr,t=mc;mc=0;var a=Li(bn),r=z.T,c=I.p;try{I.p=32>a?32:a,z.T=null,a=gc,gc=null;var f=tr,b=bn;if(bt=0,xn=tr=null,bn=0,(Ue&6)!==0)throw Error(l(331));var v=Ue;if(Ue|=4,ph(f.current),gh(f,f.current,b,a),Ue=v,Es(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(xr,f)}catch{}return!0}finally{I.p=c,z.T=r,Uh(e,t)}}function Lh(e,t,a){t=Qt(a,t),t=Xo(e.stateNode,t,2),e=Fa(e,t,2),e!==null&&(Ba(e,2),ma(e))}function $e(e,t,a){if(e.tag===3)Lh(e,e,a);else for(;t!==null;){if(t.tag===3){Lh(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){e=Qt(a,e),a=$f(2),r=Fa(t,a,2),r!==null&&(Hf(a,r,t,e),Ba(r,2),ma(r));break}}t=t.return}}function vc(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new kx;var c=new Set;r.set(t,c)}else c=r.get(t),c===void 0&&(c=new Set,r.set(t,c));c.has(a)||(uc=!0,c.add(a),e=zx.bind(null,e,t,a),t.then(e,e))}function zx(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,He===e&&(Ae&a)===a&&(Ie===4||Ie===3&&(Ae&62914560)===Ae&&300>Yt()-hc?(Ue&2)===0&&pn(e,0):dc|=a,gn===Ae&&(gn=0)),ma(e)}function zh(e,t){t===0&&(t=Rt()),e=Wr(e,t),e!==null&&(Ba(e,t),ma(e))}function qx(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),zh(e,a)}function Bx(e,t){var a=0;switch(e.tag){case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(t),zh(e,a)}function $x(e,t){return Ye(e,t)}var Wl=null,vn=null,_c=!1,ei=!1,wc=!1,Or=0;function ma(e){e!==vn&&e.next===null&&(vn===null?Wl=vn=e:vn=vn.next=e),ei=!0,_c||(_c=!0,Vx())}function Es(e,t){if(!wc&&ei){wc=!0;do for(var a=!1,r=Wl;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var f=0;else{var b=r.suspendedLanes,v=r.pingedLanes;f=(1<<31-wt(42|e)+1)-1,f&=c&~(b&~v),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Hh(r,f))}else f=Ae,f=gt(r,r===He?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(f&3)===0||ot(r,f)||(a=!0,Hh(r,f));r=r.next}while(a);wc=!1}}function Hx(){qh()}function qh(){ei=_c=!1;var e=0;Or!==0&&(Zx()&&(e=Or),Or=0);for(var t=Yt(),a=null,r=Wl;r!==null;){var c=r.next,f=Bh(r,t);f===0?(r.next=null,a===null?Wl=c:a.next=c,c===null&&(vn=a)):(a=r,(e!==0||(f&3)!==0)&&(ei=!0)),r=c}Es(e)}function Bh(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-wt(f),v=1<<b,N=c[b];N===-1?((v&a)===0||(v&r)!==0)&&(c[b]=We(v,t)):N<=t&&(e.expiredLanes|=v),f&=~v}if(t=He,a=Ae,a=gt(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Fe(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ot(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(r!==null&&Fe(r),Li(a)){case 2:case 8:a=rl;break;case 32:a=gr;break;case 268435456:a=sl;break;default:a=gr}return r=$h.bind(null,e),a=Ye(a,r),e.callbackPriority=t,e.callbackNode=a,t}return r!==null&&r!==null&&Fe(r),e.callbackPriority=2,e.callbackNode=null,2}function $h(e,t){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Il()&&e.callbackNode!==a)return null;var r=Ae;return r=gt(e,e===He?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(wh(e,r,t),Bh(e,Yt()),e.callbackNode!=null&&e.callbackNode===a?$h.bind(null,e):null)}function Hh(e,t){if(Il())return null;wh(e,t,!0)}function Vx(){Ix(function(){(Ue&6)!==0?Ye(al,Hx):qh()})}function Sc(){return Or===0&&(Or=nt()),Or}function Vh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:dl(""+e)}function Gh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Gx(e,t,a,r,c){if(t==="submit"&&a&&a.stateNode===c){var f=Vh((c[Ct]||null).action),b=r.submitter;b&&(t=(t=b[Ct]||null)?Vh(t.formAction):b.getAttribute("formAction"),t!==null&&(f=t,b=null));var v=new gl("action","action",null,r,c);e.push({event:v,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Or!==0){var N=b?Gh(c,b):new FormData(c);Go(a,{pending:!0,data:N,method:c.method,action:f},null,N)}}else typeof f=="function"&&(v.preventDefault(),N=b?Gh(c,b):new FormData(c),Go(a,{pending:!0,data:N,method:c.method,action:f},f,N))},currentTarget:c}]})}}for(var jc=0;jc<io.length;jc++){var Ec=io[jc],Yx=Ec.toLowerCase(),Fx=Ec[0].toUpperCase()+Ec.slice(1);ta(Yx,"on"+Fx)}ta(_d,"onAnimationEnd"),ta(wd,"onAnimationIteration"),ta(Sd,"onAnimationStart"),ta("dblclick","onDoubleClick"),ta("focusin","onFocus"),ta("focusout","onBlur"),ta(ox,"onTransitionRun"),ta(cx,"onTransitionStart"),ta(ux,"onTransitionCancel"),ta(jd,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),br("onBeforeInput",["compositionend","keypress","textInput","paste"]),br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Px=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ns));function Yh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],c=r.event;r=r.listeners;e:{var f=void 0;if(t)for(var b=r.length-1;0<=b;b--){var v=r[b],N=v.instance,L=v.currentTarget;if(v=v.listener,N!==f&&c.isPropagationStopped())break e;f=v,c.currentTarget=L;try{f(c)}catch(F){Hl(F)}c.currentTarget=null,f=N}else for(b=0;b<r.length;b++){if(v=r[b],N=v.instance,L=v.currentTarget,v=v.listener,N!==f&&c.isPropagationStopped())break e;f=v,c.currentTarget=L;try{f(c)}catch(F){Hl(F)}c.currentTarget=null,f=N}}}}function Ne(e,t){var a=t[zi];a===void 0&&(a=t[zi]=new Set);var r=e+"__bubble";a.has(r)||(Fh(t,e,2,!1),a.add(r))}function Nc(e,t,a){var r=0;t&&(r|=4),Fh(a,e,r,t)}var ti="_reactListening"+Math.random().toString(36).slice(2);function Tc(e){if(!e[ti]){e[ti]=!0,zu.forEach(function(a){a!=="selectionchange"&&(Px.has(a)||Nc(a,!1,e),Nc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ti]||(t[ti]=!0,Nc("selectionchange",!1,t))}}function Fh(e,t,a,r){switch(gm(t)){case 2:var c=yb;break;case 8:c=vb;break;default:c=Hc}a=c.bind(null,t,a,e),c=void 0,!Xi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Ac(e,t,a,r,c){var f=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var b=r.tag;if(b===3||b===4){var v=r.stateNode.containerInfo;if(v===c)break;if(b===4)for(b=r.return;b!==null;){var N=b.tag;if((N===3||N===4)&&b.stateNode.containerInfo===c)return;b=b.return}for(;v!==null;){if(b=$r(v),b===null)return;if(N=b.tag,N===5||N===6||N===26||N===27){r=f=b;continue e}v=v.parentNode}}r=r.return}Ju(function(){var L=f,F=Pi(a),K=[];e:{var B=Ed.get(e);if(B!==void 0){var H=gl,xe=e;switch(e){case"keypress":if(hl(a)===0)break e;case"keydown":case"keyup":H=$0;break;case"focusin":xe="focus",H=Ii;break;case"focusout":xe="blur",H=Ii;break;case"beforeblur":case"afterblur":H=Ii;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=A0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=G0;break;case _d:case wd:case Sd:H=D0;break;case jd:H=F0;break;case"scroll":case"scrollend":H=N0;break;case"wheel":H=Q0;break;case"copy":case"cut":case"paste":H=O0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=ad;break;case"toggle":case"beforetoggle":H=K0}var fe=(t&4)!==0,qe=!fe&&(e==="scroll"||e==="scrollend"),k=fe?B!==null?B+"Capture":null:B;fe=[];for(var C=L,M;C!==null;){var Q=C;if(M=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||M===null||k===null||(Q=Fn(C,k),Q!=null&&fe.push(Ts(C,Q,M))),qe)break;C=C.return}0<fe.length&&(B=new H(B,xe,null,a,F),K.push({event:B,listeners:fe}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",B&&a!==Fi&&(xe=a.relatedTarget||a.fromElement)&&($r(xe)||xe[Br]))break e;if((H||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,H?(xe=a.relatedTarget||a.toElement,H=L,xe=xe?$r(xe):null,xe!==null&&(qe=u(xe),fe=xe.tag,xe!==qe||fe!==5&&fe!==27&&fe!==6)&&(xe=null)):(H=null,xe=L),H!==xe)){if(fe=ed,Q="onMouseLeave",k="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(fe=ad,Q="onPointerLeave",k="onPointerEnter",C="pointer"),qe=H==null?B:Yn(H),M=xe==null?B:Yn(xe),B=new fe(Q,C+"leave",H,a,F),B.target=qe,B.relatedTarget=M,Q=null,$r(F)===L&&(fe=new fe(k,C+"enter",xe,a,F),fe.target=M,fe.relatedTarget=qe,Q=fe),qe=Q,H&&xe)t:{for(fe=H,k=xe,C=0,M=fe;M;M=_n(M))C++;for(M=0,Q=k;Q;Q=_n(Q))M++;for(;0<C-M;)fe=_n(fe),C--;for(;0<M-C;)k=_n(k),M--;for(;C--;){if(fe===k||k!==null&&fe===k.alternate)break t;fe=_n(fe),k=_n(k)}fe=null}else fe=null;H!==null&&Ph(K,B,H,fe,!1),xe!==null&&qe!==null&&Ph(K,qe,xe,fe,!0)}}e:{if(B=L?Yn(L):window,H=B.nodeName&&B.nodeName.toLowerCase(),H==="select"||H==="input"&&B.type==="file")var ie=ud;else if(od(B))if(dd)ie=sx;else{ie=rx;var je=ax}else H=B.nodeName,!H||H.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?L&&Yi(L.elementType)&&(ie=ud):ie=nx;if(ie&&(ie=ie(e,L))){cd(K,ie,a,F);break e}je&&je(e,B,L),e==="focusout"&&L&&B.type==="number"&&L.memoizedProps.value!=null&&Gi(B,"number",B.value)}switch(je=L?Yn(L):window,e){case"focusin":(od(je)||je.contentEditable==="true")&&(Zr=je,no=L,Wn=null);break;case"focusout":Wn=no=Zr=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,yd(K,a,F);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":yd(K,a,F)}var de;if(eo)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Kr?ld(e,a)&&(he="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(he="onCompositionStart");he&&(rd&&a.locale!=="ko"&&(Kr||he!=="onCompositionStart"?he==="onCompositionEnd"&&Kr&&(de=Iu()):(Ha=F,Ki="value"in Ha?Ha.value:Ha.textContent,Kr=!0)),je=ai(L,he),0<je.length&&(he=new td(he,e,null,a,F),K.push({event:he,listeners:je}),de?he.data=de:(de=id(a),de!==null&&(he.data=de)))),(de=J0?I0(e,a):W0(e,a))&&(he=ai(L,"onBeforeInput"),0<he.length&&(je=new td("onBeforeInput","beforeinput",null,a,F),K.push({event:je,listeners:he}),je.data=de)),Gx(K,e,L,a,F)}Yh(K,t)})}function Ts(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ai(e,t){for(var a=t+"Capture",r=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Fn(e,a),c!=null&&r.unshift(Ts(e,c,f)),c=Fn(e,t),c!=null&&r.push(Ts(e,c,f))),e.tag===3)return r;e=e.return}return[]}function _n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ph(e,t,a,r,c){for(var f=t._reactName,b=[];a!==null&&a!==r;){var v=a,N=v.alternate,L=v.stateNode;if(v=v.tag,N!==null&&N===r)break;v!==5&&v!==26&&v!==27||L===null||(N=L,c?(L=Fn(a,f),L!=null&&b.unshift(Ts(a,L,N))):c||(L=Fn(a,f),L!=null&&b.push(Ts(a,L,N)))),a=a.return}b.length!==0&&e.push({event:t,listeners:b})}var Qx=/\r\n?/g,Xx=/\u0000|\uFFFD/g;function Qh(e){return(typeof e=="string"?e:""+e).replace(Qx,`
`).replace(Xx,"")}function Xh(e,t){return t=Qh(t),Qh(e)===t}function ri(){}function ze(e,t,a,r,c,f){switch(a){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Pr(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Pr(e,""+r);break;case"className":ol(e,"class",r);break;case"tabIndex":ol(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ol(e,a,r);break;case"style":Ku(e,r,f);break;case"data":if(t!=="object"){ol(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=dl(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(t!=="input"&&ze(e,t,"name",c.name,c,null),ze(e,t,"formEncType",c.formEncType,c,null),ze(e,t,"formMethod",c.formMethod,c,null),ze(e,t,"formTarget",c.formTarget,c,null)):(ze(e,t,"encType",c.encType,c,null),ze(e,t,"method",c.method,c,null),ze(e,t,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=dl(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=ri);break;case"onScroll":r!=null&&Ne("scroll",e);break;case"onScrollEnd":r!=null&&Ne("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=dl(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":Ne("beforetoggle",e),Ne("toggle",e),il(e,"popover",r);break;case"xlinkActuate":ya(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ya(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ya(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ya(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ya(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ya(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ya(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ya(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ya(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":il(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=j0.get(a)||a,il(e,a,r))}}function Rc(e,t,a,r,c,f){switch(a){case"style":Ku(e,r,f);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof r=="string"?Pr(e,r):(typeof r=="number"||typeof r=="bigint")&&Pr(e,""+r);break;case"onScroll":r!=null&&Ne("scroll",e);break;case"onScrollEnd":r!=null&&Ne("scrollend",e);break;case"onClick":r!=null&&(e.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),f=e[Ct]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof r=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,r,c);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):il(e,a,r)}}}function pt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",e),Ne("load",e);var r=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:ze(e,t,f,b,a,null)}}c&&ze(e,t,"srcSet",a.srcSet,a,null),r&&ze(e,t,"src",a.src,a,null);return;case"input":Ne("invalid",e);var v=f=b=c=null,N=null,L=null;for(r in a)if(a.hasOwnProperty(r)){var F=a[r];if(F!=null)switch(r){case"name":c=F;break;case"type":b=F;break;case"checked":N=F;break;case"defaultChecked":L=F;break;case"value":f=F;break;case"defaultValue":v=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(137,t));break;default:ze(e,t,r,F,a,null)}}Fu(e,f,v,N,L,b,c,!1),cl(e);return;case"select":Ne("invalid",e),r=b=f=null;for(c in a)if(a.hasOwnProperty(c)&&(v=a[c],v!=null))switch(c){case"value":f=v;break;case"defaultValue":b=v;break;case"multiple":r=v;default:ze(e,t,c,v,a,null)}t=f,a=b,e.multiple=!!r,t!=null?Fr(e,!!r,t,!1):a!=null&&Fr(e,!!r,a,!0);return;case"textarea":Ne("invalid",e),f=c=r=null;for(b in a)if(a.hasOwnProperty(b)&&(v=a[b],v!=null))switch(b){case"value":r=v;break;case"defaultValue":c=v;break;case"children":f=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(l(91));break;default:ze(e,t,b,v,a,null)}Qu(e,r,c,f),cl(e);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(r=a[N],r!=null))switch(N){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:ze(e,t,N,r,a,null)}return;case"dialog":Ne("beforetoggle",e),Ne("toggle",e),Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":Ne("load",e);break;case"video":case"audio":for(r=0;r<Ns.length;r++)Ne(Ns[r],e);break;case"image":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"embed":case"source":case"link":Ne("error",e),Ne("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(r=a[L],r!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:ze(e,t,L,r,a,null)}return;default:if(Yi(t)){for(F in a)a.hasOwnProperty(F)&&(r=a[F],r!==void 0&&Rc(e,t,F,r,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(r=a[v],r!=null&&ze(e,t,v,r,a,null))}function Kx(e,t,a,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,b=null,v=null,N=null,L=null,F=null;for(H in a){var K=a[H];if(a.hasOwnProperty(H)&&K!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=K;default:r.hasOwnProperty(H)||ze(e,t,H,null,r,K)}}for(var B in r){var H=r[B];if(K=a[B],r.hasOwnProperty(B)&&(H!=null||K!=null))switch(B){case"type":f=H;break;case"name":c=H;break;case"checked":L=H;break;case"defaultChecked":F=H;break;case"value":b=H;break;case"defaultValue":v=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(l(137,t));break;default:H!==K&&ze(e,t,B,H,r,K)}}Vi(e,b,v,N,L,F,f,c);return;case"select":H=b=v=B=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":H=N;default:r.hasOwnProperty(f)||ze(e,t,f,null,r,N)}for(c in r)if(f=r[c],N=a[c],r.hasOwnProperty(c)&&(f!=null||N!=null))switch(c){case"value":B=f;break;case"defaultValue":v=f;break;case"multiple":b=f;default:f!==N&&ze(e,t,c,f,r,N)}t=v,a=b,r=H,B!=null?Fr(e,!!a,B,!1):!!r!=!!a&&(t!=null?Fr(e,!!a,t,!0):Fr(e,!!a,a?[]:"",!1));return;case"textarea":H=B=null;for(v in a)if(c=a[v],a.hasOwnProperty(v)&&c!=null&&!r.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:ze(e,t,v,null,r,c)}for(b in r)if(c=r[b],f=a[b],r.hasOwnProperty(b)&&(c!=null||f!=null))switch(b){case"value":B=c;break;case"defaultValue":H=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==f&&ze(e,t,b,c,r,f)}Pu(e,B,H);return;case"option":for(var xe in a)if(B=a[xe],a.hasOwnProperty(xe)&&B!=null&&!r.hasOwnProperty(xe))switch(xe){case"selected":e.selected=!1;break;default:ze(e,t,xe,null,r,B)}for(N in r)if(B=r[N],H=a[N],r.hasOwnProperty(N)&&B!==H&&(B!=null||H!=null))switch(N){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:ze(e,t,N,B,r,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in a)B=a[fe],a.hasOwnProperty(fe)&&B!=null&&!r.hasOwnProperty(fe)&&ze(e,t,fe,null,r,B);for(L in r)if(B=r[L],H=a[L],r.hasOwnProperty(L)&&B!==H&&(B!=null||H!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(l(137,t));break;default:ze(e,t,L,B,r,H)}return;default:if(Yi(t)){for(var qe in a)B=a[qe],a.hasOwnProperty(qe)&&B!==void 0&&!r.hasOwnProperty(qe)&&Rc(e,t,qe,void 0,r,B);for(F in r)B=r[F],H=a[F],!r.hasOwnProperty(F)||B===H||B===void 0&&H===void 0||Rc(e,t,F,B,r,H);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!r.hasOwnProperty(k)&&ze(e,t,k,null,r,B);for(K in r)B=r[K],H=a[K],!r.hasOwnProperty(K)||B===H||B==null&&H==null||ze(e,t,K,B,r,H)}var Cc=null,Dc=null;function ni(e){return e.nodeType===9?e:e.ownerDocument}function Kh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function kc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oc=null;function Zx(){var e=window.event;return e&&e.type==="popstate"?e===Oc?!1:(Oc=e,!0):(Oc=null,!1)}var Jh=typeof setTimeout=="function"?setTimeout:void 0,Jx=typeof clearTimeout=="function"?clearTimeout:void 0,Ih=typeof Promise=="function"?Promise:void 0,Ix=typeof queueMicrotask=="function"?queueMicrotask:typeof Ih<"u"?function(e){return Ih.resolve(null).then(e).catch(Wx)}:Jh;function Wx(e){setTimeout(function(){throw e})}function rr(e){return e==="head"}function Wh(e,t){var a=t,r=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<r&&8>r){a=r;var b=e.ownerDocument;if(a&1&&As(b.documentElement),a&2&&As(b.body),a&4)for(a=b.head,As(a),b=a.firstChild;b;){var v=b.nextSibling,N=b.nodeName;b[Gn]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=v}}if(c===0){e.removeChild(f),Ls(t);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:r=a.charCodeAt(0)-48;else r=0;a=f}while(a);Ls(t)}function Uc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uc(a),qi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function eb(e,t,a,r){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Gn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ra(e.nextSibling),e===null)break}return null}function tb(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ra(e.nextSibling),e===null))return null;return e}function Mc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ab(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var r=function(){t(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function ra(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Lc=null;function em(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function tm(e,t,a){switch(t=ni(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function As(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qi(e)}var Wt=new Map,am=new Set;function si(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Oa=I.d;I.d={f:rb,r:nb,D:sb,C:lb,L:ib,m:ob,X:ub,S:cb,M:db};function rb(){var e=Oa.f(),t=Zl();return e||t}function nb(e){var t=Hr(e);t!==null&&t.tag===5&&t.type==="form"?wf(t):Oa.r(e)}var wn=typeof document>"u"?null:document;function rm(e,t,a){var r=wn;if(r&&typeof t=="string"&&t){var c=Pt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),am.has(c)||(am.add(c),e={rel:e,crossOrigin:a,href:t},r.querySelector(c)===null&&(t=r.createElement("link"),pt(t,"link",e),ct(t),r.head.appendChild(t)))}}function sb(e){Oa.D(e),rm("dns-prefetch",e,null)}function lb(e,t){Oa.C(e,t),rm("preconnect",e,t)}function ib(e,t,a){Oa.L(e,t,a);var r=wn;if(r&&e&&t){var c='link[rel="preload"][as="'+Pt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Pt(a.imageSizes)+'"]')):c+='[href="'+Pt(e)+'"]';var f=c;switch(t){case"style":f=Sn(e);break;case"script":f=jn(e)}Wt.has(f)||(e=p({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Wt.set(f,e),r.querySelector(c)!==null||t==="style"&&r.querySelector(Rs(f))||t==="script"&&r.querySelector(Cs(f))||(t=r.createElement("link"),pt(t,"link",e),ct(t),r.head.appendChild(t)))}}function ob(e,t){Oa.m(e,t);var a=wn;if(a&&e){var r=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Pt(r)+'"][href="'+Pt(e)+'"]',f=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=jn(e)}if(!Wt.has(f)&&(e=p({rel:"modulepreload",href:e},t),Wt.set(f,e),a.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Cs(f)))return}r=a.createElement("link"),pt(r,"link",e),ct(r),a.head.appendChild(r)}}}function cb(e,t,a){Oa.S(e,t,a);var r=wn;if(r&&e){var c=Vr(r).hoistableStyles,f=Sn(e);t=t||"default";var b=c.get(f);if(!b){var v={loading:0,preload:null};if(b=r.querySelector(Rs(f)))v.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Wt.get(f))&&zc(e,a);var N=b=r.createElement("link");ct(N),pt(N,"link",e),N._p=new Promise(function(L,F){N.onload=L,N.onerror=F}),N.addEventListener("load",function(){v.loading|=1}),N.addEventListener("error",function(){v.loading|=2}),v.loading|=4,li(b,t,r)}b={type:"stylesheet",instance:b,count:1,state:v},c.set(f,b)}}}function ub(e,t){Oa.X(e,t);var a=wn;if(a&&e){var r=Vr(a).hoistableScripts,c=jn(e),f=r.get(c);f||(f=a.querySelector(Cs(c)),f||(e=p({src:e,async:!0},t),(t=Wt.get(c))&&qc(e,t),f=a.createElement("script"),ct(f),pt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(c,f))}}function db(e,t){Oa.M(e,t);var a=wn;if(a&&e){var r=Vr(a).hoistableScripts,c=jn(e),f=r.get(c);f||(f=a.querySelector(Cs(c)),f||(e=p({src:e,async:!0,type:"module"},t),(t=Wt.get(c))&&qc(e,t),f=a.createElement("script"),ct(f),pt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(c,f))}}function nm(e,t,a,r){var c=(c=J.current)?si(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Sn(a.href),a=Vr(c).hoistableStyles,r=a.get(t),r||(r={type:"style",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Sn(a.href);var f=Vr(c).hoistableStyles,b=f.get(e);if(b||(c=c.ownerDocument||c,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=c.querySelector(Rs(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Wt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wt.set(e,a),f||fb(c,e,a,b.state))),t&&r===null)throw Error(l(528,""));return b}if(t&&r!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=jn(a),a=Vr(c).hoistableScripts,r=a.get(t),r||(r={type:"script",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Sn(e){return'href="'+Pt(e)+'"'}function Rs(e){return'link[rel="stylesheet"]['+e+"]"}function sm(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function fb(e,t,a,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),pt(t,"link",a),ct(t),e.head.appendChild(t))}function jn(e){return'[src="'+Pt(e)+'"]'}function Cs(e){return"script[async]"+e}function lm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Pt(a.href)+'"]');if(r)return t.instance=r,ct(r),r;var c=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),ct(r),pt(r,"style",c),li(r,a.precedence,e),t.instance=r;case"stylesheet":c=Sn(a.href);var f=e.querySelector(Rs(c));if(f)return t.state.loading|=4,t.instance=f,ct(f),f;r=sm(a),(c=Wt.get(c))&&zc(r,c),f=(e.ownerDocument||e).createElement("link"),ct(f);var b=f;return b._p=new Promise(function(v,N){b.onload=v,b.onerror=N}),pt(f,"link",r),t.state.loading|=4,li(f,a.precedence,e),t.instance=f;case"script":return f=jn(a.src),(c=e.querySelector(Cs(f)))?(t.instance=c,ct(c),c):(r=a,(c=Wt.get(f))&&(r=p({},a),qc(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),ct(c),pt(c,"link",r),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,li(r,a.precedence,e));return t.instance}function li(e,t,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,f=c,b=0;b<r.length;b++){var v=r[b];if(v.dataset.precedence===t)f=v;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function zc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function qc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ii=null;function im(e,t,a){if(ii===null){var r=new Map,c=ii=new Map;c.set(a,r)}else c=ii,r=c.get(a),r||(r=new Map,c.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[Gn]||f[St]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(t)||"";b=e+b;var v=r.get(b);v?v.push(f):r.set(b,[f])}}return r}function om(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function hb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function cm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Ds=null;function mb(){}function gb(e,t,a){if(Ds===null)throw Error(l(475));var r=Ds;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var c=Sn(a.href),f=e.querySelector(Rs(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=oi.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=f,ct(f);return}f=e.ownerDocument||e,a=sm(a),(c=Wt.get(c))&&zc(a,c),f=f.createElement("link"),ct(f);var b=f;b._p=new Promise(function(v,N){b.onload=v,b.onerror=N}),pt(f,"link",a),t.instance=f}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(r.count++,t=oi.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function xb(){if(Ds===null)throw Error(l(475));var e=Ds;return e.stylesheets&&e.count===0&&Bc(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Bc(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function oi(){if(this.count--,this.count===0){if(this.stylesheets)Bc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ci=null;function Bc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ci=new Map,t.forEach(bb,e),ci=null,oi.call(e))}function bb(e,t){if(!(t.state.loading&4)){var a=ci.get(e);if(a)var r=a.get(null);else{a=new Map,ci.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var b=c[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),r=b)}r&&a.set(null,r)}c=t.instance,b=c.getAttribute("data-precedence"),f=a.get(b)||r,f===r&&a.set(null,c),a.set(b,c),this.count++,r=oi.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var ks={$$typeof:G,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function pb(e,t,a,r,c,f,b,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.hiddenUpdates=qa(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function um(e,t,a,r,c,f,b,v,N,L,F,K){return e=new pb(e,t,a,b,v,N,L,K),t=1,f===!0&&(t|=24),f=zt(3,null,null,t),e.current=f,f.stateNode=e,t=vo(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:r,isDehydrated:a,cache:t},jo(f),e}function dm(e){return e?(e=en,e):en}function fm(e,t,a,r,c,f){c=dm(c),r.context===null?r.context=c:r.pendingContext=c,r=Ya(t),r.payload={element:a},f=f===void 0?null:f,f!==null&&(r.callback=f),a=Fa(e,r,t),a!==null&&(Vt(a,e,t),os(a,e,t))}function hm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function $c(e,t){hm(e,t),(e=e.alternate)&&hm(e,t)}function mm(e){if(e.tag===13){var t=Wr(e,67108864);t!==null&&Vt(t,e,67108864),$c(e,67108864)}}var ui=!0;function yb(e,t,a,r){var c=z.T;z.T=null;var f=I.p;try{I.p=2,Hc(e,t,a,r)}finally{I.p=f,z.T=c}}function vb(e,t,a,r){var c=z.T;z.T=null;var f=I.p;try{I.p=8,Hc(e,t,a,r)}finally{I.p=f,z.T=c}}function Hc(e,t,a,r){if(ui){var c=Vc(r);if(c===null)Ac(e,t,r,di,a),xm(e,r);else if(wb(c,e,t,a,r))r.stopPropagation();else if(xm(e,r),t&4&&-1<_b.indexOf(e)){for(;c!==null;){var f=Hr(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Xe(f.pendingLanes);if(b!==0){var v=f;for(v.pendingLanes|=2,v.entangledLanes|=2;b;){var N=1<<31-wt(b);v.entanglements[1]|=N,b&=~N}ma(f),(Ue&6)===0&&(Xl=Yt()+500,Es(0))}}break;case 13:v=Wr(f,2),v!==null&&Vt(v,f,2),Zl(),$c(f,2)}if(f=Vc(r),f===null&&Ac(e,t,r,di,a),f===c)break;c=f}c!==null&&r.stopPropagation()}else Ac(e,t,r,null,a)}}function Vc(e){return e=Pi(e),Gc(e)}var di=null;function Gc(e){if(di=null,e=$r(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return di=e,null}function gm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case al:return 2;case rl:return 8;case gr:case nl:return 32;case sl:return 268435456;default:return 32}default:return 32}}var Yc=!1,nr=null,sr=null,lr=null,Os=new Map,Us=new Map,ir=[],_b="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xm(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Os.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(t.pointerId)}}function Ms(e,t,a,r,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Hr(t),t!==null&&mm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function wb(e,t,a,r,c){switch(t){case"focusin":return nr=Ms(nr,e,t,a,r,c),!0;case"dragenter":return sr=Ms(sr,e,t,a,r,c),!0;case"mouseover":return lr=Ms(lr,e,t,a,r,c),!0;case"pointerover":var f=c.pointerId;return Os.set(f,Ms(Os.get(f)||null,e,t,a,r,c)),!0;case"gotpointercapture":return f=c.pointerId,Us.set(f,Ms(Us.get(f)||null,e,t,a,r,c)),!0}return!1}function bm(e){var t=$r(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,g0(e.priority,function(){if(a.tag===13){var r=Ht();r=Mi(r);var c=Wr(a,r);c!==null&&Vt(c,a,r),$c(a,r)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Vc(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Fi=r,a.target.dispatchEvent(r),Fi=null}else return t=Hr(a),t!==null&&mm(t),e.blockedOn=a,!1;t.shift()}return!0}function pm(e,t,a){fi(e)&&a.delete(t)}function Sb(){Yc=!1,nr!==null&&fi(nr)&&(nr=null),sr!==null&&fi(sr)&&(sr=null),lr!==null&&fi(lr)&&(lr=null),Os.forEach(pm),Us.forEach(pm)}function hi(e,t){e.blockedOn===t&&(e.blockedOn=null,Yc||(Yc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Sb)))}var mi=null;function ym(e){mi!==e&&(mi=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){mi===e&&(mi=null);for(var t=0;t<e.length;t+=3){var a=e[t],r=e[t+1],c=e[t+2];if(typeof r!="function"){if(Gc(r||a)===null)continue;break}var f=Hr(a);f!==null&&(e.splice(t,3),t-=3,Go(f,{pending:!0,data:c,method:a.method,action:r},r,c))}}))}function Ls(e){function t(N){return hi(N,e)}nr!==null&&hi(nr,e),sr!==null&&hi(sr,e),lr!==null&&hi(lr,e),Os.forEach(t),Us.forEach(t);for(var a=0;a<ir.length;a++){var r=ir[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ir.length&&(a=ir[0],a.blockedOn===null);)bm(a),a.blockedOn===null&&ir.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var c=a[r],f=a[r+1],b=c[Ct]||null;if(typeof f=="function")b||ym(a);else if(b){var v=null;if(f&&f.hasAttribute("formAction")){if(c=f,b=f[Ct]||null)v=b.formAction;else if(Gc(c)!==null)continue}else v=b.action;typeof v=="function"?a[r+1]=v:(a.splice(r,3),r-=3),ym(a)}}}function Fc(e){this._internalRoot=e}gi.prototype.render=Fc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,r=Ht();fm(a,r,e,t,null,null)},gi.prototype.unmount=Fc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fm(e.current,2,null,e,null,null),Zl(),t[Br]=null}};function gi(e){this._internalRoot=e}gi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ir.length&&t!==0&&t<ir[a].priority;a++);ir.splice(a,0,e),a===0&&bm(e)}};var vm=n.version;if(vm!=="19.1.0")throw Error(l(527,vm,"19.1.0"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var jb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xi.isDisabled&&xi.supportsFiber)try{xr=xi.inject(jb),_t=xi}catch{}}return qs.createRoot=function(e,t){if(!o(e))throw Error(l(299));var a=!1,r="",c=Lf,f=zf,b=qf,v=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(v=t.unstable_transitionCallbacks)),t=um(e,1,!1,null,null,a,r,c,f,b,v,null),e[Br]=t.current,Tc(e),new Fc(t)},qs.hydrateRoot=function(e,t,a){if(!o(e))throw Error(l(299));var r=!1,c="",f=Lf,b=zf,v=qf,N=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),t=um(e,1,!0,t,a??null,r,c,f,b,v,N,L),t.context=dm(null),a=t.current,r=Ht(),r=Mi(r),c=Ya(r),c.callback=null,Fa(a,c,r),a=r,t.current.lanes=a,Ba(t,a),ma(t),e[Br]=t.current,Tc(e),new gi(t)},qs.version="19.1.0",qs}var Cm;function Lb(){if(Cm)return Xc.exports;Cm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Xc.exports=Mb(),Xc.exports}var zb=Lb(),Bs={},Dm;function qb(){if(Dm)return Bs;Dm=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.parse=h,Bs.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,l=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function h(y,A){const E=new u,R=y.length;if(R<2)return E;const T=(A==null?void 0:A.decode)||p;let U=0;do{const $=y.indexOf("=",U);if($===-1)break;const G=y.indexOf(";",U),Z=G===-1?R:G;if($>Z){U=y.lastIndexOf(";",$-1)+1;continue}const V=x(y,U,$),te=m(y,$,V),le=y.slice(V,te);if(E[le]===void 0){let se=x(y,$+1,Z),ne=m(y,Z,se);const ue=T(y.slice(se,ne));E[le]=ue}U=Z+1}while(U<R);return E}function x(y,A,E){do{const R=y.charCodeAt(A);if(R!==32&&R!==9)return A}while(++A<E);return E}function m(y,A,E){for(;A>E;){const R=y.charCodeAt(--A);if(R!==32&&R!==9)return A+1}return E}function g(y,A,E){const R=(E==null?void 0:E.encode)||encodeURIComponent;if(!i.test(y))throw new TypeError(`argument name is invalid: ${y}`);const T=R(A);if(!n.test(T))throw new TypeError(`argument val is invalid: ${A}`);let U=y+"="+T;if(!E)return U;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);U+="; Max-Age="+E.maxAge}if(E.domain){if(!s.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);U+="; Domain="+E.domain}if(E.path){if(!l.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);U+="; Path="+E.path}if(E.expires){if(!_(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);U+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(U+="; HttpOnly"),E.secure&&(U+="; Secure"),E.partitioned&&(U+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return U}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function _(y){return o.call(y)==="[object Date]"}return Bs}qb();var km="popstate";function Bb(i={}){function n(l,o){let{pathname:u,search:h,hash:x}=l.location;return ou("",{pathname:u,search:h,hash:x},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(l,o){return typeof o=="string"?o:Qs(o)}return Hb(n,s,null,i)}function Ze(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function xa(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function $b(){return Math.random().toString(36).substring(2,10)}function Om(i,n){return{usr:i.state,key:i.key,idx:n}}function ou(i,n,s=null,l){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof n=="string"?Bn(n):n,state:s,key:n&&n.key||l||$b()}}function Qs({pathname:i="/",search:n="",hash:s=""}){return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(i+=s.charAt(0)==="#"?s:"#"+s),i}function Bn(i){let n={};if(i){let s=i.indexOf("#");s>=0&&(n.hash=i.substring(s),i=i.substring(0,s));let l=i.indexOf("?");l>=0&&(n.search=i.substring(l),i=i.substring(0,l)),i&&(n.pathname=i)}return n}function Hb(i,n,s,l={}){let{window:o=document.defaultView,v5Compat:u=!1}=l,h=o.history,x="POP",m=null,g=p();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function p(){return(h.state||{idx:null}).idx}function _(){x="POP";let T=p(),U=T==null?null:T-g;g=T,m&&m({action:x,location:R.location,delta:U})}function y(T,U){x="PUSH";let $=ou(R.location,T,U);g=p()+1;let G=Om($,g),Z=R.createHref($);try{h.pushState(G,"",Z)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(Z)}u&&m&&m({action:x,location:R.location,delta:1})}function A(T,U){x="REPLACE";let $=ou(R.location,T,U);g=p();let G=Om($,g),Z=R.createHref($);h.replaceState(G,"",Z),u&&m&&m({action:x,location:R.location,delta:0})}function E(T){return Vb(T)}let R={get action(){return x},get location(){return i(o,h)},listen(T){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(km,_),m=T,()=>{o.removeEventListener(km,_),m=null}},createHref(T){return n(o,T)},createURL:E,encodeLocation(T){let U=E(T);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:y,replace:A,go(T){return h.go(T)}};return R}function Vb(i,n=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Ze(s,"No window.location.(origin|href) available to create URL");let l=typeof i=="string"?i:Qs(i);return l=l.replace(/ $/,"%20"),!n&&l.startsWith("//")&&(l=s+l),new URL(l,s)}function bg(i,n,s="/"){return Gb(i,n,s,!1)}function Gb(i,n,s,l){let o=typeof n=="string"?Bn(n):n,u=La(o.pathname||"/",s);if(u==null)return null;let h=pg(i);Yb(h);let x=null;for(let m=0;x==null&&m<h.length;++m){let g=tp(u);x=Wb(h[m],g,l)}return x}function pg(i,n=[],s=[],l=""){let o=(u,h,x)=>{let m={relativePath:x===void 0?u.path||"":x,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};m.relativePath.startsWith("/")&&(Ze(m.relativePath.startsWith(l),`Absolute route path "${m.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(l.length));let g=Ma([l,m.relativePath]),p=s.concat(m);u.children&&u.children.length>0&&(Ze(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),pg(u.children,n,p,g)),!(u.path==null&&!u.index)&&n.push({path:g,score:Jb(g,u.index),routesMeta:p})};return i.forEach((u,h)=>{var x;if(u.path===""||!((x=u.path)!=null&&x.includes("?")))o(u,h);else for(let m of yg(u.path))o(u,h,m)}),n}function yg(i){let n=i.split("/");if(n.length===0)return[];let[s,...l]=n,o=s.endsWith("?"),u=s.replace(/\?$/,"");if(l.length===0)return o?[u,""]:[u];let h=yg(l.join("/")),x=[];return x.push(...h.map(m=>m===""?u:[u,m].join("/"))),o&&x.push(...h),x.map(m=>i.startsWith("/")&&m===""?"/":m)}function Yb(i){i.sort((n,s)=>n.score!==s.score?s.score-n.score:Ib(n.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}var Fb=/^:[\w-]+$/,Pb=3,Qb=2,Xb=1,Kb=10,Zb=-2,Um=i=>i==="*";function Jb(i,n){let s=i.split("/"),l=s.length;return s.some(Um)&&(l+=Zb),n&&(l+=Qb),s.filter(o=>!Um(o)).reduce((o,u)=>o+(Fb.test(u)?Pb:u===""?Xb:Kb),l)}function Ib(i,n){return i.length===n.length&&i.slice(0,-1).every((l,o)=>l===n[o])?i[i.length-1]-n[n.length-1]:0}function Wb(i,n,s=!1){let{routesMeta:l}=i,o={},u="/",h=[];for(let x=0;x<l.length;++x){let m=l[x],g=x===l.length-1,p=u==="/"?n:n.slice(u.length)||"/",_=Ni({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},p),y=m.route;if(!_&&g&&s&&!l[l.length-1].route.index&&(_=Ni({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!_)return null;Object.assign(o,_.params),h.push({params:o,pathname:Ma([u,_.pathname]),pathnameBase:sp(Ma([u,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(u=Ma([u,_.pathnameBase]))}return h}function Ni(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[s,l]=ep(i.path,i.caseSensitive,i.end),o=n.match(s);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),x=o.slice(1);return{params:l.reduce((g,{paramName:p,isOptional:_},y)=>{if(p==="*"){let E=x[y]||"";h=u.slice(0,u.length-E.length).replace(/(.)\/+$/,"$1")}const A=x[y];return _&&!A?g[p]=void 0:g[p]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function ep(i,n=!1,s=!0){xa(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let l=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,x,m)=>(l.push({paramName:x,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(l.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),l]}function tp(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return xa(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),i}}function La(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,l=i.charAt(s);return l&&l!=="/"?null:i.slice(s)||"/"}function ap(i,n="/"){let{pathname:s,search:l="",hash:o=""}=typeof i=="string"?Bn(i):i;return{pathname:s?s.startsWith("/")?s:rp(s,n):n,search:lp(l),hash:ip(o)}}function rp(i,n){let s=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function Ic(i,n,s,l){return`Cannot include a '${i}' character in a manually specified \`to.${n}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function np(i){return i.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function vg(i){let n=np(i);return n.map((s,l)=>l===n.length-1?s.pathname:s.pathnameBase)}function _g(i,n,s,l=!1){let o;typeof i=="string"?o=Bn(i):(o={...i},Ze(!o.pathname||!o.pathname.includes("?"),Ic("?","pathname","search",o)),Ze(!o.pathname||!o.pathname.includes("#"),Ic("#","pathname","hash",o)),Ze(!o.search||!o.search.includes("#"),Ic("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,x;if(h==null)x=s;else{let _=n.length-1;if(!l&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}x=_>=0?n[_]:"/"}let m=ap(o,x),g=h&&h!=="/"&&h.endsWith("/"),p=(u||h===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(g||p)&&(m.pathname+="/"),m}var Ma=i=>i.join("/").replace(/\/\/+/g,"/"),sp=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),lp=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,ip=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function op(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var wg=["POST","PUT","PATCH","DELETE"];new Set(wg);var cp=["GET",...wg];new Set(cp);var $n=w.createContext(null);$n.displayName="DataRouter";var Ri=w.createContext(null);Ri.displayName="DataRouterState";var Sg=w.createContext({isTransitioning:!1});Sg.displayName="ViewTransition";var up=w.createContext(new Map);up.displayName="Fetchers";var dp=w.createContext(null);dp.displayName="Await";var ba=w.createContext(null);ba.displayName="Navigation";var Js=w.createContext(null);Js.displayName="Location";var pa=w.createContext({outlet:null,matches:[],isDataRoute:!1});pa.displayName="Route";var _u=w.createContext(null);_u.displayName="RouteError";function fp(i,{relative:n}={}){Ze(Is(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=w.useContext(ba),{hash:o,pathname:u,search:h}=Ws(i,{relative:n}),x=u;return s!=="/"&&(x=u==="/"?s:Ma([s,u])),l.createHref({pathname:x,search:h,hash:o})}function Is(){return w.useContext(Js)!=null}function za(){return Ze(Is(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Js).location}var jg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Eg(i){w.useContext(ba).static||w.useLayoutEffect(i)}function ia(){let{isDataRoute:i}=w.useContext(pa);return i?Np():hp()}function hp(){Ze(Is(),"useNavigate() may be used only in the context of a <Router> component.");let i=w.useContext($n),{basename:n,navigator:s}=w.useContext(ba),{matches:l}=w.useContext(pa),{pathname:o}=za(),u=JSON.stringify(vg(l)),h=w.useRef(!1);return Eg(()=>{h.current=!0}),w.useCallback((m,g={})=>{if(xa(h.current,jg),!h.current)return;if(typeof m=="number"){s.go(m);return}let p=_g(m,JSON.parse(u),o,g.relative==="path");i==null&&n!=="/"&&(p.pathname=p.pathname==="/"?n:Ma([n,p.pathname])),(g.replace?s.replace:s.push)(p,g.state,g)},[n,s,u,o,i])}w.createContext(null);function mp(){let{matches:i}=w.useContext(pa),n=i[i.length-1];return n?n.params:{}}function Ws(i,{relative:n}={}){let{matches:s}=w.useContext(pa),{pathname:l}=za(),o=JSON.stringify(vg(s));return w.useMemo(()=>_g(i,JSON.parse(o),l,n==="path"),[i,o,l,n])}function gp(i,n){return Ng(i,n)}function Ng(i,n,s,l){var U;Ze(Is(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=w.useContext(ba),{matches:u}=w.useContext(pa),h=u[u.length-1],x=h?h.params:{},m=h?h.pathname:"/",g=h?h.pathnameBase:"/",p=h&&h.route;{let $=p&&p.path||"";Tg(m,!p||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let _=za(),y;if(n){let $=typeof n=="string"?Bn(n):n;Ze(g==="/"||((U=$.pathname)==null?void 0:U.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),y=$}else y=_;let A=y.pathname||"/",E=A;if(g!=="/"){let $=g.replace(/^\//,"").split("/");E="/"+A.replace(/^\//,"").split("/").slice($.length).join("/")}let R=bg(i,{pathname:E});xa(p||R!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),xa(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=vp(R&&R.map($=>Object.assign({},$,{params:Object.assign({},x,$.params),pathname:Ma([g,o.encodeLocation?o.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Ma([g,o.encodeLocation?o.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),u,s,l);return n&&T?w.createElement(Js.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function xp(){let i=Ep(),n=op(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),s=i instanceof Error?i.stack:null,l="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:l},u={padding:"2px 4px",backgroundColor:l},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},n),s?w.createElement("pre",{style:o},s):null,h)}var bp=w.createElement(xp,null),pp=class extends w.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){console.error("React Router caught the following error during render",i,n)}render(){return this.state.error!==void 0?w.createElement(pa.Provider,{value:this.props.routeContext},w.createElement(_u.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yp({routeContext:i,match:n,children:s}){let l=w.useContext($n);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(pa.Provider,{value:i},s)}function vp(i,n=[],s=null,l=null){if(i==null){if(!s)return null;if(s.errors)i=s.matches;else if(n.length===0&&!s.initialized&&s.matches.length>0)i=s.matches;else return null}let o=i,u=s==null?void 0:s.errors;if(u!=null){let m=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);Ze(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,x=-1;if(s)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(x=m),g.route.id){let{loaderData:p,errors:_}=s,y=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!_||_[g.route.id]===void 0);if(g.route.lazy||y){h=!0,x>=0?o=o.slice(0,x+1):o=[o[0]];break}}}return o.reduceRight((m,g,p)=>{let _,y=!1,A=null,E=null;s&&(_=u&&g.route.id?u[g.route.id]:void 0,A=g.route.errorElement||bp,h&&(x<0&&p===0?(Tg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,E=null):x===p&&(y=!0,E=g.route.hydrateFallbackElement||null)));let R=n.concat(o.slice(0,p+1)),T=()=>{let U;return _?U=A:y?U=E:g.route.Component?U=w.createElement(g.route.Component,null):g.route.element?U=g.route.element:U=m,w.createElement(yp,{match:g,routeContext:{outlet:m,matches:R,isDataRoute:s!=null},children:U})};return s&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?w.createElement(pp,{location:s.location,revalidation:s.revalidation,component:A,error:_,children:T(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):T()},null)}function wu(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _p(i){let n=w.useContext($n);return Ze(n,wu(i)),n}function wp(i){let n=w.useContext(Ri);return Ze(n,wu(i)),n}function Sp(i){let n=w.useContext(pa);return Ze(n,wu(i)),n}function Su(i){let n=Sp(i),s=n.matches[n.matches.length-1];return Ze(s.route.id,`${i} can only be used on routes that contain a unique "id"`),s.route.id}function jp(){return Su("useRouteId")}function Ep(){var l;let i=w.useContext(_u),n=wp("useRouteError"),s=Su("useRouteError");return i!==void 0?i:(l=n.errors)==null?void 0:l[s]}function Np(){let{router:i}=_p("useNavigate"),n=Su("useNavigate"),s=w.useRef(!1);return Eg(()=>{s.current=!0}),w.useCallback(async(o,u={})=>{xa(s.current,jg),s.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:n,...u}))},[i,n])}var Mm={};function Tg(i,n,s){!n&&!Mm[i]&&(Mm[i]=!0,xa(!1,s))}w.memo(Tp);function Tp({routes:i,future:n,state:s}){return Ng(i,void 0,s,n)}function it(i){Ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ap({basename:i="/",children:n=null,location:s,navigationType:l="POP",navigator:o,static:u=!1}){Ze(!Is(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),x=w.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof s=="string"&&(s=Bn(s));let{pathname:m="/",search:g="",hash:p="",state:_=null,key:y="default"}=s,A=w.useMemo(()=>{let E=La(m,h);return E==null?null:{location:{pathname:E,search:g,hash:p,state:_,key:y},navigationType:l}},[h,m,g,p,_,y,l]);return xa(A!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:w.createElement(ba.Provider,{value:x},w.createElement(Js.Provider,{children:n,value:A}))}function Rp({children:i,location:n}){return gp(cu(i),n)}function cu(i,n=[]){let s=[];return w.Children.forEach(i,(l,o)=>{if(!w.isValidElement(l))return;let u=[...n,o];if(l.type===w.Fragment){s.push.apply(s,cu(l.props.children,u));return}Ze(l.type===it,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ze(!l.props.index||!l.props.children,"An index route cannot have child routes.");let h={id:l.props.id||u.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(h.children=cu(l.props.children,u)),s.push(h)}),s}var ji="get",Ei="application/x-www-form-urlencoded";function Ci(i){return i!=null&&typeof i.tagName=="string"}function Cp(i){return Ci(i)&&i.tagName.toLowerCase()==="button"}function Dp(i){return Ci(i)&&i.tagName.toLowerCase()==="form"}function kp(i){return Ci(i)&&i.tagName.toLowerCase()==="input"}function Op(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Up(i,n){return i.button===0&&(!n||n==="_self")&&!Op(i)}var bi=null;function Mp(){if(bi===null)try{new FormData(document.createElement("form"),0),bi=!1}catch{bi=!0}return bi}var Lp=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wc(i){return i!=null&&!Lp.has(i)?(xa(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ei}"`),null):i}function zp(i,n){let s,l,o,u,h;if(Dp(i)){let x=i.getAttribute("action");l=x?La(x,n):null,s=i.getAttribute("method")||ji,o=Wc(i.getAttribute("enctype"))||Ei,u=new FormData(i)}else if(Cp(i)||kp(i)&&(i.type==="submit"||i.type==="image")){let x=i.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||x.getAttribute("action");if(l=m?La(m,n):null,s=i.getAttribute("formmethod")||x.getAttribute("method")||ji,o=Wc(i.getAttribute("formenctype"))||Wc(x.getAttribute("enctype"))||Ei,u=new FormData(x,i),!Mp()){let{name:g,type:p,value:_}=i;if(p==="image"){let y=g?`${g}.`:"";u.append(`${y}x`,"0"),u.append(`${y}y`,"0")}else g&&u.append(g,_)}}else{if(Ci(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=ji,l=null,o=Ei,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:l,method:s.toLowerCase(),encType:o,formData:u,body:h}}function ju(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}async function qp(i,n){if(i.id in n)return n[i.id];try{let s=await import(i.module);return n[i.id]=s,s}catch(s){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bp(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function $p(i,n,s){let l=await Promise.all(i.map(async o=>{let u=n.routes[o.route.id];if(u){let h=await qp(u,s);return h.links?h.links():[]}return[]}));return Yp(l.flat(1).filter(Bp).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Lm(i,n,s,l,o,u){let h=(m,g)=>s[g]?m.route.id!==s[g].route.id:!0,x=(m,g)=>{var p;return s[g].pathname!==m.pathname||((p=s[g].route.path)==null?void 0:p.endsWith("*"))&&s[g].params["*"]!==m.params["*"]};return u==="assets"?n.filter((m,g)=>h(m,g)||x(m,g)):u==="data"?n.filter((m,g)=>{var _;let p=l.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(h(m,g)||x(m,g))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((_=s[0])==null?void 0:_.params)||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Hp(i,n,{includeHydrateFallback:s}={}){return Vp(i.map(l=>{let o=n.routes[l.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),s&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Vp(i){return[...new Set(i)]}function Gp(i){let n={},s=Object.keys(i).sort();for(let l of s)n[l]=i[l];return n}function Yp(i,n){let s=new Set;return new Set(n),i.reduce((l,o)=>{let u=JSON.stringify(Gp(o));return s.has(u)||(s.add(u),l.push({key:u,link:o})),l},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Fp=new Set([100,101,204,205]);function Pp(i,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname="_root.data":n&&La(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function Ag(){let i=w.useContext($n);return ju(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Qp(){let i=w.useContext(Ri);return ju(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Eu=w.createContext(void 0);Eu.displayName="FrameworkContext";function Rg(){let i=w.useContext(Eu);return ju(i,"You must render this element inside a <HydratedRouter> element"),i}function Xp(i,n){let s=w.useContext(Eu),[l,o]=w.useState(!1),[u,h]=w.useState(!1),{onFocus:x,onBlur:m,onMouseEnter:g,onMouseLeave:p,onTouchStart:_}=n,y=w.useRef(null);w.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let R=U=>{U.forEach($=>{h($.isIntersecting)})},T=new IntersectionObserver(R,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[i]),w.useEffect(()=>{if(l){let R=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(R)}}},[l]);let A=()=>{o(!0)},E=()=>{o(!1),h(!1)};return s?i!=="intent"?[u,y,{}]:[u,y,{onFocus:$s(x,A),onBlur:$s(m,E),onMouseEnter:$s(g,A),onMouseLeave:$s(p,E),onTouchStart:$s(_,A)}]:[!1,y,{}]}function $s(i,n){return s=>{i&&i(s),s.defaultPrevented||n(s)}}function Kp({page:i,...n}){let{router:s}=Ag(),l=w.useMemo(()=>bg(s.routes,i,s.basename),[s.routes,i,s.basename]);return l?w.createElement(Jp,{page:i,matches:l,...n}):null}function Zp(i){let{manifest:n,routeModules:s}=Rg(),[l,o]=w.useState([]);return w.useEffect(()=>{let u=!1;return $p(i,n,s).then(h=>{u||o(h)}),()=>{u=!0}},[i,n,s]),l}function Jp({page:i,matches:n,...s}){let l=za(),{manifest:o,routeModules:u}=Rg(),{basename:h}=Ag(),{loaderData:x,matches:m}=Qp(),g=w.useMemo(()=>Lm(i,n,m,o,l,"data"),[i,n,m,o,l]),p=w.useMemo(()=>Lm(i,n,m,o,l,"assets"),[i,n,m,o,l]),_=w.useMemo(()=>{if(i===l.pathname+l.search+l.hash)return[];let E=new Set,R=!1;if(n.forEach(U=>{var G;let $=o.routes[U.route.id];!$||!$.hasLoader||(!g.some(Z=>Z.route.id===U.route.id)&&U.route.id in x&&((G=u[U.route.id])!=null&&G.shouldRevalidate)||$.hasClientLoader?R=!0:E.add(U.route.id))}),E.size===0)return[];let T=Pp(i,h);return R&&E.size>0&&T.searchParams.set("_routes",n.filter(U=>E.has(U.route.id)).map(U=>U.route.id).join(",")),[T.pathname+T.search]},[h,x,l,o,g,n,i,u]),y=w.useMemo(()=>Hp(p,o),[p,o]),A=Zp(p);return w.createElement(w.Fragment,null,_.map(E=>w.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...s})),y.map(E=>w.createElement("link",{key:E,rel:"modulepreload",href:E,...s})),A.map(({key:E,link:R})=>w.createElement("link",{key:E,...R})))}function Ip(...i){return n=>{i.forEach(s=>{typeof s=="function"?s(n):s!=null&&(s.current=n)})}}var Cg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cg&&(window.__reactRouterVersion="7.6.1")}catch{}function Wp({basename:i,children:n,window:s}){let l=w.useRef();l.current==null&&(l.current=Bb({window:s,v5Compat:!0}));let o=l.current,[u,h]=w.useState({action:o.action,location:o.location}),x=w.useCallback(m=>{w.startTransition(()=>h(m))},[h]);return w.useLayoutEffect(()=>o.listen(x),[o,x]),w.createElement(Ap,{basename:i,children:n,location:u.location,navigationType:u.action,navigator:o})}var Dg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=w.forwardRef(function({onClick:n,discover:s="render",prefetch:l="none",relative:o,reloadDocument:u,replace:h,state:x,target:m,to:g,preventScrollReset:p,viewTransition:_,...y},A){let{basename:E}=w.useContext(ba),R=typeof g=="string"&&Dg.test(g),T,U=!1;if(typeof g=="string"&&R&&(T=g,Cg))try{let ne=new URL(window.location.href),ue=g.startsWith("//")?new URL(ne.protocol+g):new URL(g),be=La(ue.pathname,E);ue.origin===ne.origin&&be!=null?g=be+ue.search+ue.hash:U=!0}catch{xa(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=fp(g,{relative:o}),[G,Z,V]=Xp(l,y),te=ry(g,{replace:h,state:x,target:m,preventScrollReset:p,relative:o,viewTransition:_});function le(ne){n&&n(ne),ne.defaultPrevented||te(ne)}let se=w.createElement("a",{...y,...V,href:T||$,onClick:U||u?n:le,ref:Ip(A,Z),target:m,"data-discover":!R&&s==="render"?"true":void 0});return G&&!R?w.createElement(w.Fragment,null,se,w.createElement(Kp,{page:$})):se});Ge.displayName="Link";var ey=w.forwardRef(function({"aria-current":n="page",caseSensitive:s=!1,className:l="",end:o=!1,style:u,to:h,viewTransition:x,children:m,...g},p){let _=Ws(h,{relative:g.relative}),y=za(),A=w.useContext(Ri),{navigator:E,basename:R}=w.useContext(ba),T=A!=null&&oy(_)&&x===!0,U=E.encodeLocation?E.encodeLocation(_).pathname:_.pathname,$=y.pathname,G=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;s||($=$.toLowerCase(),G=G?G.toLowerCase():null,U=U.toLowerCase()),G&&R&&(G=La(G,R)||G);const Z=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let V=$===U||!o&&$.startsWith(U)&&$.charAt(Z)==="/",te=G!=null&&(G===U||!o&&G.startsWith(U)&&G.charAt(U.length)==="/"),le={isActive:V,isPending:te,isTransitioning:T},se=V?n:void 0,ne;typeof l=="function"?ne=l(le):ne=[l,V?"active":null,te?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ue=typeof u=="function"?u(le):u;return w.createElement(Ge,{...g,"aria-current":se,className:ne,ref:p,style:ue,to:h,viewTransition:x},typeof m=="function"?m(le):m)});ey.displayName="NavLink";var ty=w.forwardRef(({discover:i="render",fetcherKey:n,navigate:s,reloadDocument:l,replace:o,state:u,method:h=ji,action:x,onSubmit:m,relative:g,preventScrollReset:p,viewTransition:_,...y},A)=>{let E=ly(),R=iy(x,{relative:g}),T=h.toLowerCase()==="get"?"get":"post",U=typeof x=="string"&&Dg.test(x),$=G=>{if(m&&m(G),G.defaultPrevented)return;G.preventDefault();let Z=G.nativeEvent.submitter,V=(Z==null?void 0:Z.getAttribute("formmethod"))||h;E(Z||G.currentTarget,{fetcherKey:n,method:V,navigate:s,replace:o,state:u,relative:g,preventScrollReset:p,viewTransition:_})};return w.createElement("form",{ref:A,method:T,action:R,onSubmit:l?m:$,...y,"data-discover":!U&&i==="render"?"true":void 0})});ty.displayName="Form";function ay(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kg(i){let n=w.useContext($n);return Ze(n,ay(i)),n}function ry(i,{target:n,replace:s,state:l,preventScrollReset:o,relative:u,viewTransition:h}={}){let x=ia(),m=za(),g=Ws(i,{relative:u});return w.useCallback(p=>{if(Up(p,n)){p.preventDefault();let _=s!==void 0?s:Qs(m)===Qs(g);x(i,{replace:_,state:l,preventScrollReset:o,relative:u,viewTransition:h})}},[m,x,g,s,l,n,i,o,u,h])}var ny=0,sy=()=>`__${String(++ny)}__`;function ly(){let{router:i}=kg("useSubmit"),{basename:n}=w.useContext(ba),s=jp();return w.useCallback(async(l,o={})=>{let{action:u,method:h,encType:x,formData:m,body:g}=zp(l,n);if(o.navigate===!1){let p=o.fetcherKey||sy();await i.fetch(p,s,o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||x,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||x,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,n,s])}function iy(i,{relative:n}={}){let{basename:s}=w.useContext(ba),l=w.useContext(pa);Ze(l,"useFormAction must be used inside a RouteContext");let[o]=l.matches.slice(-1),u={...Ws(i||".",{relative:n})},h=za();if(i==null){u.search=h.search;let x=new URLSearchParams(u.search),m=x.getAll("index");if(m.some(p=>p==="")){x.delete("index"),m.filter(_=>_).forEach(_=>x.append("index",_));let p=x.toString();u.search=p?`?${p}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:Ma([s,u.pathname])),Qs(u)}function oy(i,n={}){let s=w.useContext(Sg);Ze(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=kg("useViewTransitionState"),o=Ws(i,{relative:n.relative});if(!s.isTransitioning)return!1;let u=La(s.currentLocation.pathname,l)||s.currentLocation.pathname,h=La(s.nextLocation.pathname,l)||s.nextLocation.pathname;return Ni(o.pathname,h)!=null||Ni(o.pathname,u)!=null}[...Fp];const cy="modulepreload",uy=function(i){return"/SignatureApp/"+i},zm={},zn=function(n,s,l){let o=Promise.resolve();if(s&&s.length>0){let h=function(g){return Promise.all(g.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),m=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));o=h(s.map(g=>{if(g=uy(g),g in zm)return;zm[g]=!0;const p=g.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":cy,p||(y.as="script"),y.crossOrigin="",y.href=g,m&&y.setAttribute("nonce",m),document.head.appendChild(y),p)return new Promise((A,E)=>{y.addEventListener("load",A),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(h){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=h,window.dispatchEvent(x),!x.defaultPrevented)throw h}return o.then(h=>{for(const x of h||[])x.status==="rejected"&&u(x.reason);return n().catch(u)})},dy=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>zn(async()=>{const{default:l}=await Promise.resolve().then(()=>Hn);return{default:l}},[]).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)};class Nu extends Error{constructor(n,s="FunctionsError",l){super(n),this.name=s,this.context=l}}class fy extends Nu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class hy extends Nu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class my extends Nu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var uu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(uu||(uu={}));var gy=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};class xy{constructor(n,{headers:s={},customFetch:l,region:o=uu.Any}={}){this.url=n,this.headers=s,this.region=o,this.fetch=dy(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var l;return gy(this,void 0,void 0,function*(){try{const{headers:o,method:u,body:h}=s;let x={},{region:m}=s;m||(m=this.region),m&&m!=="any"&&(x["x-region"]=m);let g;h&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",g=h):typeof h=="string"?(x["Content-Type"]="text/plain",g=h):typeof FormData<"u"&&h instanceof FormData?g=h:(x["Content-Type"]="application/json",g=JSON.stringify(h)));const p=yield this.fetch(`${this.url}/${n}`,{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),o),body:g}).catch(E=>{throw new fy(E)}),_=p.headers.get("x-relay-error");if(_&&_==="true")throw new hy(p);if(!p.ok)throw new my(p);let y=((l=p.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),A;return y==="application/json"?A=yield p.json():y==="application/octet-stream"?A=yield p.blob():y==="text/event-stream"?A=p:y==="multipart/form-data"?A=yield p.formData():A=yield p.text(),{data:A,error:null}}catch(o){return{data:null,error:o}}})}}var ht={},En={},Nn={},Tn={},An={},Rn={},by=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qn=by();const py=qn.fetch,Og=qn.fetch.bind(qn),Ug=qn.Headers,yy=qn.Request,vy=qn.Response,Hn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ug,Request:yy,Response:vy,default:Og,fetch:py},Symbol.toStringTag,{value:"Module"})),_y=Tb(Hn);var pi={},qm;function Mg(){if(qm)return pi;qm=1,Object.defineProperty(pi,"__esModule",{value:!0});class i extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return pi.default=i,pi}var Bm;function Lg(){if(Bm)return Rn;Bm=1;var i=Rn&&Rn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Rn,"__esModule",{value:!0});const n=i(_y),s=i(Mg());class l{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=Object.assign({},this.headers),this.headers[u]=h,this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const x=this.fetch;let m=x(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,_,y;let A=null,E=null,R=null,T=g.status,U=g.statusText;if(g.ok){if(this.method!=="HEAD"){const V=await g.text();V===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?E=V:E=JSON.parse(V))}const G=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),Z=(_=g.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");G&&Z&&Z.length>1&&(R=parseInt(Z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(A={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,R=null,T=406,U="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const G=await g.text();try{A=JSON.parse(G),Array.isArray(A)&&g.status===404&&(E=[],A=null,T=200,U="OK")}catch{g.status===404&&G===""?(T=204,U="No Content"):A={message:G}}if(A&&this.isMaybeSingle&&(!((y=A==null?void 0:A.details)===null||y===void 0)&&y.includes("0 rows"))&&(A=null,T=200,U="OK"),A&&this.shouldThrowOnError)throw new s.default(A)}return{error:A,data:E,count:R,status:T,statusText:U}});return this.shouldThrowOnError||(m=m.catch(g=>{var p,_,y;return{error:{message:`${(p=g==null?void 0:g.name)!==null&&p!==void 0?p:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(_=g==null?void 0:g.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(y=g==null?void 0:g.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),m.then(u,h)}returns(){return this}overrideTypes(){return this}}return Rn.default=l,Rn}var $m;function zg(){if($m)return An;$m=1;var i=An&&An.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(An,"__esModule",{value:!0});const n=i(Lg());class s extends n.default{select(o){let u=!1;const h=(o??"*").split("").map(x=>/\s/.test(x)&&!u?"":(x==='"'&&(u=!u),x)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:u=!0,nullsFirst:h,foreignTable:x,referencedTable:m=x}={}){const g=m?`${m}.order`:"order",p=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${p?`${p},`:""}${o}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:h=u}={}){const x=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(x,`${o}`),this}range(o,u,{foreignTable:h,referencedTable:x=h}={}){const m=typeof x>"u"?"offset":`${x}.offset`,g=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(g,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:u=!1,settings:h=!1,buffers:x=!1,wal:m=!1,format:g="text"}={}){var p;const _=[o?"analyze":null,u?"verbose":null,h?"settings":null,x?"buffers":null,m?"wal":null].filter(Boolean).join("|"),y=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${g}; for="${y}"; options=${_};`,g==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return An.default=s,An}var Hm;function Tu(){if(Hm)return Tn;Hm=1;var i=Tn&&Tn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Tn,"__esModule",{value:!0});const n=i(zg());class s extends n.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const h=Array.from(new Set(u)).map(x=>typeof x=="string"&&new RegExp("[,()]").test(x)?`"${x}"`:`${x}`).join(",");return this.url.searchParams.append(o,`in.(${h})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:h,type:x}={}){let m="";x==="plain"?m="pl":x==="phrase"?m="ph":x==="websearch"&&(m="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(o,`${m}fts${g}.${u}`),this}match(o){return Object.entries(o).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(o,u,h){return this.url.searchParams.append(o,`not.${u}.${h}`),this}or(o,{foreignTable:u,referencedTable:h=u}={}){const x=h?`${h}.or`:"or";return this.url.searchParams.append(x,`(${o})`),this}filter(o,u,h){return this.url.searchParams.append(o,`${u}.${h}`),this}}return Tn.default=s,Tn}var Vm;function qg(){if(Vm)return Nn;Vm=1;var i=Nn&&Nn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Nn,"__esModule",{value:!0});const n=i(Tu());class s{constructor(o,{headers:u={},schema:h,fetch:x}){this.url=o,this.headers=u,this.schema=h,this.fetch=x}select(o,{head:u=!1,count:h}={}){const x=u?"HEAD":"GET";let m=!1;const g=(o??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",g),h&&(this.headers.Prefer=`count=${h}`),new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:u,defaultToNull:h=!0}={}){const x="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),u&&m.push(`count=${u}`),h||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(o)){const g=o.reduce((p,_)=>p.concat(Object.keys(_)),[]);if(g.length>0){const p=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",p.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:u,ignoreDuplicates:h=!1,count:x,defaultToNull:m=!0}={}){const g="POST",p=[`resolution=${h?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&p.push(this.headers.Prefer),x&&p.push(`count=${x}`),m||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(o)){const _=o.reduce((y,A)=>y.concat(Object.keys(A)),[]);if(_.length>0){const y=[...new Set(_)].map(A=>`"${A}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:u}={}){const h="PATCH",x=[];return this.headers.Prefer&&x.push(this.headers.Prefer),u&&x.push(`count=${u}`),this.headers.Prefer=x.join(","),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const u="DELETE",h=[];return o&&h.push(`count=${o}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new n.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Nn.default=s,Nn}var Hs={},Vs={},Gm;function wy(){return Gm||(Gm=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.version=void 0,Vs.version="0.0.0-automated"),Vs}var Ym;function Sy(){if(Ym)return Hs;Ym=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.DEFAULT_HEADERS=void 0;const i=wy();return Hs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i.version}`},Hs}var Fm;function jy(){if(Fm)return En;Fm=1;var i=En&&En.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(En,"__esModule",{value:!0});const n=i(qg()),s=i(Tu()),l=Sy();class o{constructor(h,{headers:x={},schema:m,fetch:g}={}){this.url=h,this.headers=Object.assign(Object.assign({},l.DEFAULT_HEADERS),x),this.schemaName=m,this.fetch=g}from(h){const x=new URL(`${this.url}/${h}`);return new n.default(x,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new o(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,x={},{head:m=!1,get:g=!1,count:p}={}){let _;const y=new URL(`${this.url}/rpc/${h}`);let A;m||g?(_=m?"HEAD":"GET",Object.entries(x).filter(([R,T])=>T!==void 0).map(([R,T])=>[R,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([R,T])=>{y.searchParams.append(R,T)})):(_="POST",A=x);const E=Object.assign({},this.headers);return p&&(E.Prefer=`count=${p}`),new s.default({method:_,url:y,headers:E,schema:this.schemaName,body:A,fetch:this.fetch,allowEmpty:!1})}}return En.default=o,En}var Pm;function Ey(){if(Pm)return ht;Pm=1;var i=ht&&ht.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.PostgrestError=ht.PostgrestBuilder=ht.PostgrestTransformBuilder=ht.PostgrestFilterBuilder=ht.PostgrestQueryBuilder=ht.PostgrestClient=void 0;const n=i(jy());ht.PostgrestClient=n.default;const s=i(qg());ht.PostgrestQueryBuilder=s.default;const l=i(Tu());ht.PostgrestFilterBuilder=l.default;const o=i(zg());ht.PostgrestTransformBuilder=o.default;const u=i(Lg());ht.PostgrestBuilder=u.default;const h=i(Mg());return ht.PostgrestError=h.default,ht.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:h.default},ht}var Ny=Ey();const Ty=Nb(Ny),{PostgrestClient:Ay,PostgrestQueryBuilder:S_,PostgrestFilterBuilder:j_,PostgrestTransformBuilder:E_,PostgrestBuilder:N_,PostgrestError:T_}=Ty,Ry="2.11.2",Cy={"X-Client-Info":`realtime-js/${Ry}`},Dy="1.0.0",Bg=1e4,ky=1e3;var Ln;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Ln||(Ln={}));var Gt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Gt||(Gt={}));var na;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(na||(na={}));var du;(function(i){i.websocket="websocket"})(du||(du={}));var zr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(zr||(zr={}));class Oy{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),l=new TextDecoder;return this._decodeBroadcast(n,s,l)}_decodeBroadcast(n,s,l){const o=s.getUint8(1),u=s.getUint8(2);let h=this.HEADER_LENGTH+2;const x=l.decode(n.slice(h,h+o));h=h+o;const m=l.decode(n.slice(h,h+u));h=h+u;const g=JSON.parse(l.decode(n.slice(h,n.byteLength)));return{ref:null,topic:x,event:m,payload:g}}}class $g{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ve||(Ve={}));const Qm=(i,n,s={})=>{var l;const o=(l=s.skipTypes)!==null&&l!==void 0?l:[];return Object.keys(n).reduce((u,h)=>(u[h]=Uy(h,i,n,o),u),{})},Uy=(i,n,s,l)=>{const o=n.find(x=>x.name===i),u=o==null?void 0:o.type,h=s[i];return u&&!l.includes(u)?Hg(u,h):fu(h)},Hg=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return qy(n,s)}switch(i){case Ve.bool:return My(n);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return Ly(n);case Ve.json:case Ve.jsonb:return zy(n);case Ve.timestamp:return By(n);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return fu(n);default:return fu(n)}},fu=i=>i,My=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Ly=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},zy=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},qy=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,l=i[s];if(i[0]==="{"&&l==="}"){let u;const h=i.slice(1,s);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(x=>Hg(n,x))}return i},By=i=>typeof i=="string"?i.replace(" ","T"):i,Vg=i=>{let n=i;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class eu{constructor(n,s,l={},o=Bg){this.channel=n,this.event=s,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var l;return this._hasReceived(n)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Xm;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Xm||(Xm={}));class Ys{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:u,onLeave:h,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ys.syncState(this.state,o,u,h),this.pendingDiffs.forEach(m=>{this.state=Ys.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],x()}),this.channel._on(l.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ys.syncDiff(this.state,o,u,h),x())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,l,o){const u=this.cloneDeep(n),h=this.transformState(s),x={},m={};return this.map(u,(g,p)=>{h[g]||(m[g]=p)}),this.map(h,(g,p)=>{const _=u[g];if(_){const y=p.map(T=>T.presence_ref),A=_.map(T=>T.presence_ref),E=p.filter(T=>A.indexOf(T.presence_ref)<0),R=_.filter(T=>y.indexOf(T.presence_ref)<0);E.length>0&&(x[g]=E),R.length>0&&(m[g]=R)}else x[g]=p}),this.syncDiff(u,{joins:x,leaves:m},l,o)}static syncDiff(n,s,l,o){const{joins:u,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(u,(x,m)=>{var g;const p=(g=n[x])!==null&&g!==void 0?g:[];if(n[x]=this.cloneDeep(m),p.length>0){const _=n[x].map(A=>A.presence_ref),y=p.filter(A=>_.indexOf(A.presence_ref)<0);n[x].unshift(...y)}l(x,p,m)}),this.map(h,(x,m)=>{let g=n[x];if(!g)return;const p=m.map(_=>_.presence_ref);g=g.filter(_=>p.indexOf(_.presence_ref)<0),n[x]=g,o(x,g,m),g.length===0&&delete n[x]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(l=>s(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,l)=>{const o=n[l];return"metas"in o?s[l]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[l]=o,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Km;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Km||(Km={}));var Zm;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Zm||(Zm={}));var Ua;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ua||(Ua={}));class Au{constructor(n,s={config:{}},l){this.topic=n,this.params=s,this.socket=l,this.bindings={},this.state=Gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new eu(this,na.join,this.params,this.timeout),this.rejoinTimer=new $g(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(na.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new Ys(this),this.broadcastEndpointURL=Vg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var l,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:u,presence:h,private:x}}=this.params;this._onError(p=>n==null?void 0:n(Ua.CHANNEL_ERROR,p)),this._onClose(()=>n==null?void 0:n(Ua.CLOSED));const m={},g={broadcast:u,presence:h,postgres_changes:(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(p=>p.filter))!==null&&o!==void 0?o:[],private:x};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var _;if(this.socket.setAuth(),p===void 0){n==null||n(Ua.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,A=(_=y==null?void 0:y.length)!==null&&_!==void 0?_:0,E=[];for(let R=0;R<A;R++){const T=y[R],{filter:{event:U,schema:$,table:G,filter:Z}}=T,V=p&&p[R];if(V&&V.event===U&&V.schema===$&&V.table===G&&V.filter===Z)E.push(Object.assign(Object.assign({},T),{id:V.id}));else{this.unsubscribe(),n==null||n(Ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,n&&n(Ua.SUBSCRIBED);return}}).receive("error",p=>{n==null||n(Ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,l){return this._on(n,s,l)}async send(n,s={}){var l,o;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:h}=n,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,x,m;const g=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(x=(h=this.params)===null||h===void 0?void 0:h.config)===null||x===void 0?void 0:x.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Gt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(na.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(l=>{const o=new eu(this,na.leave,{},n);o.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(n,s,l){const o=new AbortController,u=setTimeout(()=>o.abort(),l),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(u),h}_push(n,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new eu(this,n,s,l);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(n,s,l){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,l){var o,u;const h=n.toLocaleLowerCase(),{close:x,error:m,leave:g,join:p}=na;if(l&&[x,m,g,p].indexOf(h)>=0&&l!==this._joinRef())return;let y=this._onMessage(h,s,l);if(s&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(A=>{var E,R,T;return((E=A.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(R=A.filter)===null||R===void 0?void 0:R.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===h}).map(A=>A.callback(y,l)):(u=this.bindings[h])===null||u===void 0||u.filter(A=>{var E,R,T,U,$,G;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in A){const Z=A.id,V=(E=A.filter)===null||E===void 0?void 0:E.event;return Z&&((R=s.ids)===null||R===void 0?void 0:R.includes(Z))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((T=s.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const Z=($=(U=A==null?void 0:A.filter)===null||U===void 0?void 0:U.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return Z==="*"||Z===((G=s==null?void 0:s.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===h}).map(A=>{if(typeof y=="object"&&"ids"in y){const E=y.data,{schema:R,table:T,commit_timestamp:U,type:$,errors:G}=E;y=Object.assign(Object.assign({},{schema:R,table:T,commit_timestamp:U,eventType:$,new:{},old:{},errors:G}),this._getPayloadRecords(E))}A.callback(y,l)})}_isClosed(){return this.state===Gt.closed}_isJoined(){return this.state===Gt.joined}_isJoining(){return this.state===Gt.joining}_isLeaving(){return this.state===Gt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,l){const o=n.toLocaleLowerCase(),u={type:o,filter:s,callback:l};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(n,s){const l=n.toLocaleLowerCase();return this.bindings[l]=this.bindings[l].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Au.isEqual(o.filter,s))}),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const l in n)if(n[l]!==s[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(na.close,{},n)}_onError(n){this._on(na.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=Qm(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=Qm(n.columns,n.old_record)),s}}const $y=()=>{},Hy=typeof WebSocket<"u",Vy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gy{constructor(n,s){var l;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Cy,this.params={},this.timeout=Bg,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=$y,this.conn=null,this.sendBuffer=[],this.serializer=new Oy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let h;return u?h=u:typeof fetch>"u"?h=(...x)=>zn(async()=>{const{default:m}=await Promise.resolve().then(()=>Hn);return{default:m}},void 0).then(({default:m})=>m(...x)):h=fetch,(...x)=>h(...x)},this.endPoint=`${n}/${du.websocket}`,this.httpEndpoint=Vg(n),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const o=(l=s==null?void 0:s.params)===null||l===void 0?void 0:l.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(u,h)=>h(JSON.stringify(u)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $g(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Hy){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Yy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),zn(async()=>{const{default:n}=await import("./browser-x1nLkbDG.js").then(s=>s.b);return{default:n}},[]).then(({default:n})=>{this.conn=new n(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Dy}))}disconnect(n,s){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),n}log(n,s,l){this.logger(n,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Ln.connecting:return zr.Connecting;case Ln.open:return zr.Open;case Ln.closing:return zr.Closing;default:return zr.Closed}}isConnected(){return this.connectionState()===zr.Open}channel(n,s={config:{}}){const l=new Au(`realtime:${n}`,s,this);return this.channels.push(l),l}push(n){const{topic:s,event:l,payload:o,ref:u}=n,h=()=>{this.encode(n,x=>{var m;(m=this.conn)===null||m===void 0||m.send(x)})};this.log("push",`${s} ${l} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){let s=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let l=null;try{l=JSON.parse(atob(s.split(".")[1]))}catch{}if(l&&l.exp&&!(Math.floor(Date.now()/1e3)-l.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${l.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${l.exp}`);this.accessTokenValue=s,this.channels.forEach(o=>{s&&o.updateJoinPayload({access_token:s}),o.joinedOnce&&o._isJoined()&&o._push(na.access_token,{access_token:s})})}}async sendHeartbeat(){var n;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(n=this.conn)===null||n===void 0||n.close(ky,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s._joinRef()!==n._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,s=>{let{topic:l,event:o,payload:u,ref:h}=s;h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${l} ${o} ${h&&"("+h+")"||""}`,u),this.channels.filter(x=>x._isMember(l)).forEach(x=>x._trigger(o,u,h)),this.stateChangeCallbacks.message.forEach(x=>x(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(n=>n())}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(n))}_onConnError(n){this.log("transport",n.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(na.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const l=n.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${n}${l}${o}`}_workerObjectUrl(n){let s;if(n)s=n;else{const l=new Blob([Vy],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}}class Yy{constructor(n,s,l){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ln.connecting,this.send=()=>{},this.url=null,this.url=n,this.close=l.close}}class Ru extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function mt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Fy extends Ru{constructor(n,s){super(n),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class hu extends Ru{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Py=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const Gg=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>zn(async()=>{const{default:l}=await Promise.resolve().then(()=>Hn);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)},Qy=()=>Py(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zn(()=>Promise.resolve().then(()=>Hn),void 0)).Response:Response}),mu=i=>{if(Array.isArray(i))return i.map(s=>mu(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,l])=>{const o=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[o]=mu(l)}),n};var qr=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const tu=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Xy=(i,n,s)=>qr(void 0,void 0,void 0,function*(){const l=yield Qy();i instanceof l&&!(s!=null&&s.noResolveJson)?i.json().then(o=>{n(new Fy(tu(o),i.status||500))}).catch(o=>{n(new hu(tu(o),o))}):n(new hu(tu(i),i))}),Ky=(i,n,s,l)=>{const o={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),l&&(o.body=JSON.stringify(l)),Object.assign(Object.assign({},o),s))};function el(i,n,s,l,o,u){return qr(this,void 0,void 0,function*(){return new Promise((h,x)=>{i(s,Ky(n,l,o,u)).then(m=>{if(!m.ok)throw m;return l!=null&&l.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>Xy(m,x,l))})})}function Ti(i,n,s,l){return qr(this,void 0,void 0,function*(){return el(i,"GET",n,s,l)})}function fr(i,n,s,l,o){return qr(this,void 0,void 0,function*(){return el(i,"POST",n,l,o,s)})}function Zy(i,n,s,l,o){return qr(this,void 0,void 0,function*(){return el(i,"PUT",n,l,o,s)})}function Jy(i,n,s,l){return qr(this,void 0,void 0,function*(){return el(i,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),l)})}function Yg(i,n,s,l,o){return qr(this,void 0,void 0,function*(){return el(i,"DELETE",n,l,o,s)})}var Mt=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const Iy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wy{constructor(n,s={},l,o){this.url=n,this.headers=s,this.bucketId=l,this.fetch=Gg(o)}uploadOrUpdate(n,s,l,o){return Mt(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Jm),o);let x=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&l instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",l)):typeof FormData<"u"&&l instanceof FormData?(u=l,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m))):(u=l,x["cache-control"]=`max-age=${h.cacheControl}`,x["content-type"]=h.contentType,m&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o!=null&&o.headers&&(x=Object.assign(Object.assign({},x),o.headers));const g=this._removeEmptyFolders(s),p=this._getFinalPath(g),_=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:n,body:u,headers:x},h!=null&&h.duplex?{duplex:h.duplex}:{})),y=yield _.json();return _.ok?{data:{path:g,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(u){if(mt(u))return{data:null,error:u};throw u}})}upload(n,s,l){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,l)})}uploadToSignedUrl(n,s,l,o){return Mt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),x=new URL(this.url+`/object/upload/sign/${h}`);x.searchParams.set("token",s);try{let m;const g=Object.assign({upsert:Jm.upsert},o),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&l instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",l)):typeof FormData<"u"&&l instanceof FormData?(m=l,m.append("cacheControl",g.cacheControl)):(m=l,p["cache-control"]=`max-age=${g.cacheControl}`,p["content-type"]=g.contentType);const _=yield this.fetch(x.toString(),{method:"PUT",body:m,headers:p}),y=yield _.json();return _.ok?{data:{path:u,fullPath:y.Key},error:null}:{data:null,error:y}}catch(m){if(mt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(n,s){return Mt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n);const o=Object.assign({},this.headers);s!=null&&s.upsert&&(o["x-upsert"]="true");const u=yield fr(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:o}),h=new URL(this.url+u.url),x=h.searchParams.get("token");if(!x)throw new Ru("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:x},error:null}}catch(l){if(mt(l))return{data:null,error:l};throw l}})}update(n,s,l){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,l)})}move(n,s,l){return Mt(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}copy(n,s,l){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}createSignedUrl(n,s,l){return Mt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),u=yield fr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:s},l!=null&&l.transform?{transform:l.transform}:{}),{headers:this.headers});const h=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}createSignedUrls(n,s,l){return Mt(this,void 0,void 0,function*(){try{const o=yield fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return{data:o.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}download(n,s){return Mt(this,void 0,void 0,function*(){const o=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),h=u?`?${u}`:"";try{const x=this._getFinalPath(n);return{data:yield(yield Ti(this.fetch,`${this.url}/${o}/${x}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(x){if(mt(x))return{data:null,error:x};throw x}})}info(n){return Mt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const l=yield Ti(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:mu(l),error:null}}catch(l){if(mt(l))return{data:null,error:l};throw l}})}exists(n){return Mt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Jy(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(mt(l)&&l instanceof hu){const o=l.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:l}}throw l}})}getPublicUrl(n,s){const l=this._getFinalPath(n),o=[],u=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&o.push(u);const x=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});m!==""&&o.push(m);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${l}${g}`)}}}remove(n){return Mt(this,void 0,void 0,function*(){try{return{data:yield Yg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}list(n,s,l){return Mt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Iy),s),{prefix:n||""});return{data:yield fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},l),error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const ev="2.7.1",tv={"X-Client-Info":`storage-js/${ev}`};var Cn=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};class av{constructor(n,s={},l){this.url=n,this.headers=Object.assign(Object.assign({},tv),s),this.fetch=Gg(l)}listBuckets(){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}getBucket(n){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ti(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return Cn(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(mt(l))return{data:null,error:l};throw l}})}updateBucket(n,s){return Cn(this,void 0,void 0,function*(){try{return{data:yield Zy(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(mt(l))return{data:null,error:l};throw l}})}emptyBucket(n){return Cn(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return Cn(this,void 0,void 0,function*(){try{return{data:yield Yg(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}}class rv extends av{constructor(n,s={},l){super(n,s,l)}from(n){return new Wy(this.url,this.headers,n,this.fetch)}}const nv="2.49.8";let Gs="";typeof Deno<"u"?Gs="deno":typeof document<"u"?Gs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gs="react-native":Gs="node";const sv={"X-Client-Info":`supabase-js-${Gs}/${nv}`},lv={headers:sv},iv={schema:"public"},ov={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cv={};var uv=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};const dv=i=>{let n;return i?n=i:typeof fetch>"u"?n=Og:n=fetch,(...s)=>n(...s)},fv=()=>typeof Headers>"u"?Ug:Headers,hv=(i,n,s)=>{const l=dv(s),o=fv();return(u,h)=>uv(void 0,void 0,void 0,function*(){var x;const m=(x=yield n())!==null&&x!==void 0?x:i;let g=new o(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),l(u,Object.assign(Object.assign({},h),{headers:g}))})};var mv=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};function gv(i){return i.endsWith("/")?i:i+"/"}function xv(i,n){var s,l;const{db:o,auth:u,realtime:h,global:x}=i,{db:m,auth:g,realtime:p,global:_}=n,y={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},p),h),global:Object.assign(Object.assign(Object.assign({},_),x),{headers:Object.assign(Object.assign({},(s=_==null?void 0:_.headers)!==null&&s!==void 0?s:{}),(l=x==null?void 0:x.headers)!==null&&l!==void 0?l:{})}),accessToken:()=>mv(this,void 0,void 0,function*(){return""})};return i.accessToken?y.accessToken=i.accessToken:delete y.accessToken,y}const Fg="2.69.1",Un=30*1e3,gu=3,au=gu*Un,bv="http://localhost:9999",pv="supabase.auth.token",yv={"X-Client-Info":`gotrue-js/${Fg}`},xu="X-Supabase-Api-Version",Pg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_v=6e5;class Cu extends Error{constructor(n,s,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function ye(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class wv extends Cu{constructor(n,s,l){super(n,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function Sv(i){return ye(i)&&i.name==="AuthApiError"}class Qg extends Cu{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class mr extends Cu{constructor(n,s,l,o){super(n,l,o),this.name=s,this.status=l}}class ur extends mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jv(i){return ye(i)&&i.name==="AuthSessionMissingError"}class ru extends mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yi extends mr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class vi extends mr{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ev(i){return ye(i)&&i.name==="AuthImplicitGrantRedirectError"}class Im extends mr{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bu extends mr{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function nu(i){return ye(i)&&i.name==="AuthRetryableFetchError"}class Wm extends mr{constructor(n,s,l){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class Fs extends mr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const eg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tg=` 	
\r=`.split(""),Nv=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<tg.length;n+=1)i[tg[n].charCodeAt(0)]=-2;for(let n=0;n<eg.length;n+=1)i[eg[n].charCodeAt(0)]=n;return i})();function Xg(i,n,s){const l=Nv[i];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function ag(i){const n=[],s=h=>{n.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{Rv(h,l,s)};for(let h=0;h<i.length;h+=1)Xg(i.charCodeAt(h),o,u);return n.join("")}function Tv(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Av(i,n){for(let s=0;s<i.length;s+=1){let l=i.charCodeAt(s);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(i.charCodeAt(s+1)-56320&65535|o)+65536,s+=1}Tv(l,n)}}function Rv(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let l=1;l<6;l+=1)if((i>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function Cv(i){const n=[],s={queue:0,queuedBits:0},l=o=>{n.push(o)};for(let o=0;o<i.length;o+=1)Xg(i.charCodeAt(o),s,l);return new Uint8Array(n)}function Dv(i){const n=[];return Av(i,s=>n.push(s)),new Uint8Array(n)}function kv(i){return Math.round(Date.now()/1e3)+i}function Ov(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i=="x"?n:n&3|8).toString(16)})}const ga=()=>typeof window<"u"&&typeof document<"u",Ur={tested:!1,writable:!1},Ps=()=>{if(!ga())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ur.tested)return Ur.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Ur.tested=!0,Ur.writable=!0}catch{Ur.tested=!0,Ur.writable=!1}return Ur.writable};function Uv(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,u)=>{n[u]=o})}catch{}return s.searchParams.forEach((l,o)=>{n[o]=l}),n}const Kg=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...s)=>zn(async()=>{const{default:l}=await Promise.resolve().then(()=>Hn);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)},Mv=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Zg=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},_i=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},wi=async(i,n)=>{await i.removeItem(n)};class Di{constructor(){this.promise=new Di.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Di.promiseConstructor=Promise;function su(i){const n=i.split(".");if(n.length!==3)throw new Fs("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!vv.test(n[l]))throw new Fs("JWT not in base64url format");return{header:JSON.parse(ag(n[0])),payload:JSON.parse(ag(n[1])),signature:Cv(n[2]),raw:{header:n[0],payload:n[1]}}}async function Lv(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function zv(i,n){return new Promise((l,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await i(u);if(!n(u,null,h)){l(h);return}}catch(h){if(!n(u,h)){o(h);return}}})()})}function qv(i){return("0"+i.toString(16)).substr(-2)}function Bv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let o="";for(let u=0;u<56;u++)o+=s.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(n),Array.from(n,qv).join("")}async function $v(i){const s=new TextEncoder().encode(i),l=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(l);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function Hv(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await $v(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dn(i,n,s=!1){const l=Bv();let o=l;s&&(o+="/PASSWORD_RECOVERY"),await Zg(i,`${n}-code-verifier`,o);const u=await Hv(l);return[u,l===u?"plain":"s256"]}const Vv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gv(i){const n=i.headers.get(xu);if(!n||!n.match(Vv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Yv(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Fv(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Pv=function(i,n){var s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(s[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(i);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(i,l[o])&&(s[l[o]]=i[l[o]]);return s};const Lr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Qv=[502,503,504];async function rg(i){var n;if(!Mv(i))throw new bu(Lr(i),0);if(Qv.includes(i.status))throw new bu(Lr(i),i.status);let s;try{s=await i.json()}catch(u){throw new Qg(Lr(u),u)}let l;const o=Gv(i);if(o&&o.getTime()>=Pg["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new Wm(Lr(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new ur}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Wm(Lr(s),i.status,s.weak_password.reasons);throw new wv(Lr(s),i.status||500,l)}const Xv=(i,n,s,l)=>{const o={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),s))};async function Te(i,n,s,l){var o;const u=Object.assign({},l==null?void 0:l.headers);u[xu]||(u[xu]=Pg["2024-01-01"].name),l!=null&&l.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const h=(o=l==null?void 0:l.query)!==null&&o!==void 0?o:{};l!=null&&l.redirectTo&&(h.redirect_to=l.redirectTo);const x=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await Kv(i,n,s+x,{headers:u,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(m):{data:Object.assign({},m),error:null}}async function Kv(i,n,s,l,o,u){const h=Xv(n,l,o,u);let x;try{x=await i(s,Object.assign({},h))}catch(m){throw console.error(m),new bu(Lr(m),0)}if(x.ok||await rg(x),l!=null&&l.noResolveJson)return x;try{return await x.json()}catch(m){await rg(m)}}function dr(i){var n;let s=null;Wv(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=kv(i.expires_in)));const l=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:l},error:null}}function ng(i){const n=dr(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(n.data.weak_password=i.weak_password),n}function hr(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function Zv(i){return{data:i,error:null}}function Jv(i){const{action_link:n,email_otp:s,hashed_token:l,redirect_to:o,verification_type:u}=i,h=Pv(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:n,email_otp:s,hashed_token:l,redirect_to:o,verification_type:u},m=Object.assign({},h);return{data:{properties:x,user:m},error:null}}function Iv(i){return i}function Wv(i){return i.access_token&&i.refresh_token&&i.expires_in}var e1=function(i,n){var s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(s[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(i);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(i,l[o])&&(s[l[o]]=i[l[o]]);return s};class t1{constructor({url:n="",headers:s={},fetch:l}){this.url=n,this.headers=s,this.fetch=Kg(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s="global"){try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(ye(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,s={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:hr})}catch(l){if(ye(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:s}=n,l=e1(n,["options"]),o=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(o.new_email=l==null?void 0:l.newEmail,delete o.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Jv,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ye(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:hr})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,l,o,u,h,x,m;try{const g={nextPage:null,lastPage:0,total:0},p=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(u=(o=n==null?void 0:n.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Iv});if(p.error)throw p.error;const _=await p.json(),y=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,A=(m=(x=p.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&m!==void 0?m:[];return A.length>0&&(A.forEach(E=>{const R=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);g[`${T}Page`]=R}),g.total=parseInt(y)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(ye(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:hr})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:hr})}catch(l){if(ye(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,s=!1){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:hr})}catch(l){if(ye(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){try{const{data:s,error:l}=await Te(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:l}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _deleteFactor(n){try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}}const a1={getItem:i=>Ps()?globalThis.localStorage.getItem(i):null,setItem:(i,n)=>{Ps()&&globalThis.localStorage.setItem(i,n)},removeItem:i=>{Ps()&&globalThis.localStorage.removeItem(i)}};function sg(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}function r1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kn={debug:!!(globalThis&&Ps()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class n1 extends Jg{}async function s1(i,n,s){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await s()}finally{kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(n===0)throw kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new n1(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(kn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}r1();const l1={url:bv,storageKey:pv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lg(i,n,s){return await s()}class Xs{constructor(n){var s,l;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xs.nextInstanceID,Xs.nextInstanceID+=1,this.instanceID>0&&ga()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},l1),n);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new t1({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Kg(o.fetch),this.lock=o.lock||lg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:ga()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=s1:this.lock=lg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:Ps()?this.storage=a1:(this.memoryStorage={},this.storage=sg(this.memoryStorage)):(this.memoryStorage={},this.storage=sg(this.memoryStorage)),ga()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fg}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=Uv(window.location.href);let l="none";if(this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce"),ga()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:u}=await this._getSessionFromURL(s,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Ev(u)){const m=(n=u.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:x}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",x),await this._saveSession(h),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ye(s)?{error:s}:{error:new Qg("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,l,o;try{const u=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=n==null?void 0:n.options)===null||o===void 0?void 0:o.captchaToken}},xform:dr}),{data:h,error:x}=u;if(x||!h)return{data:{user:null,session:null},error:x};const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(u){if(ye(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var s,l,o;try{let u;if("email"in n){const{email:p,password:_,options:y}=n;let A=null,E=null;this.flowType==="pkce"&&([A,E]=await Dn(this.storage,this.storageKey)),u=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:_,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:A,code_challenge_method:E},xform:dr})}else if("phone"in n){const{phone:p,password:_,options:y}=n;u=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:_,data:(l=y==null?void 0:y.data)!==null&&l!==void 0?l:{},channel:(o=y==null?void 0:y.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:dr})}else throw new yi("You must provide either an email or phone number and a password");const{data:h,error:x}=u;if(x||!h)return{data:{user:null,session:null},error:x};const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(u){if(ye(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:h,options:x}=n;s=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ng})}else if("phone"in n){const{phone:u,password:h,options:x}=n;s=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ng})}else throw new yi("You must provide either an email or phone number and a password");const{data:l,error:o}=s;return o?{data:{user:null,session:null},error:o}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ru}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,l,o,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async _exchangeCodeForSession(n){const s=await _i(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(s??"").split("/");try{const{data:u,error:h}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:dr});if(await wi(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new ru}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:h})}catch(u){if(ye(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:s,provider:l,token:o,access_token:u,nonce:h}=n,x=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:dr}),{data:m,error:g}=x;return g?{data:{user:null,session:null},error:g}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new ru}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:g})}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,l,o,u,h;try{if("email"in n){const{email:x,options:m}=n;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Dn(this.storage,this.storageKey));const{error:_}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:p},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in n){const{phone:x,options:m}=n,{data:g,error:p}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:p}}throw new yi("You must provide either an email or phone number.")}catch(x){if(ye(x))return{data:{user:null,session:null},error:x};throw x}}async verifyOtp(n){var s,l;try{let o,u;"options"in n&&(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:x}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:dr});if(x)throw x;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(o){if(ye(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(n){var s,l,o;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Dn(this.storage,this.storageKey)),await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=n==null?void 0:n.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Zv})}catch(u){if(ye(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:l}=n;if(l)throw l;if(!s)throw new ur;const{error:o}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:o}})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:l,type:o,options:u}=n,{error:h}=await Te(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:l,type:o,options:u}=n,{data:h,error:x}=await Te(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:x}}throw new yi("You must provide either an email or phone number and a type")}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await _i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<au:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.storage.isServer){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(m,g,p)=>(!h&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,g,p))})}return{data:{session:n},error:null}}const{session:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:hr}):await this._useSession(async s=>{var l,o,u;const{data:h,error:x}=s;if(x)throw x;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ur}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:hr})})}catch(s){if(ye(s))return jv(s)&&(await this._removeSession(),await wi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async l=>{const{data:o,error:u}=l;if(u)throw u;if(!o.session)throw new ur;const h=o.session;let x=null,m=null;this.flowType==="pkce"&&n.email!=null&&([x,m]=await Dn(this.storage,this.storageKey));const{data:g,error:p}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:x,code_challenge_method:m}),jwt:h.access_token,xform:hr});if(p)throw p;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(l){if(ye(l))return{data:{user:null},error:l};throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new ur;const s=Date.now()/1e3;let l=s,o=!0,u=null;const{payload:h}=su(n.access_token);if(h.exp&&(l=h.exp,o=l<=s),o){const{session:x,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!x)return{data:{user:null,session:null},error:null};u=x}else{const{data:x,error:m}=await this._getUser(n.access_token);if(m)throw m;u={access_token:n.access_token,refresh_token:n.refresh_token,user:x.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(s){if(ye(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var l;if(!n){const{data:h,error:x}=s;if(x)throw x;n=(l=h.session)!==null&&l!==void 0?l:void 0}if(!(n!=null&&n.refresh_token))throw new ur;const{session:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ye(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!ga())throw new vi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new vi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Im("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Im("No code detected.");const{data:$,error:G}=await this._exchangeCodeForSession(n.code);if(G)throw G;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:x,expires_at:m,token_type:g}=n;if(!u||!x||!h||!g)throw new vi("No session defined in URL");const p=Math.round(Date.now()/1e3),_=parseInt(x);let y=p+_;m&&(y=parseInt(m));const A=y-p;A*1e3<=Un&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${_}s`);const E=y-_;p-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,y,p):p-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,y,p);const{data:R,error:T}=await this._getUser(u);if(T)throw T;const U={provider_token:l,provider_refresh_token:o,access_token:u,expires_in:_,expires_at:y,refresh_token:h,token_type:g,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:U,redirectType:n.type},error:null}}catch(l){if(ye(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await _i(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:o,error:u}=s;if(u)return{error:u};const h=(l=o.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:x}=await this.admin.signOut(h,n);if(x&&!(Sv(x)&&(x.status===404||x.status===401||x.status===403)))return{error:x}}return n!=="others"&&(await this._removeSession(),await wi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=Ov(),l={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async s=>{var l,o;try{const{data:{session:u},error:h}=s;if(h)throw h;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await Dn(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(ye(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:l,error:o}=await this._useSession(async u=>{var h,x,m,g,p;const{data:_,error:y}=u;if(y)throw y;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(x=n.options)===null||x===void 0?void 0:x.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",A,{headers:this.headers,jwt:(p=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return ga()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),{data:{provider:n.provider,url:l==null?void 0:l.url},error:null}}catch(l){if(ye(l))return{data:{provider:n.provider,url:null},error:l};throw l}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var l,o;const{data:u,error:h}=s;if(h)throw h;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await zv(async o=>(o>0&&await Lv(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:dr})),(o,u)=>{const h=200*Math.pow(2,o);return u&&nu(u)&&Date.now()+h-l<Un})}catch(l){if(this._debug(s,"error",l),ye(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",l),ga()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const l=await _i(this.storage,this.storageKey);if(this._debug(s,"session from storage",l),!this._isValidSession(l)){this._debug(s,"session is not valid"),l!==null&&await this._removeSession();return}const o=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<au;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${au}s`),o){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),nu(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(s,"error",l),console.error(l);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var s,l;if(!n)throw new ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Di;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new ur;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const x={session:u.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(u){if(this._debug(o,"error",u),ye(u)){const h={session:null,error:u};return nu(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,s,l=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(n,s)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let x=0;x<u.length;x+=1)console.error(u[x]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Zg(this.storage,this.storageKey,n)}async _removeSession(){this._debug("#_removeSession()"),await wi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ga()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Un);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-n)/Un);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Un}ms, refresh threshold is ${gu} ticks`),o<=gu&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Jg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ga()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,l){const o=[`provider=${encodeURIComponent(s)}`];if(l!=null&&l.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,h]=await Dn(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(x.toString())}if(l!=null&&l.queryParams){const u=new URLSearchParams(l.queryParams);o.push(u.toString())}return l!=null&&l.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var l;const{data:o,error:u}=s;return u?{data:null,error:u}:await Te(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var l,o;const{data:u,error:h}=s;if(h)return{data:null,error:h};const x=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:m,error:g}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:o,error:u}=s;if(u)return{data:null,error:u};const{data:h,error:x}=await Te(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token});return x?{data:null,error:x}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:x})})}catch(s){if(ye(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:o,error:u}=s;return u?{data:null,error:u}:await Te(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(ye(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:l}=await this._challenge({factorId:n.factorId});return l?{data:null,error:l}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const l=(n==null?void 0:n.factors)||[],o=l.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=l.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:l,totp:o,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,l;const{data:{session:o},error:u}=n;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=su(o.access_token);let x=null;h.aal&&(x=h.aal);let m=x;((l=(s=o.user.factors)===null||s===void 0?void 0:s.filter(_=>_.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(m="aal2");const p=h.amr||[];return{data:{currentLevel:x,nextLevel:m,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(n,s={keys:[]}){let l=s.keys.find(h=>h.kid===n);if(l||(l=this.jwks.keys.find(h=>h.kid===n),l&&this.jwks_cached_at+_v>Date.now()))return l;const{data:o,error:u}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;if(!o.keys||o.keys.length===0)throw new Fs("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),l=o.keys.find(h=>h.kid===n),!l)throw new Fs("No matching signing key found in JWKS");return l}async getClaims(n,s={keys:[]}){try{let l=n;if(!l){const{data:A,error:E}=await this.getSession();if(E||!A.session)return{data:null,error:E};l=A.session.access_token}const{header:o,payload:u,signature:h,raw:{header:x,payload:m}}=su(l);if(Yv(u.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:A}=await this.getUser(l);if(A)throw A;return{data:{claims:u,header:o,signature:h},error:null}}const g=Fv(o.alg),p=await this.fetchJwk(o.kid,s),_=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,_,h,Dv(`${x}.${m}`)))throw new Fs("Invalid JWT signature");return{data:{claims:u,header:o,signature:h},error:null}}catch(l){if(ye(l))return{data:null,error:l};throw l}}}Xs.nextInstanceID=0;const i1=Xs;class o1 extends i1{constructor(n){super(n)}}var c1=function(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function x(p){try{g(l.next(p))}catch(_){h(_)}}function m(p){try{g(l.throw(p))}catch(_){h(_)}}function g(p){p.done?u(p.value):o(p.value).then(x,m)}g((l=l.apply(i,n||[])).next())})};class u1{constructor(n,s,l){var o,u,h;if(this.supabaseUrl=n,this.supabaseKey=s,!n)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const x=gv(n),m=new URL(x);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:iv,realtime:cv,auth:Object.assign(Object.assign({},ov),{storageKey:g}),global:lv},_=xv(l??{},p);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=_.global.headers)!==null&&u!==void 0?u:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(y,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=_.auth)!==null&&h!==void 0?h:{},this.headers,_.global.fetch),this.fetch=hv(s,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new Ay(new URL("rest/v1",m).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new xy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rv(this.storageUrl.href,this.headers,this.fetch)}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},l={}){return this.rest.rpc(n,s,l)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return c1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:l}=yield this.auth.getSession();return(s=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:o,storageKey:u,flowType:h,lock:x,debug:m},g,p){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o1({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),g),storageKey:u,autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:o,flowType:h,lock:x,debug:m,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new Gy(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,l)=>{this._handleTokenChanged(s,"CLIENT",l==null?void 0:l.access_token)})}_handleTokenChanged(n,s,l){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==l?this.changedAccessToken=l:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const d1=(i,n,s)=>new u1(i,n,s),f1="https://aimpevquppizoqtljypl.supabase.co",h1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFpbXBldnF1cHBpem9xdGxqeXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzMjMwMDksImV4cCI6MjA2Mzg5OTAwOX0.0aoSUv50eLElw_ZFaTBYnV4doJ7D_2lMt2q-XCa3sOo",X=d1(f1,h1),Ig=w.forwardRef((i,n)=>{const[s,l]=w.useState(null),[o,u]=w.useState(null),[h,x]=w.useState(!1),m=ia();w.useEffect(()=>{X.auth.getSession().then(({data:{session:R}})=>{l(R),R?g(R.user.id):u(null)});const{data:E}=X.auth.onAuthStateChange((R,T)=>{l(T),T?g(T.user.id):u(null)});return()=>E.subscription.unsubscribe()},[]);const g=async E=>{const{data:R,error:T}=await X.from("users").select("role").eq("id",E).single();T?(console.error("Error fetching user role for NavBar:",T),u(null)):R&&u(R.role)},p=async()=>{const{error:E}=await X.auth.signOut();E?console.error("Error logging out:",E.message):m("/login")},_=()=>{x(!h)};w.useEffect(()=>{const E=R=>{h&&!R.target.closest(".settings-dropdown-container")&&x(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[h]);const y={user:[{to:"/user/dashboard",label:"Dashboard"},{to:"/user/documents",label:"My Documents"},{to:"/user/signature-requests",label:"Signatures"}],admin:[{to:"/admin/dashboard",label:"Admin Dashboard"},{to:"/admin/manage-users",label:"Manage Users"},{to:"/admin/reports",label:"Reports"},{to:"/admin/audit",label:"Audit Logs"},{to:"/admin/anomalies",label:"Reported Anomalies"},{to:"/admin/master-edit",label:"Master Editor"}]};let A=[];return o==="admin"?A=y.admin:o==="user"&&(A=y.user),d.jsxs("nav",{ref:n,className:`bg-[var(--brand-bg-light)] shadow-md py-4 px-10 flex justify-between items-center\r
                 border-b border-[var(--brand-border)] fixed w-full top-0 left-0 z-50 transition-all duration-300`,children:[d.jsx("div",{className:"text-4xl font-extrabold",children:d.jsx(Ge,{to:o?`/${o}/dashboard`:"/user/dashboard",className:"text-[var(--color-button-primary)] no-underline drop-shadow-sm",children:"SignSeal"})}),d.jsxs("div",{className:"flex items-center space-x-8",children:[A.map(E=>d.jsx(Ge,{to:E.to,className:`text-[var(--brand-text)] no-underline text-lg font-medium transition-colors duration-300\r
                         hover:text-[var(--color-text-accent-light)]`,children:E.label},E.to)),d.jsxs("div",{className:"relative inline-block settings-dropdown-container",children:[d.jsxs("button",{onClick:_,className:`bg-transparent border-none text-[var(--brand-text)] text-lg font-medium cursor-pointer\r
                       flex items-center gap-1 transition-colors duration-300 focus:outline-none\r
                       hover:text-[var(--color-text-accent-light)]`,children:["Settings",d.jsx("span",{className:`text-xs leading-none transform transition-transform duration-300 ${h?"rotate-180":"rotate-0"}`,children:"▼"})]}),h&&d.jsxs("div",{className:`absolute top-full right-0 bg-[var(--brand-card)] shadow-lg rounded-lg\r
                         min-w-[160px] flex flex-col overflow-hidden mt-3 z-50\r
                         border border-[var(--brand-border-light)] animate-fade-in-up origin-top-right`,children:[d.jsx(Ge,{to:"/user/profile",className:`py-3 px-5 text-[var(--brand-text)] no-underline text-base font-normal\r
                           transition-all duration-200 hover:bg-[var(--color-button-primary)] hover:text-white`,onClick:()=>x(!1),children:"Profile"}),d.jsx("button",{onClick:p,className:`py-3 px-5 text-[var(--brand-text)] no-underline text-base font-normal\r
                           transition-all duration-200 hover:bg-[var(--color-button-primary)] hover:text-white\r
                           border-none bg-transparent w-full text-left`,children:"Logout"})]})]})]})]})}),m1=()=>{const[i,n]=w.useState(null),[s,l]=w.useState(!0);return w.useEffect(()=>{X.auth.getSession().then(({data:{session:u}})=>{n(u),l(!1)});const{data:o}=X.auth.onAuthStateChange((u,h)=>{n(h),l(!1)});return()=>{o.subscription.unsubscribe()}},[]),s?null:d.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(to bottom right, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:[d.jsxs("header",{className:"w-full max-w-6xl mx-auto flex justify-between items-center mb-16 px-4 md:px-0 z-10",children:[d.jsx("h1",{className:"text-4xl font-extrabold drop-shadow-lg",style:{color:"var(--color-button-primary)"},children:"SignSeal"}),d.jsx("nav",{className:"space-x-6",children:i?d.jsx(Ge,{to:"/user/dashboard",className:"py-2 px-5 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 font-semibold",style:{backgroundColor:"var(--color-button-primary)",color:"white"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary-hover)",onMouseLeave:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary)",children:"Dashboard"}):d.jsxs(d.Fragment,{children:[d.jsx(Ge,{to:"/login",className:"transition duration-300 ease-in-out font-medium",style:{color:"var(--brand-text)"},onMouseEnter:o=>o.currentTarget.style.color="var(--color-text-accent-light)",onMouseLeave:o=>o.currentTarget.style.color="var(--brand-text)",children:"Login"}),d.jsx(Ge,{to:"/register",className:"py-2 px-5 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 font-semibold",style:{backgroundColor:"var(--color-button-primary)",color:"white"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary-hover)",onMouseLeave:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary)",children:"Register"})]})})]}),d.jsxs("main",{className:"flex-grow flex flex-col justify-center items-center text-center max-w-4xl mx-auto px-4 z-0 relative",children:[d.jsx("div",{className:"absolute -top-16 -left-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),d.jsx("div",{className:"absolute -bottom-16 -right-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000 -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),d.jsxs("h2",{className:"text-6xl md:text-7xl font-extrabold leading-tight mb-6 animate-fade-in-up drop-shadow-md",style:{color:"var(--brand-heading)"},children:["Signature Simplified.",d.jsx("br",{})," ",d.jsx("span",{style:{color:"var(--color-button-primary)"},children:"Future Forward."})]}),d.jsx("p",{className:"text-xl md:text-2xl mb-10 leading-relaxed animate-fade-in-up delay-200",style:{color:"var(--brand-text-light)"},children:"Streamline your workflow with secure, legally binding electronic signatures. Fast, intuitive, and designed for the modern era."}),!i&&d.jsx(Ge,{to:"/register",className:"inline-block py-3 px-8 rounded-full shadow-xl transition duration-300 ease-in-out transform hover:scale-105 animate-fade-in-up delay-400 font-bold",style:{backgroundColor:"var(--color-button-primary)",color:"white"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary-hover)",onMouseLeave:o=>o.currentTarget.style.backgroundColor="var(--color-button-primary)",children:"Get Started Free"})]}),d.jsxs("section",{className:"mt-20 w-full max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-8 px-4 z-10",children:[d.jsxs("div",{className:"p-8 rounded-xl shadow-2xl flex flex-col items-center text-center border transform hover:scale-105 transition-transform duration-300",style:{backgroundColor:"var(--brand-card)",borderColor:"var(--brand-border)"},children:[d.jsx("div",{className:"text-6xl mb-4 transform rotate-3 hover:rotate-0 transition-transform duration-300",style:{color:"var(--color-button-primary)"},children:"✍️"}),d.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:"var(--brand-heading)"},children:"Effortless Signing"}),d.jsx("p",{style:{color:"var(--brand-text-light)"},children:"Sign documents from anywhere, on any device. Simple and intuitive process."})]}),d.jsxs("div",{className:"p-8 rounded-xl shadow-2xl flex flex-col items-center text-center border transform hover:scale-105 transition-transform duration-300",style:{backgroundColor:"var(--brand-card)",borderColor:"var(--brand-border)"},children:[d.jsx("div",{className:"text-6xl mb-4 transform -rotate-3 hover:rotate-0 transition-transform duration-300",style:{color:"var(--color-button-primary)"},children:"🔒"}),d.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:"var(--brand-heading)"},children:"Robust Security"}),d.jsx("p",{style:{color:"var(--brand-text-light)"},children:"Your data is protected with advanced encryption, audit trails, and compliance."})]}),d.jsxs("div",{className:"p-8 rounded-xl shadow-2xl flex flex-col items-center text-center border transform hover:scale-105 transition-transform duration-300",style:{backgroundColor:"var(--brand-card)",borderColor:"var(--brand-border)"},children:[d.jsx("div",{className:"text-6xl mb-4 transform rotate-3 hover:rotate-0 transition-transform duration-300",style:{color:"var(--color-button-primary)"},children:"⚡"}),d.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:"var(--brand-heading)"},children:"Blazing Fast"}),d.jsx("p",{style:{color:"var(--brand-text-light)"},children:"Streamline approvals and get documents signed in minutes, not days."})]})]}),d.jsx("section",{className:"mt-12 text-center text-sm z-10",style:{color:"var(--brand-text-light)"},children:d.jsx("p",{children:"Powered by Vite & modern web technologies for a seamless experience."})})]})},At=({message:i,type:n,onClose:s,duration:l=3e3})=>{const[o,u]=w.useState(!1),[h,x]=w.useState(!1);if(w.useEffect(()=>{if(i){x(!0);const _=setTimeout(()=>{u(!0)},50),y=setTimeout(()=>{u(!1)},l+50);return()=>{clearTimeout(_),clearTimeout(y)}}else u(!1),x(!1)},[i,l]),w.useEffect(()=>{if(!o&&h){const _=setTimeout(()=>{x(!1),s&&s()},300);return()=>clearTimeout(_)}},[o,h,s]),!h)return null;let m="",g="",p="";switch(n){case"success":m="bg-green-100 dark:bg-green-900",g="text-green-800 dark:text-green-200",p="border-green-400 dark:border-green-700";break;case"error":m="bg-red-100 dark:bg-red-900",g="text-red-800 dark:text-red-200",p="border-red-400 dark:border-red-700";break;case"info":default:m="bg-blue-100 dark:bg-blue-900",g="text-blue-800 dark:text-blue-200",p="border-blue-400 dark:border-blue-700";break}return d.jsxs("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg max-w-sm w-full z-50
                  flex items-center justify-between border-l-4 transform transition-all duration-300 ease-in-out
                  ${m} ${g} ${p}
                  ${o?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[d.jsx("p",{className:"flex-grow text-sm font-medium",children:i}),d.jsx("button",{onClick:()=>u(!1),className:`ml-4 p-1 rounded-full ${g} hover:bg-opacity-75 transition-colors`,"aria-label":"Close notification",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})};class tl{constructor(n=0,s="Network Error"){this.status=n,this.text=s}}const g1=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,n)=>Promise.resolve(localStorage.setItem(i,n)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},vt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:g1()},Du=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},x1=(i,n="https://api.emailjs.com")=>{if(!i)return;const s=Du(i);vt.publicKey=s.publicKey,vt.blockHeadless=s.blockHeadless,vt.storageProvider=s.storageProvider,vt.blockList=s.blockList,vt.limitRate=s.limitRate,vt.origin=s.origin||n},Wg=async(i,n,s={})=>{const l=await fetch(vt.origin+i,{method:"POST",headers:s,body:n}),o=await l.text(),u=new tl(l.status,o);if(l.ok)return u;throw u},e0=(i,n,s)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!n||typeof n!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},b1=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},t0=i=>i.webdriver||!i.languages||i.languages.length===0,a0=()=>new tl(451,"Unavailable For Headless Browser"),p1=(i,n)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof n!="string")throw"The BlockList watchVariable has to be a string"},y1=i=>{var n;return!((n=i.list)!=null&&n.length)||!i.watchVariable},v1=(i,n)=>i instanceof FormData?i.get(n):i[n],r0=(i,n)=>{if(y1(i))return!1;p1(i.list,i.watchVariable);const s=v1(n,i.watchVariable);return typeof s!="string"?!1:i.list.includes(s)},n0=()=>new tl(403,"Forbidden"),_1=(i,n)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(n&&typeof n!="string")throw"The LimitRate ID has to be a non-empty string"},w1=async(i,n,s)=>{const l=Number(await s.get(i)||0);return n-Date.now()+l},s0=async(i,n,s)=>{if(!n.throttle||!s)return!1;_1(n.throttle,n.id);const l=n.id||i;return await w1(l,n.throttle,s)>0?!0:(await s.set(l,Date.now().toString()),!1)},l0=()=>new tl(429,"Too Many Requests"),S1=async(i,n,s,l)=>{const o=Du(l),u=o.publicKey||vt.publicKey,h=o.blockHeadless||vt.blockHeadless,x=o.storageProvider||vt.storageProvider,m={...vt.blockList,...o.blockList},g={...vt.limitRate,...o.limitRate};return h&&t0(navigator)?Promise.reject(a0()):(e0(u,i,n),b1(s),s&&r0(m,s)?Promise.reject(n0()):await s0(location.pathname,g,x)?Promise.reject(l0()):Wg("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:u,service_id:i,template_id:n,template_params:s}),{"Content-type":"application/json"}))},j1=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},E1=i=>typeof i=="string"?document.querySelector(i):i,N1=async(i,n,s,l)=>{const o=Du(l),u=o.publicKey||vt.publicKey,h=o.blockHeadless||vt.blockHeadless,x=vt.storageProvider||o.storageProvider,m={...vt.blockList,...o.blockList},g={...vt.limitRate,...o.limitRate};if(h&&t0(navigator))return Promise.reject(a0());const p=E1(s);e0(u,i,n),j1(p);const _=new FormData(p);return r0(m,_)?Promise.reject(n0()):await s0(location.pathname,g,x)?Promise.reject(l0()):(_.append("lib_version","4.4.1"),_.append("service_id",i),_.append("template_id",n),_.append("user_id",u),Wg("/api/v1.0/email/send-form",_))},i0={init:x1,send:S1,sendForm:N1,EmailJSResponseStatus:tl},ig="service_bqv4x0f",T1="template_sd95gct",A1="template_opw8diw",R1="HAzJ8cWKxlzuPJMzs";i0.init(R1);const C1=(i,n)=>{localStorage.setItem(i,n)},D1=i=>localStorage.getItem(i),og=async(i,n,s={})=>{let l,o,u;const h={to_email:n,attempts:s.attempts||"N/A",ip_address:s.ip_address||"N/A"};switch(i){case"warning":l=`maliciousWarningSent_${n}`,o="🚨 Security Alert: Multiple Failed Login Attempts",u=T1;break;case"blocked":l=`blockedAccountEmailSent_${n}`,o="⛔ Account Blocked for Security Reasons",u=A1;break;default:console.error("❌ Invalid email event type provided:",i);return}if(D1(l)){console.log(`📧 Email '${o}' already sent to ${n} (persisted).`);return}try{if(!ig||!u){console.error("❌ EmailJS Service ID or the specific Template ID is missing. Please check your .env file.");return}await i0.send(ig,u,h),console.log(`✅ Email '${o}' sent successfully to ${n}!`),C1(l,"true")}catch(x){console.error(`❗ Failed to send email '${o}' to ${n}:`,x)}},cg=i=>{localStorage.removeItem(`maliciousWarningSent_${i}`),localStorage.removeItem(`blockedAccountEmailSent_${i}`),console.log(`🔄 Email sent flags reset for ${i}.`)},ug=120,lu=5,dg=60,k1=10,O1=()=>{const[i,n]=w.useState(""),[s,l]=w.useState(""),[o,u]=w.useState(null),[h,x]=w.useState(!1),[m,g]=w.useState(!1),[p,_]=w.useState(!1),[y,A]=w.useState(0),[E,R]=w.useState(0),[T,U]=w.useState(0),[$,G]=w.useState(null),[Z,V]=w.useState(0),te=w.useRef(null),[le,se]=w.useState(!1),ne=ia(),ue=za();w.useEffect(()=>{new URLSearchParams(ue.search).get("message")==="check_email"&&(u({message:"Registration successful! Please check your email to verify your account.",type:"success"}),ne(ue.pathname,{replace:!0}))},[ue,ne]),w.useEffect(()=>{let ce;const oe=localStorage.getItem("lastResendAttempt");if(oe){const z=parseInt(oe,10),I=Math.floor((Date.now()-z)/1e3),j=ug-I;j>0&&(A(!0),R(j),ce=setInterval(()=>{R(P=>P<=1?(clearInterval(ce),A(!1),localStorage.removeItem("lastResendAttempt"),0):P-1)},1e3))}return()=>clearInterval(ce)},[]),w.useEffect(()=>{const ce=localStorage.getItem(`failedLoginAttempts_${i}`),oe=localStorage.getItem(`lastFailedLoginTime_${i}`);if(ce&&U(parseInt(ce,10)),oe&&G(parseInt(oe,10)),oe&&parseInt(ce,10)>=lu){const z=parseInt(oe,10),I=Math.floor((Date.now()-z)/1e3),j=dg-I;j>0?(V(j),_(!0),te.current&&clearInterval(te.current),te.current=setInterval(()=>{V(P=>P<=1?(clearInterval(te.current),te.current=null,_(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),U(0),G(null),0):P-1)},1e3)):(_(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),U(0),G(null))}return()=>{te.current&&clearInterval(te.current)}},[i]),w.useEffect(()=>{(async()=>{if(!i){se(!1),g(!1);return}try{const{data:oe,error:z}=await X.from("users").select("blocked").eq("email",i).single();if(z&&z.code!=="PGRST116"){console.error("Error fetching user block status:",z);return}oe&&oe.blocked?(se(!0),g(!0),u(null)):(se(!1),g(!1))}catch(oe){console.error("Unexpected error fetching user block status:",oe)}})()},[i]);const be=(ce,oe=!0)=>{let z=parseInt(localStorage.getItem(`failedLoginAttempts_${ce}`)||"0",10),I;if(oe?I=z+1:I=0,U(I),localStorage.setItem(`failedLoginAttempts_${ce}`,I.toString()),I>0&&oe){const j=Date.now();G(j),localStorage.setItem(`lastFailedLoginTime_${ce}`,j.toString())}else G(null),localStorage.removeItem(`lastFailedLoginTime_${ce}`)},ae=async ce=>{var I;if(ce.preventDefault(),u(null),x(!1),g(!1),_(!1),!i||!s){u({message:"Please enter both email and password.",type:"error"});return}const oe=parseInt(localStorage.getItem(`failedLoginAttempts_${i}`)||"0",10),z=parseInt(localStorage.getItem(`lastFailedLoginTime_${i}`)||"0",10);if(oe>=lu){const j=Math.floor((Date.now()-z)/1e3),P=dg-j;if(P>0){V(P),_(!0),u({message:`Too many failed login attempts. Please try again in ${P} seconds.`,type:"error"}),te.current&&clearInterval(te.current),te.current=setInterval(()=>{V(S=>S<=1?(clearInterval(te.current),te.current=null,_(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),U(0),G(null),0):S-1)},1e3);return}else _(!1),localStorage.removeItem(`failedLoginAttempts_${i}`),localStorage.removeItem(`lastFailedLoginTime_${i}`),U(0),G(null)}if(le){g(!0),u({message:"Your account has been blocked. Please contact the administrator.",type:"error"});return}try{const S=(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown",q=navigator.userAgent||"unknown";let O=!1,Y=null,D=null;const{data:ee,error:J}=await X.auth.signInWithPassword({email:i,password:s});if(J){O=!1,Y=J.message,be(i,!0);const{data:me,error:re}=await X.from("users").select("id, failed_login_attempts, blocked").eq("email",i).single();let ge=null,Se=0,Oe=!1;if(me)ge=me.id,Se=me.failed_login_attempts||0,Oe=me.blocked;else if(re&&re.code!=="PGRST116"){console.error("Error fetching user status for DB update on failed login:",re),u({message:"A system error occurred. Please try again later.",type:"error"});return}if(ge){let Be=Se+1,Ye=Oe;Be===lu&&og("warning",i,{attempts:Be,ip_address:S}),Be>=k1&&!Oe&&(Ye=!0,og("blocked",i,{attempts:Be,ip_address:S}),g(!0),u(null)),await X.from("users").update({failed_login_attempts:Be,last_failed_login_at:new Date().toISOString(),blocked:Ye}).eq("id",ge),se(Ye)}J.message==="Email not confirmed"?x(!0):u({message:J.message,type:"error"})}else if(ee&&ee.user){O=!0,D=ee.user.id,be(i,!1),await X.from("users").update({failed_login_attempts:0,last_failed_login_at:null,blocked:!1}).eq("id",D),se(!1),cg(i),u({message:"Login successful!",type:"success"});const me=((I=ee.user.user_metadata)==null?void 0:I.role)||"user";setTimeout(me==="admin"?()=>ne("/admin/dashboard"):()=>ne("/user/dashboard"),500)}else O=!1,Y="An unexpected response from Supabase Auth.",u({message:Y,type:"error"}),be(i,!0)}catch(j){console.error("Overall login process error:",j),u({message:"An unexpected error occurred during the login process.",type:"error"}),be(i,!0)}},ve=async()=>{if(y)return;u(null),A(!0),R(ug),localStorage.setItem("lastResendAttempt",Date.now().toString());let ce=setInterval(()=>{R(z=>z<=1?(clearInterval(ce),A(!1),localStorage.removeItem("lastResendAttempt"),0):z-1)},1e3);const{error:oe}=await X.auth.resend({type:"signup",email:i,options:{emailRedirectTo:`${window.location.origin}/SignatureApp/verify-email-success`}});oe?u({message:`Failed to resend verification email: ${oe.message}`,type:"error"}):(u({message:"Verification email sent! Please check your inbox.",type:"success"}),x(!1))};return d.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 py-8 bg-gray-50 dark:bg-gray-900",children:[d.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl animate-fade-in-up",children:[d.jsx("div",{className:"text-center mb-8",children:d.jsx(Ge,{to:"/",className:"inline-block no-underline",children:d.jsxs("h1",{className:"text-4xl font-extrabold text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300 transition duration-200 ease-in-out",children:["Login to ",d.jsx("span",{style:{color:"var(--color-button-primary)"},children:"SignSeal"})]})})}),d.jsx("h2",{className:"text-4xl font-bold text-center mb-8 text-gray-800 dark:text-white sr-only",children:"Login to SignSeal"}),d.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),d.jsx("input",{type:"email",id:"email",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                                bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                                focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                                transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"you@example.com",value:i,onChange:ce=>{n(ce.target.value),_(!1),V(0),te.current&&(clearInterval(te.current),te.current=null);const oe=localStorage.getItem(`failedLoginAttempts_${ce.target.value}`),z=localStorage.getItem(`lastFailedLoginTime_${ce.target.value}`);U(parseInt(oe||"0",10)),G(parseInt(z||"0",10)),cg(ce.target.value)},required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),d.jsx("input",{type:"password",id:"password",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                                bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                                focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                                transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"••••••••",value:s,onChange:ce=>l(ce.target.value),required:!0,autoComplete:"current-password"})]}),d.jsx("button",{type:"submit",disabled:p||le,className:`w-full text-white font-bold py-3 px-6 rounded-md shadow-lg
                        transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2
                        focus:ring-[var(--color-button-primary)] focus:ring-offset-2 dark:focus:ring-offset-gray-900
                        ${p||le?"bg-gray-400 cursor-not-allowed":"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)]"}`,children:"Login"})]}),d.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-6",children:["Don't have an account?"," ",d.jsx(Ge,{to:"/register",className:"text-[var(--color-button-primary)] hover:text-[var(--color-text-accent-light)] font-semibold transition duration-200",children:"Register here"})]})]}),o&&d.jsx(At,{message:o.message,type:o.type,onClose:()=>u(null)}),h&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl max-w-sm w-full text-center",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-white",children:"Email Verification Needed"}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"To ensure the security of your account, please verify your email address. Kindly check your inbox and click the verification link we've sent."}),d.jsx("button",{onClick:ve,disabled:y,className:`
                font-bold py-2 px-4 rounded-md shadow-md
                transition duration-200 ease-in-out
                ${y?"bg-gray-400 cursor-not-allowed":"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)] text-white"}
              `,children:y?`Resend in ${E}s`:"Resend Verification Email"}),d.jsx("button",{onClick:()=>x(!1),className:`ml-4 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600\r
                          text-gray-800 dark:text-white font-bold py-2 px-4 rounded-md shadow-md\r
                          transition duration-200 ease-in-out`,children:"Close"})]})}),m&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl max-w-sm w-full text-center",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 text-red-600 dark:text-red-400",children:"Account Blocked"}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"Your account has been blocked due to too many failed login attempts or administrator action. Please contact the administrator for assistance."}),d.jsx("button",{onClick:()=>g(!1),className:"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)] text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-200 ease-in-out",children:"Close"})]})}),p&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:d.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl max-w-sm w-full text-center",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 text-yellow-600 dark:text-yellow-400",children:"Too Many Login Attempts!"}),d.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["You have made too many failed login attempts. Please try again in ",Z," seconds."]}),d.jsx("button",{onClick:()=>_(!1),className:"bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)] text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-200 ease-in-out",children:"Close"})]})})]})},U1={};var pu=null;function M1(i){try{return crypto.getRandomValues(new Uint8Array(i))}catch{}try{return U1.randomBytes(i)}catch{}if(!pu)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return pu(i)}function L1(i){pu=i}function ku(i,n){if(i=i||Ou,typeof i!="number")throw Error("Illegal arguments: "+typeof i+", "+typeof n);i<4?i=4:i>31&&(i=31);var s=[];return s.push("$2b$"),i<10&&s.push("0"),s.push(i.toString()),s.push("$"),s.push(Ai(M1(Ks),Ks)),s.join("")}function o0(i,n,s){if(typeof n=="function"&&(s=n,n=void 0),typeof i=="function"&&(s=i,i=void 0),typeof i>"u")i=Ou;else if(typeof i!="number")throw Error("illegal arguments: "+typeof i);function l(o){sa(function(){try{o(null,ku(i))}catch(u){o(u)}})}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);l(s)}else return new Promise(function(o,u){l(function(h,x){if(h){u(h);return}o(x)})})}function c0(i,n){if(typeof n>"u"&&(n=Ou),typeof n=="number"&&(n=ku(n)),typeof i!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof i+", "+typeof n);return yu(i,n)}function u0(i,n,s,l){function o(u){typeof i=="string"&&typeof n=="number"?o0(n,function(h,x){yu(i,x,u,l)}):typeof i=="string"&&typeof n=="string"?yu(i,n,u,l):sa(u.bind(this,Error("Illegal arguments: "+typeof i+", "+typeof n)))}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);o(s)}else return new Promise(function(u,h){o(function(x,m){if(x){h(x);return}u(m)})})}function d0(i,n){for(var s=i.length^n.length,l=0;l<i.length;++l)s|=i.charCodeAt(l)^n.charCodeAt(l);return s===0}function z1(i,n){if(typeof i!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof i+", "+typeof n);return n.length!==60?!1:d0(c0(i,n.substring(0,n.length-31)),n)}function q1(i,n,s,l){function o(u){if(typeof i!="string"||typeof n!="string"){sa(u.bind(this,Error("Illegal arguments: "+typeof i+", "+typeof n)));return}if(n.length!==60){sa(u.bind(this,null,!1));return}u0(i,n.substring(0,29),function(h,x){h?u(h):u(null,d0(x,n))},l)}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);o(s)}else return new Promise(function(u,h){o(function(x,m){if(x){h(x);return}u(m)})})}function B1(i){if(typeof i!="string")throw Error("Illegal arguments: "+typeof i);return parseInt(i.split("$")[2],10)}function $1(i){if(typeof i!="string")throw Error("Illegal arguments: "+typeof i);if(i.length!==60)throw Error("Illegal hash length: "+i.length+" != 60");return i.substring(0,29)}function H1(i){if(typeof i!="string")throw Error("Illegal arguments: "+typeof i);return f0(i)>72}var sa=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function f0(i){for(var n=0,s=0,l=0;l<i.length;++l)s=i.charCodeAt(l),s<128?n+=1:s<2048?n+=2:(s&64512)===55296&&(i.charCodeAt(l+1)&64512)===56320?(++l,n+=4):n+=3;return n}function V1(i){for(var n=0,s,l,o=new Array(f0(i)),u=0,h=i.length;u<h;++u)s=i.charCodeAt(u),s<128?o[n++]=s:s<2048?(o[n++]=s>>6|192,o[n++]=s&63|128):(s&64512)===55296&&((l=i.charCodeAt(u+1))&64512)===56320?(s=65536+((s&1023)<<10)+(l&1023),++u,o[n++]=s>>18|240,o[n++]=s>>12&63|128,o[n++]=s>>6&63|128,o[n++]=s&63|128):(o[n++]=s>>12|224,o[n++]=s>>6&63|128,o[n++]=s&63|128);return o}var On="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),cr=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Ai(i,n){var s=0,l=[],o,u;if(n<=0||n>i.length)throw Error("Illegal len: "+n);for(;s<n;){if(o=i[s++]&255,l.push(On[o>>2&63]),o=(o&3)<<4,s>=n){l.push(On[o&63]);break}if(u=i[s++]&255,o|=u>>4&15,l.push(On[o&63]),o=(u&15)<<2,s>=n){l.push(On[o&63]);break}u=i[s++]&255,o|=u>>6&3,l.push(On[o&63]),l.push(On[u&63])}return l.join("")}function h0(i,n){var s=0,l=i.length,o=0,u=[],h,x,m,g,p,_;if(n<=0)throw Error("Illegal len: "+n);for(;s<l-1&&o<n&&(_=i.charCodeAt(s++),h=_<cr.length?cr[_]:-1,_=i.charCodeAt(s++),x=_<cr.length?cr[_]:-1,!(h==-1||x==-1||(p=h<<2>>>0,p|=(x&48)>>4,u.push(String.fromCharCode(p)),++o>=n||s>=l)||(_=i.charCodeAt(s++),m=_<cr.length?cr[_]:-1,m==-1)||(p=(x&15)<<4>>>0,p|=(m&60)>>2,u.push(String.fromCharCode(p)),++o>=n||s>=l)));)_=i.charCodeAt(s++),g=_<cr.length?cr[_]:-1,p=(m&3)<<6>>>0,p|=g,u.push(String.fromCharCode(p)),++o;var y=[];for(s=0;s<o;s++)y.push(u[s].charCodeAt(0));return y}var Ks=16,Ou=10,G1=16,Y1=100,fg=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],hg=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],m0=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Zs(i,n,s,l){var o,u=i[n],h=i[n+1];return u^=s[0],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[1],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[2],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[3],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[4],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[5],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[6],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[7],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[8],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[9],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[10],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[11],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[12],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[13],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[14],o=l[u>>>24],o+=l[256|u>>16&255],o^=l[512|u>>8&255],o+=l[768|u&255],h^=o^s[15],o=l[h>>>24],o+=l[256|h>>16&255],o^=l[512|h>>8&255],o+=l[768|h&255],u^=o^s[16],i[n]=h^s[G1+1],i[n+1]=u,i}function Mn(i,n){for(var s=0,l=0;s<4;++s)l=l<<8|i[n]&255,n=(n+1)%i.length;return{key:l,offp:n}}function mg(i,n,s){for(var l=0,o=[0,0],u=n.length,h=s.length,x,m=0;m<u;m++)x=Mn(i,l),l=x.offp,n[m]=n[m]^x.key;for(m=0;m<u;m+=2)o=Zs(o,0,n,s),n[m]=o[0],n[m+1]=o[1];for(m=0;m<h;m+=2)o=Zs(o,0,n,s),s[m]=o[0],s[m+1]=o[1]}function F1(i,n,s,l){for(var o=0,u=[0,0],h=s.length,x=l.length,m,g=0;g<h;g++)m=Mn(n,o),o=m.offp,s[g]=s[g]^m.key;for(o=0,g=0;g<h;g+=2)m=Mn(i,o),o=m.offp,u[0]^=m.key,m=Mn(i,o),o=m.offp,u[1]^=m.key,u=Zs(u,0,s,l),s[g]=u[0],s[g+1]=u[1];for(g=0;g<x;g+=2)m=Mn(i,o),o=m.offp,u[0]^=m.key,m=Mn(i,o),o=m.offp,u[1]^=m.key,u=Zs(u,0,s,l),l[g]=u[0],l[g+1]=u[1]}function gg(i,n,s,l,o){var u=m0.slice(),h=u.length,x;if(s<4||s>31)if(x=Error("Illegal number of rounds (4-31): "+s),l){sa(l.bind(this,x));return}else throw x;if(n.length!==Ks)if(x=Error("Illegal salt length: "+n.length+" != "+Ks),l){sa(l.bind(this,x));return}else throw x;s=1<<s>>>0;var m,g,p=0,_;typeof Int32Array=="function"?(m=new Int32Array(fg),g=new Int32Array(hg)):(m=fg.slice(),g=hg.slice()),F1(n,i,m,g);function y(){if(o&&o(p/s),p<s)for(var E=Date.now();p<s&&(p=p+1,mg(i,m,g),mg(n,m,g),!(Date.now()-E>Y1)););else{for(p=0;p<64;p++)for(_=0;_<h>>1;_++)Zs(u,_<<1,m,g);var R=[];for(p=0;p<h;p++)R.push((u[p]>>24&255)>>>0),R.push((u[p]>>16&255)>>>0),R.push((u[p]>>8&255)>>>0),R.push((u[p]&255)>>>0);if(l){l(null,R);return}else return R}l&&sa(y)}if(typeof l<"u")y();else for(var A;;)if(typeof(A=y())<"u")return A||[]}function yu(i,n,s,l){var o;if(typeof i!="string"||typeof n!="string")if(o=Error("Invalid string / salt: Not a string"),s){sa(s.bind(this,o));return}else throw o;var u,h;if(n.charAt(0)!=="$"||n.charAt(1)!=="2")if(o=Error("Invalid salt version: "+n.substring(0,2)),s){sa(s.bind(this,o));return}else throw o;if(n.charAt(2)==="$")u="\0",h=3;else{if(u=n.charAt(2),u!=="a"&&u!=="b"&&u!=="y"||n.charAt(3)!=="$")if(o=Error("Invalid salt revision: "+n.substring(2,4)),s){sa(s.bind(this,o));return}else throw o;h=4}if(n.charAt(h+2)>"$")if(o=Error("Missing salt rounds"),s){sa(s.bind(this,o));return}else throw o;var x=parseInt(n.substring(h,h+1),10)*10,m=parseInt(n.substring(h+1,h+2),10),g=x+m,p=n.substring(h+3,h+25);i+=u>="a"?"\0":"";var _=V1(i),y=h0(p,Ks);function A(E){var R=[];return R.push("$2"),u>="a"&&R.push(u),R.push("$"),g<10&&R.push("0"),R.push(g.toString()),R.push("$"),R.push(Ai(y,y.length)),R.push(Ai(E,m0.length*4-1)),R.join("")}if(typeof s>"u")return A(gg(_,y,g));gg(_,y,g,function(E,R){E?s(E,null):s(null,A(R))},l)}function P1(i,n){return Ai(i,n)}function Q1(i,n){return h0(i,n)}const xg={setRandomFallback:L1,genSaltSync:ku,genSalt:o0,hashSync:c0,hash:u0,compareSync:z1,compare:q1,getRounds:B1,getSalt:$1,truncates:H1,encodeBase64:P1,decodeBase64:Q1},X1=()=>{const[i,n]=w.useState(""),[s,l]=w.useState(""),[o,u]=w.useState(""),[h,x]=w.useState(""),[m,g]=w.useState(""),[p,_]=w.useState(""),[y,A]=w.useState(null),E=ia(),R=async T=>{var U,$,G;if(T.preventDefault(),A(null),!i||!s||!o||!h||!m||!p){A({message:"Please fill in all fields.",type:"error"});return}if(s!==o){A({message:"Passwords do not match.",type:"error"});return}if(s.length<6){A({message:"Password must be at least 6 characters.",type:"error"});return}try{const{data:Z,error:V}=await X.auth.signUp({email:i,password:s,options:{emailRedirectTo:`${window.location.origin}/verify-email-success`}});if(V){A({message:V.message,type:"error"});return}const te=((U=Z.user)==null?void 0:U.id)||((G=($=Z.session)==null?void 0:$.user)==null?void 0:G.id);if(!te){A({message:"An unexpected error occurred: User ID not found after signup.",type:"error"}),console.error("Auth data:",Z);return}let le=null;try{const ue=await xg.genSalt(10);le=await xg.hash(s,ue)}catch(ne){console.error("Error hashing password with bcryptjs:",ne),A({message:"Failed to process password securely. Please try again.",type:"error"});return}const{error:se}=await X.from("users").update({password_hash:le,full_name:h,title:m,department:p,is_verified:!1}).eq("id",te);if(se){console.error("Error updating public.users table:",se.message),A({message:"Registration failed: Could not save profile data. Please try again.",type:"error"});return}A({message:"Registration successful! Please check your email to verify your account.",type:"success"}),n(""),l(""),u(""),x(""),g(""),_(""),setTimeout(()=>{E("/login?message=check_email")},3e3)}catch(Z){console.error("An unexpected error occurred:",Z),A({message:"An unexpected error occurred during registration. Please try again.",type:"error"})}};return d.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 py-8",children:[d.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-[#1a1a1a] p-8 rounded-lg shadow-xl animate-fade-in-up",children:[d.jsx("div",{className:"text-center mb-8",children:d.jsx(Ge,{to:"/",className:"inline-block no-underline",children:d.jsxs("h1",{className:`text-4xl font-extrabold text-gray-800 dark:text-white\r
                           hover:text-gray-600 dark:hover:text-gray-300 transition duration-200 ease-in-out`,children:["Register to ",d.jsx("span",{className:"text-[var(--color-button-primary)]",children:"SignSeal"})]})})}),d.jsx("h2",{className:"text-4xl font-bold text-center mb-8 text-gray-800 dark:text-white sr-only",children:"Register for SignSeal"}),d.jsxs("form",{onSubmit:R,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),d.jsx("input",{type:"email",id:"email",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"you@example.com",value:i,onChange:T=>n(T.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),d.jsx("input",{type:"password",id:"password",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"••••••••",value:s,onChange:T=>l(T.target.value),required:!0,autoComplete:"new-password"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirm-password",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"confirm-password",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"••••••••",value:o,onChange:T=>u(T.target.value),required:!0,autoComplete:"new-password"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"full-name",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),d.jsx("input",{type:"text",id:"full-name",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"John Doe",value:h,onChange:T=>x(T.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"title",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title (e.g., Registrar, IT Head)"}),d.jsx("input",{type:"text",id:"title",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"Registrar",value:m,onChange:T=>g(T.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"department",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Department (e.g., IT, HR, Finance)"}),d.jsx("input",{type:"text",id:"department",className:`w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700\r
                         bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white\r
                         focus:ring-2 focus:ring-[var(--color-button-primary)] focus:border-transparent\r
                         transition duration-200 ease-in-out placeholder-gray-400`,placeholder:"IT",value:p,onChange:T=>_(T.target.value),required:!0})]}),d.jsx("button",{type:"submit",className:`w-full bg-[var(--color-button-primary)] hover:bg-[var(--color-button-primary-hover)]\r
                       text-white font-bold py-3 px-6 rounded-md shadow-lg\r
                       transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2\r
                       focus:ring-[var(--color-button-primary)] focus:ring-offset-2 dark:focus:ring-offset-gray-900`,children:"Register"})]}),d.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-6",children:["Already have an account?"," ",d.jsx(Ge,{to:"/login",className:"text-[var(--color-button-primary)] hover:text-[var(--color-text-accent-light)] font-semibold transition duration-200",children:"Login here"})]})]}),y&&d.jsx(At,{message:y.message,type:y.type,onClose:()=>A(null)}),d.jsx("style",{children:`
        @keyframes fade-in-up {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.6s ease-out forwards;
        }
      `})]})},K1=()=>{var U;const i=ia(),[n,s]=w.useState(!0),[l,o]=w.useState(null),[u,h]=w.useState(null),[x,m]=w.useState(null),[g,p]=w.useState({length:0}),[_,y]=w.useState({length:0}),[A,E]=w.useState({length:0}),[R,T]=w.useState({message:"",type:""});return w.useEffect(()=>{(async()=>{s(!0),T({message:"Loading your dashboard...",type:"info"});const{data:{user:G},error:Z}=await X.auth.getUser();if(Z||!G){T({message:"You need to be logged in to view the dashboard.",type:"error"}),i("/login");return}o(G),h(G.email);const{data:V,error:te}=await X.from("users").select("full_name, role").eq("id",G.id).single();if(te)console.error("Error fetching user profile:",te),T({message:"Error loading your profile data.",type:"error"});else if(V&&(m(V.role),V.role==="admin")){T({message:"Redirecting to Admin Dashboard...",type:"info"}),i("/admin/dashboard");return}const{count:le,error:se}=await X.from("documents").select("id",{count:"exact",head:!0}).eq("owner_id",G.id);se&&(console.error("Error fetching owned documents count:",se),T({message:"Error loading your documents count.",type:"error"})),p({length:le||0});const{count:ne,error:ue}=await X.from("signature_requests").select("id",{count:"exact",head:!0}).eq("signer_email",G.email).eq("status","pending");ue&&(console.error("Error fetching pending signatures count:",ue),T({message:"Error loading pending signatures count.",type:"error"})),y({length:ne||0});const{count:be,error:ae}=await X.from("signature_requests").select("id",{count:"exact",head:!0}).eq("signer_email",G.email).eq("status","signed");ae&&(console.error("Error fetching completed signatures count:",ae),T({message:"Error loading completed signatures count.",type:"error"})),E({length:be||0}),s(!1),!Z&&!te&&!se&&!ue&&!ae&&(T({message:"Dashboard loaded!",type:"success"}),setTimeout(()=>T({message:"",type:""}),3e3))})()},[i,u]),d.jsxs("div",{className:"min-h-screen flex flex-col items-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:[R.message&&d.jsx(At,{message:R.message,type:R.type}),d.jsxs("div",{className:"w-full bg-gradient-to-br from-[var(--color-primary-dark)] to-[var(--color-secondary)] text-[var(--color-text-white)] py-24 md:py-32 text-center mb-16 shadow-xl rounded-b-3xl flex flex-col items-center justify-center relative overflow-hidden",children:[d.jsx("div",{className:"absolute -top-16 -left-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),d.jsx("div",{className:"absolute -bottom-16 -right-16 w-64 h-64 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000 -z-10",style:{backgroundColor:"var(--color-button-primary)",opacity:.1}}),d.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-5 leading-tight drop-shadow-lg animate-fade-in-up",style:{color:"var(--color-text-white)"},children:["Welcome, ",((U=l==null?void 0:l.user_metadata)==null?void 0:U.full_name)||(l==null?void 0:l.email)||"User","!"]}),d.jsx("p",{className:"text-lg md:text-xl lg:text-2xl mb-0 max-w-3xl leading-relaxed animate-fade-in-up delay-200",style:{color:"var(--color-text-white-subtle)"},children:"Your central hub for document management and signatures."})]}),n?d.jsx("div",{className:"text-center p-24 text-2xl text-[var(--brand-text-light)]",children:"Loading dashboard data..."}):d.jsx("div",{className:"w-full max-w-7xl px-4 pb-16 box-border",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-md p-8 border border-[var(--brand-border-light)]\r
                         flex flex-col items-center text-center relative overflow-hidden\r
                         transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-lg group`,children:[d.jsx("h2",{className:"text-3xl font-extrabold text-[var(--brand-heading)] mb-6 pb-4 border-b-2 border-[var(--brand-border)] w-full",children:"My Documents"}),d.jsxs("div",{className:"my-8 flex flex-col items-center flex-grow",children:[d.jsx("span",{className:"text-7xl font-extrabold block mb-4 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent drop-shadow-md",children:g.length}),d.jsx("p",{className:"text-xl text-[var(--brand-text-light)] leading-relaxed",children:"documents uploaded"})]}),d.jsx(Ge,{to:"/user/documents",className:`inline-flex justify-center items-center w-auto\r
                           bg-gradient-to-br from-[var(--color-primary-light)] to-[var(--color-primary)]\r
                           text-[var(--color-text-white)] border-none py-4 px-8 rounded-full font-bold text-lg\r
                           transition-all duration-300 ease-out shadow-md\r
                           hover:from-[var(--color-primary)] hover:to-[var(--color-primary-dark)] hover:translate-y-[-4px] hover:shadow-lg`,children:"View All My Documents"})]}),d.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-md p-8 border border-[var(--brand-border-light)]\r
                         flex flex-col items-center text-center relative overflow-hidden\r
                         transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-lg group`,children:[d.jsx("h2",{className:"text-3xl font-extrabold text-[var(--brand-heading)] mb-6 pb-4 border-b-2 border-[var(--brand-border)] w-full",children:"Pending My Signature"}),d.jsxs("div",{className:"my-8 flex flex-col items-center flex-grow",children:[d.jsx("span",{className:"text-7xl font-extrabold block mb-4 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent drop-shadow-md",children:_.length}),d.jsx("p",{className:"text-xl text-[var(--brand-text-light)] leading-relaxed",children:"documents awaiting your signature"})]}),d.jsx(Ge,{to:"/user/signature-requests?tab=received",className:`inline-flex justify-center items-center w-auto\r
                           bg-gradient-to-br from-[var(--color-primary-light)] to-[var(--color-primary)]\r
                           text-[var(--color-text-white)] border-none py-4 px-8 rounded-full font-bold text-lg\r
                           transition-all duration-300 ease-out shadow-md\r
                           hover:from-[var(--color-primary)] hover:to-[var(--color-primary-dark)] hover:translate-y-[-4px] hover:shadow-lg`,children:"View All Pending"})]}),d.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-md p-8 border border-[var(--brand-border-light)]\r
                         flex flex-col items-center text-center relative overflow-hidden\r
                         transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-lg group`,children:[d.jsx("h2",{className:"text-3xl font-extrabold text-[var(--brand-heading)] mb-6 pb-4 border-b-2 border-[var(--brand-border)] w-full",children:"Recently Signed"}),d.jsxs("div",{className:"my-8 flex flex-col items-center flex-grow",children:[d.jsx("span",{className:"text-7xl font-extrabold block mb-4 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent drop-shadow-md",children:A.length}),d.jsx("p",{className:"text-xl text-[var(--brand-text-light)] leading-relaxed",children:"documents you've signed"})]}),d.jsx(Ge,{to:"/user/signature-requests?tab=received",className:`inline-flex justify-center items-center w-auto\r
                           bg-gradient-to-br from-[var(--color-primary-light)] to-[var(--color-primary)]\r
                           text-[var(--color-text-white)] border-none py-4 px-8 rounded-full font-bold text-lg\r
                           transition-all duration-300 ease-out shadow-md\r
                           hover:from-[var(--color-primary)] hover:to-[var(--color-primary-dark)] hover:translate-y-[-4px] hover:shadow-lg`,children:"View All Signed"})]}),d.jsxs("div",{className:`bg-gradient-to-br from-[var(--color-bg-dark-start)] to-[var(--color-bg-dark-end)]\r
                         text-[var(--color-text-white)] rounded-2xl shadow-xl p-16\r
                         flex flex-col items-center text-center col-span-1 md:col-span-2 lg:col-span-3\r
                         transition-all duration-300 ease-out hover:scale-[1.01] hover:shadow-2xl`,children:[d.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-6 drop-shadow-lg",children:"Ready to Sign?"}),d.jsx("p",{className:"text-lg md:text-xl mb-10 max-w-2xl leading-relaxed text-[var(--color-text-white-subtle)]",children:"Start a new signing process or upload a document to send for signatures."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[d.jsx(Ge,{to:"/user/documents/upload",className:`inline-block py-4 px-10 rounded-full shadow-md font-bold text-xl\r
                             bg-[var(--brand-card)] text-[var(--color-button-primary)]\r
                             transition-all duration-300 ease-out hover:bg-gray-100 hover:translate-y-[-4px] hover:shadow-lg`,children:"Upload New Document"}),d.jsx(Ge,{to:"/user/signature-requests",className:`inline-block py-4 px-10 rounded-full shadow-md font-bold text-xl\r
                             bg-transparent text-[var(--color-text-white)] border-2 border-[var(--color-text-white-subtle)]\r
                             transition-all duration-300 ease-out hover:bg-[rgba(255,255,255,0.1)] hover:translate-y-[-4px] hover:border-white`,children:"Request Signature"})]})]})]})})]})},Z1=()=>{const[i,n]=w.useState(!0),[s,l]=w.useState([]),[o,u]=w.useState({message:"",type:""}),h=ia(),[x,m]=w.useState(null);w.useEffect(()=>{(async()=>{n(!0),u({message:"Fetching your documents...",type:"info"});const{data:{user:y},error:A}=await X.auth.getUser();if(A||!y){u({message:"Please log in to view your documents.",type:"error"}),h("/login");return}const{data:E,error:R}=await X.from("documents").select(`
        id,
        title,
        status,
        created_at,
        updated_at,
        document_versions:fk_document_versions_document_id (
          id,
          version_number,
          file_path,
          created_at
        )
      `).eq("owner_id",y.id).order("updated_at",{ascending:!1});R?(console.error("Error fetching documents:",R),u({message:"Error loading your documents.",type:"error"})):(l(E),u({message:"Documents loaded successfully!",type:"success"}),setTimeout(()=>u({message:"",type:""}),3e3)),n(!1)})()},[h]);const g=_=>!_.document_versions||_.document_versions.length===0?null:_.document_versions.reduce((y,A)=>new Date(A.created_at)>new Date(y.created_at)?A:y),p=_=>{const y=g(_),A=`doc-${_.id}`;return d.jsx("li",{style:yt.documentItem,children:d.jsxs(Ge,{to:`/user/documents/${_.id}`,style:{...yt.documentLink,...x===A&&yt.documentLinkHover},onMouseEnter:()=>m(A),onMouseLeave:()=>m(null),children:[d.jsxs("div",{style:yt.documentTitleContainer,children:[d.jsx("span",{style:yt.documentTitle,children:_.title||"Untitled Document"}),d.jsxs("span",{style:yt.documentStatus,children:["(",_.status,")"]})]}),d.jsxs("div",{style:yt.documentMeta,children:[d.jsxs("span",{children:["Created: ",new Date(_.created_at).toLocaleDateString()]}),d.jsxs("span",{children:["Last Updated: ",new Date(_.updated_at).toLocaleDateString()]}),y&&d.jsxs("span",{children:["Version: ",y.version_number]})]})]})},_.id)};return d.jsxs("div",{style:yt.pageContainer,children:[o.message&&d.jsx(At,{message:o.message,type:o.type}),d.jsx("h1",{style:yt.heading,children:"My Documents"}),d.jsx("p",{style:yt.subheading,children:"Manage all the documents you've uploaded."}),i?d.jsx("div",{style:yt.loadingContainer,children:"Loading your documents..."}):d.jsxs("div",{style:yt.contentArea,children:[d.jsx("div",{style:yt.topActions,children:d.jsx(Ge,{to:"/user/documents/upload",style:yt.uploadButton,children:"Upload New Document"})}),s.length===0?d.jsxs("p",{style:yt.noDocuments,children:["You haven't uploaded any documents yet.",d.jsxs(Ge,{to:"/user/documents/upload",style:yt.actionLink,children:[" ","Click here to upload your first document!"]})]}):d.jsx("ul",{style:yt.documentList,children:s.map(p)})]})]})},yt={pageContainer:{backgroundColor:"var(--brand-bg-light)",minHeight:"calc(100vh - var(--navbar-height, 0px))",padding:"40px",fontFamily:"'Inter', sans-serif",color:"var(--brand-text)"},heading:{fontSize:"3.2em",fontWeight:"800",color:"var(--brand-heading)",marginBottom:"10px",textShadow:"0 2px 4px rgba(0,0,0,0.05)"},subheading:{fontSize:"1.3em",color:"var(--brand-text-light)",marginBottom:"40px"},loadingContainer:{textAlign:"center",padding:"60px",fontSize:"1.2em",color:"var(--brand-text-light)"},contentArea:{backgroundColor:"var(--brand-card)",borderRadius:"12px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.08)",padding:"30px",border:"1px solid var(--brand-border)"},topActions:{marginBottom:"30px",textAlign:"right"},uploadButton:{backgroundColor:"var(--color-button-primary)",color:"white",border:"none",padding:"12px 28px",borderRadius:"9999px",fontWeight:"600",textDecoration:"none",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",cursor:"pointer",transition:"background-color 0.3s ease, transform 0.2s ease",fontSize:"1em",display:"inline-block","&:hover":{backgroundColor:"var(--color-button-primary-hover)",transform:"translateY(-2px)"}},noDocuments:{color:"var(--brand-text-light)",fontStyle:"italic",textAlign:"center",padding:"30px 0",fontSize:"1.1em"},actionLink:{color:"var(--color-button-primary)",textDecoration:"none",fontWeight:"600",transition:"text-decoration 0.2s ease-in-out","&:hover":{textDecoration:"underline"}},documentList:{listStyleType:"none",padding:0,margin:0},documentItem:{marginBottom:"15px",paddingBottom:"15px",borderBottom:"1px solid var(--brand-border-light)","&:last-child":{borderBottom:"none"}},documentLink:{textDecoration:"none",display:"block",color:"var(--brand-text)",transition:"color 0.2s ease-in-out"},documentLinkHover:{color:"var(--color-button-primary)"},documentTitleContainer:{display:"flex",alignItems:"center",marginBottom:"5px"},documentTitle:{fontSize:"1.3em",fontWeight:"600",marginRight:"10px"},documentStatus:{fontSize:"0.9em",backgroundColor:"var(--brand-bg-light)",color:"var(--brand-text-light)",padding:"4px 10px",borderRadius:"20px",fontWeight:"500"},documentMeta:{fontSize:"0.9em",color:"var(--brand-text-light)",display:"flex",gap:"20px",flexWrap:"wrap"}};async function J1(i){return new Promise((n,s)=>{const l=new FileReader;l.onload=async o=>{try{const u=o.target.result,h=await crypto.subtle.digest("SHA-256",u),m=Array.from(new Uint8Array(h)).map(g=>g.toString(16).padStart(2,"0")).join("");n(m)}catch(u){console.error("Error during hash calculation:",u),s(new Error("Failed to calculate file hash."))}},l.onerror=o=>{console.error("FileReader error:",o),s(new Error("Error reading file for hashing."))},l.readAsArrayBuffer(i)})}const I1=()=>{const[i,n]=w.useState(null),[s,l]=w.useState(""),[o,u]=w.useState(""),[h,x]=w.useState(!1),[m,g]=w.useState({message:"",type:""}),[p,_]=w.useState(null),y=ia(),A=w.useRef(null);w.useEffect(()=>{(async()=>{const{data:{user:U},error:$}=await X.auth.getUser();$||!U?(g({message:"You need to be logged in to upload documents.",type:"error"}),y("/login")):_(U)})()},[y]);const E=T=>{n(T.target.files[0])},R=async T=>{if(T.preventDefault(),!p){g({message:"No user logged in.",type:"error"});return}if(!i){g({message:"Please select a file first.",type:"error"});return}if(!s.trim()){g({message:"Please enter a document title.",type:"error"});return}x(!0),g({message:"Calculating file hash and preparing upload...",type:"info"});let U=null;try{U=await J1(i)}catch($){console.error("Error calculating file hash:",$),g({message:`Failed to calculate file hash: ${$.message}`,type:"error"}),x(!1);return}try{const{data:$,error:G}=await X.from("documents").insert([{owner_id:p.id,title:s.trim(),description:o.trim()||null,status:"draft",latest_version_number:0,current_document_version_id:null,original_hash:U}]).select().single();if(G)throw G;const Z=`${p.id}/${$.id}/version_1_${i.name}`,{data:V,error:te}=await X.storage.from("documents").upload(Z,i,{cacheControl:"3600",upsert:!1});if(te)throw await X.from("documents").delete().eq("id",$.id),te;const{data:le,error:se}=await X.from("document_versions").insert([{document_id:$.id,version_number:1,file_path:V.path,file_name:i.name,file_type:i.type||"application/octet-stream",file_size:i.size,created_by_user_id:p.id,description_of_changes:"Initial upload of document.",is_signed_version:!1}]).select().single();if(se)throw await X.storage.from("documents").remove([V.path]),await X.from("documents").delete().eq("id",$.id),se;const{error:ne}=await X.from("documents").update({latest_version_number:1,current_document_version_id:le.id,updated_at:new Date().toISOString()}).eq("id",$.id);ne?(console.error("Critical error: Failed to link document to its first version.",ne),g({message:"Document uploaded, but failed to link to its version. Please contact support.",type:"error"})):(g({message:"Document uploaded successfully!",type:"success"}),n(null),l(""),u(""),A.current&&(A.current.value="")),y(`/user/documents/${$.id}`)}catch($){console.error("Upload failed:",$),g({message:`Upload failed: ${$.message}`,type:"error"})}finally{x(!1)}};return d.jsxs("div",{style:Tt.pageContainer,children:[m.message&&d.jsx(At,{message:m.message,type:m.type}),d.jsx("h1",{style:Tt.heading,children:"Upload New Document"}),d.jsx("p",{style:Tt.subheading,children:"Start by uploading your first document to the system."}),d.jsxs("form",{onSubmit:R,style:Tt.uploadForm,children:[d.jsxs("div",{style:Tt.formGroup,children:[d.jsx("label",{htmlFor:"documentTitle",style:Tt.label,children:"Document Title:"}),d.jsx("input",{type:"text",id:"documentTitle",value:s,onChange:T=>l(T.target.value),placeholder:"e.g., Q2 Financial Report",required:!0,style:Tt.input})]}),d.jsxs("div",{style:Tt.formGroup,children:[d.jsx("label",{htmlFor:"documentDescription",style:Tt.label,children:"Description (Optional):"}),d.jsx("textarea",{id:"documentDescription",value:o,onChange:T=>u(T.target.value),rows:"4",placeholder:"A brief description of the document's content.",style:Tt.textarea})]}),d.jsxs("div",{style:Tt.formGroup,children:[d.jsx("label",{htmlFor:"fileUpload",style:Tt.label,children:"Select File:"}),d.jsx("input",{type:"file",id:"fileUpload",ref:A,onChange:E,required:!0,style:Tt.fileInput}),i&&d.jsxs("p",{style:Tt.fileName,children:["Selected: ",i.name," (",(i.size/1024/1024).toFixed(2)," MB)"]})]}),d.jsx("button",{type:"submit",disabled:h||!p,style:Tt.uploadButton,children:h?"Uploading...":"Upload Document"})]})]})},Tt={pageContainer:{backgroundColor:"var(--brand-bg-light)",minHeight:"calc(100vh - var(--navbar-height, 0px))",padding:"40px",fontFamily:"'Inter', sans-serif",color:"var(--brand-text)",display:"flex",flexDirection:"column",alignItems:"center"},heading:{fontSize:"3.2em",fontWeight:"800",color:"var(--brand-heading)",marginBottom:"10px",textShadow:"0 2px 4px rgba(0,0,0,0.05)",textAlign:"center"},subheading:{fontSize:"1.3em",color:"var(--brand-text-light)",marginBottom:"40px",textAlign:"center",maxWidth:"800px"},uploadForm:{backgroundColor:"var(--brand-card)",borderRadius:"12px",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.08)",padding:"40px",border:"1px solid var(--brand-border)",width:"100%",maxWidth:"600px",display:"flex",flexDirection:"column",gap:"25px"},formGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"1.1em",fontWeight:"600",color:"var(--brand-text)"},input:{padding:"12px 15px",border:"1px solid var(--brand-border-light)",borderRadius:"8px",fontSize:"1em",color:"var(--brand-text)",backgroundColor:"var(--brand-bg-dark-accent)",transition:"border-color 0.2s ease, box-shadow 0.2s ease","&:focus":{borderColor:"var(--color-primary)",boxShadow:"0 0 0 3px rgba(var(--color-primary-rgb), 0.2)",outline:"none"}},textarea:{padding:"12px 15px",border:"1px solid var(--brand-border-light)",borderRadius:"8px",fontSize:"1em",color:"var(--brand-text)",backgroundColor:"var(--brand-bg-dark-accent)",minHeight:"100px",resize:"vertical",transition:"border-color 0.2s ease, box-shadow 0.2s ease","&:focus":{borderColor:"var(--color-primary)",boxShadow:"0 0 0 3px rgba(var(--color-primary-rgb), 0.2)",outline:"none"}},fileInput:{padding:"10px",border:"1px solid var(--brand-border-light)",borderRadius:"8px",backgroundColor:"var(--brand-bg-dark-accent)",color:"var(--brand-text)",cursor:"pointer"},fileName:{fontSize:"0.9em",color:"var(--brand-text-light)",marginTop:"5px"},uploadButton:{backgroundColor:"var(--color-button-primary)",color:"white",border:"none",padding:"15px 30px",borderRadius:"9999px",fontWeight:"700",fontSize:"1.1em",cursor:"pointer",transition:"background-color 0.3s ease, transform 0.2s ease",boxShadow:"0 5px 15px rgba(0,0,0,0.15)",marginTop:"20px",alignSelf:"center",width:"fit-content","&:hover":{backgroundColor:"var(--color-button-primary-hover)",transform:"translateY(-2px)"},"&:disabled":{backgroundColor:"var(--color-grey)",cursor:"not-allowed",transform:"none",boxShadow:"none"}}},W1=({filePath:i,fileType:n})=>{const[s,l]=w.useState(null),[o,u]=w.useState(!0),[h,x]=w.useState(null);if(w.useEffect(()=>{(async()=>{if(!i){x("No file path provided for viewer."),u(!1);return}u(!0),x(null);try{const{data:_,error:y}=await X.storage.from("documents").createSignedUrl(i,60);if(y)throw y;l(_.signedUrl)}catch(_){console.error("Error fetching signed URL:",_),x(`Failed to load document preview: ${_.message}`)}finally{u(!1)}})()},[i]),o)return d.jsx("div",{style:Mr.container,children:"Loading preview..."});if(h)return d.jsx("div",{style:Mr.error,children:h});if(!s)return d.jsx("div",{style:Mr.container,children:"No preview available."});const m=n==="application/pdf",g=n.startsWith("image/");return m?d.jsx("div",{style:Mr.container,children:s?d.jsx("embed",{src:s+"#toolbar=1&navpanes=0&scrollbar=1",type:"application/pdf",width:"100%",height:"100%"}):d.jsx("p",{children:"No preview available"})}):g?d.jsx("div",{style:Mr.container,children:d.jsx("img",{src:s,alt:"Document Preview",style:Mr.image,loading:"lazy"})}):d.jsxs("div",{style:Mr.container,children:[d.jsxs("p",{children:["No preview available for this file type (",n,")."]}),d.jsx("p",{children:"Please download the file to view its content."})]})},Mr={container:{width:"100%",height:"600px",backgroundColor:"var(--brand-bg-dark)",borderRadius:"8px",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",color:"var(--brand-text-light)",fontSize:"1.1em",border:"1px solid var(--brand-border)"},image:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},error:{color:"var(--color-error-text)",backgroundColor:"var(--color-error-bg)",padding:"15px",borderRadius:"8px",textAlign:"center"}},la=({show:i,onClose:n,children:s})=>i?d.jsx("div",{style:iu.overlay,onClick:n,children:d.jsxs("div",{style:iu.modalContent,onClick:l=>l.stopPropagation(),children:[d.jsx("button",{style:iu.closeButton,onClick:n,children:"×"}),s]})}):null,iu={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modalContent:{backgroundColor:"var(--brand-card)",padding:"30px",borderRadius:"12px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.25)",position:"relative",minWidth:"350px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},closeButton:{position:"absolute",top:"15px",right:"15px",background:"none",border:"none",fontSize:"1.8em",color:"var(--brand-text-light)",cursor:"pointer",transition:"color 0.2s ease","&:hover":{color:"var(--brand-heading)"}}},e_=i=>{const n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=i.split(/[,;\n]/).map(h=>h.trim()).filter(h=>h.length>0),l=[],o=[],u=new Set;return s.forEach(h=>{n.test(h)?u.has(h)||(l.push(h),u.add(h)):o.push(h)}),{validEmails:l,invalidEmails:o}},t_=()=>{var wt;const{id:i}=mp(),n=ia(),[s,l]=w.useState(null),[o,u]=w.useState([]),[h,x]=w.useState([]),[m,g]=w.useState(!0),[p,_]=w.useState({message:"",type:""}),[y,A]=w.useState(null),[E,R]=w.useState(!1),[T,U]=w.useState(""),[$,G]=w.useState(""),[Z,V]=w.useState(!1),[te,le]=w.useState(null),[se,ne]=w.useState(""),ue=w.useRef(null),[be,ae]=w.useState(!1),[ve,ce]=w.useState(null),[oe,z]=w.useState([]),[I,j]=w.useState(!1),[P,S]=w.useState(!1),[q,O]=w.useState(""),[Y,D]=w.useState("requests"),[ee,J]=w.useState(""),[me,re]=w.useState(!1),[ge,Se]=w.useState(""),[Oe,Be]=w.useState(""),Ye=async W=>{const{data:_e,error:De}=await X.from("audit_logs").select(`
        *,
        signature_request:signature_request_id (
          signer_email,
          signer:signer_id (
            full_name,
            title,
            department
          )
        )
      `).eq("signature_request_id",W).order("timestamp",{ascending:!0});if(De)throw De;return _e||[]},Fe=async()=>{g(!0);const{data:{user:W},error:_e}=await X.auth.getUser();if(_e||!W){_({message:"You need to be logged in to view document details.",type:"error"}),n("/login"),g(!1);return}A(W),Be(W.email||"");const{data:De,error:Re}=await X.from("documents").select(`
          *,
          current_document_version:current_document_version_id (
            id, file_path, file_name, file_type, file_size, version_number
          )
        `).eq("id",i).eq("owner_id",W.id).single();if(Re){console.error("Error fetching document:",Re),_({message:`Error loading document: ${Re.message}`,type:"error"}),g(!1),(Re.code==="PGRST116"||Re.message.includes("Row not found"))&&(_({message:"Document not found or you don't have access.",type:"error"}),n("/user/documents"));return}l(De),U(De.title),G(De.description||"");const{data:Qe,error:Xe}=await X.from("document_versions").select(`
          id, version_number, file_path, file_name, file_type, file_size,
          created_at, created_by_user_id, description_of_changes, is_signed_version
        `).eq("document_id",i).order("version_number",{ascending:!1});Xe?(console.error("Error fetching document versions:",Xe),_({message:`Error loading document versions: ${Xe.message}`,type:"error"})):(u(Qe),De.current_document_version_id?J(De.current_document_version_id):Qe.length>0&&J(Qe[0].id));const{data:gt,error:ot}=await X.from("signature_requests").select(`
        id, document_version_id, signer_email, status, requested_at, signed_at,
        declined_at, cancelled_at, signing_url,
        signer:signer_id (full_name, title, department)
        `).eq("document_id",i).order("requested_at",{ascending:!0});ot?(console.error("Error fetching signature requests:",ot),_({message:`Error loading signature requests: ${ot.message}`,type:"error"})):x(gt),g(!1)};w.useEffect(()=>{Fe()},[i,n]);const oa=async(W,_e)=>{if(typeof window>"u"||typeof window.document>"u"){console.error("Download attempted outside the browser environment.");return}if(!W||!_e){_({message:"File path or name is missing.",type:"error"});return}try{const{data:De,error:Re}=await X.storage.from("documents").download(W);if(Re)throw Re;const Qe=URL.createObjectURL(De),Xe=window.document.createElement("a");Xe.href=Qe,Xe.download=_e,window.document.body.appendChild(Xe),Xe.click(),window.document.body.removeChild(Xe),URL.revokeObjectURL(Qe),_({message:`Downloading ${_e}...`,type:"info"})}catch(De){console.error("Error downloading file:",De),_({message:`Failed to download file: ${De.message}`,type:"error"})}},ki=async()=>{g(!0);const{error:W}=await X.from("documents").update({title:T,description:$}).eq("id",s.id).eq("owner_id",y.id);W?(_({message:`Failed to update document details: ${W.message}`,type:"error"}),console.error("Error updating document:",W)):(l(_e=>({..._e,title:T,description:$})),_({message:"Document details updated successfully!",type:"success"}),R(!1)),g(!1)},Yt=async W=>{if(W.preventDefault(),!te){_({message:"Please select a file to upload.",type:"error"});return}if(!s){_({message:"Document not loaded.",type:"error"});return}g(!0),V(!1);const _e=(s.latest_version_number||0)+1,De=te.name.replace(/[^a-zA-Z0-9.\-_]/g,"_"),Re=`${y.id}/${s.id}/version_${_e}_${De}`;try{console.log("--- Starting New Version Upload ---"),console.log("Document ID:",s.id),console.log("Current Document Version ID (before new upload):",s.current_document_version_id),console.log("New Version Number:",_e),console.log("File Name:",te.name);const{data:Qe,error:Xe}=await X.storage.from("documents").upload(Re,te,{cacheControl:"3600",upsert:!1});if(Xe)throw console.error("Supabase Storage Upload Error:",Xe),Xe;if(console.log("File uploaded to storage successfully:",Qe.path),s.current_document_version_id){console.log("Attempting to void previous signature requests...");const nt=new Date().toISOString(),{data:Rt,error:qa}=await X.from("signature_requests").update({status:"void",voided_at:nt},{returning:"representation"}).eq("document_id",s.id).eq("document_version_id",s.current_document_version_id);qa?(console.error("Error voiding previous signature requests:",qa),_({message:"New version uploaded, but failed to void some old signature requests.",type:"warning"})):(console.log("Previous signature requests update result:",Rt==null?void 0:Rt.length,"requests updated to 'void'."),_({message:"Previous signature requests voided.",type:"info"}))}else console.log("No previous document_version_id found. Skipping voiding of old requests.");const{data:gt,error:ot}=await X.from("document_versions").insert([{document_id:s.id,version_number:_e,file_path:Qe.path,file_name:te.name,file_type:te.type||"application/octet-stream",file_size:te.size,created_by_user_id:y.id,description_of_changes:se,is_signed_version:!1}]).select().single();if(ot)throw console.error("Document Version Insert Error:",ot),await X.storage.from("documents").remove([Qe.path]),ot;console.log("New document version inserted:",gt);const{error:We}=await X.from("documents").update({latest_version_number:_e,current_document_version_id:gt.id}).eq("id",s.id);We?(console.error("Critical error: Failed to update document's current version:",We),_({message:"Document updated, but link to new version failed. Please contact support.",type:"error"})):(_({message:`Document updated to Version ${_e}!`,type:"success"}),console.log("Document successfully updated to new current version.")),le(null),ne(""),ue.current&&(ue.current.value=""),await Fe()}catch(Qe){console.error("Overall New Version Upload Process Failed:",Qe),_({message:`Upload failed: ${Qe.message}`,type:"error"})}finally{g(!1),console.log("--- New Version Upload Process Finished ---")}},Oi=async W=>{W.preventDefault();const{validEmails:_e,invalidEmails:De}=e_(q);if(_e.length===0){_({message:"Please enter at least one valid email address to send the request.",type:"error"});return}if(!s||!s.current_document_version){_({message:"No current document version to send for signature.",type:"error"});return}g(!0),S(!1);const Re=[],Qe=[],Xe=_e.map(async We=>{try{const nt=crypto.randomUUID(),Rt=`${window.location.origin}/user/sign/${nt}`,{data:qa,error:Ba}=await X.from("signature_requests").select("id").eq("document_id",s.id).eq("document_version_id",s.current_document_version_id).eq("signer_email",We).maybeSingle();if(Ba)throw Ba;if(qa){Re.push({email:We,status:"already_sent"});return}const{data:ll,error:Vn}=await X.from("signature_requests").insert([{id:nt,document_id:s.id,document_version_id:s.current_document_version_id,signer_email:We,status:"pending",requested_at:new Date().toISOString(),signing_url:Rt}]).select().single();if(Vn)throw Vn;await X.from("audit_logs").insert({user_id:y.id,user_email:y.email,event_type:"SIGNATURE_REQUEST_SENT",document_id:s.id,document_version_id:s.current_document_version_id,signature_request_id:ll.id,details:{signer_email:We,signing_url:Rt}}),Re.push({email:We,id:ll.id,signing_url:Rt})}catch(nt){console.error(`Error sending signature request to ${We}:`,nt),Qe.push({email:We,error:nt.message})}});if(await Promise.allSettled(Xe),Re.length>0&&s.status!=="pending_signature"&&s.status!=="signed"){const{error:We}=await X.from("documents").update({status:"pending_signature"}).eq("id",s.id);We?(console.error("Failed to update document status after signature request:",We),_({message:"Some signature requests sent, but document status update failed. Please check document status manually.",type:"warning"})):l(nt=>({...nt,status:"pending_signature"}))}let gt="",ot="success";if(Re.length>0){const We=Re.filter(Rt=>Rt.status!=="already_sent").length,nt=Re.filter(Rt=>Rt.status==="already_sent").length;gt+=`${We} signature request(s) sent successfully.`,nt>0&&(gt+=` (${nt} request(s) were already pending for the current version.)`)}if(Qe.length>0){ot=Re.length>0?"warning":"error";const We=Qe.map(nt=>nt.email).join(", ");gt+=` Failed to send to: ${We}.`,gt+=` Details: ${Qe.map(nt=>nt.error).join("; ")}`}if(De.length>0){ot=ot==="success"?"warning":"error";const We=De.join(", ");gt+=` Invalid emails ignored: ${We}.`}_(gt?{message:gt,type:ot}:{message:"No valid emails provided.",type:"error"}),O(""),await Fe(),g(!1)},al=async()=>{if(!(!s||!y)&&window.confirm("Are you sure you want to cancel this document and all pending signature requests? This action cannot be undone.")){g(!0);try{const{error:W}=await X.from("documents").update({status:"cancelled"}).eq("id",s.id).eq("owner_id",y.id);if(W)throw W;const{error:_e}=await X.from("signature_requests").update({status:"cancelled",cancelled_at:new Date().toISOString(),cancelled_by_user_id:y.id}).eq("document_id",s.id).in("status",["pending","declined","expired"]);_e&&console.warn("Could not update all related signature requests to cancelled:",_e),await X.from("audit_logs").insert({user_id:y.id,user_email:y.email,event_type:"DOCUMENT_CANCELLED",document_id:s.id,details:{cancellation_reason:"Cancelled by sender",old_status:s.status}}),_({message:"Document and all pending signature requests have been cancelled.",type:"success"}),await Fe()}catch(W){console.error("Error cancelling document:",W),_({message:`Failed to cancel document: ${W.message}`,type:"error"})}finally{g(!1)}}},rl=async W=>{if(W.preventDefault(),!ge.trim()){_({message:"Please provide a description for the issue.",type:"error"});return}g(!0),re(!1);try{const{error:_e}=await X.from("incident_reports").insert([{document_id:s.id,reported_by_user_id:y.id,reported_by_email:Oe,reason:"User Reported Issue",details:ge,status:"pending"}]);if(_e)throw _e;_({message:"Your issue has been reported successfully. We will look into it shortly.",type:"success"}),Se("")}catch(_e){console.error("Error reporting issue:",_e),_({message:`Failed to report issue: ${_e.message}`,type:"error"})}finally{g(!1)}},gr=ee?h.filter(W=>W.document_version_id===ee):h;if(m)return d.jsxs("div",{className:"bg-brand-bg-light min-h-[calc(100vh-var(--navbar-height,0px))] p-10 font-inter text-brand-text flex flex-col items-center justify-center",children:[d.jsx("h1",{className:"text-5xl font-extrabold text-brand-heading mb-2 drop-shadow-sm text-center break-words",children:"Document Details"}),d.jsx("p",{className:"text-xl text-brand-text-light text-center",children:"Loading document details..."})]});if(!s)return d.jsxs("div",{className:"bg-brand-bg-light min-h-[calc(100vh-var(--navbar-height,0px))] p-10 font-inter text-brand-text flex flex-col items-center justify-center",children:[d.jsx("h1",{className:"text-5xl font-extrabold text-brand-heading mb-2 drop-shadow-sm text-center break-words",children:"Document Not Found"}),d.jsx("p",{className:"text-xl text-brand-text-light text-center mb-10",children:"The document you are looking for does not exist or you do not have permission to view it."}),d.jsx(Ge,{to:"/user/documents",className:"bg-gray-500 text-white px-6 py-3 rounded-full font-semibold text-lg cursor-pointer transition duration-300 ease-in-out hover:bg-gray-600 hover:translate-y-[-2px]",children:"Back to My Documents"})]});const nl=y&&s.owner_id===y.id,sl=nl&&s.status!=="signed"&&s.status!=="cancelled",Ui=nl&&s.status==="pending_signature",ea=s.current_document_version,xr=["application/pdf","image/jpeg","image/png","image/gif"],_t=W=>{switch(W){case"draft":return"bg-color-info-bg text-color-info-text";case"pending_signature":return"bg-color-warning-bg text-color-warning-text";case"signed":return"bg-color-success-bg text-color-success-text";case"cancelled":return"bg-color-error-bg text-color-error-text";case"approved":return"bg-color-success-bg text-color-success-text";case"rejected":return"bg-color-error-bg text-color-error-text";case"void":return"bg-gray-400 text-gray-900";default:return"bg-gray-200 text-gray-800"}},ca=W=>{if(W===0)return"0 Bytes";const _e=1024,De=["Bytes","KB","MB","GB","TB"],Re=Math.floor(Math.log(W)/Math.log(_e));return parseFloat((W/Math.pow(_e,Re)).toFixed(2))+" "+De[Re]};return d.jsxs("div",{className:"bg-brand-bg-light min-h-[calc(100vh-var(--navbar-height,0px))] p-4 md:p-8 font-inter text-brand-text flex flex-col items-center antialiased",children:[p.message&&d.jsx(At,{message:p.message,type:p.type}),d.jsxs("div",{className:"w-full max-w-7xl mb-8 px-4 md:px-0",children:[" ",d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2",children:[d.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-brand-heading drop-shadow-sm break-words tracking-tight flex-1",children:s.title}),d.jsx("span",{className:`px-4 py-1 rounded-full text-base font-semibold whitespace-nowrap mt-2 md:mt-0 ${_t(s.status)}`,children:s.status.replace(/_/g," ")})]}),d.jsx("p",{className:"text-base md:text-lg text-brand-text-light mb-6 leading-relaxed",children:"Comprehensive details and management for your document."}),s.status==="cancelled"&&d.jsxs("div",{className:"bg-color-error-bg text-color-error-text border-2 border-color-error-border rounded-xl p-4 text-center text-lg font-semibold flex items-center justify-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:"⚠️"}),d.jsxs("p",{children:["This document has been ",d.jsx("strong",{children:"cancelled"})," by the sender and is no longer valid for signing."]})]})]}),d.jsxs("div",{className:"w-full max-w-7xl grid grid-cols-1 lg:grid-cols-12 gap-8",children:[d.jsxs("div",{className:"lg:col-span-7 flex flex-col gap-8 min-w-0",children:[" ",d.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-6 md:p-8 border border-brand-border",children:[" ",d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-brand-heading mb-4 pb-2 border-b border-brand-border-light",children:"Document Preview"}),ea&&xr.includes(ea.file_type)?d.jsxs("div",{className:"rounded-lg overflow-hidden border border-brand-border-light bg-brand-bg-dark-accent h-[500px] lg:h-[600px] flex items-center justify-center",children:[" ",d.jsx(W1,{filePath:ea.file_path,fileType:ea.file_type})]}):ea?d.jsxs("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg h-[500px] lg:h-[600px] flex items-center justify-center",children:["No preview available for this file type (",ea.file_type,"). Please download to view."]}):d.jsx("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg h-[500px] lg:h-[600px] flex items-center justify-center",children:"No current version to preview. Please upload a version."})]}),d.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-6 md:p-8 border border-brand-border",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-brand-heading mb-4 pb-2 border-b border-brand-border-light",children:"Document Summary"}),d.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[d.jsx("strong",{children:"Title:"})," ",E?d.jsx("input",{type:"text",value:T,onChange:W=>U(W.target.value),className:"p-2 border border-brand-border rounded-md text-base text-brand-text bg-brand-bg-dark-accent w-full focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200"}):d.jsx("span",{children:s.title})]}),d.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[d.jsx("strong",{children:"Created:"})," ",new Date(s.created_at).toLocaleDateString()]}),d.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[d.jsx("strong",{children:"Last Updated:"})," ",new Date(s.updated_at).toLocaleDateString()]}),d.jsxs("div",{className:"text-base md:text-lg mb-2 text-brand-text",children:[d.jsx("strong",{children:"Latest Version:"})," ",s.latest_version_number]}),d.jsxs("div",{className:"text-base md:text-lg text-brand-text",children:[d.jsx("strong",{children:"Description:"})," ",E?d.jsx("textarea",{value:$,onChange:W=>G(W.target.value),className:"p-2 border border-brand-border rounded-md text-base text-brand-text bg-brand-bg-dark-accent w-full h-20 resize-y focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",rows:"3"}):d.jsx("span",{children:s.description||"No description provided."})]})]})]}),d.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-8 w-full",children:[" ",d.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-6 md:p-8 border border-brand-border",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-brand-heading mb-4 pb-2 border-b border-brand-border-light",children:"Actions"}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[sl?d.jsxs(d.Fragment,{children:[E?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:ki,className:"bg-color-success text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-success-hover hover:-translate-y-1 shadow-md",children:"Save"}),d.jsx("button",{onClick:()=>R(!1),className:"bg-gray-500 text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-gray-600 hover:-translate-y-1 shadow-md",children:"Cancel"})]}):d.jsx("button",{onClick:()=>R(!0),className:"bg-color-info text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-info-hover hover:-translate-y-1 shadow-md",children:"Edit Details"}),d.jsx("button",{onClick:()=>V(!0),className:"bg-color-secondary text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-secondary-hover hover:-translate-y-1 shadow-md",children:"Upload New Version"}),d.jsx("button",{onClick:()=>S(!0),className:"bg-color-secondary text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-secondary-hover hover:-translate-y-1 shadow-md",children:"Send for Signature"})]}):d.jsxs("p",{className:"text-brand-text-light italic p-3 bg-brand-bg-dark-accent rounded-md border border-brand-border text-center w-full",children:["Document status (",s.status.replace(/_/g," "),") prevents further modifications."]}),Ui&&d.jsx("button",{onClick:al,className:"bg-color-error text-white px-5 py-2 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-color-error-hover hover:-translate-y-1 shadow-md",children:"Cancel Document"}),ea&&d.jsx("button",{onClick:()=>oa(ea.file_path,ea.file_name),className:"bg-color-button-primary text-white px-5 py-2 rounded-full font-bold text-base cursor-pointer transition duration-300 ease-in-out shadow-md hover:bg-color-button-primary-hover hover:-translate-y-1",children:"Download Current Version"})]})]}),d.jsxs("div",{className:"bg-brand-card rounded-xl shadow-lg p-0 border border-brand-border flex-1 flex flex-col overflow-hidden",children:[d.jsxs("div",{className:"flex border-b border-brand-border-light",children:[d.jsx("button",{className:`flex-1 px-4 py-3 text-base font-semibold rounded-t-lg ${Y==="requests"?"border-b-2 border-color-button-primary text-color-button-primary bg-brand-bg-light":"text-brand-text-light hover:text-brand-heading"} transition-colors duration-200`,onClick:()=>D("requests"),children:"Signature Requests"}),d.jsx("button",{className:`flex-1 px-4 py-3 text-base font-semibold rounded-t-lg ${Y==="versions"?"border-b-2 border-color-button-primary text-color-button-primary bg-brand-bg-light":"text-brand-text-light hover:text-brand-heading"} transition-colors duration-200`,onClick:()=>D("versions"),children:"Document Versions"})]}),d.jsxs("div",{className:"p-6 md:p-8 flex-1 flex flex-col",children:[Y==="requests"&&d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"version-select",className:"block text-brand-text mb-2 text-base font-medium",children:"Select Document Version:"}),d.jsxs("select",{id:"version-select",value:ee,onChange:W=>J(W.target.value),className:"w-full p-2 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",children:[d.jsx("option",{value:"",children:"All Versions"}),o.map(W=>d.jsxs("option",{value:W.id,children:["Version ",W.version_number," (",new Date(W.created_at).toLocaleDateString(),")"]},W.id))]})]}),gr.length===0?d.jsx("div",{className:"flex-1 flex items-center justify-center",children:d.jsx("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg",children:"No signature requests found for the selected version."})}):d.jsx("div",{className:"overflow-y-auto max-h-[340px] pr-1",children:d.jsx("ul",{className:"list-none p-0 m-0 space-y-3",children:gr.map(W=>{var _e,De;return d.jsxs("li",{className:"bg-brand-bg-dark-accent rounded-lg p-4 border border-brand-border transition-all duration-200 hover:shadow-md",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2 text-brand-heading",children:[d.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[d.jsx("strong",{className:"text-base",children:"Signer:"}),d.jsx("span",{className:"text-base",children:((_e=W.signer)==null?void 0:_e.full_name)||W.signer_email}),d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${_t(W.status)}`,children:W.status.replace(/_/g," ")})]}),d.jsxs("span",{className:"text-brand-text-light text-xs",children:["Requested: ",new Date(W.requested_at).toLocaleDateString()]})]}),d.jsx("div",{className:"text-xs text-brand-text-light mb-1",children:W.signer?d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold",children:"Full Name:"})," ",W.signer.full_name||"N/A"]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold",children:"Title:"})," ",W.signer.title||"N/A"]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold",children:"Department:"})," ",W.signer.department||"N/A"]})]}):d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold",children:"Email:"})," ",W.signer_email]})}),d.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Version: ",d.jsx("span",{className:"font-semibold",children:((De=o.find(Re=>Re.id===W.document_version_id))==null?void 0:De.version_number)||"N/A"})]}),W.status==="signed"&&W.signed_at&&d.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Signed: ",new Date(W.signed_at).toLocaleDateString()]}),W.status==="declined"&&W.declined_at&&d.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Declined: ",new Date(W.declined_at).toLocaleDateString()]}),W.status==="cancelled"&&W.cancelled_at&&d.jsxs("div",{className:"text-xs text-brand-text-light mb-1",children:["Cancelled: ",new Date(W.cancelled_at).toLocaleDateString()]}),d.jsx("button",{onClick:async()=>{ce(W),ae(!0),j(!0);try{const Re=await Ye(W.id);z(Re)}catch(Re){console.error("Error fetching audit logs:",Re.message),_({message:`Failed to fetch audit logs: ${Re.message}`,type:"error"}),z([])}j(!1)},className:"mt-2 bg-color-info text-white px-4 py-2 rounded-full text-xs font-semibold hover:bg-color-info-hover transition duration-300 ease-in-out shadow-sm",children:"See Audit"})]},W.id)})})})]}),Y==="versions"&&d.jsx("div",{className:"flex-1 flex flex-col",children:o.length===0?d.jsx("div",{className:"flex-1 flex items-center justify-center",children:d.jsx("p",{className:"italic text-brand-text-light text-center p-5 border border-dashed border-brand-border-light rounded-lg",children:"No previous versions of this document exist."})}):d.jsx("div",{className:"overflow-y-auto max-h-[340px] pr-1",children:d.jsx("ul",{className:"list-none p-0 m-0 space-y-3",children:o.map(W=>d.jsxs("li",{className:"bg-brand-bg-dark-accent rounded-lg p-4 border border-brand-border transition-all duration-200 hover:shadow-md",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2 text-brand-heading",children:[d.jsxs("strong",{className:"text-base",children:["Version ",W.version_number]}),d.jsxs("span",{className:"text-brand-text-light text-xs",children:["Uploaded: ",new Date(W.created_at).toLocaleDateString()]})]}),d.jsxs("p",{className:"text-sm text-brand-text mb-1",children:["File: ",W.file_name," (",ca(W.file_size),")"]}),d.jsxs("p",{className:"text-xs text-brand-text-light mb-2",children:["Changes: ",W.description_of_changes||"No description provided."]}),W.is_signed_version&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-color-success-bg text-color-success-text mr-2",children:"SIGNED VERSION"}),d.jsx("button",{onClick:()=>oa(W.file_path,W.file_name),className:"mt-2 bg-color-button-secondary text-white px-4 py-2 rounded-full text-xs font-semibold hover:bg-color-button-secondary-hover transition duration-300 ease-in-out shadow-sm",children:"Download Version"})]},W.id))})})})]})]}),d.jsx("div",{className:"text-center",children:d.jsx("button",{onClick:()=>re(!0),className:"bg-gray-700 text-white px-6 py-3 rounded-full font-semibold text-base cursor-pointer transition duration-300 ease-in-out hover:bg-gray-800 hover:-translate-y-1 shadow-md",children:"Report an Issue"})})]})]}),d.jsx(la,{show:Z,onClose:()=>V(!1),title:"Upload New Document Version",children:d.jsxs("form",{onSubmit:Yt,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newVersionFile",className:"block text-brand-text text-base font-medium mb-2",children:"Select File:"}),d.jsx("input",{type:"file",id:"newVersionFile",ref:ue,onChange:W=>le(W.target.files[0]),className:"w-full p-2 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-color-button-secondary file:text-white hover:file:bg-color-button-secondary-hover",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newVersionDescription",className:"block text-brand-text text-base font-medium mb-2",children:"Description of Changes (Optional):"}),d.jsx("textarea",{id:"newVersionDescription",value:se,onChange:W=>ne(W.target.value),rows:"3",className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"e.g., Fixed typos, Added new clause, Minor revisions"})]}),d.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[d.jsx("button",{type:"button",onClick:()=>V(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-brand-text font-semibold hover:bg-gray-100 transition duration-300 ease-in-out",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-color-button-primary text-white px-6 py-2 rounded-full font-semibold hover:bg-color-button-primary-hover transition duration-300 ease-in-out",children:"Upload Version"})]})]})}),d.jsx(la,{show:P,onClose:()=>S(!1),title:"Send Document for Signature",children:d.jsxs("form",{onSubmit:Oi,className:"space-y-4",children:[d.jsxs("p",{className:"text-brand-text-light mb-4",children:["Enter one or more signer email addresses, separated by commas, semicolons, or new lines. A signature request will be sent for the current version of the document (Version"," ",((wt=s==null?void 0:s.current_document_version)==null?void 0:wt.version_number)||"N/A",")."]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"signerEmails",className:"block text-brand-text text-base font-medium mb-2",children:"Signer Email(s):"}),d.jsx("textarea",{id:"signerEmails",value:q,onChange:W=>O(W.target.value),rows:"5",className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"signer1@example.com, signer2@example.com",required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[d.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-brand-text font-semibold hover:bg-gray-100 transition duration-300 ease-in-out",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-color-button-primary text-white px-6 py-2 rounded-full font-semibold hover:bg-color-button-primary-hover transition duration-300 ease-in-out",children:"Send Request(s)"})]})]})}),d.jsx(la,{show:me,onClose:()=>re(!1),title:"Report an Issue",children:d.jsxs("form",{onSubmit:rl,className:"space-y-4",children:[d.jsx("p",{className:"text-brand-text-light mb-4",children:"Please describe the issue you are experiencing with this document or the platform. Provide as much detail as possible."}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"issueDescription",className:"block text-brand-text text-base font-medium mb-2",children:"Issue Description:"}),d.jsx("textarea",{id:"issueDescription",value:ge,onChange:W=>Se(W.target.value),rows:"6",className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"e.g., Document is not rendering correctly, Signature request failed for a signer, Typo in document details",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"issueContactEmail",className:"block text-brand-text text-base font-medium mb-2",children:"Your Email (for follow-up):"}),d.jsx("input",{type:"email",id:"issueContactEmail",value:Oe,onChange:W=>Be(W.target.value),className:"w-full p-3 border border-brand-border rounded-md bg-brand-bg-dark-accent text-brand-text focus:ring-2 focus:ring-color-button-primary focus:border-transparent transition-all duration-200",placeholder:"your.email@example.com",required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[d.jsx("button",{type:"button",onClick:()=>re(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-brand-text font-semibold hover:bg-gray-100 transition duration-300 ease-in-out",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-color-error text-white px-6 py-2 rounded-full font-semibold hover:bg-color-error-hover transition duration-300 ease-in-out",children:"Submit Report"})]})]})}),d.jsx(la,{show:be,onClose:()=>ae(!1),title:"Signature Audit Trail",children:I?d.jsx("div",{className:"text-center py-8 text-brand-text-light",children:"Loading audit logs..."}):d.jsx("div",{children:oe.length===0?d.jsx("div",{className:"text-center py-8 text-brand-text-light",children:"No audit logs found for this signature request."}):d.jsx("ul",{className:"divide-y divide-brand-border",children:oe.map(W=>d.jsxs("li",{className:"py-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-semibold text-brand-heading",children:W.event_type.replace(/_/g," ")}),d.jsx("span",{className:"text-xs text-brand-text-light",children:new Date(W.timestamp).toLocaleString()})]}),d.jsxs("div",{className:"text-xs text-brand-text-light mt-1",children:[W.details&&typeof W.details=="object"?Object.entries(W.details).map(([_e,De])=>d.jsxs("div",{children:[d.jsxs("span",{className:"font-semibold capitalize",children:[_e.replace(/_/g," "),":"]})," ",d.jsx("span",{children:_e==="signing_location"&&typeof De=="object"&&De!==null?`Latitude: ${De.latitude}, Longitude: ${De.longitude}`:String(De)})]},_e)):String(W.details)," "]})]},W.id))})})})]})},a_=({show:i,onClose:n,onVerified:s,requiredFactors:l=["totp"]})=>{const[o,u]=w.useState(!1),[h,x]=w.useState(""),[m,g]=w.useState(""),[p,_]=w.useState(""),[y,A]=w.useState(null);w.useEffect(()=>{if(!i){u(!1),x(""),g(""),_(""),A(null);return}(async()=>{var U;u(!0),x("");try{const{data:$,error:G}=await X.auth.mfa.listFactors();if(G)throw G;const Z=(U=$.totp)==null?void 0:U.find(V=>V.status==="verified");l.includes("totp")&&Z?(g("totp"),A(Z.id)):(x("No verified MFA factor found for challenge. Please enable 2FA on your profile."),g(null))}catch($){console.error("Error listing MFA factors:",$),x("Failed to determine 2FA method. Please try again."),g(null)}finally{u(!1)}})()},[i,l]);const E=async()=>{if(x(""),!p||p.length!==6){x("Please enter a valid 6-digit TOTP code.");return}if(!y){x("No active TOTP factor found for verification.");return}u(!0);try{const{data:T,error:U}=await X.auth.mfa.challengeAndVerify({factorId:y,code:p});U?(console.error("TOTP verification failed:",U),x(U.message||"Invalid TOTP code. Please try again.")):T?(s(T.session),n()):x("Unknown error during verification.")}catch(T){console.error("Unexpected error during TOTP verification:",T),x("An unexpected error occurred during verification.")}finally{u(!1)}},R=()=>{x(""),_(""),n()};return d.jsxs(la,{show:i,onClose:R,children:[d.jsx("h3",{className:"text-2xl font-semibold text-brand-heading mb-4 text-center",children:"Action Requires Verification"}),o&&d.jsx("p",{className:"text-center text-brand-text-light",children:"Loading verification methods..."}),h&&d.jsx("p",{className:"text-color-error-text bg-color-error-bg p-3 rounded-md text-sm mb-4",children:h}),!o&&m==="totp"&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-brand-text text-center",children:"Please enter the 6-digit code from your authenticator app."}),d.jsx("input",{type:"text",value:p,onChange:T=>_(T.target.value.trim()),placeholder:"Authenticator code",maxLength:6,className:"w-full p-3 rounded-md border border-brand-border bg-brand-card text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary text-center text-xl tracking-widest",inputMode:"numeric",pattern:"[0-9]*",disabled:o}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:R,disabled:o,className:"px-6 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors disabled:opacity-50",children:"Cancel"}),d.jsx("button",{onClick:E,disabled:o||!p||p.length!==6,className:"px-6 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors disabled:opacity-50",children:"Verify"})]})]}),!o&&!m&&!h&&d.jsx("p",{className:"text-center text-brand-text",children:"No suitable 2FA method found or enabled. Please enable 2FA in your profile to perform this action."})]})},r_="documents",n_=()=>{const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,u]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState(""),[p,_]=w.useState("sent"),[y,A]=w.useState(null),[E,R]=w.useState(1),[T]=w.useState(6),[U,$]=w.useState(0),G=ia(),[Z,V]=w.useState(!1),[te,le]=w.useState(null),se=async()=>{try{const j=await fetch("https://speed.cloudflare.com/meta"),P=j.ok?await j.json():{},S=await fetch("https://cloudflare.tv/cdn-cgi/trace"),q=S.ok?await S.text():"",O={};return q.split(`
`).forEach(Y=>{const[D,...ee]=Y.split("=");D&&ee.length&&(O[D]=ee.join("="))}),{ip:P.clientIp||O.ip||null,userAgent:O.uag||navigator.userAgent||null,location:{country:P.country||O.loc||null,city:P.city||null,region:P.region||null,latitude:P.latitude||null,longitude:P.longitude||null},meta:P,trace:O}}catch(j){return console.error("Error fetching user meta info:",j),{ip:null,userAgent:navigator.userAgent||null,location:{},meta:{},trace:{}}}},ne=w.useCallback(async()=>{if(l(!0),u({message:"",type:""}),!X){u({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}const{data:{session:j},error:P}=await X.auth.getSession();if(P){u({message:P.message||"Failed to get user session.",type:"error"}),l(!1);return}if(!(j!=null&&j.user)){u({message:"You must be logged in to view signature requests.",type:"error"}),l(!1);return}A(j.user);const S=j.user.id,q=j.user.email;try{const O=(E-1)*T,Y=O+T-1;let D=X.from("signature_requests").select(`
          id,
          signer_email,
          status,
          requested_at,
          signed_at,
          declined_at,
          cancelled_at,
          voided_at,
          signature_data_path,
          document_id,
          document_version_id,
          documents (
            id,
            title,
            owner_id,
            original_hash
          ),
          document_versions (
            id,
            version_number,
            file_name
          )
        `,{count:"exact"});p==="sent"?D=D.eq("documents.owner_id",S):D=D.eq("signer_email",q),h!=="all"&&(D=D.eq("status",h)),m&&(D=D.or(`documents.title.ilike.%${m}%,signer_email.ilike.%${m}%`)),D=D.order("requested_at",{ascending:!1});const{data:ee,error:J,count:me}=await D.range(O,Y);if(J)console.error("Supabase fetch error:",J),J.code==="42501"?u({message:"Permission denied. Check Supabase Row Level Security policies.",type:"error"}):u({message:`Failed to fetch signature requests: ${J.message}`,type:"error"}),n([]),$(0);else{$(me);const re=ee.map(ge=>{var Se,Oe,Be,Ye,Fe,oa;return{...ge,document_id:(Se=ge.documents)==null?void 0:Se.id,document_title:((Oe=ge.documents)==null?void 0:Oe.title)||"N/A",document_owner_id:(Be=ge.documents)==null?void 0:Be.owner_id,document_original_hash:(Ye=ge.documents)==null?void 0:Ye.original_hash,document_version_id:(Fe=ge.document_versions)==null?void 0:Fe.id,document_version_number:((oa=ge.document_versions)==null?void 0:oa.version_number)||0}});n(re)}}catch(O){console.error("Unexpected error during fetch:",O),u({message:O.message||"An unexpected error occurred while fetching requests.",type:"error"})}finally{l(!1)}},[p,h,m,E,T]);w.useEffect(()=>{R(1)},[p,h,m]),w.useEffect(()=>{ne()},[E,ne]);const ue=j=>{switch(j){case"pending":return"bg-color-warning-bg text-color-warning-text";case"signed":return"bg-color-success-bg text-color-success-text";case"declined":return"bg-color-error-bg text-color-error-text";case"cancelled":return"bg-gray-400 text-gray-800";case"expired":return"bg-color-info-bg text-color-info-text";case"void":return"bg-gray-500 text-white";default:return"bg-gray-200 text-gray-800"}},be=(j,P,S=null,q=null,O=null,Y=null)=>{n(D=>D.map(ee=>ee.id===j?{...ee,status:P,...S&&{[S]:q},...O&&{signed_document_hash:O},...Y&&{signature_data_path:Y}}:ee))},ae=async(j,P,S,q,O=null)=>{var Y;if(!y){u({message:"User not authenticated.",type:"error"});return}l(!0);try{const{data:{user:D}}=await X.auth.getUser();if(!D){u({message:"User session not found.",type:"error"}),l(!1);return}const{data:ee,error:J}=await X.auth.mfa.listFactors();if(J)throw J;const me=(Y=ee.totp)==null?void 0:Y.some(ge=>ge.status==="verified");["sign","cancel"].includes(q)&&me?(le({id:j,documentId:P,documentVersionId:S,actionType:q,originalHash:O}),V(!0)):await ve(j,P,S,q,O)}catch(D){console.error("Error during MFA check for protected action:",D),u({message:`Failed to initiate action due to MFA check: ${D.message||"Unknown error"}`,type:"error"})}finally{l(!1)}},ve=async(j,P,S,q,O=null,Y=null)=>{if(l(!0),!await new Promise(Ye=>{const Fe=document.createElement("div");Fe.className="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",Fe.innerHTML=`
        <div class="bg-white p-6 rounded-lg shadow-xl text-center max-w-sm mx-auto">
          <p class="text-lg font-semibold mb-4 text-gray-800">${q==="cancel"?"Are you sure you want to cancel this request? This cannot be undone.":`Are you sure you want to ${q} this document?`}</p>
          <div class="flex justify-center space-x-4">
            <button id="confirmBtn" class="px-5 py-2 bg-color-error text-white rounded-md hover:bg-red-600 transition-colors">Confirm</button>
            <button id="cancelBtn" class="px-5 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors">Cancel</button>
          </div>
        </div>
      `,document.body.appendChild(Fe),document.getElementById("confirmBtn").onclick=()=>{document.body.removeChild(Fe),Ye(!0)},document.getElementById("cancelBtn").onclick=()=>{document.body.removeChild(Fe),Ye(!1)}})){l(!1);return}let ee="",J="",me="",re="",ge=null,Se=null;switch(q){case"sign":ee="signed",J="signed_at",me="DOCUMENT_SIGNED",re="Document signed successfully.";const{data:Ye,error:Fe}=await X.from("document_versions").select("file_path").eq("id",S).single();if(Fe)throw new Error("Could not retrieve document version file path: "+Fe.message);Se=Ye.file_path,ge=O;const{error:oa}=await X.from("documents").update({status:"signed"}).eq("id",P);oa&&console.error("Failed to update document status to signed:",oa.message);break;case"reject":ee="declined",J="declined_at",me="SIGNATURE_REQUEST_DECLINED",re="Signature request rejected.";break;case"cancel":ee="cancelled",J="cancelled_at",me="SIGNATURE_REQUEST_CANCELLED",re="Signature request cancelled successfully.";break;default:u({message:"Invalid action.",type:"error"}),l(!1);return}const Oe=new Date().toISOString(),Be=await se();try{const Ye={status:ee,[J]:Oe};if(q==="sign"){if(!ge||!Se)throw console.error("Error: Signed document hash or path is missing after signing process."),new Error("Failed to finalize signing process (missing signed document data).");Object.assign(Ye,{signature_data_path:Se,signer_ip_address:Be.ip,signer_user_agent:Be.userAgent,signing_location:Be.location,signed_document_hash:ge})}else q==="cancel"&&(Ye.cancelled_by_user_id=y.id);const{error:Fe}=await X.from("signature_requests").update(Ye).eq("id",j);if(Fe)throw Fe.code==="42501"?u({message:"Permission denied. Check Supabase Row Level Security policies.",type:"error"}):u({message:`Failed to ${q} request: `+Fe.message,type:"error"}),Fe;be(j,ee,J,Oe,ge,Se),u({message:re,type:"success"}),await X.from("audit_logs").insert({user_id:y.id,user_email:y.email.toLowerCase(),event_type:me,signature_request_id:j,document_id:P,document_version_id:S,ip_address:Be.ip,details:{status:ee,userAgent:Be.userAgent,location:Be.location,...q==="sign"&&{signed_document_hash:ge,signed_document_path:Se},...q==="cancel"&&{cancelled_by_user_id:y.id}}})}catch(Ye){o.message||u({message:`An unexpected error occurred during ${q}: ${Ye.message}`,type:"error"})}finally{l(!1),ne()}},ce=async j=>{V(!1),te&&(await ve(te.id,te.documentId,te.documentVersionId,te.actionType,te.originalHash,j),le(null))},oe=()=>{V(!1),le(null),u({message:"Action cancelled due to failed verification.",type:"info"}),l(!1)},z=async j=>{u({message:`Sending reminder to ${j}... (Simulated)`,type:"info"}),setTimeout(()=>{u({message:`Reminder sent to ${j}!`,type:"success"})},1500)},I=j=>{const P=j.document_id||j.documents&&j.documents.id||j.id;G(`/user/documents/${P}`)};return s?d.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:d.jsx("p",{className:"text-xl",children:"Loading signature requests..."})}):d.jsxs("div",{className:"container mx-auto p-4 md:p-8 animate-fade-in-up min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&d.jsx(At,{message:o.message,type:o.type}),d.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[d.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Signature Requests"}),d.jsx("p",{className:"text-brand-text-light mt-2",children:"Manage all incoming and outgoing document signature requests."})]}),d.jsx("section",{className:"mb-6",children:d.jsxs("div",{className:"flex border-b border-brand-border-light",children:[d.jsx("button",{className:`px-6 py-3 text-lg font-medium transition-colors duration-200
              ${p==="sent"?"border-b-2 border-color-button-primary text-color-button-primary":"text-brand-text-light hover:text-brand-heading"}`,onClick:()=>_("sent"),children:"Sent by me"}),d.jsx("button",{className:`px-6 py-3 text-lg font-medium transition-colors duration-200
              ${p==="received"?"border-b-2 border-color-button-primary text-color-button-primary":"text-brand-text-light hover:text-brand-heading"}`,onClick:()=>_("received"),children:"Requested from me"})]})}),d.jsxs("section",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[d.jsx("div",{className:"w-full md:w-1/2",children:d.jsx("input",{type:"text",placeholder:"Search by document title or signer email...",className:"w-full p-3 rounded-md border border-brand-border bg-brand-card text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:j=>g(j.target.value)})}),d.jsx("div",{className:"w-full md:w-auto flex flex-wrap gap-2",children:["all","pending","signed","declined","cancelled","expired","void"].map(j=>d.jsx("button",{onClick:()=>x(j),className:`px-4 py-2 rounded-md capitalize text-sm font-medium transition-colors duration-200
                ${h===j?"bg-color-button-primary text-white hover:bg-color-button-primary-hover":"bg-brand-card text-brand-text border border-brand-border hover:bg-brand-bg-dark"}`,children:j},j))})]}),i.length===0&&!s?d.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:d.jsxs("p",{className:"text-lg",children:["No signature requests found in the '",p,"' tab matching your criteria."]})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.filter(j=>y?p==="sent"?j.document_owner_id===y.id:j.signer_email===y.email:!1).map(j=>d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border flex flex-col justify-between animate-fade-in-up",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-2",children:j.document_title}),d.jsx("p",{className:"text-brand-text-light mb-4 text-sm",children:p==="sent"?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"font-medium",children:"To:"})," ",j.signer_email]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"font-medium",children:"From:"})," ",j.document_owner_id===(y==null?void 0:y.id)?"Me":"Document Owner"]})}),d.jsxs("p",{className:"text-brand-text text-sm",children:[d.jsx("span",{className:"font-medium",children:"Date Sent:"})," ",new Date(j.requested_at).toLocaleDateString()]}),j.status==="signed"&&j.signed_at&&d.jsxs("p",{className:"text-brand-text text-sm",children:[d.jsx("span",{className:"font-medium",children:"Signed:"})," ",new Date(j.signed_at).toLocaleDateString()]}),j.status==="declined"&&j.declined_at&&d.jsxs("p",{className:"text-brand-text text-sm",children:[d.jsx("span",{className:"font-medium",children:"Declined:"})," ",new Date(j.declined_at).toLocaleDateString()]}),j.status==="cancelled"&&j.cancelled_at&&d.jsxs("p",{className:"text-brand-text text-sm",children:[d.jsx("span",{className:"font-medium",children:"Cancelled:"})," ",new Date(j.cancelled_at).toLocaleDateString()]}),j.status==="void"&&j.voided_at&&d.jsxs("p",{className:"text-brand-text text-sm",children:[d.jsx("span",{className:"font-medium",children:"Voided:"})," ",new Date(j.voided_at).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex flex-col gap-3 mt-4",children:[d.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold self-start ${ue(j.status)}`,children:[j.status.charAt(0).toUpperCase()+j.status.slice(1),j.document_version_number>0&&` (v${j.document_version_number})`]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[p==="received"&&j.status==="pending"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>ae(j.id,j.document_id,j.document_version_id,"sign",j.document_original_hash),className:"flex-1 px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200 text-sm z-10 pointer-events-auto cursor-pointer",disabled:s,children:"Sign Document"}),d.jsx("button",{onClick:()=>ae(j.id,j.document_id,j.document_version_id,"reject"),className:"flex-1 px-4 py-2 bg-color-error text-white rounded-md hover:bg-color-error-hover transition-colors duration-200 text-sm z-10 pointer-events-auto cursor-pointer",disabled:s,children:"Reject"})]}),p==="sent"&&j.status==="pending"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>z(j.signer_email),className:"flex-1 px-4 py-2 bg-color-secondary text-white rounded-md hover:bg-color-secondary-hover transition-colors duration-200 text-sm cursor-pointer",disabled:s,children:"Remind Signer"}),d.jsx("button",{onClick:()=>ae(j.id,j.document_id,j.document_version_id,"cancel"),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-200 text-sm cursor-pointer",disabled:s,children:"Cancel Request"})]}),d.jsx("button",{onClick:()=>I(j),className:"flex-1 px-4 py-2 bg-brand-bg-dark text-brand-text rounded-md hover:bg-brand-border transition-colors duration-200 text-sm cursor-pointer",disabled:s,children:"View Details"}),j.status==="signed"&&j.signature_data_path&&d.jsx("a",{href:X.storage.from(r_).getPublicUrl(j.signature_data_path).data.publicUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-center px-4 py-2 bg-color-success text-white rounded-md hover:bg-color-success-hover transition-colors duration-200 text-sm cursor-pointer",children:"Download Signed"})]})]})]},j.id))}),U>0&&d.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-4",children:[d.jsx("button",{onClick:()=>R(j=>Math.max(1,j-1)),disabled:E===1||s,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Previous"}),d.jsxs("span",{className:"text-lg font-medium text-brand-text",children:["Page ",E," of ",Math.ceil(U/T)]}),d.jsx("button",{onClick:()=>R(j=>j+1),disabled:E*T>=U||s,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Next"})]}),Z&&d.jsx(a_,{show:Z,onClose:oe,onVerified:ce,requiredFactors:["totp"]})]})},s_=({show:i,onClose:n,onEnrolled:s})=>{var U;const[l,o]=w.useState(""),[u,h]=w.useState(""),[x,m]=w.useState(""),[g,p]=w.useState(""),[_,y]=w.useState(!0),[A,E]=w.useState(!1);w.useEffect(()=>{if(!i){o(""),h(""),m(""),p(""),y(!0),E(!1);return}(async()=>{var G;y(!0),p("");try{const{data:Z,error:V}=await X.auth.mfa.listFactors();if(V)throw V;if((G=Z==null?void 0:Z.factors)==null?void 0:G.find(ue=>ue.factor_type==="totp"&&ue.status==="verified")){p("You already have a verified TOTP factor. Please disable it first."),y(!1);return}const le=`TOTP-${Date.now()}`,{data:se,error:ne}=await X.auth.mfa.enroll({factorType:"totp",friendlyName:le});if(ne)throw ne;o(se.id),h(se.totp.qr_code),E(!0)}catch(Z){console.error("2FA Enrollment Error:",Z),p(Z.message||"Failed to start 2FA enrollment. Please try again.")}finally{y(!1)}})()},[i]);const R=async()=>{if(p(""),!x){p("Please enter the 6-digit code.");return}if(!l){p("Enrollment not started. Please close and reopen the modal.");return}y(!0);try{const{data:$,error:G}=await X.auth.mfa.challenge({factorId:l});if(G)throw G;const Z=$.id,{error:V}=await X.auth.mfa.verify({factorId:l,challengeId:Z,code:x});if(V)throw V;s&&s(),n(),alert("Two-factor authentication enabled successfully!")}catch($){console.error("2FA Verification Error:",$),p($.message||"Verification failed. Check your code and try again.")}finally{y(!1)}},T=()=>{n()};return d.jsxs(la,{show:i,onClose:T,children:[d.jsx("h3",{children:"Set Up 2FA"}),_&&!g&&d.jsx("p",{children:"Loading QR code and preparing for enrollment..."}),g&&d.jsxs("p",{style:{color:"red"},children:["Error: ",g]}),!_&&!g&&A&&u&&d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"Scan this QR code with your authenticator app."}),d.jsx("div",{style:{textAlign:"center",margin:"15px 0"},children:d.jsx("img",{src:u,alt:"QR Code",style:{maxWidth:"200px",height:"auto",border:"1px solid #eee"}})}),d.jsx("p",{children:"Alternatively, manually input the secret:"}),d.jsx("input",{type:"text",value:((U=u.split("secret=")[1])==null?void 0:U.split("&")[0])||"Loading...",readOnly:!0,style:{width:"100%",padding:"8px",margin:"10px 0",textAlign:"center",background:"#f0f0f0",border:"1px dashed #ccc"}}),d.jsx("p",{children:"Enter the 6-digit code from your app:"}),d.jsx("input",{type:"text",value:x,onChange:$=>m($.target.value.replace(/\D/g,"").substring(0,6)),placeholder:"______",maxLength:"6",style:{width:"100%",padding:"8px",margin:"10px 0",textAlign:"center"},disabled:_}),d.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[d.jsx("button",{onClick:T,disabled:_,style:{padding:"8px 15px"},children:"Cancel"}),d.jsx("button",{onClick:R,disabled:_||x.length!==6,style:{padding:"8px 15px",background:"#007bff",color:"white"},children:_?"Verifying...":"Enable 2FA"})]})]}),!_&&!g&&!A&&!u&&d.jsx("p",{children:"Failed to load 2FA enrollment. Please try again or contact support."})]})},l_=()=>{const i=ia(),[n,s]=w.useState(!0),[l,o]=w.useState(null),[u,h]=w.useState({full_name:"",title:"",department:"",email:"",role:"",is_verified:!1,is_totp_enabled:!1,created_at:"",updated_at:""}),[x,m]=w.useState({message:"",type:""}),[g,p]=w.useState(""),[_,y]=w.useState(""),[A,E]=w.useState(!1),[R,T]=w.useState(!1),[U,$]=w.useState([]),[G,Z]=w.useState(""),[V,te]=w.useState(!1),[le,se]=w.useState(""),ne=async(j,P)=>{if(P){const{error:S}=await X.from("users").update({is_totp_enabled:j,updated_at:new Date().toISOString()}).eq("id",P);S&&(console.error("Error updating is_totp_enabled in DB:",S),m({message:`Failed to update 2FA status in database: ${S.message}`,type:"error"}))}},ue=async j=>{if(j)try{s(!0),se("");const{data:P,error:S}=await X.auth.mfa.listFactors();if(S){console.error("Error listing MFA factors for profile page:",S),m({message:"Failed to load 2FA status. Please try refreshing.",type:"error"}),h(Y=>({...Y,is_totp_enabled:!1})),$([]);return}const q=[...P.totp||[],...P.phone||[]],O=q.some(Y=>Y.factor_type==="totp"&&Y.status==="verified");h(Y=>(Y.is_totp_enabled!==O&&ne(O,j.id),{...Y,is_totp_enabled:O})),$(q)}catch(P){console.error("Unexpected error fetching MFA status:",P),m({message:"An unexpected error occurred while checking 2FA status.",type:"error"}),h(S=>({...S,is_totp_enabled:!1})),$([])}finally{s(!1)}};w.useEffect(()=>{(async()=>{s(!0),m({message:"Loading profile...",type:"info"});const{data:{user:P},error:S}=await X.auth.getUser();if(S||!P){m({message:"You need to be logged in to view your profile.",type:"error"}),i("/login");return}o(P);const{data:q,error:O}=await X.from("users").select("full_name, title, department, role, is_verified, is_totp_enabled, created_at, updated_at").eq("id",P.id).single();if(O){console.error("Error fetching user profile:",O),m({message:"Error loading your profile data.",type:"error"}),s(!1);return}q&&h({full_name:q.full_name||"",title:q.title||"",department:q.department||"",email:P.email,role:q.role||"user",is_verified:q.is_verified||!1,is_totp_enabled:q.is_totp_enabled||!1,created_at:q.created_at||"",updated_at:q.updated_at||""}),await ue(P),s(!1),m({message:"",type:""})})()},[i]);const be=j=>{const{name:P,value:S}=j.target;h(q=>({...q,[P]:S}))},ae=async j=>{if(j.preventDefault(),m({message:"Updating profile...",type:"info"}),!l){m({message:"No user session found.",type:"error"});return}const{error:P}=await X.from("users").update({full_name:u.full_name,title:u.title,department:u.department,updated_at:new Date().toISOString()}).eq("id",l.id);if(P)console.error("Error updating profile:",P.message),m({message:`Error updating profile: ${P.message}`,type:"error"});else{m({message:"Profile updated successfully!",type:"success"}),setTimeout(()=>m({message:"",type:""}),3e3);const{data:S,error:q}=await X.from("users").select("full_name, title, department, role, is_verified, is_totp_enabled, created_at, updated_at").eq("id",l.id).single();!q&&S&&h(O=>({...O,...S,email:l.email}))}},ve=async j=>{if(j.preventDefault(),g!==_){m({message:"Passwords do not match!",type:"error"});return}if(g.length<6){m({message:"Password must be at least 6 characters long.",type:"error"});return}m({message:"Changing password...",type:"info"});const{error:P}=await X.auth.updateUser({password:g});P?(console.error("Error changing password:",P.message),m({message:`Error changing password: ${P.message}`,type:"error"})):(m({message:"Password updated successfully! For security, you might be logged out and need to re-login.",type:"success"}),p(""),y(""),E(!1),setTimeout(()=>{m({message:"",type:""}),i("/login")},3e3))},ce=async()=>{m({message:"Two-Factor Authentication has been successfully enabled!",type:"success"}),T(!1),await ue(l)},oe=()=>{m({message:"Two-Factor Authentication setup cancelled.",type:"info"}),T(!1),ue(l)},z=async()=>{if(se(""),!G){se("Please enter the Factor ID to disable.");return}te(!0);try{const{error:j}=await X.auth.mfa.unenroll({factorId:G});if(j)throw j;m({message:"Two-Factor Authentication successfully disabled!",type:"success"}),Z(""),await ue(l)}catch(j){console.error("2FA Unenrollment Error:",j),se(j.message||"Failed to disable 2FA. Check the Factor ID and try again."),m({message:"Error disabling 2FA: "+(j.message||"Unknown error"),type:"error"})}finally{te(!1)}},I=j=>j?new Date(j).toLocaleString():"N/A";return d.jsxs("div",{className:"min-h-screen flex flex-col items-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:[x.message&&d.jsx(At,{message:x.message,type:x.type}),n?d.jsx("div",{className:"text-center p-24 text-2xl text-[var(--brand-text-light)]",children:"Loading profile data..."}):d.jsxs("div",{className:`bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 border border-[var(--brand-border-light)]\r
                     max-w-4xl w-full mx-auto my-12 animate-fade-in-up`,children:[d.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-[var(--brand-heading)] mb-8 text-center drop-shadow-md",children:"My Profile"}),d.jsxs("section",{className:"mb-10 pb-6 border-b border-[var(--brand-border)]",children:[d.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Personal Information"}),d.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Email Address"}),d.jsx("input",{type:"email",id:"email",value:u.email,disabled:!0,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-100 dark:bg-gray-700\r
                             text-[var(--brand-text)] cursor-not-allowed`})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Full Name"}),d.jsx("input",{type:"text",id:"full_name",name:"full_name",value:u.full_name,onChange:be,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                             text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                             transition-colors duration-200`})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Title"}),d.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:be,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                             text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                             transition-colors duration-200`})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Department"}),d.jsx("input",{type:"text",id:"department",name:"department",value:u.department,onChange:be,className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                             text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                             transition-colors duration-200`})]}),d.jsx("button",{type:"submit",className:`w-full inline-flex justify-center items-center\r
                           bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                           text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                           transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                           hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-lg`,children:"Update Profile"})]})]}),d.jsxs("section",{className:"mb-10 pb-6 border-b border-[var(--brand-border)]",children:[d.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Account Details"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-[var(--brand-border-light)] last:border-b-0",children:[d.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Role:"}),d.jsx("span",{className:"text-lg text-[var(--brand-text-light)]",children:u.role})]}),d.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-[var(--brand-border-light)] last:border-b-0",children:[d.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Member Since:"}),d.jsx("span",{className:"text-lg text-[var(--brand-text-light)]",children:I(u.created_at)})]}),d.jsxs("div",{className:"flex justify-between items-center py-2 last:border-b-0",children:[d.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Last Updated:"}),d.jsx("span",{className:"text-lg text-[var(--brand-text-light)]",children:I(u.updated_at)})]})]})]}),d.jsxs("section",{className:"mb-10 pb-6 border-b border-[var(--brand-border)]",children:[d.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Two-Factor Authentication (2FA)"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center py-2",children:[d.jsx("span",{className:"text-lg font-medium text-[var(--brand-text)]",children:"Status:"}),d.jsx("span",{className:`text-lg font-semibold ${u.is_totp_enabled?"text-[var(--color-success)]":"text-[var(--color-error)]"}`,children:u.is_totp_enabled?"Enabled":"Disabled"})]}),u.is_totp_enabled?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm text-[var(--brand-text-light)] mt-2",children:"Two-Factor Authentication is active. You can disable it by entering the Factor ID below."}),le&&d.jsxs("p",{style:{color:"red",marginTop:"10px"},children:["Error: ",le]}),U.length>0?d.jsx("div",{className:"mt-4 mb-4",style:{maxHeight:"250px",overflowY:"auto",border:"1px solid var(--brand-border-light)",borderRadius:"8px"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed"},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{background:"var(--brand-bg-dark)",borderBottom:"1px solid var(--brand-border)"},children:[d.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontSize:"0.9em",color:"var(--brand-text-light)",borderRight:"1px solid var(--brand-border-light)"},children:"Factor ID"}),d.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontSize:"0.9em",color:"var(--brand-text-light)",borderRight:"1px solid var(--brand-border-light)"},children:"Friendly Name"}),d.jsx("th",{style:{padding:"12px 8px",textAlign:"left",fontSize:"0.9em",color:"var(--brand-text-light)"},children:"Type / Status"})]})}),d.jsx("tbody",{children:U.map(j=>d.jsxs("tr",{style:{borderBottom:"1px solid var(--brand-border-light)"},children:[d.jsx("td",{style:{padding:"10px 8px",wordBreak:"break-all",fontSize:"0.85em",color:"var(--brand-text)"},children:j.id}),d.jsx("td",{style:{padding:"10px 8px",fontSize:"0.85em",color:"var(--brand-text)"},children:j.friendly_name}),d.jsx("td",{style:{padding:"10px 8px",fontSize:"0.85em",color:"var(--brand-text)"},children:`${j.factor_type} (${j.status})`})]},j.id))})]})}):d.jsx("p",{className:"text-sm text-[var(--brand-text-light)]",children:"No active 2FA factors found. This might be a temporary state or an issue with fetching."}),d.jsx("p",{className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Enter Factor ID to Disable:"}),d.jsx("input",{type:"text",value:G,onChange:j=>Z(j.target.value.trim()),placeholder:"Paste Factor ID here (e.g., 2c3e1f4a-...)",className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                               text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                               transition-colors duration-200`,disabled:V}),d.jsx("button",{onClick:z,className:`w-full inline-flex justify-center items-center\r
                               bg-red-500 text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                               transition-all duration-300 ease-out hover:bg-red-600 hover:translate-y-[-2px] hover:shadow-lg\r
                               disabled:opacity-50 disabled:cursor-not-allowed`,disabled:V||!G,children:V?"Disabling...":"Disable 2FA"})]}):d.jsx("button",{onClick:()=>T(!0),className:`w-full inline-flex justify-center items-center\r
                             bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                             text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                             transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                             hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-lg`,children:"Enable 2FA"})]})]}),d.jsxs("section",{children:[d.jsx("h2",{className:"text-3xl font-bold text-[var(--brand-heading)] mb-6",children:"Password Settings"}),A?d.jsxs("form",{onSubmit:ve,className:"space-y-6 animate-fade-in-up",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"New Password"}),d.jsx("input",{type:"password",id:"newPassword",value:g,onChange:j=>p(j.target.value),className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                               text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                               transition-colors duration-200`,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-[var(--brand-text-light)] mb-2",children:"Confirm New Password"}),d.jsx("input",{type:"password",id:"confirmPassword",value:_,onChange:j=>y(j.target.value),className:`w-full p-3 rounded-lg border border-[var(--brand-border)] bg-gray-50 dark:bg-gray-800\r
                               text-[var(--brand-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-button-primary)]\r
                               transition-colors duration-200`,required:!0})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{type:"submit",className:`flex-1 inline-flex justify-center items-center\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                               transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-lg`,children:"Set New Password"}),d.jsx("button",{type:"button",onClick:()=>E(!1),className:`flex-1 inline-flex justify-center items-center\r
                               bg-gray-300 text-gray-800 border-none py-3 px-6 rounded-full font-bold text-lg shadow-md\r
                               transition-all duration-300 ease-out hover:bg-gray-400 hover:translate-y-[-2px] hover:shadow-lg\r
                               dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500`,children:"Cancel"})]})]}):d.jsx("button",{onClick:()=>E(!0),className:`inline-flex justify-center items-center\r
                           bg-transparent border-2 border-[var(--color-button-primary)] text-[var(--color-button-primary)]\r
                           py-3 px-6 rounded-full font-bold text-lg shadow-sm\r
                           transition-all duration-300 ease-out hover:bg-[var(--color-button-primary)]\r
                           hover:text-white hover:shadow-md`,children:"Change Password"})]})]}),R&&l&&d.jsx(s_,{show:R,onClose:oe,onEnrolled:ce})]})},i_=()=>d.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{cx:"8",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),d.jsx("circle",{cx:"16",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),d.jsx("ellipse",{cx:"8",cy:"18",rx:"6",ry:"3",stroke:"currentColor",strokeWidth:"2"}),d.jsx("ellipse",{cx:"16",cy:"18",rx:"6",ry:"3",stroke:"currentColor",strokeWidth:"2"})]}),o_=()=>d.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"}),d.jsx("line",{x1:"8",y1:"6",x2:"16",y2:"6",stroke:"currentColor",strokeWidth:"2"}),d.jsx("line",{x1:"8",y1:"10",x2:"16",y2:"10",stroke:"currentColor",strokeWidth:"2"}),d.jsx("line",{x1:"8",y1:"14",x2:"14",y2:"14",stroke:"currentColor",strokeWidth:"2"})]}),c_=()=>d.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("rect",{x:"3",y:"12",width:"4",height:"8",stroke:"currentColor",strokeWidth:"2"}),d.jsx("rect",{x:"9",y:"8",width:"4",height:"12",stroke:"currentColor",strokeWidth:"2"}),d.jsx("rect",{x:"15",y:"4",width:"4",height:"16",stroke:"currentColor",strokeWidth:"2"})]}),u_=()=>d.jsxs("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("path",{d:"M3 12a9 9 0 1 1 9 9",stroke:"currentColor",strokeWidth:"2"}),d.jsx("polyline",{points:"3 8 3 12 7 12",stroke:"currentColor",strokeWidth:"2",fill:"none"}),d.jsx("line",{x1:"12",y1:"7",x2:"12",y2:"12",stroke:"currentColor",strokeWidth:"2"}),d.jsx("line",{x1:"12",y1:"12",x2:"15",y2:"15",stroke:"currentColor",strokeWidth:"2"})]}),d_=[{title:"Users",countKey:"userCount",icon:d.jsx(i_,{size:36,color:"var(--color-primary)"}),to:"/admin/manage-users",desc:"Manage all platform users",bg:"var(--brand-card)"},{title:"Documents",countKey:"documentCount",icon:d.jsx(o_,{size:36,color:"var(--color-secondary)"}),to:"/admin/master-edit",desc:"View and manage documents",bg:"var(--brand-card)"},{title:"Reports",icon:d.jsx(c_,{size:36,color:"var(--color-primary-light)"}),to:"/admin/reports",desc:"View platform reports",bg:"var(--brand-card)"},{title:"Audit Logs",icon:d.jsx(u_,{size:36,color:"var(--color-secondary)"}),to:"/admin/audit",desc:"Review activity logs",bg:"var(--brand-card)"}],f_=()=>{const[i,n]=w.useState(!0),[s,l]=w.useState({message:"",type:""}),[o,u]=w.useState(0),[h,x]=w.useState(0),[m,g]=w.useState(null),p=ia();return w.useEffect(()=>{(async()=>{n(!0),l({message:"Loading admin dashboard...",type:"info"});const{data:{user:y},error:A}=await X.auth.getUser();if(A||!y){l({message:"You must be logged in as admin.",type:"error"}),p("/login");return}const{data:E,error:R}=await X.from("users").select("role, full_name").eq("id",y.id).single();if(R||(E==null?void 0:E.role)!=="admin"){l({message:"Access denied. Admins only.",type:"error"}),p("/user/dashboard");return}g(E);const{count:T}=await X.from("users").select("id",{count:"exact",head:!0});u(T||0);const{count:U}=await X.from("documents").select("id",{count:"exact",head:!0});x(U||0),n(!1),l({message:"",type:""})})()},[p]),d.jsxs("div",{style:{minHeight:"100vh",background:"var(--brand-bg-light)"},children:[d.jsx(Ig,{}),d.jsxs("div",{style:{paddingTop:"90px",maxWidth:1200,margin:"0 auto"},children:[s.message&&d.jsx(At,{message:s.message,type:s.type}),d.jsx("h1",{style:{fontSize:"2.5em",fontWeight:800,color:"var(--brand-heading)",marginBottom:10,marginTop:30},children:"Admin Dashboard"}),d.jsxs("p",{style:{color:"var(--brand-text-light)",fontSize:"1.2em"},children:["Welcome",m!=null&&m.full_name?`, ${m.full_name}`:"","! Here you can manage users, documents, reports, and platform settings."]}),d.jsxs("div",{style:{display:"flex",gap:"2em",margin:"2em 0 1em 0",flexWrap:"wrap"},children:[d.jsxs("div",{style:{background:"var(--brand-card)",borderRadius:16,padding:"1.5em 2em",minWidth:200,flex:1,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:[d.jsx("div",{style:{fontSize:"1.1em",color:"var(--brand-text-light)"},children:"Total Users"}),d.jsx("div",{style:{fontSize:"2.5em",fontWeight:700,color:"var(--color-primary)"},children:o})]}),d.jsxs("div",{style:{background:"var(--brand-card)",borderRadius:16,padding:"1.5em 2em",minWidth:200,flex:1,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:[d.jsx("div",{style:{fontSize:"1.1em",color:"var(--brand-text-light)"},children:"Total Documents"}),d.jsx("div",{style:{fontSize:"2.5em",fontWeight:700,color:"var(--color-secondary)"},children:h})]})]}),i?d.jsx("div",{style:{padding:"3em",textAlign:"center",color:"var(--brand-text-light)"},children:"Loading dashboard data..."}):d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"2em",marginTop:"2em"},children:d_.map(_=>d.jsxs(Ge,{to:_.to,style:{background:_.bg,borderRadius:20,padding:"2em 1.5em",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",textAlign:"center",textDecoration:"none",color:"inherit",transition:"box-shadow 0.2s, transform 0.2s",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},children:[d.jsx("div",{style:{marginBottom:10},children:_.icon}),d.jsx("h2",{style:{fontSize:"1.5em",fontWeight:700,color:"var(--brand-heading)",margin:0},children:_.title}),_.countKey&&d.jsx("div",{style:{fontSize:"2em",fontWeight:800,margin:"0.5em 0"},children:_.countKey==="userCount"?o:h}),d.jsx("div",{style:{color:"var(--brand-text-light)",marginTop:8},children:_.desc})]},_.title))})]})]})},h_=()=>{const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,u]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState("all"),[p,_]=w.useState(""),[y,A]=w.useState(""),[E,R]=w.useState(""),[T,U]=w.useState(1),[$]=w.useState(10),[G,Z]=w.useState(0),[V,te]=w.useState([]),[le,se]=w.useState([]),[ne,ue]=w.useState(!1),[be,ae]=w.useState(""),[ve,ce]=w.useState(!1),[oe,z]=w.useState(""),I=D=>{if(!D)return"N/A";const ee=new Date(D),J={month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return ee.toLocaleDateString(void 0,J)+" "+ee.toLocaleTimeString(void 0,J)},j=w.useCallback(async()=>{if(l(!0),u({message:"",type:""}),!X){u({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}const{data:{user:D},error:ee}=await X.auth.getUser();if(ee||!D){u({message:(ee==null?void 0:ee.message)||"User not authenticated.",type:"error"}),l(!1);return}try{const J=(T-1)*$,me=J+$-1;let re=X.from("audit_logs").select(`
          id,
          timestamp,
          user_id,
          user_email,
          event_type,
          details,
          ip_address,
          user_agent, 
          document_id,
          document_version_id,
          signature_request_id,
          user:users!fk_audit_logs_user_id(full_name),
          documents(title),
          document_versions(version_number, file_name)
        `,{count:"exact"});if(h!=="all"&&(re=re.eq("event_type",h)),m!=="all"&&(re=re.eq("user_id",m)),y&&(re=re.gte("timestamp",new Date(y).toISOString())),E){const Be=new Date(E);Be.setHours(23,59,59,999),re=re.lte("timestamp",Be.toISOString())}p&&(re=re.or(`event_type.ilike.%${p}%,user_email.ilike.%${p}%`)),re=re.order("timestamp",{ascending:!1});const{data:ge,error:Se,count:Oe}=await re.range(J,me);Se?(console.error("Supabase fetch audit logs error:",Se),u({message:`Failed to fetch audit logs: ${Se.message}`,type:"error"}),n([]),Z(0)):(Z(Oe),n(ge))}catch(J){console.error("Unexpected error during audit log fetch:",J),u({message:J.message||"An unexpected error occurred while fetching audit logs.",type:"error"})}finally{l(!1)}},[T,$,h,m,p,y,E]);w.useEffect(()=>{(async()=>{const{data:ee,error:J}=await X.from("audit_logs").select("user_id, user_email, users!fk_audit_logs_user_id(full_name)");if(J)console.error("Error fetching distinct users for filter:",J);else{const ge=Array.from(new Map(ee.filter(Se=>Se.user_id!==null).map(Se=>{var Oe;return[Se.user_id,{id:Se.user_id,email:Se.user_email,fullName:((Oe=Se.user)==null?void 0:Oe.full_name)||Se.user_email}]})).values());te(ge)}const{data:me,error:re}=await X.from("audit_logs").select("event_type").distinct("event_type").order("event_type",{ascending:!0});re?console.error("Error fetching distinct event types for filter:",re):se(me.map(ge=>ge.event_type))})()},[]),w.useEffect(()=>{U(1)},[h,m,p,y,E]),w.useEffect(()=>{j()},[T,j]);const P=Math.ceil(G/$),S=D=>{D>=1&&D<=P&&U(D)},q=D=>{if(!D)return"N/A";let ee;try{ee=typeof D=="string"?JSON.parse(D):D}catch{return String(D)}return typeof ee=="object"&&ee!==null?JSON.stringify(ee,null,2):String(ee)},O=D=>{ae(q(D)),ue(!0)},Y=D=>{var J,me,re,ge,Se,Oe;let ee="No related document information available.";((J=D.documents)!=null&&J.title||D.document_id||(me=D.document_versions)!=null&&me.version_number||(re=D.document_versions)!=null&&re.file_name||D.signature_request_id)&&(ee=`
            ${(ge=D.documents)!=null&&ge.title?`Document Title: ${D.documents.title}
`:""}
            ${D.document_id?`Document ID: ${D.document_id}
`:""}
            ${(Se=D.document_versions)!=null&&Se.version_number?`Version: ${D.document_versions.version_number}
`:""}
            ${(Oe=D.document_versions)!=null&&Oe.file_name?`File Name: ${D.document_versions.file_name}
`:""}
            ${D.signature_request_id?`Signature Request ID: ${D.signature_request_id}
`:""}
        `.trim()),z(ee),ce(!0)};return s?d.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:d.jsx("p",{className:"text-xl",children:"Loading audit logs..."})}):d.jsxs("div",{className:"container mx-auto p-4 md:p-8 animate-fade-in-up min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&d.jsx(At,{message:o.message,type:o.type}),d.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[d.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Audit Logs"}),d.jsx("p",{className:"text-brand-text-light mt-2",children:"Review all system activities and user actions."})]}),d.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-brand-text mb-1",children:"Search"}),d.jsx("input",{type:"text",id:"searchTerm",placeholder:"Event, user, details...",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:p,onChange:D=>_(D.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"filterEventType",className:"block text-sm font-medium text-brand-text mb-1",children:"Event Type"}),d.jsxs("select",{id:"filterEventType",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:D=>x(D.target.value),children:[d.jsx("option",{value:"all",children:"All Event Types"}),le.map(D=>d.jsx("option",{value:D,children:D.replace(/_/g," ").toLowerCase().replace(/\b\w/g,ee=>ee.toUpperCase())},D))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"filterUserId",className:"block text-sm font-medium text-brand-text mb-1",children:"User"}),d.jsxs("select",{id:"filterUserId",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:D=>g(D.target.value),children:[d.jsx("option",{value:"all",children:"All Users"}),V.map(D=>d.jsxs("option",{value:D.id,children:[D.fullName," (",D.email,")"]},D.id))]})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 lg:col-span-1",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-brand-text mb-1",children:"From Date"}),d.jsx("input",{type:"date",id:"startDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-button-primary",value:y,onChange:D=>A(D.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-brand-text mb-1",children:"To Date"}),d.jsx("input",{type:"date",id:"endDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-button-primary",value:E,onChange:D=>R(D.target.value)})]})]})]}),i.length===0&&!s?d.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:d.jsx("p",{className:"text-lg",children:"No audit logs found matching your criteria."})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:d.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[d.jsx("thead",{className:"bg-brand-bg-dark",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Timestamp"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"User"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Event Type"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Related Document"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"IP Address"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"User Agent"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Details"})]})}),d.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:i.map(D=>{var ee,J,me;return d.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:I(D.timestamp)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((ee=D.user)==null?void 0:ee.full_name)||D.user_email||"System"})," ",d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-button-primary",children:D.event_type.replace(/_/g," ").toUpperCase()}),d.jsx("td",{className:"px-6 py-4 text-sm text-brand-text",children:(J=D.documents)!=null&&J.title||D.document_id||(me=D.document_versions)!=null&&me.version_number||D.signature_request_id?d.jsx("button",{onClick:()=>Y(D),className:"px-3 py-1 bg-color-button-secondary text-white rounded-md text-xs hover:bg-color-button-secondary-hover transition-colors duration-200",children:"View Document"}):"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:D.ip_address||"N/A"}),d.jsxs("td",{className:"px-6 py-4 text-sm text-brand-text overflow-hidden text-ellipsis max-w-xs",title:D.user_agent,children:[D.user_agent?`${D.user_agent.substring(0,50)}...`:"N/A"," "]}),d.jsx("td",{className:"px-6 py-4 text-sm text-brand-text",children:D.details?d.jsx("button",{onClick:()=>O(D.details),className:"px-3 py-1 bg-color-button-secondary text-white rounded-md text-xs hover:bg-color-button-secondary-hover transition-colors duration-200",children:"View Details"}):"N/A"})]},D.id)})})]})}),P>1&&d.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[d.jsx("button",{onClick:()=>S(T-1),disabled:T===1,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),d.jsxs("span",{className:"text-brand-text",children:["Page ",T," of ",P]}),d.jsx("button",{onClick:()=>S(T+1),disabled:T===P,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]}),d.jsxs(la,{show:ne,onClose:()=>ue(!1),children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"Audit Log Details"}),d.jsx("pre",{className:"whitespace-pre-wrap text-brand-text-light text-sm bg-brand-bg-dark p-4 rounded-md",children:be})]}),d.jsxs(la,{show:ve,onClose:()=>ce(!1),children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"Related Document Information"}),d.jsx("pre",{className:"whitespace-pre-wrap text-brand-text-light text-sm bg-brand-bg-dark p-4 rounded-md",children:oe})]})]})},m_=()=>{const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,u]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState("all"),[p,_]=w.useState(""),[y,A]=w.useState(""),[E,R]=w.useState(""),[T,U]=w.useState(1),[$]=w.useState(10),[G,Z]=w.useState(0),[V,te]=w.useState([]),le=[{value:"all",label:"All"},{value:"true",label:"Verified"},{value:"false",label:"Unverified"}],[se,ne]=w.useState(!1),[ue,be]=w.useState({}),ae=j=>{if(!j)return"N/A";const P=new Date(j),S=P.getFullYear(),q=String(P.getMonth()+1).padStart(2,"0"),O=String(P.getDate()).padStart(2,"0"),Y=String(P.getHours()).padStart(2,"0"),D=String(P.getMinutes()).padStart(2,"0"),ee=String(P.getSeconds()).padStart(2,"0");return`${q} ${O}, ${S} ${Y}:${D}:${ee}`},ve=w.useCallback(async()=>{if(l(!0),u({message:"",type:""}),!X){u({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}const{data:{user:j},error:P}=await X.auth.getUser();if(P||!j){u({message:(P==null?void 0:P.message)||"User not authenticated.",type:"error"}),l(!1);return}try{const S=(T-1)*$,q=S+$-1;let O=X.from("users").select(`
          id,
          email,
          full_name,
          title,
          department,
          role,
          is_verified,
          created_at,
          updated_at
        `,{count:"exact"});if(h!=="all"&&(O=O.eq("role",h)),m!=="all"&&(O=O.eq("is_verified",m==="true")),y&&(O=O.gte("created_at",new Date(y).toISOString())),E){const J=new Date(E);J.setHours(23,59,59,999),O=O.lte("created_at",J.toISOString())}if(p){const J=`%${p}%`;O=O.or(`full_name.ilike.${J},email.ilike.${J}`)}O=O.order("created_at",{ascending:!1}),O=O.range(S,q);const{data:Y,error:D,count:ee}=await O;D?(console.error("Supabase fetch users error:",D),u({message:`Failed to fetch users: ${D.message}`,type:"error"}),n([]),Z(0)):(Z(ee),n(Y))}catch(S){console.error("Unexpected error during user fetch:",S),u({message:S.message||"An unexpected error occurred while fetching users.",type:"error"})}finally{l(!1)}},[T,$,h,m,p,y,E]);w.useEffect(()=>{(async()=>{const{data:P,error:S}=await X.from("users").select("role").distinct("role").order("role",{ascending:!0});S?console.error("Error fetching distinct roles for filter:",S):te(P.map(q=>q.role))})()},[]),w.useEffect(()=>{U(1)},[h,m,p,y,E]),w.useEffect(()=>{ve()},[T,ve]);const ce=Math.ceil(G/$),oe=j=>{j>=1&&j<=ce&&U(j)},z=j=>{const P={...j};delete P.password_hash,be(P),ne(!0)},I=j=>j?`
ID: ${j.id}
Email: ${j.email}
Full Name: ${j.full_name||"N/A"}
Role: ${String(j.role).toUpperCase()}
Verified: ${j.is_verified?"Yes":"No"}
Title: ${j.title||"N/A"}
Department: ${j.department||"N/A"}
Created At: ${ae(j.created_at)}
Last Updated: ${ae(j.updated_at)}
    `.trim():"No user data available.";return s?d.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:d.jsx("p",{className:"text-xl",children:"Loading users..."})}):d.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&d.jsx(At,{message:o.message,type:o.type}),d.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[d.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Manage Users"}),d.jsx("p",{className:"text-brand-text-light mt-2",children:"View and manage all registered users in the system."})]}),d.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-brand-text mb-1",children:"Search"}),d.jsx("input",{type:"text",id:"searchTerm",placeholder:"Name, email...",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:p,onChange:j=>_(j.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"filterRole",className:"block text-sm font-medium text-brand-text mb-1",children:"Role"}),d.jsxs("select",{id:"filterRole",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:j=>x(j.target.value),children:[d.jsx("option",{value:"all",children:"All Roles"}),V.map(j=>d.jsx("option",{value:j,children:j.replace(/_/g," ").toLowerCase().replace(/\b\w/g,P=>P.toUpperCase())},j))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"filterVerificationStatus",className:"block text-sm font-medium text-brand-text mb-1",children:"Verification Status"}),d.jsx("select",{id:"filterVerificationStatus",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:j=>g(j.target.value),children:le.map(j=>d.jsx("option",{value:j.value,children:j.label},j.value))})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 lg:col-span-1",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Created From"}),d.jsx("input",{type:"date",id:"startDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:y,onChange:j=>A(j.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Created To"}),d.jsx("input",{type:"date",id:"endDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:E,onChange:j=>R(j.target.value)})]})]})]}),i.length===0&&!s?d.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:d.jsx("p",{className:"text-lg",children:"No users found matching your criteria."})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:d.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[d.jsx("thead",{className:"bg-brand-bg-dark",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Full Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Email"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Role"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Verified"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Created At"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Last Updated"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:i.map(j=>d.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-brand-text",children:j.full_name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:j.email}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.role==="admin"?"bg-purple-100 text-purple-800":j.role==="user"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:j.role.replace(/_/g," ").toUpperCase()})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.is_verified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.is_verified?"Yes":"No"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:ae(j.created_at)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:ae(j.updated_at)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d.jsx("button",{onClick:()=>z(j),className:"text-color-button-primary hover:text-color-button-primary-hover transition-colors duration-200",children:"View Details"})})]},j.id))})]})}),ce>1&&d.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[d.jsx("button",{onClick:()=>oe(T-1),disabled:T===1,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),d.jsxs("span",{className:"text-brand-text",children:["Page ",T," of ",ce]}),d.jsx("button",{onClick:()=>oe(T+1),disabled:T===ce,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]}),d.jsxs(la,{show:se,onClose:()=>ne(!1),children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"User Details"}),d.jsx("pre",{className:"whitespace-pre-wrap text-brand-text-light text-sm bg-brand-bg-dark p-4 rounded-md",children:I(ue)})]})]})},g_=()=>{const[i,n]=w.useState(!0),[s,l]=w.useState({message:"",type:""}),[o,u]=w.useState({documentStatus:[],signatureStatus:[],userRoles:[],incidentStatus:[],totalDocuments:0,totalSignatureRequests:0,totalUsers:0,totalIncidentReports:0,averageSigningTime:"N/A",recentAuditLogs:[]}),[h,x]=w.useState(""),[m,g]=w.useState(""),p=y=>{if(!y)return"N/A";const A=new Date(y),E={month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return A.toLocaleDateString("en-US",E)},_=w.useCallback(async()=>{if(n(!0),l({message:"",type:""}),!X){l({message:"Supabase client not available. Please check configuration.",type:"error"}),n(!1);return}try{const y=(ee,J,me,re)=>{let ge=ee;if(me&&(ge=ge.gte(J,new Date(me).toISOString())),re){const Se=new Date(re);Se.setHours(23,59,59,999),ge=ge.lte(J,Se.toISOString())}return ge},A={start_date_param:h?new Date(h).toISOString():null,end_date_param:m?new Date(m).toISOString():null},{data:E,error:R}=await X.rpc("count_documents_by_status",A),{data:T,error:U}=await X.rpc("count_signature_requests_by_status",A),{data:$,error:G}=await X.rpc("count_users_by_role",A),{data:Z,error:V}=await X.rpc("count_incident_reports_by_status",A);let te=X.from("documents").select("*",{count:"exact",head:!0});te=y(te,"created_at",h,m);const{count:le,error:se}=await te;let ne=X.from("signature_requests").select("*",{count:"exact",head:!0});ne=y(ne,"requested_at",h,m);const{count:ue,error:be}=await ne;let ae=X.from("users").select("*",{count:"exact",head:!0});ae=y(ae,"created_at",h,m);const{count:ve,error:ce}=await ae;let oe=X.from("incident_reports").select("*",{count:"exact",head:!0});oe=y(oe,"timestamp",h,m);const{count:z,error:I}=await oe;let j=X.from("audit_logs").select("timestamp, event_type, user_email, details");j=y(j,"timestamp",h,m);const{data:P,error:S}=await j.order("timestamp",{ascending:!1}).limit(10);let q="N/A",O=X.from("signature_requests").select("requested_at, signed_at").eq("status","signed").not("signed_at","is",null);O=y(O,"signed_at",h,m);const{data:Y,error:D}=await O;if(!D&&Y&&Y.length>0){let ee=0;Y.forEach(Oe=>{if(Oe.requested_at&&Oe.signed_at){const Be=new Date(Oe.requested_at),Ye=new Date(Oe.signed_at);ee+=(Ye.getTime()-Be.getTime())/1e3}});const J=ee/Y.length,me=Math.floor(J/60),re=Math.floor(me/60),ge=me%60,Se=Math.floor(J%60);q=`${re}h ${ge}m ${Se}s`}R||U||G||V||se||be||ce||I||S||D?(console.error("Error fetching report data:",R,U,G,V,se,be,ce,I,S,D),l({message:"Failed to fetch all report data. Check console for details.",type:"error"})):u({documentStatus:E||[],signatureStatus:T||[],userRoles:$||[],incidentStatus:Z||[],totalDocuments:le||0,totalSignatureRequests:ue||0,totalUsers:ve||0,totalIncidentReports:z||0,averageSigningTime:q,recentAuditLogs:P||[]})}catch(y){console.error("Unexpected error during report fetch:",y),l({message:y.message||"An unexpected error occurred while fetching reports.",type:"error"})}finally{n(!1)}},[h,m]);return w.useEffect(()=>{_()},[_]),i?d.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:d.jsx("p",{className:"text-xl",children:"Loading reports..."})}):d.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[s.message&&d.jsx(At,{message:s.message,type:s.type}),d.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[d.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Analytics & Reports"}),d.jsx("p",{className:"text-brand-text-light mt-2",children:"Get insights into system performance and user activity."})]}),d.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 flex flex-col md:flex-row gap-4 justify-end items-center",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"reportStartDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Start Date"}),d.jsx("input",{type:"date",id:"reportStartDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:y=>x(y.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"reportEndDate",className:"block text-sm font-medium text-brand-text mb-1",children:"End Date"}),d.jsx("input",{type:"date",id:"reportEndDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:y=>g(y.target.value)})]}),d.jsx("button",{onClick:_,className:"mt-4 md:mt-0 px-6 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200",children:"Apply Filter"})]}),d.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Total Documents"}),d.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.totalDocuments})]}),d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Total Sign Requests"}),d.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.totalSignatureRequests})]}),d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Total Users"}),d.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.totalUsers})]}),d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-lg font-semibold text-brand-heading mb-2",children:"Avg. Signing Time"}),d.jsx("p",{className:"text-4xl font-bold text-color-button-primary",children:o.averageSigningTime})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Documents by Status"}),o.documentStatus.length>0?d.jsx("div",{className:"h-64",children:d.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.documentStatus.map(y=>d.jsxs("li",{children:[y.status.replace(/_/g," ").toUpperCase(),": ",y.count]},y.status))})}):d.jsx("p",{className:"text-brand-text-light",children:"No document status data available for this period."})]}),d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Signature Requests by Status"}),o.signatureStatus.length>0?d.jsx("div",{className:"h-64",children:d.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.signatureStatus.map(y=>d.jsxs("li",{children:[y.status.replace(/_/g," ").toUpperCase(),": ",y.count]},y.status))})}):d.jsx("p",{className:"text-brand-text-light",children:"No signature request status data available for this period."})]}),d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Users by Role"}),o.userRoles.length>0?d.jsx("div",{className:"h-64",children:d.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.userRoles.map(y=>d.jsxs("li",{children:[y.role.replace(/_/g," ").toUpperCase(),": ",y.count]},y.role))})}):d.jsx("p",{className:"text-brand-text-light",children:"No user role data available."})]}),d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border",children:[d.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Incident Reports by Status"}),o.incidentStatus.length>0?d.jsx("div",{className:"h-64",children:d.jsx("ul",{className:"list-disc pl-5 text-brand-text-light",children:o.incidentStatus.map(y=>d.jsxs("li",{children:[y.status.replace(/_/g," ").toUpperCase(),": ",y.count]},y.status))})}):d.jsx("p",{className:"text-brand-text-light",children:"No incident report data available for this period."})]}),d.jsxs("div",{className:"bg-brand-card p-6 rounded-lg shadow-card border border-brand-border lg:col-span-2",children:[d.jsx("h3",{className:"text-xl font-semibold text-brand-heading mb-4",children:"Recent System Activity (Audit Logs)"}),o.recentAuditLogs.length>0?d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[d.jsx("thead",{className:"bg-brand-bg-dark",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Timestamp"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Event Type"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"User Email"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Details"})]})}),d.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:o.recentAuditLogs.map(y=>d.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:p(y.timestamp)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:y.event_type}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:y.user_email||"System"}),d.jsx("td",{className:"px-6 py-4 text-sm text-brand-text overflow-hidden text-ellipsis max-w-xs",children:d.jsx("pre",{className:"whitespace-pre-wrap text-xs text-brand-text-light",children:JSON.stringify(y.details,null,2)})})]},y.id||y.timestamp+y.event_type))})]})}):d.jsx("p",{className:"text-brand-text-light",children:"No recent audit logs available."})]})]})]})},x_=()=>{var j,P,S,q;const[i,n]=w.useState([]),[s,l]=w.useState(!0),[o,u]=w.useState({message:"",type:""}),[h,x]=w.useState("all"),[m,g]=w.useState(""),[p,_]=w.useState(""),[y,A]=w.useState(""),[E,R]=w.useState(1),[T]=w.useState(10),[U,$]=w.useState(0),[G,Z]=w.useState(!1),[V,te]=w.useState({}),[le,se]=w.useState(""),[ne,ue]=w.useState(""),be=[{value:"all",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"resolved",label:"Resolved"}],ae=O=>{if(!O)return"N/A";const Y=new Date(O),D={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return Y.toLocaleDateString("en-US",D)},ve=w.useCallback(async()=>{if(l(!0),u({message:"",type:""}),!X){u({message:"Supabase client not available. Please check configuration.",type:"error"}),l(!1);return}try{const O=(E-1)*T,Y=O+T-1;let D=X.from("incident_reports").select(`
          id,
          timestamp,
          reported_by_user_id,
          reported_by_email,
          document_id,
          reason,
          details,
          status,
          resolved_by_user_id,
          resolved_at,
          reporter:users!fk_incident_reports_reported_by_user_id(full_name),
          resolver:users!fk_incident_reports_resolved_by_user_id(full_name),
          documents!fk_incident_reports_document_id(title)
        `,{count:"exact"});if(h!=="all"&&(D=D.eq("status",h)),p&&(D=D.gte("timestamp",new Date(p).toISOString())),y){const re=new Date(y);re.setHours(23,59,59,999),D=D.lte("timestamp",re.toISOString())}if(m){const re=`%${m}%`;D=D.or(`reported_by_email.ilike.${re},reason.ilike.${re},details.ilike.${re}`)}D=D.order("timestamp",{ascending:!1}),D=D.range(O,Y);const{data:ee,error:J,count:me}=await D;J?(console.error("Supabase fetch incident reports error:",J),u({message:`Failed to fetch incident reports: ${J.message}`,type:"error"}),n([]),$(0)):($(me),n(ee))}catch(O){console.error("Unexpected error during report fetch:",O),u({message:O.message||"An unexpected error occurred while fetching reports.",type:"error"})}finally{l(!1)}},[E,T,h,m,p,y]);w.useEffect(()=>{R(1)},[h,m,p,y]),w.useEffect(()=>{ve()},[E,ve]);const ce=Math.ceil(U/T),oe=O=>{O>=1&&O<=ce&&R(O)},z=O=>{te(O),se(O.status),ue(O.details||""),Z(!0)},I=async()=>{l(!0),u({message:"",type:""});const{data:{user:O},error:Y}=await X.auth.getUser();if(Y||!O){u({message:(Y==null?void 0:Y.message)||"User not authenticated.",type:"error"}),l(!1);return}try{const D={status:le,details:ne};le==="resolved"&&V.status!=="resolved"?(D.resolved_by_user_id=O.id,D.resolved_at=new Date().toISOString()):le!=="resolved"&&V.status==="resolved"&&(D.resolved_by_user_id=null,D.resolved_at=null);const{data:ee,error:J}=await X.from("incident_reports").update(D).eq("id",V.id);J?u({message:`Failed to update report: ${J.message}`,type:"error"}):(u({message:"Report updated successfully!",type:"success"}),Z(!1),ve())}catch(D){u({message:D.message||"An unexpected error occurred during update.",type:"error"})}finally{l(!1)}};return s?d.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:d.jsx("p",{className:"text-xl",children:"Loading incident reports..."})}):d.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:[o.message&&d.jsx(At,{message:o.message,type:o.type}),d.jsxs("header",{className:"mb-8 border-b border-brand-border-light pb-4",children:[d.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:"Anomalies & Incident Reports"}),d.jsx("p",{className:"text-brand-text-light mt-2",children:"Review and manage reported issues within the system."})]}),d.jsxs("section",{className:"bg-brand-card p-6 rounded-lg shadow-card mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-brand-text mb-1",children:"Search"}),d.jsx("input",{type:"text",id:"searchTerm",placeholder:"Email, reason, details...",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:m,onChange:O=>g(O.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"filterStatus",className:"block text-sm font-medium text-brand-text mb-1",children:"Status"}),d.jsx("select",{id:"filterStatus",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:h,onChange:O=>x(O.target.value),children:be.map(O=>d.jsx("option",{value:O.value,children:O.label},O.value))})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 lg:col-span-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Reported From"}),d.jsx("input",{type:"date",id:"startDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:p,onChange:O=>_(O.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-brand-text mb-1",children:"Reported To"}),d.jsx("input",{type:"date",id:"endDate",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:y,onChange:O=>A(O.target.value)})]})]})]}),i.length===0&&!s?d.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:d.jsx("p",{className:"text-lg",children:"No incident reports found matching your criteria."})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:d.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[d.jsx("thead",{className:"bg-brand-bg-dark",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Timestamp"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Reported By"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Document"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Reason"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:i.map(O=>{var Y,D;return d.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:ae(O.timestamp)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((Y=O.reporter)==null?void 0:Y.full_name)||O.reported_by_email}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:((D=O["documents!fk_incident_reports_document_id"])==null?void 0:D.title)||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:O.reason}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${O.status==="pending"?"bg-yellow-100 text-yellow-800":O.status==="resolved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O.status.toUpperCase()})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d.jsx("button",{onClick:()=>z(O),className:"text-color-button-primary hover:text-color-button-primary-hover transition-colors duration-200",children:"View / Resolve"})})]},O.id)})})]})}),ce>1&&d.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[d.jsx("button",{onClick:()=>oe(E-1),disabled:E===1,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),d.jsxs("span",{className:"text-brand-text",children:["Page ",E," of ",ce]}),d.jsx("button",{onClick:()=>oe(E+1),disabled:E===ce,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]}),d.jsxs(la,{show:G,onClose:()=>Z(!1),children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:"Incident Report Details"}),d.jsxs("div",{className:"space-y-4 text-brand-text-light",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Report ID:"})," ",V.id]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Timestamp:"})," ",ae(V.timestamp)]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reported By:"})," ",((j=V.reporter)==null?void 0:j.full_name)||V.reported_by_email]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Associated Document:"})," ",((P=V["documents!fk_incident_reports_document_id"])==null?void 0:P.title)||"N/A"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reason:"})," ",V.reason]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"modalDetails",className:"block text-sm font-medium text-brand-text mb-1",children:"Details:"}),d.jsx("textarea",{id:"modalDetails",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text placeholder-brand-text-light focus:outline-none focus:ring-2 focus:ring-color-button-primary h-32",value:ne,onChange:O=>ue(O.target.value),placeholder:"Add resolution notes or further details here..."})]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Current Status:"})," ",d.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${V.status==="pending"?"bg-yellow-100 text-yellow-800":V.status==="resolved"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(S=V.status)==null?void 0:S.toUpperCase()})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"newStatus",className:"block text-sm font-medium text-brand-text mb-1",children:"Update Status:"}),d.jsxs("select",{id:"newStatus",className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary",value:le,onChange:O=>se(O.target.value),children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"resolved",children:"Resolved"})]})]}),(V.resolved_by_user_id||V.resolved_at)&&d.jsxs("p",{children:[d.jsx("strong",{children:"Resolved By:"})," ",((q=V.resolver)==null?void 0:q.full_name)||"N/A"," at ",ae(V.resolved_at)]}),d.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[d.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 border border-brand-border-light text-brand-text rounded-md hover:bg-brand-bg-dark transition-colors duration-200",children:"Cancel"}),d.jsx("button",{onClick:I,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200",children:"Update Report"})]})]})]})]})},b_=({show:i,onClose:n,tableName:s,record:l,onSaveSuccess:o})=>{const[u,h]=w.useState(!1),[x,m]=w.useState({message:"",type:""}),[g,p]=w.useState({});w.useEffect(()=>{i&&l&&(p(l),m({message:"",type:""}))},[i,l]);const _=R=>{const{name:T,value:U,type:$,checked:G}=R.target;p(Z=>({...Z,[T]:$==="checkbox"?G:U}))},y=(R,T)=>{const U={};for(const $ in T)R[$]!==T[$]&&$!=="id"&&$!=="created_at"&&$!=="updated_at"&&(U[$]={old:R[$],new:T[$]});return U},A=async()=>{h(!0),m({message:"",type:""});const{data:R,error:T}=await X.auth.getUser();if(T||!(R!=null&&R.user)){m({message:(T==null?void 0:T.message)||"Authentication required.",type:"error"}),h(!1);return}const U=R.user.id,$=R.user.email;try{const{data:G,error:Z}=await X.from(s).select("*").eq("id",l.id).single();if(Z)throw new Error(`Failed to fetch old record for audit: ${Z.message}`);const{data:V,error:te}=await X.from(s).update(g).eq("id",l.id).select();if(te)throw new Error(`Failed to update ${s} record: ${te.message}`);const le=y(G,g),se={table_name:s,record_id:l.id,changes:le};let ne=null,ue=null,be=null;s==="documents"?ne=l.id:s==="signature_requests"?(ue=l.id,ne=l.document_id):s==="users"?be=l.id:s==="incident_reports"&&(ne=l.document_id);const{error:ae}=await X.from("audit_logs").insert({user_id:U,user_email:$,event_type:`${s.toUpperCase()}_UPDATED`,details:se,document_id:ne,signature_request_id:ue,user_id:be});ae&&console.warn("Audit log insertion failed:",ae.message),m({message:`${s} record updated successfully!`,type:"success"}),o(V[0]),n()}catch(G){console.error("Error during record update:",G),m({message:G.message||"An unexpected error occurred.",type:"error"})}finally{h(!1)}},E=async()=>{if(!window.confirm(`Are you sure you want to delete this ${s} record? This action cannot be undone.`))return;h(!0),m({message:"",type:""});const{data:R,error:T}=await X.auth.getUser();if(T||!(R!=null&&R.user)){m({message:(T==null?void 0:T.message)||"Authentication required.",type:"error"}),h(!1);return}const U=R.user.id,$=R.user.email;try{const{data:G,error:Z}=await X.from(s).select("*").eq("id",l.id).single();if(Z)throw new Error(`Failed to fetch record for audit before deletion: ${Z.message}`);const{error:V}=await X.from(s).delete().eq("id",l.id);if(V)throw new Error(`Failed to delete ${s} record: ${V.message}`);const te={table_name:s,record_id:l.id,deleted_data:G};let le=null,se=null,ne=null;s==="documents"?le=l.id:s==="signature_requests"?(se=l.id,le=l.document_id):s==="users"&&(ne=l.id);const{error:ue}=await X.from("audit_logs").insert({user_id:U,user_email:$,event_type:`${s.toUpperCase()}_DELETED`,details:te,document_id:le,signature_request_id:se,user_id:ne});ue&&console.warn("Audit log insertion failed:",ue.message),m({message:`${s} record deleted successfully!`,type:"success"}),o(),n()}catch(G){console.error("Error during record deletion:",G),m({message:G.message||"An unexpected error occurred during deletion.",type:"error"})}finally{h(!1)}};return!i||!l?null:d.jsxs(la,{show:i,onClose:n,children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 text-brand-heading",children:["Edit ",s.replace("_"," ").toUpperCase()," Record"]}),x.message&&d.jsx(At,{message:x.message,type:x.type}),d.jsxs("div",{className:"space-y-4 text-brand-text-light",children:[Object.entries(g).map(([R,T])=>R==="id"||R==="created_at"||R==="updated_at"||R.endsWith("_id")?d.jsxs("p",{children:[d.jsxs("strong",{children:[R.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase()),":"]})," ",String(T)]},R):typeof T=="boolean"?d.jsx("div",{children:d.jsxs("label",{className:"block text-sm font-medium text-brand-text",children:[d.jsx("input",{type:"checkbox",name:R,checked:T,onChange:_,className:"mr-2"}),R.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase())]})},R):d.jsxs("div",{children:[d.jsxs("label",{htmlFor:R,className:"block text-sm font-medium text-brand-text mb-1",children:[R.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase()),":"]}),d.jsx("input",{type:typeof T=="number"?"number":"text",id:R,name:R,value:T||"",onChange:_,className:"w-full p-2 rounded-md border border-brand-border bg-brand-bg-light text-brand-text focus:outline-none focus:ring-2 focus:ring-color-button-primary"})]},R)),d.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[d.jsx("button",{onClick:n,className:"px-4 py-2 border border-brand-border-light text-brand-text rounded-md hover:bg-brand-bg-dark transition-colors duration-200",children:"Cancel"}),d.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200",disabled:u,children:u?"Deleting...":"Delete Record"}),d.jsx("button",{onClick:A,className:"px-4 py-2 bg-color-button-primary text-white rounded-md hover:bg-color-button-primary-hover transition-colors duration-200",disabled:u,children:u?"Saving...":"Save Changes"})]})]})]})},Si=[{name:"users",display:"Users",orderColumn:"created_at"},{name:"documents",display:"Documents",orderColumn:"created_at"},{name:"document_versions",display:"Document Versions",orderColumn:"created_at"},{name:"signature_requests",display:"Signature Requests",orderColumn:"requested_at"},{name:"incident_reports",display:"Incident Reports",orderColumn:"timestamp"}],p_=i=>{if(!i)return"N/A";const n=new Date(i),s={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return n.toLocaleDateString("en-US",s)},y_=(i,n)=>i.includes("timestamp")||i.includes("at")?p_(n):typeof n=="boolean"?n?"True":"False":n==null?"N/A":Array.isArray(n)||typeof n=="object"?JSON.stringify(n):String(n),v_=()=>{var be;const[i,n]=w.useState(Si[0].name),[s,l]=w.useState([]),[o,u]=w.useState(!0),[h,x]=w.useState({message:"",type:""}),[m,g]=w.useState(1),[p]=w.useState(10),[_,y]=w.useState(0),[A,E]=w.useState(!1),[R,T]=w.useState(null),[U,$]=w.useState([]),G=w.useCallback(async()=>{if(u(!0),x({message:"",type:""}),!X){x({message:"Supabase client not available. Please check configuration.",type:"error"}),u(!1);return}try{const ae=(m-1)*p,ve=ae+p-1,ce=Si.find(P=>P.name===i),oe=(ce==null?void 0:ce.orderColumn)||"id",{data:z,error:I,count:j}=await X.from(i).select("*",{count:"exact"}).order(oe,{ascending:!1}).range(ae,ve);if(I)console.error(`Supabase fetch ${i} records error:`,I),x({message:`Failed to fetch ${i} records: ${I.message}`,type:"error"}),l([]),y(0);else if(y(j),l(z),z.length>0){const P=Object.keys(z[0]);$(P)}else $([])}catch(ae){console.error("Unexpected error during record fetch:",ae),x({message:ae.message||"An unexpected error occurred while fetching records.",type:"error"})}finally{u(!1)}},[i,m,p]);w.useEffect(()=>{g(1),G()},[i,G]);const Z=Math.ceil(_/p),V=ae=>{ae>=1&&ae<=Z&&g(ae)},te=ae=>{T(ae),E(!0)},le=()=>{E(!1),T(null)},se=ae=>{G()},[ne,ue]=w.useState(!1);return w.useEffect(()=>{(async()=>{const{data:ve,error:ce}=await X.auth.getUser();if(ce||!(ve!=null&&ve.user)){ue(!1);return}const{data:oe,error:z}=await X.from("users").select("role").eq("id",ve.user.id).single();z||!oe||oe.role!=="admin"?ue(!1):ue(!0)})()},[]),ne?o&&s.length===0?d.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-brand-text",children:d.jsx("p",{className:"text-xl",children:"Loading records..."})}):d.jsxs("div",{className:"container mx-auto p-4 md:p-8 min-h-screen-minus-navbar bg-brand-bg-light text-brand-text flex",children:[h.message&&d.jsx(At,{message:h.message,type:h.type}),d.jsxs("aside",{className:"w-64 bg-brand-card p-6 rounded-lg shadow-card mr-8 flex-shrink-0",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6 text-brand-heading",children:"Manage Data"}),d.jsx("nav",{children:d.jsx("ul",{children:Si.map(ae=>d.jsx("li",{className:"mb-2",children:d.jsx("button",{onClick:()=>n(ae.name),className:`w-full text-left py-2 px-4 rounded-md transition-colors duration-200 ${i===ae.name?"bg-color-button-primary text-white":"bg-brand-bg-light hover:bg-brand-bg-dark text-brand-text"}`,children:ae.display})},ae.name))})})]}),d.jsxs("main",{className:"flex-grow",children:[d.jsxs("header",{className:"mb-6 border-b border-brand-border-light pb-4",children:[d.jsxs("h1",{className:"text-3xl md:text-4xl font-semibold text-brand-heading",children:[(be=Si.find(ae=>ae.name===i))==null?void 0:be.display," Records"]}),d.jsx("p",{className:"text-brand-text-light mt-2",children:"View and manage data for the selected table."})]}),o&&s.length===0?d.jsx("div",{className:"flex justify-center items-center py-10",children:d.jsx("p",{className:"text-xl",children:"Loading data..."})}):s.length===0?d.jsx("div",{className:"bg-brand-card p-6 rounded-lg shadow-card text-center text-brand-text-light",children:d.jsxs("p",{className:"text-lg",children:["No records found for ",i,"."]})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"overflow-x-auto bg-brand-card rounded-lg shadow-card border border-brand-border",children:d.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[d.jsx("thead",{className:"bg-brand-bg-dark",children:d.jsxs("tr",{children:[U.map(ae=>d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:ae.replace(/_/g," ").replace(/\b\w/g,ve=>ve.toUpperCase())},ae)),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-brand-text-light uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-brand-card divide-y divide-brand-border",children:s.map(ae=>d.jsxs("tr",{className:"hover:bg-brand-bg-dark transition-colors duration-150",children:[U.map(ve=>d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text",children:y_(ve,ae[ve])},`${ae.id}-${ve}`)),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d.jsx("button",{onClick:()=>te(ae),className:"text-color-button-primary hover:text-color-button-primary-hover transition-colors duration-200 mr-4",children:"Edit"})})]},ae.id||JSON.stringify(ae)))})]})}),Z>1&&d.jsxs("div",{className:"flex justify-center items-center mt-6 space-x-2",children:[d.jsx("button",{onClick:()=>V(m-1),disabled:m===1||o,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Previous"}),d.jsxs("span",{className:"text-brand-text",children:["Page ",m," of ",Z]}),d.jsx("button",{onClick:()=>V(m+1),disabled:m===Z||o,className:"px-4 py-2 bg-color-button-primary text-white rounded-md disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-color-button-primary-hover transition-colors duration-200",children:"Next"})]})]})]}),d.jsx(b_,{show:A,onClose:le,tableName:i,record:R,onSaveSuccess:se})]}):d.jsx("div",{className:"flex justify-center items-center min-h-screen-minus-navbar bg-brand-bg-light text-red-500",children:d.jsx("p",{className:"text-xl",children:"Access Denied. You do not have administrative privileges."})})};function __({session:i}){const n=za(),[s,l]=w.useState(0),o=w.useRef(null),h=i&&!["/","/login","/register","/verify-email-success","/access-denied"].includes(n.pathname);return w.useEffect(()=>{h&&o.current?l(o.current.offsetHeight):l(0)},[h,n.pathname]),d.jsxs(d.Fragment,{children:[h&&d.jsx(Ig,{ref:o}),d.jsx("div",{style:{paddingTop:`${s}px`},children:d.jsxs(Rp,{children:[d.jsx(it,{path:"/",element:d.jsx(m1,{})}),d.jsx(it,{path:"/login",element:d.jsx(O1,{})}),d.jsx(it,{path:"/register",element:d.jsx(X1,{})}),d.jsx(it,{path:"/verify-email-success",element:d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:d.jsxs("div",{className:"bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 text-center max-w-md w-full animate-fade-in-up",children:[d.jsx("h1",{className:"text-4xl font-extrabold text-[var(--brand-heading)] mb-4 drop-shadow-md",children:"Email Verified!"}),d.jsx("p",{className:"text-lg text-[var(--brand-text-light)] mb-6 leading-relaxed",children:"Your email has been successfully verified. You can now securely log in."}),d.jsx(Ge,{to:"/login",className:`inline-block py-3 px-8 rounded-full shadow-lg font-bold text-lg\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-xl`,children:"Go to Login"})]})})}),d.jsx(it,{path:"/access-denied",element:d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:d.jsxs("div",{className:"bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 text-center max-w-md w-full animate-fade-in-up",children:[d.jsx("h1",{className:"text-4xl font-extrabold text-[var(--brand-heading)] mb-4 drop-shadow-md",children:"Access Denied"}),d.jsx("p",{className:"text-lg text-[var(--brand-text-light)] mb-6 leading-relaxed",children:"You do not have permission to view this page. Please log in with appropriate credentials."}),d.jsx(Ge,{to:"/login",className:`inline-block py-3 px-8 rounded-full shadow-lg font-bold text-lg\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-xl`,children:"Go to Login"})]})})}),d.jsx(it,{path:"/user/dashboard",element:d.jsx(K1,{})}),d.jsx(it,{path:"/user/documents",element:d.jsx(Z1,{})}),d.jsx(it,{path:"/user/documents/upload",element:d.jsx(I1,{})}),d.jsx(it,{path:"/user/documents/:id",element:d.jsx(t_,{})}),d.jsx(it,{path:"/user/signature-requests",element:d.jsx(n_,{})}),d.jsx(it,{path:"/user/profile",element:d.jsx(l_,{})}),d.jsx(it,{path:"/admin/dashboard",element:d.jsx(f_,{})}),d.jsx(it,{path:"/admin/audit",element:d.jsx(h_,{})}),d.jsx(it,{path:"/admin/manage-users",element:d.jsx(m_,{})}),d.jsx(it,{path:"/admin/reports",element:d.jsx(g_,{})}),d.jsx(it,{path:"/admin/anomalies",element:d.jsx(x_,{})}),d.jsx(it,{path:"/admin/master-edit",element:d.jsx(v_,{})}),d.jsx(it,{path:"*",element:d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300 font-inter",style:{backgroundColor:"var(--brand-bg-light)",backgroundImage:"linear-gradient(135deg, var(--brand-bg-light), var(--brand-bg-dark))",color:"var(--brand-text)"},children:d.jsxs("div",{className:"bg-[var(--brand-card)] rounded-2xl shadow-xl p-8 md:p-12 text-center max-w-md w-full animate-fade-in-up",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold text-[var(--brand-heading)] mb-4 drop-shadow-md",children:"404"}),d.jsx("p",{className:"text-xl md:text-2xl text-[var(--brand-text-light)] mb-6 leading-relaxed",children:"Oops! The page you're looking for doesn't exist."}),d.jsx(Ge,{to:"/",className:`inline-block py-3 px-8 rounded-full shadow-lg font-bold text-lg\r
                               bg-gradient-to-br from-[var(--color-button-primary)] to-[var(--color-button-primary-hover)]\r
                               text-white transition-all duration-300 ease-out hover:from-[var(--color-button-primary-hover)]\r
                               hover:to-[var(--color-button-primary)] hover:translate-y-[-2px] hover:shadow-xl`,children:"Go Home"})]})})})]})})]})}function w_(){const i="/SignatureApp/",[n,s]=w.useState(null),[l,o]=w.useState(!0);return w.useEffect(()=>{X.auth.getSession().then(({data:{session:h}})=>{s(h),o(!1)});const{data:u}=X.auth.onAuthStateChange((h,x)=>{s(x),o(!1)});return()=>{u.subscription.unsubscribe()}},[]),l?d.jsx("div",{style:{textAlign:"center",padding:"50px",fontSize:"1.2em",color:"#666"},children:"Loading application..."}):d.jsx(Wp,{basename:i,children:d.jsx(__,{session:n})})}zb.createRoot(document.getElementById("root")).render(d.jsx(w.StrictMode,{children:d.jsx(w_,{})}));export{Nb as g};
